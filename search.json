[{"title":"å¼ºå¤§çš„canvasåº“Fabric.jsåŸºç¡€å›¾è§£","path":"/2025/03/29/å¼ºå¤§çš„canvasåº“Fabric-jsåŸºç¡€å›¾è§£/","content":"è½¬è½½è‡ª: https://juejin.cn/post/7026941253845516324 ç®€ä»‹Fabric.js ç®€ä»‹ Fabric.js æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ“ä½œç®€å•çš„ Javascript HTML5 canvas å·¥å…·åº“ã€‚ å¦‚æœä½ éœ€è¦ç”¨ canvas åšç‰¹æ•ˆï¼Œé‚£æˆ‘æ¨èä½ ä½¿ç”¨ Fabric.js ï¼Œå› ä¸º Fabric.js è¯­æ³•æ›´åŠ ç®€å•æ˜“ç”¨ï¼Œè€Œä¸”è¿˜æä¾›äº†å¾ˆå¤šäº¤äº’ç±»çš„ apiã€‚ Fabric.js ç®€åŒ–äº†å¾ˆå¤š Canvas é‡Œçš„æ¦‚å¿µï¼Œä»£ç çœ‹ä¸Šå»ä¹Ÿæ›´åŠ è¯­ä¹‰åŒ–ã€‚ Fabric.js èƒ½åšä»€ä¹ˆï¼Ÿ å¯ä»¥æ‰“å¼€ ã€Fabric.js å®˜ç½‘é¦–é¡µã€ ç›´æ¥çœ‹ä¾‹å­ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹ ã€Fabric.js Demosã€ æŸ¥çœ‹æ›´ç‚«é…·çš„ä¾‹å­ã€‚ æœ¬æ–‡ç®€ä»‹å¦‚æœæ˜¯ 0åŸºç¡€ çš„è¯»è€…ï¼Œå¸Œæœ›å¯ä»¥ä»å¤´è¯»åˆ°å°¾ï¼Œè¯»å®Œèµ·ç å¤§æ¦‚çŸ¥é“ Fabric.js æœ‰å“ªäº›åŠŸèƒ½ã€‚ æœ¬æ–‡æ˜¯æ ¹æ®æˆ‘çš„å­¦ä¹ è¿‡ç¨‹æ¥ç¼–å†™çš„ï¼Œåªè¦è·Ÿç€æœ¬æ–‡ä¸€æ­¥ä¸€æ­¥æ“ä½œï¼Œä¸€å®šå¯ä»¥å…¥é—¨ Fabric.js ï¼ŒåŒæ—¶è¿˜èƒ½æ”¹å–„æ‚¨çš„ç¡çœ è´¨é‡ã€è§£å†³æ¯›å‘è¿‡å¤šç­‰è¯¸å¤šé—®é¢˜ã€‚ ç”±äºæˆ‘ä½¿ç”¨ Fabric.js çš„æ—¶é—´ä¸é•¿ï¼Œè¿™ä»½ç¬”è®°åœ¨å„ä¸ªçŸ¥è¯†ç‚¹çš„å†…å®¹è‚¯å®šä¸å¤Ÿå…¨é¢çš„ï¼Œä¹Ÿä¸ä¸€å®šå®Œå…¨æ­£ç¡®ã€‚è¯»è€…ä»¬å¦‚æœå‘ç°æœ¬æ–‡å­˜åœ¨ä¸æ­£ç¡®çš„åœ°æ–¹è¯·å¤§èƒ†æŒ‡å‡ºï¼Œæˆ‘ä¼šæ”¹çš„~ æœ¬æ–‡é€‚åˆäººç¾¤ï¼š æœ‰åŸç”Ÿä¸‰ä»¶å¥—åŸºç¡€çš„å¼€å‘è€… æœ€å¥½æœ‰ canvas åŸºç¡€ï¼ˆè¿™æ˜¯åŠ åˆ†é¡¹ï¼Œå®Œå…¨æ²¡æœ‰ä¹Ÿæ²¡å…³ç³»çš„ï¼‰ æœ¬æ–‡ä¸»è¦è®²è§£ Fabric.js åŸºç¡€ï¼ŒåŒ…æ‹¬ï¼š ç”»å¸ƒçš„åŸºæœ¬æ“ä½œ åŸºç¡€å›¾å½¢ç»˜åˆ¶æ–¹æ³•ï¼ˆçŸ©å½¢ã€åœ†å½¢ã€ä¸‰è§’å½¢ã€æ¤­åœ†ã€å¤šè¾¹å½¢ã€çº¿æ®µç­‰ï¼‰ å›¾ç‰‡å’Œæ»¤é•œçš„ä½¿ç”¨ æ–‡æœ¬å’Œæ–‡æœ¬æ¡† åŠ¨ç”» åˆ†ç»„å’Œæ‰“æ•£åˆ†ç»„ åŸºç¡€äº‹ä»¶ è‡ªç”±ç»˜ç”» è£å‰ª åºåˆ—åŒ–å’Œååºåˆ—åŒ– â€¦â€¦ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜ä¼šè®²ä¸€äº›è¿›é˜¶ä¸€ç‚¹çš„æ“ä½œï¼Œæ¯”å¦‚ï¼š è‡ªå®šä¹‰æ“ä½œè§’æ ·å¼å’ŒçŠ¶æ€ è‡ªå®šä¹‰æ§ä»¶ å¤åˆ¶ç²˜è´´å›¾å½¢ ä½¿ç”¨äº‹ä»¶æ–¹å¼æ“ä½œå›¾å½¢å’Œåˆ†ç»„ â€¦â€¦ é™¤äº†ä¸Šè¿°å†…å®¹å¤–ï¼Œæˆ‘è¿˜ä¼šæ ¹æ®æ—¥åçš„å·¥ä½œä¸­æ•´ç†å‡ºæ›´å¤šå¸¸ç”¨å’Œå¥½ç©çš„æ“ä½œï¼Œæœ¬æ–‡å³å­¦ä¹ ä»“åº“ä¼šä¸å®šæœŸæ›´æ–°ï¼ï¼ï¼ ç›¸å…³é“¾æ¥ã€Fabric.js npmåœ°å€ã€ ã€Fabric.js githubåœ°å€ã€ ğŸæœ¬æ–‡æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ ğŸæœ¬æ–‡æ‰€æœ‰æ¡ˆä¾‹ä»“åº“åœ°å€ ã€æ¬¢è¿Starï¼Œä¸å®šæœŸæ›´æ–°ï¼ï¼ï¼ã€‘ å¼€å‘ç¯å¢ƒæ­å»ºç¯å¢ƒå’Œç‰ˆæœ¬è¯´æ˜ æœ¬æ–‡ä½¿ç”¨ Fabric.js çš„ç‰ˆæœ¬æ˜¯ 4.6ã€‚ æœ¬æ–‡çš„å¼€å‘ç¯å¢ƒæ˜¯ä½¿ç”¨ Vite æ„å»ºçš„ Vue 3.2 é¡¹ç›®ã€‚ æ²¡æœ‰ Vite å’Œ Vue3.2 åŸºç¡€çš„åŒå­¦ä¹Ÿä¸ç”¨æ€•ï¼Œå› ä¸º Vite çœŸçš„è¶³å¤Ÿç®€å•ã€‚ æœ¬æ–‡çš„ç›®çš„æ˜¯è®²è§£ Fabric.js ï¼Œæ‰€ä»¥ç”¨åˆ° Vue 3.2 çš„åœ°æ–¹å…¶å®å¾ˆå°‘ï¼Œç”¨åˆ°æ—¶æˆ‘ä¹Ÿä¼šæœ‰è¯¦ç»†è¯´æ˜ã€‚ å¦‚æœä½ ä¸æ‰“ç®—ä½¿ç”¨ Vite å’Œ Vue 3.2 ä¹Ÿæ²¡å…³ç³»ï¼Œç”¨ä½ å–œæ¬¢çš„æ–¹å¼å»æ­å»ºé¡¹ç›®å³å¯ã€‚ ç°åœ¨åªéœ€è·Ÿç€ä»¥ä¸‹æ­¥éª¤æ­å»ºé¡¹ç›®å³å¯ã€‚ æ­å»ºç¯å¢ƒï¼ˆVite + Vue3ï¼‰Vite å®˜ç½‘ Vue3 å®˜ç½‘ å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ Vite + Vue3 çš„è¯ï¼Œå¯ä»¥è·³è¿‡æœ¬èŠ‚ã€‚ æˆ‘ä¹Ÿå»ºè®®ä½ ç›´æ¥ä½¿ç”¨åŸç”Ÿ (HTML+CSS+JS) çš„æ–¹å¼ç›´æ¥å­¦ä¹  Fabric.jsï¼Œå› ä¸ºè¿™æ ·ä¸Šæ‰‹é€Ÿåº¦æœ€å¿«ã€‚ 1. æ­å»ºViteé¡¹ç›®1npm init @vitejs/app 2. ç»™é¡¹ç›®èµ·ä¸ªåï¼Œå¹¶é€‰æ‹© Vue ä¹‹åä¼šè®©ä½ é€‰ vue æˆ–è€… vue + tsï¼Œæˆ‘é€‰æ‹©äº† vue ï¼Œä½ éšæ„ã€‚ ä¸ºä»€ä¹ˆä¸é€‰ ts ï¼Ÿå› ä¸ºä¸€äººå¼€å‘çš„ç»ƒæ‰‹é¡¹ç›®ä½¿ç”¨ ts æœ‰ç‚¹å¾—ä¸å¿å¤±ã€‚ 3. åˆå§‹åŒ–é¡¹ç›®å…¶å®åšå®Œä¸Šä¸€æ­¥å°±ä¼šç»™å‡ºæç¤ºï¼ˆ3æ¡å‘½ä»¤ï¼‰ï¼Œè·Ÿç€æ•²å®Œå°±èƒ½è¿è¡Œé¡¹ç›®äº† 12345678# è¿›å…¥é¡¹ç›®ç›®å½•cd fabric-demo# åˆå§‹åŒ–é¡¹ç›®npm install# è¿è¡Œé¡¹ç›®npm run dev å¦‚æœ npm å¤ªæ…¢çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ cnpm ã€‚ å¦‚æœä¸çŸ¥é“ cnpm æ€ä¹ˆæï¼Œè¯·è‡ªè¡Œç™¾åº¦ã€‚ å®‰è£…Fabric.jsæ–¹å¼1ï¼šCDN1&lt;script src=&quot;https://unpkg.com/fabric@4.6.0/dist/fabric.min.js&quot;&gt;&lt;/script&gt; ä½ å¯ä»¥ä½¿ç”¨ CDN çš„æ–¹å¼å¼•å…¥ï¼Œå› ä¸ºè¿™æ ·å¯¹å­¦ä¹ æ¥è¯´æ˜¯æœ€å¿«æ·çš„ã€‚ æ–¹å¼2ï¼šnpmæœ¬æ–‡ä½¿ç”¨è¯¥æ–¹æ³•ï¼ï¼ï¼ 1npm i fabric --save å®‰è£…å®Œåï¼Œpackage.json ä¼šå‡ºç°ç®­å¤´æŒ‡å‘çš„é‚£è¡Œä»£ç ã€‚ èµ·æ­¥åªéœ€ 3ä¸ªæ“ä½œ å°±èƒ½å±•ç¤ºç‚¹ä¸œè¥¿äº†ã€‚ 1. æ–°å»ºé¡µé¢å¹¶å¼•å…¥ Fabric.jså¦‚æœæ˜¯åŸç”Ÿé¡¹ç›®ï¼Œä½¿ç”¨ &lt;script&gt; æ ‡ç­¾å¼•å…¥å³å¯ï¼š 1&lt;script src=&quot;https://unpkg.com/fabric@4.6.0/dist/fabric.min.js&quot;&gt;&lt;/script&gt; æœ¬æ–‡ä½¿ç”¨äº† Vite æ„å»ºçš„é¡¹ç›®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ import å¼•å…¥ 1import &#123; fabric &#125; from &#x27;fabric&#x27; 2. åˆ›å»º canvas å®¹å™¨åœ¨ HTML ä¸­åˆ›å»º &lt;canvas&gt;ï¼Œå¹¶è®¾ç½®å®¹å™¨çš„ id å’Œ å®½é«˜ï¼Œwidth/height 1&lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;c&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ª canvas å®¹å™¨ï¼Œ**id&#x3D;â€câ€**ã€‚ æŒ‡å®šé•¿å®½éƒ½ä¸º 400px ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸éœ€è¦åŠ  px è¿™ä¸ªå•ä½ã€‚ style=&quot;border: 1px solid #ccc;&quot; è¿™å¥å…¶å®å¯ä»¥ä¸åŠ ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†åœ¨æµè§ˆå™¨çœ‹åˆ° canvas å…ƒç´ åˆ°åº•åœ¨å“ªã€‚ 3. ä½¿ç”¨ fabric æ¥ç®¡å®¹å™¨ï¼Œå¹¶ç”»ä¸€ä¸ªçŸ©å½¢åœ¨ JS ä¸­å®ä¾‹åŒ– fabric ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨ fabric çš„ api ç®¡ç† canvas äº†ã€‚ 123456789101112131415161718192021222324252627&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27; // å¼•å…¥ fabricfunction init() &#123; const canvas = new fabric.Canvas(&#x27;c&#x27;) // è¿™é‡Œä¼ å…¥çš„æ˜¯canvasçš„id // åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢ const rect = new fabric.Rect(&#123; top: 30, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 30px left: 30, // è·ç¦»å®¹å™¨å·¦ä¾§ 30px width: 100, // å®½ 100px height: 60, // é«˜ 60px fill: &#x27;red&#x27; // å¡«å…… çº¢è‰² &#125;) // åœ¨canvasç”»å¸ƒä¸­åŠ å…¥çŸ©å½¢ï¼ˆrectï¼‰ã€‚addæ˜¯â€œæ·»åŠ â€çš„æ„æ€ canvas.add(rect)&#125;// éœ€è¦åœ¨é¡µé¢å®¹å™¨åŠ è½½å®Œæ‰èƒ½å¼€å§‹åˆå§‹åŒ–ï¼ˆé¡µé¢åŠ è½½å®Œæ‰æ‰¾åˆ° canvas å…ƒç´ ï¼‰// onMounted æ˜¯ Vue3 æä¾›çš„ä¸€ä¸ªé¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šå®ä¾‹è¢«æŒ‚è½½åè°ƒç”¨ã€‚// onMounted å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼šhttps://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.htmlonMounted(() =&gt; &#123; init() // æ‰§è¡Œåˆå§‹åŒ–å‡½æ•°&#125;)&lt;/script&gt; è¯¦æƒ…è¯·çœ‹ä»£ç ä¸­æ¯ä¸€è¡Œæ³¨é‡Šã€‚ &lt;script setup&gt; æ˜¯ Vue 3.2 çš„ä¸€ä¸ªæ–°è¯­æ³•ï¼Œæ™®é€šé¡¹ç›®ç›´æ¥ä½¿ç”¨ &lt;script&gt; å°±è¡Œäº†ã€‚ å°±ç®—æˆ‘ä¸å†™å¤‡æ³¨ä¹Ÿå¯ä»¥çœ‹å‡º Fabric.js çš„ä»£ç æ˜¯æå…·è¯­ä¹‰åŒ–çš„ï¼Œçœ‹å•è¯å°±å¤§æ¦‚èƒ½çŒœå‡ºä»£ç æ•ˆæœã€‚ å¦‚æœæ˜¯ç”¨åŸç”Ÿçš„ canvas æ–¹æ³•æ¥å†™ï¼Œæ²¡äº†è§£è¿‡çš„åŒå­¦æ ¹æœ¬çœ‹ä¸æ‡‚åœ¨å†™å•¥ã€‚ ç”»å¸ƒFabric.js çš„ç”»å¸ƒæ“ä½œæ€§æ˜¯éå¸¸å¼ºçš„ï¼Œè¿™é‡Œæˆ‘åˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨ä¾‹å­ï¼Œå…¶ä»–æ“ä½œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ ã€Fabric.js ç”»å¸ƒæ“ä½œ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - ç”»å¸ƒ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ åŸºç¡€ç‰ˆï¼ˆå¯äº¤äº’ï¼‰ åŸºç¡€ç‰ˆå°±æ˜¯â€œèµ·æ­¥â€ç« èŠ‚æ‰€è¯´çš„é‚£ä¸ªä¾‹å­ã€‚ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27; // å¼•å…¥ fabricfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // è¿™é‡Œä¼ å…¥çš„æ˜¯canvaså…ƒç´ çš„id // åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢ const rect = new fabric.Rect(&#123; top: 100, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px left: 100, // è·ç¦»å®¹å™¨å·¦ä¾§ 100px width: 30, // çŸ©å½¢å®½åº¦ 30px height: 30, // çŸ©å½¢é«˜åº¦ 30px fill: &#x27;red&#x27; // å¡«å…… çº¢è‰² &#125;) canvas.add(rect) // å°†çŸ©å½¢æ·»åŠ åˆ° canvas ç”»å¸ƒé‡Œ&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä¸å¯äº¤äº’ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27; // å¼•å…¥ fabricfunction init() &#123; // ä½¿ç”¨ StaticCanvas åˆ›å»ºä¸€ä¸ªä¸å¯æ“ä½œçš„ç”»å¸ƒ const canvas = new fabric.StaticCanvas(&#x27;canvas&#x27;) // è¿™é‡Œä¼ å…¥çš„æ˜¯canvaså…ƒç´ çš„id // åˆ›å»ºä¸€ä¸ªé•¿æ–¹å½¢ const rect = new fabric.Rect(&#123; top: 100, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px left: 100, // è·ç¦»å®¹å™¨å·¦ä¾§ 100px width: 30, // çŸ©å½¢å®½åº¦ 30px height: 30, // çŸ©å½¢é«˜åº¦ 30px fill: &#x27;red&#x27; // å¡«å…… çº¢è‰² &#125;) canvas.add(rect) // å°†çŸ©å½¢æ·»åŠ åˆ° canvas ç”»å¸ƒé‡Œ&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; åˆ›å»ºä¸å¯äº¤äº’çš„ç”»å¸ƒï¼Œå…¶å®åªéœ€æŠŠ new fabric.Canvas æ”¹æˆ new fabric.StaticCanvas å³å¯ã€‚ åœ¨jsè®¾å®šç”»å¸ƒå‚æ•° 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27; // å¼•å…¥ fabricfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; width: 300, // ç”»å¸ƒå®½åº¦ height: 300, // ç”»å¸ƒé«˜åº¦ backgroundColor: &#x27;#eee&#x27; // ç”»å¸ƒèƒŒæ™¯è‰² &#125;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, // åœ†çš„åŠå¾„ top: 20, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 20px left: 20, // è·ç¦»å®¹å™¨å·¦ä¾§ 20px fill: &#x27;pink&#x27; // å¡«å…… ç²‰è‰² &#125;) canvas.add(circle) // å°†åœ†å½¢æ·»åŠ åˆ° canvas ç”»å¸ƒé‡Œ&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; new fabric.Canvas çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è®¾ç½®ç”»å¸ƒåŸºç¡€åŠŸèƒ½çš„ã€‚æ›´å¤šé…ç½®å‚æ•°å¯ä»¥æŸ¥çœ‹ ã€å®˜æ–¹æ–‡æ¡£ã€ã€‚ ä½¿ç”¨èƒŒæ™¯å›¾ 123456789101112131415161718192021222324&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // è®¾ç½®èƒŒæ™¯å›¾ // å‚æ•°1ï¼šèƒŒæ™¯å›¾èµ„æºï¼ˆå¯ä»¥å¼•å…¥æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ç»œå›¾ï¼‰ // å‚æ•°2ï¼šè®¾ç½®å®ŒèƒŒæ™¯å›¾æ‰§è¡Œä»¥ä¸‹é‡æ–°æ¸²æŸ“canvasçš„æ“ä½œï¼Œè¿™æ ·èƒŒæ™¯å›¾å°±ä¼šå±•ç¤ºå‡ºæ¥äº† canvas.setBackgroundImage( &#x27;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27d1b4e5f8824198b6d51a2b1c2d0d75~tplv-k3u1fbpfcp-zoom-crop-mark:400:400:400:400.awebp&#x27;, canvas.renderAll.bind(canvas) )&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; setBackgroundImage è¿™ä¸ªå¾ˆå¥½æ‡‚ï¼Œè®¾ç½®èƒŒæ™¯å›¾ç‰‡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Fabric.js é‡Œä½¿ç”¨ gif åªä¼šæ¸²æŸ“ç¬¬ä¸€å¸§ã€‚ æ—‹è½¬èƒŒæ™¯å›¾ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // è®¾ç½®èƒŒæ™¯å›¾ // å‚æ•°1ï¼šèƒŒæ™¯å›¾èµ„æºï¼ˆå¯ä»¥å¼•å…¥æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ç»œå›¾ï¼‰ // å‚æ•°2ï¼šè®¾ç½®å®ŒèƒŒæ™¯å›¾æ‰§è¡Œä»¥ä¸‹é‡æ–°æ¸²æŸ“canvasçš„æ“ä½œï¼Œè¿™æ ·èƒŒæ™¯å›¾å°±ä¼šå±•ç¤ºå‡ºæ¥äº† canvas.setBackgroundImage( &#x27;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27d1b4e5f8824198b6d51a2b1c2d0d75~tplv-k3u1fbpfcp-zoom-crop-mark:400:400:400:400.awebp&#x27;, canvas.renderAll.bind(canvas), &#123; angle: 15 // æ—‹è½¬èƒŒæ™¯å›¾ &#125; )&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; setBackgroundImage è¿˜æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå˜¿å˜¿å˜¿æ²¡æƒ³åˆ°å§ ç¬¬ä¸‰ä¸ªå‚æ•°é™¤äº†æ—‹è½¬ï¼Œè¿˜å¯ä»¥è®¾ç½® scaleXã€scaleY ä¹‹ç±»çš„æ“ä½œã€‚ æ›´å¤šè®¾ç½®å¯ä»¥æŸ¥çœ‹ ã€æ–‡æ¡£ã€ ã€‚ ä½†è¿™ä¸ªä¾‹å­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå›¾ç‰‡çš„å°ºå¯¸æ²¡ canvas å®¹å™¨å¤§ï¼Œå°±å¡«ä¸æ»¡ï¼Œå¦åˆ™å°±æº¢å‡ºï¼ˆåªæ˜¾ç¤ºå›¾ç‰‡çš„å±€éƒ¨ï¼‰ã€‚ è§£å†³æ–¹æ¡ˆè¯·çœ‹ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ã€‚ æ‹‰ä¼¸èƒŒæ™¯å›¾ 12345678910111213141516171819202122232425262728293031323334&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // fabric.Image.fromURLï¼šåŠ è½½å›¾ç‰‡çš„api // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå›¾ç‰‡åœ°å€ï¼ˆå¯ä»¥æ˜¯æœ¬åœ°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œå›¾ï¼‰ // ç¬¬äºŒä¸ªå‚æ•°ï¼šå›¾ç‰‡åŠ è½½çš„å›è°ƒå‡½æ•° fabric.Image.fromURL( &#x27;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27d1b4e5f8824198b6d51a2b1c2d0d75~tplv-k3u1fbpfcp-zoom-crop-mark:400:400:400:400.awebp&#x27;, (img) =&gt; &#123; // è®¾ç½®èƒŒæ™¯å›¾ canvas.setBackgroundImage( img, canvas.renderAll.bind(canvas), &#123; scaleX: canvas.width / img.width, // è®¡ç®—å‡ºå›¾ç‰‡è¦æ‹‰ä¼¸çš„å®½åº¦ scaleY: canvas.height / img.height // è®¡ç®—å‡ºå›¾ç‰‡è¦æ‹‰ä¼¸çš„é«˜åº¦ &#125; ) &#125; )&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† fabric.Image.fromURL è¿™ä¸ª api æ¥åŠ è½½å›¾ç‰‡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾ç‰‡åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ã€‚ æ‹¿åˆ°å›¾ç‰‡çš„å‚æ•°å’Œç”»å¸ƒçš„å®½é«˜è¿›è¡Œè®¡ç®—ï¼Œä»è€Œä½¿å›¾ç‰‡å……æ»¡å…¨å±ã€‚ é‡å¤èƒŒæ™¯å›¾ 123456789101112131415161718192021&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) canvas.setBackgroundColor(&#123; source: &#x27;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27d1b4e5f8824198b6d51a2b1c2d0d75~tplv-k3u1fbpfcp-zoom-crop-mark:40:40:40:40.awebp&#x27;, repeat: &#x27;repeat&#x27; &#125;, canvas.renderAll.bind(canvas))&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è¿™ä¸ªä¾‹å­ä½¿ç”¨çš„å›¾ç‰‡å°ºå¯¸æ˜¯æ¯”è¾ƒå°çš„ï¼Œæ‰€ä»¥åœ¨ setBackgroundColor çš„ç¬¬3ä¸ªå‚æ•°ä¸­è®¾ç½®äº† repeat: &#39;repeat&#39; ï¼Œè¡¨ç¤ºé‡å¤æ¸²æŸ“å›¾ç‰‡ã€‚ é‡å å½±è±¡ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;import jailCellBars from &#x27;@/assets/images/jail_cell_bars.png&#x27; // å¼•å…¥èƒŒæ™¯å›¾function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) canvas.add( new fabric.Circle(&#123; radius: 30, // åœ†å½¢åŠå¾„ fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) ) // è®¾ç½®è¦†ç›–å›¾åƒçš„ç”»å¸ƒ canvas.setOverlayImage( // setOverlayImage(image, callback, optionsopt) jailCellBars, // å›¾ç‰‡ï¼Œscriptå¼€å¤´importè¿›æ¥çš„ canvas.renderAll.bind(canvas) )&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å€¼å¾—æ³¨æ„çš„2ç‚¹ï¼š ä½¿ç”¨ canvas.setOverlayImage ä»£æ›¿åŸæœ¬çš„ canvas.setBackgroundImage ã€‚ æ‰€ä½¿ç”¨çš„å›¾ç‰‡æœ€å¥½æ˜¯å¸¦é€æ˜å±‚çš„ png ï¼Œè¿™æ ·å°±èƒ½å±•ç¤ºæ¡ˆä¾‹æ‰€ç¤ºçš„æ•ˆæœï¼ŒèƒŒæ™¯å›¾å åœ¨å›¾æ¡ˆå…ƒç´ ä¸Šé¢ã€‚ ğŸ æœ¬ä¾‹æ‰€ä½¿ç”¨çš„å›¾ç‰‡åœ°å€ åŸºç¡€å›¾å½¢Fabric.js æä¾›äº†ä»¥ä¸‹å‡ ç§åŸºç¡€å›¾å½¢ï¼š ã€çŸ©å½¢ã€ ã€åœ†å½¢ã€ ã€æ¤­åœ†å½¢ã€ ã€ä¸‰è§’å½¢ã€ ã€çº¿æ®µã€ ã€æŠ˜çº¿ã€ ã€å¤šè¾¹å½¢ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - åŸºç¡€å›¾å½¢ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ çŸ©å½¢ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ç»‘å®šcanvasï¼Œä¼ å…¥id const rect = new fabric.Rect(&#123; top: 100, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px left: 100, // è·ç¦»å®¹å™¨å·¦ä¾§ 100px fill: &#x27;orange&#x27;, // å¡«å…… æ©™è‰² width: 100, // å®½åº¦ 100px height: 100 // é«˜åº¦ 100px &#125;) // å°†çŸ©å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­ canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Rect åˆ›å»º çŸ©å½¢ã€‚ åœ†è§’çŸ©å½¢ 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ç»‘å®šcanvasï¼Œä¼ å…¥id const rect = new fabric.Rect(&#123; top: 100, // è·ç¦»å®¹å™¨é¡¶éƒ¨ 100px left: 100, // è·ç¦»å®¹å™¨å·¦ä¾§ 100px fill: &#x27;orange&#x27;, // å¡«å…… æ©™è‰² width: 100, // å®½åº¦ 100px height: 100, // é«˜åº¦ 100px rx: 20, // xè½´çš„åŠå¾„ ry: 20 // yè½´çš„åŠå¾„ &#125;) // å°†çŸ©å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­ canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç”»åœ†è§’çŸ©å½¢ï¼Œéœ€è¦æ·»åŠ  rx å’Œ ryï¼Œè¿™ä¸¤ä¸ªå±æ€§çš„å€¼å¯ä»¥ä¸ä¸€æ ·ï¼Œå¦‚æœçŸ¥é“ css åœ†è§’çš„åŸç†ï¼Œå…¶å®å¯¹ rx å’Œ ry ä¸éš¾ç†è§£ã€‚ è‡ªå·±ä¿®æ”¹ä¸€ä¸‹è¿™ä¸¤ä¸ªå€¼çœ‹çœ‹æ•ˆæœç†è§£ä¼šæ›´æ·±åˆ»ã€‚ åœ†å½¢ 123456789101112131415161718192021222324&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const circle = new fabric.Circle(&#123; top: 100, left: 100, radius: 50, // åœ†çš„åŠå¾„ 50 fill: &#x27;green&#x27; &#125;) canvas.add(circle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Circle åˆ›å»ºåœ†å½¢ã€‚ åœ†å½¢éœ€è¦ä½¿ç”¨ radius è®¾ç½®åŠå¾„å¤§å°ã€‚ æ¤­åœ†å½¢ 12345678910111213141516171819202122232425&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const ellipse = new fabric.Ellipse(&#123; top: 20, left: 20, rx: 70, ry: 30, fill: &#x27;hotpink&#x27; &#125;) canvas.add(ellipse)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; éœ€è¦ä½¿ç”¨ new fabric.Ellipse åˆ›å»º æ¤­åœ†ã€‚ å’Œåœ†å½¢ä¸åŒï¼Œæ¤­åœ†ä¸éœ€è¦è®¾ç½® radius ï¼Œä½†è¦è®¾ç½® rx å’Œ ryã€‚ å½“ rx &gt; ry ï¼šæ¤­åœ†æ˜¯æ¨ªç€çš„ å½“ rx &lt; ryï¼šæ¤­åœ†æ˜¯ç«–ç€çš„ å½“ rx &#x3D; ryï¼š çœ‹ä¸Šå»å°±æ˜¯ä¸ªåœ†å½¢ ä¸‰è§’å½¢ 12345678910111213141516171819202122232425&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const triangle = new fabric.Triangle(&#123; top: 100, left: 100, width: 80, // åº•è¾¹é•¿åº¦ height: 100, // åº•è¾¹åˆ°å¯¹è§’çš„è·ç¦» fill: &#x27;blue&#x27; &#125;) canvas.add(triangle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Triangle åˆ›å»ºä¸‰è§’å½¢ï¼Œä¸‰è§’å½¢æ˜¯éœ€è¦ç»™å®š â€œåº•å’Œé«˜â€ çš„ã€‚ çº¿æ®µ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const line = new fabric.Line( [ 10, 10, // èµ·å§‹ç‚¹åæ ‡ 200, 300 // ç»“æŸç‚¹åæ ‡ ], &#123; stroke: &#x27;red&#x27;, // ç¬”è§¦é¢œè‰² &#125; ) canvas.add(line)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Line åˆ›å»ºçº¿æ®µã€‚ new fabric.Line éœ€è¦ä¼ å…¥2ä¸ªå‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ æ•°ç»„ ï¼Œæ•°ç»„éœ€è¦ä¼ 4ä¸ªå€¼ï¼Œå‰2ä¸ªå€¼æ˜¯èµ·å§‹åæ ‡çš„xå’Œyï¼Œå2ä¸ªå€¼æ˜¯ç»“æŸåæ ‡çš„xå’Œyã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ çº¿æ®µçš„æ ·å¼ï¼Œè¦è®¾ç½®çº¿æ®µçš„é¢œè‰²ï¼Œéœ€è¦ä½¿ç”¨ stroke ã€‚ æŠ˜çº¿ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const polyline = new fabric.Polyline([ &#123;x: 30, y: 30&#125;, &#123;x: 150, y: 140&#125;, &#123;x: 240, y: 150&#125;, &#123;x: 100, y: 30&#125; ], &#123; fill: &#x27;transparent&#x27;, // å¦‚æœç”»æŠ˜çº¿ï¼Œéœ€è¦å¡«å……é€æ˜ stroke: &#x27;#6639a6&#x27;, // çº¿æ®µé¢œè‰²ï¼šç´«è‰² strokeWidth: 5 // çº¿æ®µç²—ç»† 5 &#125;) canvas.add(polyline)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Polyline åˆ›å»ºçº¿æ®µ ã€‚ new fabric.Polyline éœ€è¦ä¼ å…¥2ä¸ªå‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„ï¼Œæè¿°çº¿æ®µçš„æ¯ä¸€ä¸ªç‚¹ ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥æè¿°çº¿æ®µæ ·å¼ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ fill è®¾ç½®æˆé€æ˜æ‰ä¼šæ˜¾ç¤ºæˆçº¿æ®µï¼Œå¦‚æœä¸è®¾ç½®ï¼Œä¼šé»˜è®¤å¡«å……é»‘è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä½ ä¹Ÿå¯ä»¥å¡«å……è‡ªå·±å–œæ¬¢çš„é¢œè‰²ï¼Œnew fabric.Polyline æ˜¯ä¸ä¼šè‡ªåŠ¨æŠŠ èµ·å§‹ç‚¹ å’Œ ç»“æŸç‚¹ è‡ªåŠ¨é—­åˆèµ·æ¥çš„ã€‚ å¤šè¾¹å½¢ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const polygon = new fabric.Polygon([ &#123;x: 30, y: 30&#125;, &#123;x: 150, y: 140&#125;, &#123;x: 240, y: 150&#125;, &#123;x: 100, y: 30&#125; ], &#123; fill: &#x27;#ffd3b6&#x27;, // å¡«å……è‰² stroke: &#x27;#6639a6&#x27;, // çº¿æ®µé¢œè‰²ï¼šç´«è‰² strokeWidth: 5 // çº¿æ®µç²—ç»† 5 &#125;) canvas.add(polygon)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Polygon ç»˜åˆ¶å¤šè¾¹å½¢ï¼Œç”¨æ³•å’Œ new fabric.Polyline å·®ä¸å¤šï¼Œä½†æœ€å¤§çš„ä¸åŒç‚¹æ˜¯ new fabric.Polygon ä¼šè‡ªåŠ¨æŠŠ èµ·å§‹ç‚¹ å’Œ ç»“æŸç‚¹ è¿æ¥èµ·æ¥ã€‚ ç»˜åˆ¶è·¯å¾„ã€Fabric.js è·¯å¾„Path - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - ç»˜åˆ¶è·¯å¾„ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;375&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ç»˜åˆ¶è·¯å¾„ const path = new fabric.Path(&#x27;M 0 0 L 200 100 L 170 200 z&#x27;) path.set(&#123; top: 50, // è·ç¦»å®¹å™¨é¡¶éƒ¨è·ç¦» 50px left: 50, // è·ç¦»å®¹å™¨å·¦ä¾§è·ç¦» 50px fill: &#x27;hotpink&#x27;, // å¡«å…… äº®ç²‰è‰² opacity: 0.5, // ä¸é€æ˜åº¦ 50% stroke: &#x27;black&#x27;, // æè¾¹é¢œè‰² é»‘è‰² strokeWidth: 10 // æè¾¹ç²—ç»† 10px &#125;) canvas.add(path)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Path åˆ›å»ºè·¯å¾„ã€‚ Mï¼šå¯ä»¥ç†è§£ä¸ºæ–°çš„èµ·å§‹ç‚¹xï¼Œyåæ ‡ Lï¼šæ¯ä¸ªæŠ˜ç‚¹çš„xï¼Œyåæ ‡ zï¼šè‡ªåŠ¨é—­åˆï¼ˆè‡ªåŠ¨æŠŠç»“æŸç‚¹å’Œèµ·å§‹ç‚¹è¿æ¥èµ·æ¥ï¼‰ æ–‡æœ¬Fabric.js æœ‰3ç±»è·Ÿæ–‡æœ¬ç›¸å…³çš„ apiã€‚ æ™®é€šæ–‡æœ¬ å¯ç¼–è¾‘æ–‡æœ¬ æ–‡æœ¬æ¡† æ™®é€šæ–‡æœ¬ Textã€Fabric.js æ–‡æœ¬ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - æ™®é€šæ–‡æœ¬ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 12345678910111213141516171819&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const text = new fabric.Text(&#x27;é›·çŒ´å•Š&#x27;) canvas.add(text)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Text åˆ›å»ºæ–‡æœ¬ï¼Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ–‡æœ¬å†…å®¹ã€‚ new fabric.Text è¿˜æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥è®¾ç½®æ–‡æœ¬æ ·å¼ï¼Œè¿™æ–¹é¢å†…å®¹å°†åœ¨ä¸‹ä¸€ç« è®²åˆ°ï¼Œå¾€ä¸‹æ»‘åŠ¨é¡µé¢å°±èƒ½è§åˆ°ã€‚ å¯ç¼–è¾‘æ–‡æœ¬ ITextã€Fabric.js å¯ç¼–è¾‘çš„æ–‡æœ¬ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å¯ç¼–è¾‘çš„æ–‡æœ¬ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 12345678910111213141516171819&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const itext = new fabric.IText(&#x27;é›·çŒ´å•Š&#x27;) canvas.add(itext)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.IText å¯ä»¥åˆ›å»ºå¯ç¼–è¾‘æ–‡æœ¬ï¼Œç”¨æ³•å’Œ new fabric.Text ä¸€æ ·ã€‚ IText æ¯” Text å¤šäº†ä¸ªå¤§å†™ â€œIâ€ åœ¨é¦–å­—æ¯ä¸Šã€‚ æ–‡æœ¬æ¡† Textboxã€Fabric.js æ–‡æœ¬æ¡† - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - æ–‡æœ¬æ¡† ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 123456789101112131415161718192021&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const textbox = new fabric.Textbox(&#x27;Lorum ipsum dolor sit amet&#x27;, &#123; width: 250 &#125;) canvas.add(textbox)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ new fabric.Textbox å¯ä»¥åˆ›å»ºæ–‡æœ¬æ¡†ã€‚ new fabric.Textbox ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹è±¡ï¼Œä½¿ç”¨ width å¯ä»¥è®¾å®šäº†æ–‡æœ¬æ¡†çš„å®½åº¦ï¼Œæ–‡æœ¬å†…å®¹è¶…è¿‡è®¾å®šçš„å®½åº¦ä¼šè‡ªåŠ¨æ¢è¡Œã€‚ new fabric.Textbox çš„å†…å®¹åŒæ ·æ˜¯å¯ç¼–è¾‘çš„ã€‚ åŸºç¡€æ ·å¼å›¾å½¢å¸¸ç”¨æ ·å¼å…¶å®æ ·å¼å±æ€§æ˜¯éå¸¸å¤šçš„ï¼Œè¿™é‡Œåªåˆ—ä¸¾å¸¸ç”¨çš„å±æ€§ï¼Œå…¶ä»–å±æ€§å¯ä»¥è‡ªè¡ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ æœ¬ä¾‹ä»¥åœ†å½¢ä¸ºä¾‹ï¼ˆä¸è¦åœ¨æ„é…è‰²ï¼Œæˆ‘éšä¾¿è¾“å…¥é¢œè‰²æ¼”ç¤ºä¸€ä¸‹ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const circle = new fabric.Circle(&#123; top: 100, left: 100, radius: 50, // åŠå¾„ï¼š50px backgroundColor: &#x27;green&#x27;, // èƒŒæ™¯è‰²ï¼šç»¿è‰² fill: &#x27;orange&#x27;, // å¡«å……è‰²ï¼šæ©™è‰² stroke: &#x27;#f6416c&#x27;, // è¾¹æ¡†é¢œè‰²ï¼šç²‰è‰² strokeWidth: 5, // è¾¹æ¡†ç²—ç»†ï¼š5px strokeDashArray: [20, 5, 14], // è¾¹æ¡†è™šçº¿è§„åˆ™ï¼šå¡«å……20px ç©º5px å¡«å……14px ç©º20px å¡«å……5px â€¦â€¦ shadow: &#x27;10px 20px 6px rgba(10, 20, 30, 0.4)&#x27;, // æŠ•å½±ï¼šå‘å³åç§»10pxï¼Œå‘ä¸‹åç§»20pxï¼Œç¾½åŒ–6pxï¼ŒæŠ•å½±é¢œè‰²åŠé€æ˜åº¦ transparentCorners: false, // é€‰ä¸­æ—¶ï¼Œè§’æ˜¯è¢«å¡«å……äº†ã€‚true ç©ºå¿ƒï¼›false å®å¿ƒ borderColor: &#x27;#16f1fc&#x27;, // é€‰ä¸­æ—¶ï¼Œè¾¹æ¡†é¢œè‰²ï¼šå¤©è“ borderScaleFactor: 5, // é€‰ä¸­æ—¶ï¼Œè¾¹çš„ç²—ç»†ï¼š5px borderDashArray: [20, 5, 10, 7], // é€‰ä¸­æ—¶ï¼Œè™šçº¿è¾¹çš„è§„åˆ™ cornerColor: &quot;#a1de93&quot;, // é€‰ä¸­æ—¶ï¼Œè§’çš„é¢œè‰²æ˜¯ é’è‰² cornerStrokeColor: &#x27;pink&#x27;, // é€‰ä¸­æ—¶ï¼Œè§’çš„è¾¹æ¡†çš„é¢œè‰²æ˜¯ ç²‰è‰² cornerStyle: &#x27;circle&#x27;, // é€‰ä¸­æ—¶ï¼Œå«çš„å±æ€§ã€‚é»˜è®¤rect çŸ©å½¢ï¼›circle åœ†å½¢ cornerSize: 20, // é€‰ä¸­æ—¶ï¼Œè§’çš„å¤§å°ä¸º20 cornerDashArray: [10, 2, 6], // é€‰ä¸­æ—¶ï¼Œè™šçº¿è§’çš„è§„åˆ™ selectionBackgroundColor: &#x27;#7f1300&#x27;, // é€‰ä¸­æ—¶ï¼Œé€‰æ¡†çš„èƒŒæ™¯è‰²ï¼šæœ±çº¢ padding: 40, // é€‰ä¸­æ—¶ï¼Œé€‰æ‹©æ¡†ç¦»å…ƒç´ çš„å†…è¾¹è·ï¼š40px borderOpacityWhenMoving: 0.6, // å½“å¯¹è±¡æ´»åŠ¨å’Œç§»åŠ¨æ—¶ï¼Œå¯¹è±¡æ§åˆ¶è¾¹ç•Œçš„ä¸é€æ˜åº¦ &#125;) canvas.add(circle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä¸Šé¢è¿™ä¸ªä¾‹å­çš„æ ·å¼åˆ†ä¸ºæ­£å¸¸çŠ¶æ€å’Œè¢«é€‰ä¸­çŠ¶æ€ï¼Œè¯¦æƒ…è¯·çœ‹ä»£ç æ³¨é‡Šã€‚ æ–‡æœ¬å¸¸ç”¨æ ·å¼ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - æ–‡æœ¬æ ·å¼ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const text = new fabric.Text(&#x27;é›·çŒ´&#x27;, &#123; top: 40, left: 40, fontSize: 120, backgroundColor: &#x27;green&#x27;, // èƒŒæ™¯è‰²ï¼šç»¿è‰² fill: &#x27;orange&#x27;, // å¡«å……è‰²ï¼šæ©™è‰² stroke: &#x27;#f6416c&#x27;, // è¾¹æ¡†é¢œè‰²ï¼šç²‰è‰² strokeWidth: 3, // è¾¹æ¡†ç²—ç»†ï¼š3px strokeDashArray: [20, 5, 14], // è¾¹æ¡†è™šçº¿è§„åˆ™ï¼šå¡«å……20px ç©º5px å¡«å……14px ç©º20px å¡«å……5px â€¦â€¦ shadow: &#x27;10px 20px 6px rgba(10, 20, 30, 0.4)&#x27;, // æŠ•å½±ï¼šå‘å³åç§»10pxï¼Œå‘ä¸‹åç§»20pxï¼Œç¾½åŒ–6pxï¼ŒæŠ•å½±é¢œè‰²åŠé€æ˜åº¦ transparentCorners: false, // é€‰ä¸­æ—¶ï¼Œè§’æ˜¯è¢«å¡«å……äº†ã€‚true ç©ºå¿ƒï¼›false å®å¿ƒ borderColor: &#x27;#16f1fc&#x27;, // é€‰ä¸­æ—¶ï¼Œè¾¹æ¡†é¢œè‰²ï¼šå¤©è“ borderScaleFactor: 5, // é€‰ä¸­æ—¶ï¼Œè¾¹çš„ç²—ç»†ï¼š5px borderDashArray: [20, 5, 10, 7], // é€‰ä¸­æ—¶ï¼Œè™šçº¿è¾¹çš„è§„åˆ™ cornerColor: &quot;#a1de93&quot;, // é€‰ä¸­æ—¶ï¼Œè§’çš„é¢œè‰²æ˜¯ é’è‰² cornerStrokeColor: &#x27;pink&#x27;, // é€‰ä¸­æ—¶ï¼Œè§’çš„è¾¹æ¡†çš„é¢œè‰²æ˜¯ ç²‰è‰² cornerStyle: &#x27;circle&#x27;, // é€‰ä¸­æ—¶ï¼Œå«çš„å±æ€§ã€‚é»˜è®¤rect çŸ©å½¢ï¼›circle åœ†å½¢ cornerSize: 20, // é€‰ä¸­æ—¶ï¼Œè§’çš„å¤§å°ä¸º20 cornerDashArray: [10, 2, 6], // é€‰ä¸­æ—¶ï¼Œè™šçº¿è§’çš„è§„åˆ™ selectionBackgroundColor: &#x27;#7f1300&#x27;, // é€‰ä¸­æ—¶ï¼Œé€‰æ¡†çš„èƒŒæ™¯è‰²ï¼šæœ±çº¢ padding: 40, // é€‰ä¸­æ—¶ï¼Œé€‰æ‹©æ¡†ç¦»å…ƒç´ çš„å†…è¾¹è·ï¼š40px borderOpacityWhenMoving: 0.6, // å½“å¯¹è±¡æ´»åŠ¨å’Œç§»åŠ¨æ—¶ï¼Œå¯¹è±¡æ§åˆ¶è¾¹ç•Œçš„ä¸é€æ˜åº¦ &#125;) canvas.add(text)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…ç½® ä¸Šåˆ’çº¿ ã€ä¸‹åˆ’çº¿ ã€åˆ é™¤çº¿ ã€å·¦å¯¹é½ ã€ å³å¯¹é½ ã€ å±…ä¸­å¯¹é½ ã€ è¡Œè· ç­‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596&lt;template&gt; &lt;canvas width=&quot;600&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ä¸Šåˆ’çº¿ const overline = new fabric.Text(&#x27;ä¸Šåˆ’çº¿&#x27;, &#123; top: 30, left: 10, fontSize: 20, overline: true, // ä¸Šåˆ’çº¿ &#125;) // ä¸‹åˆ’çº¿ const underline = new fabric.Text(&#x27;ä¸‹åˆ’çº¿&#x27;, &#123; top: 30, left: 100, fontSize: 20, underline: true, // ä¸‹åˆ’çº¿ &#125;) // åˆ é™¤çº¿ const linethrough = new fabric.Text(&#x27;åˆ é™¤çº¿&#x27;, &#123; top: 30, left: 200, fontSize: 20, linethrough: true, // åˆ é™¤çº¿ &#125;) // å·¦å¯¹é½ const msg1 = &#x27;å·¦ å·¦å·¦ å·¦å¯¹é½&#x27; const left = new fabric.Text(msg1, &#123; top: 100, left: 10, fontSize: 16, textAlign: &#x27;left&#x27;, // å·¦å¯¹é½ &#125;) // å±…ä¸­å¯¹é½ const msg2 = &#x27;ä¸­ ä¸­ä¸­ å±…ä¸­å¯¹é½&#x27; const center = new fabric.Text(msg2, &#123; top: 100, left: 100, fontSize: 16, textAlign: &#x27;center&#x27;,// å±…ä¸­å¯¹é½ &#125;) // å³å¯¹é½ const msg3 = &#x27;å³ å³å³ å³å¯¹é½&#x27; const right = new fabric.Text(msg3, &#123; top: 100, left: 200, fontSize: 16, textAlign: &#x27;right&#x27;, // å³å¯¹é½ &#125;) // æ–‡æœ¬å†…å®¹ const msg4 = &quot;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labo&quot; const lineHeight1 = new fabric.Text(msg4, &#123; top: 250, left: 10, fontSize: 16, lineHeight: 1, // è¡Œé«˜ &#125;) const lineHeight2 = new fabric.Text(msg4, &#123; top: 250, left: 300, fontSize: 16, lineHeight: 2, // è¡Œé«˜ &#125;) canvas.add( overline, underline, linethrough, left, center, right, lineHeight1, lineHeight2 )&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä¸Šé¢çš„ä¸Šåˆ’çº¿ã€ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿çš„é…ç½®ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ã€‚ æ¸å˜ã€Fabric.js æ¸å˜ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - æ¸å˜ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ çº¿æ€§æ¸å˜ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;template&gt; &lt;canvas width=&quot;600&quot; height=&quot;600&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; let canvas = new fabric.Canvas(&#x27;canvas&#x27;) // å®ä¾‹åŒ–fabricï¼Œå¹¶ç»‘å®šåˆ°canvaså…ƒç´ ä¸Š // åœ† let circle = new fabric.Circle(&#123; left: 100, top: 100, radius: 50, &#125;) // çº¿æ€§æ¸å˜ let gradient = new fabric.Gradient(&#123; type: &#x27;linear&#x27;, // linear or radial gradientUnits: &#x27;pixels&#x27;, // pixels or pencentage åƒç´  æˆ–è€… ç™¾åˆ†æ¯” coords: &#123; x1: 0, y1: 0, x2: circle.width, y2: 0 &#125;, // è‡³å°‘2ä¸ªåæ ‡å¯¹ï¼ˆx1ï¼Œy1å’Œx2ï¼Œy2ï¼‰å°†å®šä¹‰æ¸å˜åœ¨å¯¹è±¡ä¸Šçš„æ‰©å±•æ–¹å¼ colorStops:[ // å®šä¹‰æ¸å˜é¢œè‰²çš„æ•°ç»„ &#123; offset: 0, color: &#x27;red&#x27; &#125;, &#123; offset: 0.2, color: &#x27;orange&#x27; &#125;, &#123; offset: 0.4, color: &#x27;yellow&#x27; &#125;, &#123; offset: 0.6, color: &#x27;green&#x27; &#125;, &#123; offset: 0.8, color: &#x27;blue&#x27; &#125;, &#123; offset: 1, color: &#x27;purple&#x27; &#125;, ] &#125;) circle.set(&#x27;fill&#x27;, gradient); canvas.add(circle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å¾„å‘æ¸å˜ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt; &lt;canvas width=&quot;600&quot; height=&quot;600&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; let canvas = new fabric.Canvas(&#x27;canvas&#x27;) // å®ä¾‹åŒ–fabricï¼Œå¹¶ç»‘å®šåˆ°canvaså…ƒç´ ä¸Š // åœ† let circle = new fabric.Circle(&#123; left: 100, top: 100, radius: 50, &#125;) let gradient = new fabric.Gradient(&#123; type: &#x27;radial&#x27;, coords: &#123; r1: 50, // è¯¥å±æ€§ä»…å¾„å‘æ¸å˜å¯ç”¨ï¼Œå¤–åœ†åŠå¾„ r2: 0, // è¯¥å±æ€§ä»…å¾„å‘æ¸å˜å¯ç”¨ï¼Œå¤–åœ†åŠå¾„ x1: 50, // ç„¦ç‚¹çš„xåæ ‡ y1: 50, // ç„¦ç‚¹çš„yåæ ‡ x2: 50, // ä¸­å¿ƒç‚¹çš„xåæ ‡ y2: 50, // ä¸­å¿ƒç‚¹çš„yåæ ‡ &#125;, colorStops: [ &#123; offset: 0, color: &#x27;#fee140&#x27; &#125;, &#123; offset: 1, color: &#x27;#fa709a&#x27; &#125; ] &#125;) circle.set(&#x27;fill&#x27;, gradient); canvas.add(circle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; r1ã€r2ã€x1ã€y1ã€x2ã€y2 è¿™å‡ ä¸ªå‚æ•°å¯ä»¥è‡ªå·±ä¿®æ”¹å€¼ç„¶åçœ‹çœ‹æ•ˆæœï¼Œè‡ªå·±äº²æ‰‹æ”¹ä¸€ä¸‹ä¼šç†è§£å¾—æ›´æ·±åˆ»ã€‚ ä½¿ç”¨å›¾ç‰‡ã€Fabric.js å›¾ç‰‡ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - ä½¿ç”¨å›¾ç‰‡ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ æ–¹æ³•1ï¼šä½¿ç”¨HTMLçš„å›¾ç‰‡ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;img src=&quot;@/assets/logo.png&quot; id=&quot;logo&quot;&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const imgElement = document.getElementById(&#x27;logo&#x27;) imgElement.onload = function() &#123; let imgInstance = new fabric.Image(imgElement, &#123; left: 100, top: 100, width: 200, height: 200, angle: 50, // æ—‹è½¬ &#125;) canvas.add(imgInstance) &#125;&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt;&lt;style&gt;#logo &#123; display: none;&#125;&lt;/style&gt; éœ€è¦ä½¿ç”¨ onload æ–¹æ³•ç›‘å¬å›¾ç‰‡æ˜¯å¦åŠ è½½å®Œæˆã€‚ åªæœ‰åœ¨å›¾ç‰‡å®Œå…¨åŠ è½½åå†æ·»åŠ åˆ°ç”»å¸ƒä¸Šæ‰èƒ½å±•ç¤ºå‡ºæ¥ã€‚ ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¦‚æœä¸æƒ³åœ¨ç”»å¸ƒå¤–å±•ç¤ºå›¾ç‰‡ï¼Œéœ€è¦ä½¿ç”¨ display: none; æŠŠå›¾ç‰‡éšè—èµ·æ¥ã€‚ æ–¹æ³•2ï¼šä½¿ç”¨jså¼•å…¥ 123456789101112131415161718192021222324&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;import logo from &#x27;@/assets/logo.png&#x27; // å¼•å…¥å›¾ç‰‡function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) fabric.Image.fromURL(logo, oImg =&gt; &#123; oImg.scale(0.5) // ç¼©æ”¾ canvas.add(oImg) // å°†å›¾ç‰‡åŠ å…¥åˆ°ç”»å¸ƒ &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ fabric.Image.fromURL åŠ è½½å›¾ç‰‡ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾ç‰‡èµ„æºï¼Œå¯ä»¥æ”¾å…¥æœ¬åœ°å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ”¾ç½‘ç»œå›¾ç‰‡ï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œå›¾ç‰‡åŠ è½½å®Œå°±å¯ä»¥å¯¹å›¾ç‰‡å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ å›¾ç‰‡æ»¤é•œã€Fabric.js å›¾ç‰‡è·¯å¾„ - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å›¾ç‰‡æ»¤é•œ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;500&quot; height=&quot;500&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;import gwen from &#x27;@/assets/images/gwen-spider-verse-ah.jpg&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) fabric.Image.fromURL(gwen, img =&gt; &#123; img.scale(0.5) // å›¾ç‰‡ç¼©å°50% canvas.add(img) &#125;) // å•ä¸ªæ»¤é•œ fabric.Image.fromURL(gwen, img =&gt; &#123; img.scale(0.5) // å›¾ç‰‡ç¼©å°50% img.left = 250 // æ·»åŠ æ»¤é•œ img.filters.push(new fabric.Image.filters.Grayscale()) // å›¾ç‰‡åŠ è½½å®Œæˆä¹‹åï¼Œåº”ç”¨æ»¤é•œæ•ˆæœ img.applyFilters() canvas.add(img) &#125;) // å åŠ æ»¤é•œ // â€œfiltersâ€å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„æ–¹æ³•æ‰§è¡Œä»»ä½•æ‰€éœ€çš„æ“ä½œï¼šç§»é™¤æ»¤é•œï¼ˆpopï¼Œspliceï¼Œshiftï¼‰ï¼Œæ·»åŠ æ»¤é•œï¼ˆpushï¼Œunshiftï¼Œspliceï¼‰ï¼Œç”šè‡³å¯ä»¥ç»„åˆå¤šä¸ªæ»¤é•œã€‚å½“æˆ‘ä»¬è°ƒç”¨ applyFilters æ—¶ï¼Œâ€œfiltersâ€æ•°ç»„ä¸­å­˜åœ¨çš„ä»»ä½•æ»¤é•œå°†é€ä¸ªåº”ç”¨ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å°è¯•åˆ›å»ºä¸€ä¸ªæ—¢è‰²ååˆæ˜äº®ï¼ˆBrightnessï¼‰çš„å›¾åƒã€‚ fabric.Image.fromURL(gwen, img =&gt; &#123; img.scale(0.5) // å›¾ç‰‡ç¼©å°50% // æ·»åŠ æ»¤é•œ img.filters.push( new fabric.Image.filters.Grayscale(), new fabric.Image.filters.Sepia(), //è‰²å new fabric.Image.filters.Brightness(&#123; brightness: 0.2 &#125;) //äº®åº¦ ) // å›¾ç‰‡åŠ è½½å®Œæˆä¹‹åï¼Œåº”ç”¨æ»¤é•œæ•ˆæœ img.applyFilters() img.set(&#123; left: 250, top: 250, &#125;) canvas.add(img) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç»™å›¾ç‰‡æ·»åŠ æ»¤é•œï¼Œfabric.Image.fromURL çš„å›è°ƒå‡½æ•°é‡Œè¿”å›ä¸€ä¸ªå›¾ç‰‡å¯¹è±¡ï¼Œå›¾ç‰‡å¯¹è±¡å¯ä»¥ä½¿ç”¨ filters æ·»åŠ æ»¤é•œã€‚ fabric å†…ç½®æ»¤é•œ BaseFilter åŸºæœ¬è¿‡æ»¤å™¨ Blur æ¨¡ç³Š Brightness äº®åº¦ ColorMatrix é¢œè‰²çŸ©é˜µ Contrast å¯¹æ¯” Convolute å·ç§¯ Gamma ä¼½ç› Grayscale ç°åº¦ HueRotation è‰²è°ƒæ—‹è½¬ Invert å€’ç½® Noise å™ªéŸ³ Pixelate åƒç´ åŒ– RemoveColor ç§»é™¤é¢œè‰² Resize è°ƒæ•´å¤§å° Saturation é¥±å’Œ Sepia è‰²å è½¬æ¢æ—‹è½¬è§’åº¦ angle 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;500&quot; height=&quot;500&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) let triangle = new fabric.Triangle(&#123; top: 100, left: 100, width: 80, height: 100, fill: &#x27;blue&#x27;, angle: 30 // æ—‹è½¬30åº¦ &#125;) canvas.add(triangle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç¼©æ”¾ scaleX å’Œ scaleY 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;500&quot; height=&quot;500&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) let triangle = new fabric.Triangle(&#123; top: 100, left: 100, width: 80, height: 100, fill: &#x27;blue&#x27;, scaleX: 2, // xè½´æ–¹å‘æ”¾å¤§2å€ scaleY: 2 // yè½´æ–¹å‘æ”¾å¤§2å€ &#125;) canvas.add(triangle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; åè½¬ scaleX å’Œ scaleY 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;500&quot; height=&quot;500&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) let triangle = new fabric.Triangle(&#123; top: 100, left: 100, width: 80, height: 100, fill: &#x27;blue&#x27;, scaleY: -1 // scaleæ˜¯è´Ÿæ•°æ—¶ï¼Œå›¾å½¢ä¼šåè½¬ &#125;) canvas.add(triangle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å¹³ç§» top å’Œ leftå¯ä»¥ç›´æ¥è®¾ç½®å…ƒç´ çš„ top å’Œ left è¿›è¡Œå¹³ç§»ã€‚ å¯å‚ç…§å‰é¢çš„ä¾‹å­ã€‚ åˆ†ç»„ã€Fabric.js ç»„ - æ–‡æ¡£ã€ å»ºç»„ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å»ºç»„åŠæ“ä½œ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // æ¤­åœ† const ellipse = new fabric.Ellipse(&#123; top: 20, left: 20, rx: 100, ry: 50, fill: &#x27;#ddd&#x27;, originX: &#x27;center&#x27;, // æ—‹è½¬xè½´ï¼šleft, right, center originY: &#x27;center&#x27; // æ—‹è½¬yè½´ï¼štop, bottom, center &#125;) // æ–‡æœ¬ const text = new fabric.Text(&#x27;Hello World&#x27;, &#123; top: 40, left: 20, fontSize: 20, originX: &quot;center&quot;, originY: &quot;center&quot; &#125;) // å»ºç»„ const group = new fabric.Group([ellipse, text], &#123; top: 50, // æ•´ç»„è·ç¦»é¡¶éƒ¨100 left: 100, // æ•´ç»„è·ç¦»å·¦ä¾§100 angle: -10, // æ•´ç»„æ—‹è½¬-10deg &#125;) canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; new fabric.Group å¯ä»¥åˆ›å»ºä¸€ä¸ªç»„ï¼ˆå…¶å®æœ‰ç‚¹åƒ Photoshop é‡Œé¢çš„ç»„ï¼ŒæŠŠå¤šä¸ªå›¾å±‚æ”¾åœ¨åŒä¸€ä¸ªç»„å†…ï¼Œå®ç°åŒæ­¥çš„æ“ä½œï¼Œæ¯”å¦‚æ‹–æ‹½ã€ç¼©æ”¾ç­‰ï¼‰ã€‚ æ“ä½œç»„ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å»ºç»„åŠæ“ä½œ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ Fabric.js çš„ç»„æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œè¿™é‡Œåˆ—ä¸€äº›å¸¸ç”¨çš„ï¼š getObjects() è¿”å›ä¸€ç»„ä¸­æ‰€æœ‰å¯¹è±¡çš„æ•°ç»„ size() æ‰€æœ‰å¯¹è±¡çš„æ•°é‡ contains() æ£€æŸ¥ç‰¹å®šå¯¹è±¡æ˜¯å¦åœ¨ group ä¸­ item() ç»„ä¸­å…ƒç´  forEachObject() éå†ç»„ä¸­å¯¹è±¡ add() æ·»åŠ å…ƒç´ å¯¹è±¡ remove() åˆ é™¤å…ƒç´ å¯¹è±¡ fabric.util.object.clone() å…‹éš† æˆ‘æ‹¿å…¶ä¸­ä¸€ä¸ªä¸¾ä¾‹ï¼šitem() åœ¨ä¸Šä¸€ä¸ªä¾‹å­çš„åŸºç¡€ä¸Šï¼ŒæŠŠæ¤­åœ†æ”¹æˆçº¢è‰²ï¼ŒæŠŠ â€œHello Worldâ€ æ”¹æˆ â€œé›·çŒ´ï¼Œä¸–ç•Œâ€ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // æ¤­åœ† const ellipse = new fabric.Ellipse(&#123; top: 20, left: 20, rx: 100, ry: 50, fill: &#x27;#ddd&#x27;, originX: &#x27;center&#x27;, // æ—‹è½¬xè½´ï¼šleft, right, center originY: &#x27;center&#x27; // æ—‹è½¬yè½´ï¼štop, bottom, center &#125;) // æ–‡æœ¬ const text = new fabric.Text(&#x27;Hello World&#x27;, &#123; top: 40, left: 20, fontSize: 20, originX: &quot;center&quot;, originY: &quot;center&quot; &#125;) // å»ºç»„ const group = new fabric.Group([ellipse, text], &#123; top: 50, // æ•´ç»„è·ç¦»é¡¶éƒ¨100 left: 100, // æ•´ç»„è·ç¦»å·¦ä¾§100 angle: -10, // æ•´ç»„æ—‹è½¬-10deg &#125;) // æ§åˆ¶ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆæ¤­åœ†ï¼‰ group.item(0).set(&#x27;fill&#x27;, &#x27;#ea5455&#x27;) // æ§åˆ¶ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆæ–‡æœ¬ï¼‰ group.item(1).set(&#123; text: &#x27;é›·çŒ´ï¼Œä¸–ç•Œ&#x27;, fill: &#x27;#fff&#x27; &#125;) canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ‰“æ•£åˆ†ç»„ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å»ºç»„ å’Œ æ‰“æ•£ç»„ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;template&gt; &lt;div&gt; &lt;button @click=&quot;ungroup&quot;&gt;å–æ¶ˆç»„&lt;/button&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;let canvas = null// åˆå§‹åŒ–function init() &#123; canvas = new fabric.Canvas(&#x27;canvas&#x27;) // æ¤­åœ† const ellipse = new fabric.Ellipse(&#123; top: 20, left: 20, rx: 100, ry: 50, fill: &#x27;#ddd&#x27;, originX: &#x27;center&#x27;, // æ—‹è½¬xè½´ï¼šleft, right, center originY: &#x27;center&#x27; // æ—‹è½¬yè½´ï¼štop, bottom, center &#125;) // æ–‡æœ¬ const text = new fabric.Text(&#x27;Hello World&#x27;, &#123; top: 40, left: 20, fontSize: 20, originX: &quot;center&quot;, originY: &quot;center&quot; &#125;) // å»ºç»„ const group = new fabric.Group([ellipse, text], &#123; top: 50, // æ•´ç»„è·ç¦»é¡¶éƒ¨100 left: 100, // æ•´ç»„è·ç¦»å·¦ä¾§100 angle: -10, // æ•´ç»„æ—‹è½¬-10deg &#125;) canvas.add(group)&#125;// å–æ¶ˆç»„function ungroup() &#123; // åˆ¤æ–­å½“å‰æœ‰æ²¡æœ‰é€‰ä¸­å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰å°±ä¸æ‰§è¡Œä»»ä½•æ“ä½œ if (!canvas.getActiveObject()) &#123; return &#125; // åˆ¤æ–­å½“å‰æ˜¯å¦é€‰ä¸­ç»„ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¸æ‰§è¡Œä»»ä½•æ“ä½œ if (canvas.getActiveObject().type !== &#x27;group&#x27;) &#123; return &#125; // å…ˆè·å–å½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼Œç„¶åæ‰“æ•£ canvas.getActiveObject().toActiveSelection()&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ canvas.getActiveObject() å¯ä»¥è·å–ç”»å¸ƒå½“å‰é€‰ä¸­çš„å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡ toActiveSelection() å°†ç»„æ‰“æ•£ã€‚ åŠ¨ç”»ã€Fabric.js animate - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - åŠ¨ç”» ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ ç»å¯¹å€¼åŠ¨ç”»å…ˆåˆ«ç®¡ä»€ä¹ˆ ç»å¯¹å€¼åŠ¨ç”» å’Œ ç›¸å¯¹å€¼åŠ¨ç”» ï¼Œç­‰å­¦å®Œè¿™èŠ‚å†å¾€ä¸‹çœ‹å°±çŸ¥é“äº†ã€‚ æœ¬èŠ‚æ˜¯åŠ¨ç”»çš„åŸºç¡€ç”¨æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; left: 100, top: 100, width: 100, height: 100, fill: &#x27;red&#x27; &#125;) // è®¾ç½®çŸ©å½¢åŠ¨ç”» rect.animate(&#x27;angle&#x27;, &quot;-50&quot;, &#123; onChange:canvas.renderAll.bind(canvas), // æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ &#125;) canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ¯ä¸ª Fabric å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª animate æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥åŠ¨ç”»åŒ–è¯¥å¯¹è±¡ã€‚ ç”¨æ³•ï¼šanimate(åŠ¨ç”»å±æ€§, åŠ¨ç”»çš„ç»“æŸå€¼, [ç”»çš„è¯¦ç»†ä¿¡æ¯]) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®åŠ¨ç”»çš„å±æ€§ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŠ¨ç”»çš„ç»“æŸå€¼ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬: 1234567891011&#123; romï¼šå…è®¸æŒ‡å®šå¯è®¾ç½®åŠ¨ç”»çš„å±æ€§çš„èµ·å§‹å€¼ï¼ˆå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ä½¿ç”¨å½“å‰å€¼ï¼‰ã€‚ durationï¼šé»˜è®¤ä¸º500ï¼ˆmsï¼‰ã€‚å¯ç”¨äºæ›´æ”¹åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚ onCompleteï¼šåœ¨åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨çš„å›è°ƒã€‚ easingï¼šç¼“åŠ¨åŠŸèƒ½ã€‚&#125; ç›¸å¯¹å€¼åŠ¨ç”» 1234567891011121314151617181920212223242526272829303132333435&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; left: 100, top: 100, width: 100, height: 100, fill: &#x27;red&#x27; &#125;) // è¯·æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°ï¼š+=360 rect.animate(&#x27;angle&#x27;, &#x27;+=360&#x27;, &#123; onChange:canvas.renderAll.bind(canvas), // æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œ duration: 2000, // æ‰§è¡Œæ—¶é—´ easing: fabric.util.ease.easeOutBounce, // ç¼“å†²æ•ˆæœ &#125;) canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è¿™ä¸ªä¾‹å­ç”¨äº† fabric.util.ease.easeOutBounce ç¼“å†²æ•ˆæœã€‚ å…¶å® ç»å¯¹å€¼åŠ¨ç”» å’Œ ç›¸å¯¹å€¼åŠ¨ç”» çš„ç”¨æ³•æ˜¯å·®ä¸å¤šçš„ï¼Œåªæ˜¯ ç¬¬äºŒä¸ªå‚æ•° ç”¨æ³•ä¸åŒã€‚ ç›¸å¯¹å€¼åŠ¨ç”» æ˜¯æŠŠ animate æ”¹æˆå¸¦ä¸Šè¿ç®—ç¬¦çš„å€¼ï¼Œè¿™æ ·å°±ä¼šåœ¨åŸåŸºç¡€ä¸Šåšè®¡ç®—ã€‚ äº‹ä»¶ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - äº‹ä»¶ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ Fabric.js æä¾›äº†ä¸€å¥—å¾ˆæ–¹ä¾¿çš„äº‹ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ on æ–¹æ³•å¯ä»¥åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨ off æ–¹æ³•å°†å…¶åˆ é™¤ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;button @click=&quot;addClickEvent&quot;&gt;æ·»åŠ ç”»å¸ƒç‚¹å‡»äº‹ä»¶&lt;/button&gt; &lt;button @click=&quot;removeClickEvent&quot;&gt;ç§»é™¤ç”»å¸ƒç‚¹å‡»äº‹ä»¶&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;let canvas = null// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 20, left: 20, width: 100, height: 50, fill: &#x27;#9896f1&#x27; &#125;) // ç»™çŸ©å½¢æ·»åŠ ä¸€ä¸ªé€‰ä¸­äº‹ä»¶ rect.on(&#x27;selected&#x27;, options =&gt; &#123; console.log(&#x27;é€‰ä¸­çŸ©å½¢å•¦&#x27;, options) &#125;) canvas.add(rect) addClickEvent()&#125;// ç§»é™¤ç”»å¸ƒç‚¹å‡»äº‹ä»¶function removeClickEvent() &#123; canvas.off(&#x27;mouse:down&#x27;)&#125;// æ·»åŠ ç”»å¸ƒç‚¹å‡»äº‹ä»¶function addClickEvent() &#123; removeClickEvent() // åœ¨æ·»åŠ äº‹ä»¶ä¹‹å‰å…ˆæŠŠè¯¥äº‹ä»¶æ¸…é™¤æ‰ï¼Œä»¥å…é‡å¤æ·»åŠ  canvas.on(&#x27;mouse:down&#x27;, options =&gt; &#123; console.log(`xè½´åæ ‡: $&#123;options.e.clientX&#125;; yè½´åæ ‡: $&#123;options.e.clientY&#125;`) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; Fabric.js è¿˜æä¾›äº†å¾ˆå¤šäº‹ä»¶ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ¡ˆä¾‹ è‡ªç”±ç»˜ç”»ã€Fabric.js è‡ªç”±ç»˜ç”» - æ–‡æ¡£ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - è‡ªç”±ç»˜ç”» ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ 123456789101112131415161718192021222324252627282930313233343536&lt;template&gt; &lt;div&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; isDrawingMode: true, // å¼€å¯ç»˜å›¾æ¨¡å¼ &#125;) // è®¾ç½®ç”»ç¬”é¢œè‰² canvas.freeDrawingBrush.color = &#x27;#11999e&#x27; // è®¾ç½®ç”»ç¬”ç²—ç»† canvas.freeDrawingBrush.width = 10 // ç”»ç¬”æŠ•å½± canvas.freeDrawingBrush.shadow = new fabric.Shadow(&#123; blur: 10, offsetX: 10, offsetY: 10, affectStroke: true, color: &#x27;#30e3ca&#x27;, &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; åœ¨ä½¿ç”¨ new fabric.Canvas åˆ›å»ºç”»å¸ƒæ—¶ï¼Œè®¾ç½® isDrawingMode: true å°±å¯ä»¥å¼€å§‹è‡ªç”±ç»˜ç”»æ¨¡å¼ã€‚ canvas.freeDrawingBrush é‡Œæœ‰ä¸€å †å±æ€§å¯ä»¥è®¾ç½®ç”»ç¬”æ ·å¼ã€‚ ç¦æ­¢éƒ¨åˆ†æ“ä½œğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - ç¦æ­¢éƒ¨åˆ†æ“ä½œ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ ç¦æ­¢æ°´å¹³ç§»åŠ¨ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 100, height: 50, fill: &#x27;#ffde7d&#x27; &#125;) // ä¸å…è®¸æ°´å¹³ç§»åŠ¨ rect.lockMovementX = true canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ lockMovementX ç¦æ­¢å¯¹è±¡æ°´å¹³ç§»åŠ¨ã€‚ ç¦æ­¢å‚ç›´ç§»åŠ¨ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 100, height: 50, fill: &#x27;#f6416c&#x27; &#125;) // ä¸å…è®¸å‚ç›´ç§»åŠ¨ rect.lockMovementY = true canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ lockMovementY ç¦æ­¢å¯¹è±¡å‚ç›´ç§»åŠ¨ã€‚ ç¦æ­¢æ—‹è½¬ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 100, height: 50, fill: &#x27;#3490de&#x27; &#125;) // ç¦æ­¢æ—‹è½¬ rect.lockRotation = true canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ lockRotation ç¦æ­¢å¯¹è±¡æ—‹è½¬ã€‚ ç¦æ­¢æ°´å¹³ç¼©æ”¾ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 100, height: 50, fill: &#x27;#ff9a3c&#x27; &#125;) // ç¦æ­¢æ°´å¹³ç¼©æ”¾ rect.lockScalingX = true canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ lockScalingX ç¦æ­¢å¯¹è±¡æ°´å¹³ç¼©æ”¾ã€‚ ç¦æ­¢å‚ç›´ç¼©æ”¾ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;// åˆå§‹åŒ–ç”»å¸ƒfunction init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 100, height: 50, fill: &#x27;#f95959&#x27; &#125;) // ç¦æ­¢å‚ç›´ç¼©æ”¾ rect.lockScalingY = true canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ lockScalingY ç¦æ­¢å¯¹è±¡å‚ç›´ç¼©æ”¾ã€‚ ç¼©æ”¾å’Œå¹³ç§»ç”»å¸ƒğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - å¹³ç§»å’Œç¼©æ”¾ç”»å¸ƒ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ ç¼©æ”¾ç”»å¸ƒä»¥åŸç‚¹ä¸ºåŸºå‡†ç¼©æ”¾ç”»å¸ƒè¦ç¼©æ”¾ç”»å¸ƒï¼Œå…¶å®æ˜¯åœ¨ç›‘å¬é¼ æ ‡äº‹ä»¶ã€‚ è¿™é‡Œç›‘å¬çš„æ˜¯é¼ æ ‡çš„æ»šè½®äº‹ä»¶ï¼šmouse:wheelã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // çŸ©å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const rect = new fabric.Rect(&#123; top: 10, left: 10, width: 40, height: 40, fill: &#x27;orange&#x27; &#125;) // åœ†å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const circle = new fabric.Circle(&#123; top: 30, left: 30, radius: 50, fill: &#x27;green&#x27; &#125;) canvas.add(rect, circle) // å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­ // ç›‘å¬é¼ æ ‡æ»šè½®äº‹ä»¶ canvas.on(&#x27;mouse:wheel&#x27;, opt =&gt; &#123; let delta = opt.e.deltaY // æ»šè½®å‘ä¸Šæ»šä¸€ä¸‹æ˜¯ -100ï¼Œå‘ä¸‹æ»šä¸€ä¸‹æ˜¯ 100 let zoom = canvas.getZoom() // è·å–ç”»å¸ƒå½“å‰ç¼©æ”¾å€¼ // æ§åˆ¶ç¼©æ”¾èŒƒå›´åœ¨ 0.01~20 çš„åŒºé—´å†… zoom *= 0.999 ** delta if (zoom &gt; 20) zoom = 20 if (zoom &lt; 0.01) zoom = 0.01 // è®¾ç½®ç”»å¸ƒç¼©æ”¾æ¯”ä¾‹ canvas.setZoom(zoom) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä»¥é¼ æ ‡æŒ‡é’ˆä¸ºåŸºå‡†ç¼©æ”¾ç”»å¸ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // çŸ©å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const rect = new fabric.Rect(&#123; top: 130, left: 130, width: 40, height: 40, fill: &#x27;orange&#x27; &#125;) // åœ†å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const circle = new fabric.Circle(&#123; top: 150, left: 150, radius: 50, fill: &#x27;green&#x27; &#125;) canvas.add(rect, circle) // å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­ // ç›‘å¬é¼ æ ‡æ»šè½®äº‹ä»¶ canvas.on(&#x27;mouse:wheel&#x27;, opt =&gt; &#123; let delta = opt.e.deltaY // æ»šè½®å‘ä¸Šæ»šä¸€ä¸‹æ˜¯ -100ï¼Œå‘ä¸‹æ»šä¸€ä¸‹æ˜¯ 100 let zoom = canvas.getZoom() // è·å–ç”»å¸ƒå½“å‰ç¼©æ”¾å€¼ // æ§åˆ¶ç¼©æ”¾èŒƒå›´åœ¨ 0.01~20 çš„åŒºé—´å†… zoom *= 0.999 ** delta if (zoom &gt; 20) zoom = 20 if (zoom &lt; 0.01) zoom = 0.01 // è®¾ç½®ç”»å¸ƒç¼©æ”¾æ¯”ä¾‹ // å…³é”®ç‚¹ï¼ï¼ï¼ // å‚æ•°1ï¼šå°†ç”»å¸ƒçš„æ‰€æ”¾ç‚¹è®¾ç½®æˆé¼ æ ‡å½“å‰ä½ç½® // å‚æ•°2ï¼šä¼ å…¥ç¼©æ”¾å€¼ canvas.zoomToPoint( &#123; x: opt.e.offsetX, // é¼ æ ‡xè½´åæ ‡ y: opt.e.offsetY // é¼ æ ‡yè½´åæ ‡ &#125;, zoom // æœ€åè¦ç¼©æ”¾çš„å€¼ ) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å¹³ç§»ç”»å¸ƒ æœ¬ä¾‹çš„éœ€æ±‚æ˜¯ï¼ŒæŒ‰ä¸‹ alté”® åæ‰èƒ½è§¦å‘ç§»åŠ¨ç”»å¸ƒçš„åŠŸèƒ½ã€‚ æ ¹æ®è¿™ä¸ªéœ€æ±‚ï¼Œå¯ä»¥æŠŠä»»åŠ¡æ‹†è§£æˆ3æ­¥ï¼š é¼ æ ‡ç‚¹å‡»ï¼ˆåˆšæŒ‰ä¸‹é‚£åˆ»ï¼‰ é¼ æ ‡ç§»åŠ¨ é¼ æ ‡æ¾å¼€ é¼ æ ‡ç‚¹å‡» mouse:down è¯¥æ­¥éª¤ä½¿ç”¨ mouse:down å¯ä»¥ç›‘å¬åˆ°ã€‚ åœ¨å›è°ƒå‡½æ•°é‡Œç›‘å¬æ˜¯å¦æŒ‰ä¸‹ alté”®ã€‚ å¦‚æœæŒ‰ä¸‹ alté”® ï¼Œè®¾ç½®ä¸€ä¸ªå€¼è®°å½• å¼€å¯ç§»åŠ¨çŠ¶æ€ã€‚ è®°å½•é¼ æ ‡å½“å‰æ‰€åœ¨çš„ x å’Œ y è½´åæ ‡ã€‚ é¼ æ ‡ç§»åŠ¨ mouse:move åˆ¤æ–­æ˜¯å¦éœ€è¦ç§»åŠ¨ï¼ˆé¼ æ ‡ç‚¹å‡»çš„ç¬¬ä¸‰æ­¥ï¼‰ã€‚ å¦‚éœ€ç§»åŠ¨ï¼Œç«‹åˆ»è½¬æ¢ç”»å¸ƒè§†å›¾æ¨¡å¼ å°†ç”»å¸ƒç§»åŠ¨åˆ° é¼ æ ‡xå’Œyè½´åæ ‡ ã€‚ é¼ æ ‡æ¾å¼€ mouse:up æŠŠç”»å¸ƒå®šæ ¼åœ¨é¼ æ ‡æ¾å¼€çš„åæ ‡ã€‚ å…³é—­ç§»åŠ¨çŠ¶æ€ï¼ˆé¼ æ ‡ç‚¹å‡»çš„ç¬¬ä¸‰æ­¥ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // çŸ©å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const rect = new fabric.Rect(&#123; top: 130, left: 130, width: 40, height: 40, fill: &#x27;orange&#x27; &#125;) // åœ†å½¢ï¼ˆå‚ç…§ç‰©ï¼‰ const circle = new fabric.Circle(&#123; top: 150, left: 150, radius: 50, fill: &#x27;green&#x27; &#125;) canvas.add(rect, circle) // å°†çŸ©å½¢å’Œåœ†å½¢æ·»åŠ åˆ°ç”»å¸ƒä¸­ canvas.on(&#x27;mouse:down&#x27;, opt =&gt; &#123; // é¼ æ ‡æŒ‰ä¸‹æ—¶è§¦å‘ let evt = opt.e if (evt.altKey === true) &#123; // æ˜¯å¦æŒ‰ä½alt canvas.isDragging = true // isDragging æ˜¯è‡ªå®šä¹‰çš„ï¼Œå¼€å¯ç§»åŠ¨çŠ¶æ€ canvas.lastPosX = evt.clientX // lastPosX æ˜¯è‡ªå®šä¹‰çš„ canvas.lastPosY = evt.clientY // lastPosY æ˜¯è‡ªå®šä¹‰çš„ &#125; &#125;) canvas.on(&#x27;mouse:move&#x27;, opt =&gt; &#123; // é¼ æ ‡ç§»åŠ¨æ—¶è§¦å‘ if (canvas.isDragging) &#123; let evt = opt.e let vpt = canvas.viewportTransform // èšç„¦è§†å›¾çš„è½¬æ¢ vpt[4] += evt.clientX - canvas.lastPosX vpt[5] += evt.clientY - canvas.lastPosY canvas.requestRenderAll() // é‡æ–°æ¸²æŸ“ canvas.lastPosX = evt.clientX canvas.lastPosY = evt.clientY &#125; &#125;) canvas.on(&#x27;mouse:up&#x27;, opt =&gt; &#123; // é¼ æ ‡æ¾å¼€æ—¶è§¦å‘ canvas.setViewportTransform(canvas.viewportTransform) // è®¾ç½®æ­¤ç”»å¸ƒå®ä¾‹çš„è§†å£è½¬æ¢ canvas.isDragging = false // å…³é—­ç§»åŠ¨çŠ¶æ€ &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; é€‰ä¸­çŠ¶æ€ã€åŸæ–‡åœ°å€ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - é€‰ä¸­çŠ¶æ€ ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ Fabric.js åˆ›å»ºå‡ºæ¥çš„å…ƒç´ ï¼ˆå›¾å½¢ã€å›¾ç‰‡ã€ç»„ç­‰ï¼‰é»˜è®¤æ˜¯å¯ä»¥è¢«é€‰ä¸­çš„ã€‚ æ˜¯å¦å¯ä»¥é€‰ä¸­ã€‚ é€‰ç©ºç™½ä½ç½®å¯ä»¥é€‰ä¸­å—ï¼Ÿ é€‰ä¸­åçš„æ ·å¼ã€‚ ç¦æ­¢é€‰ä¸­ 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const rect = new fabric.Rect(&#123; top: 100, left: 100, width: 200, height: 100, fill: &#x27;red&#x27; &#125;) // å…ƒç´ ç¦æ­¢é€‰ä¸­ rect.selectable = false canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ— æ³•é€šè¿‡ç©ºç™½ä½ç½®é€‰ä¸­å…ƒç´ è“è‰²ä¸‰è§’å½¢è¦é¼ æ ‡å®Œå…¨æ”¾å…¥æ‰èƒ½é€‰ä¸­ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;template&gt; &lt;canvas width=&quot;400&quot; height=&quot;400&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ä¸‰è§’å½¢ const triangle1 = new fabric.Triangle(&#123; top: 100, left: 50, width: 80, // åº•è¾¹å®½åº¦ height: 100, // åº•è¾¹åˆ°å®šç‚¹çš„è·ç¦» fill: &#x27;blue&#x27;, &#125;) // é€‰æ‹©ä¸‰è§’å½¢ç©ºç™½ä½ç½®çš„æ—¶å€™æ— æ³•é€‰ä¸­ï¼Œå½“perPixelTargetFindè®¾ä¸ºfalseåå¯ä»¥é€‰ä¸­ã€‚é»˜è®¤å€¼æ˜¯false triangle1.perPixelTargetFind = true // ä¸‰è§’å½¢ const triangle2 = new fabric.Triangle(&#123; top: 100, left: 200, width: 80, // åº•è¾¹å®½åº¦ height: 100, // åº•è¾¹åˆ°å®šç‚¹çš„è·ç¦» fill: &#x27;green&#x27;, &#125;) canvas.add(triangle1, triangle2) canvas.selectionFullyContained = true // åªé€‰æ‹©å®Œå…¨åŒ…å«åœ¨æ‹–åŠ¨é€‰æ‹©çŸ©å½¢ä¸­çš„å½¢çŠ¶&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç”»å¸ƒæ¡†é€‰æ ·å¼ 123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) canvas.add(circle) canvas.selection = true // ç”»å¸ƒæ˜¯å¦å¯é€‰ä¸­ã€‚é»˜è®¤trueï¼›false ä¸å¯é€‰ä¸­ canvas.selectionColor = &#x27;rgba(106, 101, 216, 0.3)&#x27; // ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„èƒŒæ™¯è‰² canvas.selectionBorderColor = &quot;#1d2786&quot; // ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„è¾¹æ¡†é¢œè‰² canvas.selectionLineWidth = 6 // ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶çš„è¾¹æ¡†åšåº¦ canvas.selectionDashArray = [30, 4, 10] // ç”»å¸ƒé¼ æ ‡æ¡†é€‰æ—¶è¾¹æ¡†è™šçº¿è§„åˆ™ canvas.selectionFullyContained = true // åªé€‰æ‹©å®Œå…¨åŒ…å«åœ¨æ‹–åŠ¨é€‰æ‹©çŸ©å½¢ä¸­çš„å½¢çŠ¶&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è‡ªå®šä¹‰è¾¹å’Œæ§åˆ¶è§’æ ·å¼ 1234567891011121314151617181920212223242526272829303132333435&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.set(&#123; borderColor: &#x27;red&#x27;, // è¾¹æ¡†é¢œè‰² cornerColor: &#x27;green&#x27;, // æ§åˆ¶è§’é¢œè‰² cornerSize: 10, // æ§åˆ¶è§’å¤§å° transparentCorners: false // æ§åˆ¶è§’å¡«å……è‰²ä¸é€æ˜ &#125;) canvas.add(circle) canvas.setActiveObject(circle) // é€‰ä¸­åœ†&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; é€æ˜æ§åˆ¶è§’ 1234567891011121314151617181920212223242526272829303132333435&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.set(&#123; borderColor: &#x27;gray&#x27;, // è¾¹æ¡†é¢œè‰² cornerColor: &#x27;black&#x27;, // æ§åˆ¶è§’é¢œè‰² cornerSize: 12, // æ§åˆ¶è§’å¤§å° transparentCorners: true // æ§åˆ¶è§’å¡«å……è‰²é€æ˜ &#125;) canvas.add(circle) canvas.setActiveObject(circle) // é€‰ä¸­ç¬¬ä¸€é¡¹&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è‡ªå®šä¹‰é€‰ä¸­åçš„èƒŒæ™¯è‰² 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.set(&#123; selectionBackgroundColor: &#x27;orange&#x27; // é€‰ä¸­åï¼ŒèƒŒæ™¯è‰²å˜æ©™è‰² &#125;) canvas.add(circle) canvas.setActiveObject(circle) // é€‰ä¸­ç¬¬ä¸€é¡¹&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ²¡æœ‰è¾¹æ¡† 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.hasBorders = false // å–æ¶ˆè¾¹æ¡† canvas.add(circle) canvas.setActiveObject(circle) // é€‰ä¸­ç¬¬ä¸€é¡¹&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ²¡æœ‰æ§åˆ¶è§’æ²¡æœ‰æ§åˆ¶è§’å°†æ„å‘³ç€æ— æ³•ç”¨é¼ æ ‡ç›´æ¥æ“ä½œç¼©æ”¾å’Œæ—‹è½¬ï¼Œåªå…è®¸ç§»åŠ¨æ“ä½œã€‚ 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.hasControls = false // ç¦æ­¢æ§åˆ¶è§’ canvas.add(circle) canvas.setActiveObject(circle) // é€‰ä¸­ç¬¬ä¸€é¡¹&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è‡ªå®šä¹‰å…‰æ ‡åœ¨å¯¹è±¡æ‚¬åœæœ¬ä¾‹è®¾ç½®äº†å½“é¼ æ ‡åœ¨å…ƒç´ ä¸Šå‡ºç° â€ç­‰å¾…æŒ‡é’ˆâ€œ ã€‚ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) canvas.hoverCursor = &#x27;wait&#x27; // è®¾ç½®ç­‰å¾…æŒ‡é’ˆ canvas.add(circle)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å…ƒç´ ç§»åŠ¨æ—¶çš„æ ·å¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) circle.hasBorders = circle.hasControls = false canvas.add(circle) function animate(e, dir) &#123; if (e.target) &#123; fabric.util.animate(&#123; startValue: e.target.get(&#x27;angle&#x27;), endValue: e.target.get(&#x27;angle&#x27;) + (dir ? 10 : -10), duration: 100 &#125;) fabric.util.animate(&#123; startValue: e.target.get(&#x27;scaleX&#x27;), endValue: e.target.get(&#x27;scaleX&#x27;) + (dir ? 0.2 : -0.2), duration: 100, onChange: function(value) &#123; e.target.scale(value) canvas.renderAll() &#125;, onComplete: function() &#123; e.target.setCoords() &#125; &#125;) &#125; &#125; canvas.on(&#x27;mouse:down&#x27;, function(e) &#123; animate(e, 1) &#125;) canvas.on(&#x27;mouse:up&#x27;, function(e) &#123; animate(e, 0) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä¸å…è®¸æ¡†é€‰ä¸å…è®¸ä»ç”»å¸ƒæ¡†é€‰ï¼Œä½†å…è®¸é€‰ä¸­å…ƒç´ ã€‚ 123456789101112131415161718192021222324252627&lt;template&gt; &lt;canvas width=&quot;200&quot; height=&quot;200&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // åœ†å½¢ const circle = new fabric.Circle(&#123; radius: 30, fill: &#x27;#f55&#x27;, top: 70, left: 70 &#125;) canvas.add(circle) canvas.selection = false // ä¸å…è®¸ç›´æ¥ä»ç”»å¸ƒæ¡†é€‰&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è£å‰ªã€Fabric.js è£å‰ªåŸæ–‡ 1ã€ ã€Fabric.js è£å‰ªåŸæ–‡ 2ã€ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - è£å‰ª ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ è£å‰ªå•ä¸€å›¾å½¢ 123456789101112131415161718192021222324252627282930313233343536&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // è£å‰ªçš„å›¾å½¢ // clipPathä»å¯¹è±¡çš„ä¸­å¿ƒå¼€å§‹å®šä½ï¼Œå¯¹è±¡originXå’ŒoriginYä¸èµ·ä»»ä½•ä½œç”¨ï¼Œè€ŒclipPath originXå’ŒoriginYèµ·ä½œç”¨ã€‚å®šä½é€»è¾‘ä¸fabric.Groupç›¸åŒ const clipPath = new fabric.Circle(&#123; radius: 40, left: -40, top: -40 &#125;) // çŸ©å½¢ const rect = new fabric.Rect(&#123; width: 200, height: 100, fill: &#x27;red&#x27; &#125;) // è£å‰ªçŸ©å½¢ rect.clipPath = clipPath canvas.add(rect)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è£å‰ªä¸€ä¸ªç»„ 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // è£å‰ªçš„å›¾å½¢ // clipPathä»å¯¹è±¡çš„ä¸­å¿ƒå¼€å§‹å®šä½ï¼Œå¯¹è±¡originXå’ŒoriginYä¸èµ·ä»»ä½•ä½œç”¨ï¼Œè€ŒclipPath originXå’ŒoriginYèµ·ä½œç”¨ã€‚å®šä½é€»è¾‘ä¸fabric.Groupç›¸åŒ const clipPath = new fabric.Circle(&#123; radius: 40, left: -40, top: -40 &#125;) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;red&#x27; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;yellow&#x27;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;blue&#x27;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;green&#x27;, left: 100, top: 100 &#125;) ]) // è£å‰ªä¸€ä¸ªç»„ group.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç»„åˆå‰ªè¾‘ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const clipPath = new fabric.Group( [ new fabric.Circle(&#123; radius: 70, top: -70, left: -70 &#125;), new fabric.Circle(&#123; radius: 40, top: -95, left: -95 &#125;), new fabric.Circle(&#123; radius: 40, top: 15, left: 15 &#125;) ], &#123; left: -95, top: -95 &#125; ) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;red&#x27; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;yellow&#x27;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;blue&#x27;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;green&#x27;, left: 100, top: 100 &#125;) ]) group.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; å‰ªå®Œå†å‰ªï¼ˆç»„åˆå‰ªè¾‘ï¼‰ 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const clipPath = new fabric.Circle(&#123; radius: 70, top: -50, left: -50 &#125;) const innerClipPath = new fabric.Circle(&#123; radius: 70, top: -90, left: -90 &#125;) clipPath.clipPath = innerClipPath const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;red&#x27; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;yellow&#x27;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;blue&#x27;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &#x27;green&#x27;, left: 100, top: 100 &#125;), ]) group.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç»„å†…åµŒå¥—å‰ªè¾‘ 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const clipPath = new fabric.Circle(&#123; radius: 100, top: -100, left: -100 &#125;) const small = new fabric.Circle(&#123; radius: 50, top: -50, left: -50 &#125;) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;red&quot;, clipPath: small &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;yellow&quot;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;blue&quot;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;green&quot;, left: 100, top: 100 &#125;), ]) group.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ç”¨æ–‡å­—æ¥è£å‰ª 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;) const clipPath = new fabric.Text( &#x27;Hi I\\&#x27;m the new ClipPath! I hope we\\&#x27;ll be friends&#x27;, &#123; top: -100, left: -100 &#125; ) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;red&quot; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;yellow&quot;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;blue&quot;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;green&quot;, left: 100, top: 100 &#125;), ]) group.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è£å‰ªç”»å¸ƒ 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; backgroundColor: &quot;#ddd&quot; &#125;) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;red&quot; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;yellow&quot;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;blue&quot;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;green&quot;, left: 100, top: 100 &#125;), ]) const clipPath = new fabric.Circle(&#123; radius: 100, top: 0, left: 50 &#125;) canvas.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è£å‰ªç”»å¸ƒï¼Œä½†ä¸è£æ§ä»¶ 1234567891011121314151617181920212223242526272829303132&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; backgroundColor: &quot;#ddd&quot; &#125;) const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;red&quot; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;yellow&quot;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;blue&quot;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;green&quot;, left: 100, top: 100 &#125;), ]) // è£å‰ªåŒºä¹‹å¤–æ§ä»¶å¯è§ canvas.controlsAboveOverlay = true const clipPath = new fabric.Circle(&#123; radius: 100, top: 0, left: 50 &#125;) canvas.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; åŠ¨ç”»è£å‰ª 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; backgroundColor: &quot;#ddd&quot; &#125;) const clipPath = new fabric.Rect(&#123; width: 100, height: 100, top: 0, left: 0 &#125;) function animateLeft()&#123; clipPath.animate(&#123; left: 200, &#125;,&#123; duration: 900, onChange: canvas.requestRenderAll.bind(canvas), onComplete: animateRight &#125;) &#125; function animateRight()&#123; clipPath.animate(&#123; left: 0, &#125;,&#123; duration: 1200, onChange: canvas.requestRenderAll.bind(canvas), onComplete: animateLeft &#125;) &#125; function animateDown()&#123; clipPath.animate(&#123; top: 100, &#125;,&#123; duration: 500, onChange: canvas.requestRenderAll.bind(canvas), onComplete: animateUp &#125;) &#125; function animateUp()&#123; clipPath.animate(&#123; top: 0, &#125;,&#123; duration: 400, onChange: canvas.requestRenderAll.bind(canvas), onComplete: animateDown &#125;) &#125; const group = new fabric.Group([ new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;red&quot; &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;yellow&quot;, left: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;blue&quot;, top: 100 &#125;), new fabric.Rect(&#123; width: 100, height: 100, fill: &quot;green&quot;, left: 100, top: 100 &#125;), ], &#123; scale: 1.5 &#125;) canvas.controlsAboveOverlay = true animateLeft() animateDown() canvas.clipPath = clipPath canvas.add(group)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ç»å¯¹å®šä½è£å‰ª 123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&quot;canvas&quot;) const clipPath = new fabric.Rect(&#123; width: 300, height: 300, top: 0, left: 0, absolutePositioned: true &#125;) const clipPath2 = new fabric.Rect(&#123; width: 300, height: 300, top: 0, left: 0, absolutePositioned: true &#125;) fabric.Image.fromURL(&quot;http://fabricjs.com/assets/dragon.jpg&quot;, function(img)&#123; img.clipPath = clipPath img.scaleToWidth(300) canvas.add(img) &#125;) fabric.Image.fromURL(&quot;http://fabricjs.com/assets/dragon2.jpg&quot;, function(img)&#123; img.clipPath =clipPath2 img.scaleToWidth(300) img.top = 150 canvas.add(img) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; é¢ å€’çš„clipPaths 123456789101112131415161718192021222324252627282930&lt;template&gt; &lt;canvas width=&quot;300&quot; height=&quot;300&quot; id=&quot;canvas&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const canvas = new fabric.Canvas(&quot;canvas&quot;) const clipPath = new fabric.Circle(&#123; radius: 100, top: -200, left: -220 &#125;) const clipPath2 = new fabric.Circle(&#123; radius: 100, top: 0, left: -20 &#125;) const clipPath3 = new fabric.Circle(&#123; radius: 100, top: 0, left: -220 &#125;) const clipPath4 = new fabric.Circle(&#123; radius: 100, top: -200, left: -20 &#125;) const g = new fabric.Group([ clipPath, clipPath2, clipPath3, clipPath4 ]) g.inverted = true // é¢ å€’è£å‰ª fabric.Image.fromURL(&quot;http://fabricjs.com/assets/dragon.jpg&quot;, function(img) &#123; img.clipPath = g img.scaleToWidth(500) canvas.add(img) &#125;)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; åºåˆ—åŒ–ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - åºåˆ—åŒ– ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ æ‰€è°“çš„åºåˆ—åŒ–å…¶å®å°±æ˜¯å°†ç”»å¸ƒçš„å†…å®¹è½¬æˆ JSONï¼Œæ–¹ä¾¿ä¿å­˜ã€‚ ä½† Fabric.js é™¤äº†èƒ½å°†ç”»å¸ƒè½¬æˆå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥è¾“å‡º base64 å’Œ svgã€‚ è¾“å‡ºJSON 1234567891011121314151617181920212223&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;200&quot; height=&quot;200&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;) console.log(&#x27;canvas stringify &#x27;, JSON.stringify(canvas)) console.log(&#x27;canvas toJSON&#x27;, canvas.toJSON()) console.log(&#x27;canvas toObject&#x27;, canvas.toObject())&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; æ‰“å¼€æ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡ºã€‚ æœ¬ä¾‹åˆ†åˆ«ä½¿ç”¨äº† JSON.stringify() ã€canvas.toJSON() å’Œ canvas.toObject() è¿›è¡Œåºåˆ—åŒ–ä¸€ä¸ªç©ºç”»å¸ƒã€‚ Fabric.js æä¾›äº† toJSON å’Œ toObject ä¸¤ä¸ªæ–¹æ³•ï¼ŒæŠŠç”»å¸ƒåŠå†…å®¹è½¬æ¢æˆ JSON ã€‚ å› ä¸ºæœ¬ä¾‹è¾“å‡ºçš„æ˜¯ä¸€ä¸ªç©ºç”»å¸ƒï¼Œæ‰€ä»¥åœ¨è¾“å‡ºå†…å®¹é‡Œçš„ objects å­—æ®µæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚ å¦‚æœæœ‰èƒŒæ™¯ã€æœ‰å›¾å½¢ä¹‹ç±»çš„å…ƒç´ å­˜åœ¨ï¼Œobjects å¯¹è±¡é‡Œå°±ä¼šå‡ºç°ç›¸åº”çš„æ•°æ®ã€‚ è¯¦æƒ…å¯æŸ¥çœ‹ ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - åºåˆ—åŒ– è¾“å‡ºpngï¼ˆbase64ç‰ˆï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;200&quot; height=&quot;200&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; backgroundColor: &#x27;#a5dee5&#x27; &#125;) const rect = new fabric.Rect(&#123; left: 50, top: 50, height: 20, width: 20, fill: &#x27;green&#x27; &#125;) const circle = new fabric.Circle(&#123; left: 80, top: 80, radius: 40, fill: &quot;red&quot; &#125;) canvas.add(rect, circle) console.log(&#x27;toPng&#x27;, canvas.toDataURL(&#x27;png&#x27;)) // åœ¨æ§åˆ¶å°è¾“å‡º pngï¼ˆbase64ï¼‰ canvas.requestRenderAll()&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ canvas.toDataURL(&#39;png&#39;) å¯ä»¥è¾“å‡º png å›¾ç‰‡ã€‚ä½†è¿™ä¸ªæ“ä½œå¯èƒ½ä¼šæ‰“æ–­ canvas çš„æ¸²æŸ“ï¼Œæ‰€ä»¥ä¹‹åè¦å†æ‰§è¡Œä»¥ä¸‹ canvas.requestRenderAll() ã€‚ è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼Œå¯ä»¥æŠŠè¿™æ®µå¤åˆ¶åˆ°æµè§ˆå™¨åœ°å€æ‰“å¼€çœ‹çœ‹ 1data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAADGdJREFUeF7tnX9sVtUZx5+moFBXE0Q7i5gayKbYQiUKWNmUujIwDJ24jm7DRRAnjgkKjgUypo4FMiZocUycCGbiVtaJU0ago7PqxhDQINCKboFIBkWrQGK1oEC6nIZlBoG+99xz7nvPOZ/3X+55znk+3/MJvT/e++Y8s3tfu/CBAAROSSAHQdgZEDg9AQRhd0DgDAQQhO0BAQRhD0BAjwD/g+hxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBBAkkKBpU48AguhxY1QgBLwR5NltC4xHdkvpdOM1KegWAa8EWbVtoTH6Y0qnCYIYw+lsIQQ5TXQI4uyeNrpwBEEQoxvKt2IIgiC+7Wmj/SAIghjdUL4VQxAE8W1PG+0HQRDE6IbyrRiCIIhve9poPwiCIEY3lG/FEARBfNvTRvtBEAQxuqF8K4YgCOLbnjbaD4IgiNEN5VsxBEEQ3/a00X4QBEGMbijfiiEIgvi2p432gyAIYnRD+VYMQRDEtz1ttB8EQRCjG8q3Yl4JYjocvnJrmqh79bwRxD30rNgFAgjiQkqsMWsEECRr6JnYBQII4kJKrDFrBBAka+iZ2AUCCOJCSqwxawQQJGvomdgFAgjiQkqsMWsEECRr6JnYBQII4kJKGayxa2ur5O95R/Le3S9nH/hAzmptldwjR2TAwvmyfdoMOd6tm3yany+f9Dxf2i4slNaiS+Rofn4GlcM+BEEczb9g86tywZbN0nPbVunxZpOc07wvcidthb3kYHGJHCgdKO9fNUhahpRFruH7AARxJeH2dilas1p6r18nvRpelK4ftRpf+dEv5Etz+fWyd/hI2TNqtEhOjvE5XCuIIClPrEdTo/StrZE+tTXS5fDhxFZ7rHt32V1ZJbsqq+RQcUli86ZtIgRJWyIn1vPFjf+US59aKr3X12V9hXuHj5C3b5so75Vdk/W1JL0ABEmaeCfznde4Q4oXV8vFdWtTtjKR/4y4QZomT5WDJf1TtzZbC0IQW2Qj1s05flyumD9X+j2xJOLI5A/fecckeWPGLGnPzU1+8oRnRJCEgZ9qusKXG+TKOffLubt3pWA1mS3hwz595fXZD8r+68ozG+DoUQiS5eAGPPKQlCx6OMur0J++ccq9sv2e+/QLpHwkgmQpoC5tbVI2fUoqzzWiIlHnJhsXLJJjeXlRh6b+eATJQkTqjvfQuyeJOiH35aNO3Dc8uqTjDr1PHwRJOE11X2PY7bdK95aWhGe2P93hggJ5adkKOXR5sf3JEpoBQRICraZRj4QMmzDOSzn+h7FDkief9ubmIoIkJIj6s6pi7M1ey/FZSepXPufFn1sIkoAg6oS8omqMV+ccnWFT5yT1NaucP3FHkM6SNvDvX71rohdXq6KiUFe3/v7Y0qjDUnU8gliOw/X7HHHxuH6fBEHi7oAzjFd3yMvHj7M4gxulG5avcPaOO4JY2mPq2apRI8qdenzEEgpRj6WsqWtw8tktBLG0KwbOm+PEg4eW2v9cWfWA49aZs5Oaztg8CGIM5f8LqTvkI28caaGy2yXXvbDOuUflEcTCngv1qlVnKF28qoUgnaUa8d/VNwG/9r3KiKPCOfxvz9Q69c1EBDG8N6+9c0IqviZruC1j5dTXd195fJmxerYLIYhBwupBxBtGjzBY0c9Sa1fXOfOsFoIY3INXPfBT+fLvlhus6Gepf31/vLz2wC+caA5BTMXU3i7fLvlSoq/mMbX0pOuoVwr9sfHfTrx3C0EM7Y6iv7wgQ6fcZaia/2U2LHpM9nzjxtQ3iiCGIho69YdStPp5Q9X8L7Nn9E2yofo3qW8UQQxFVDngMiuvAzW0vNSVUa85rd3+VurWdfKCEMRARAWbNkrFd75loFJYJeprnpWWwVenumkEMRBP8eJFUrrglwYqhVVi2/SfSNPkKaluGkEMxHPtD8ZL7/q/GqgUVom9FV+XV36b7sviCGJgT35z6CDJ299soFJYJT7udZE8/4/NqW4aQWLGo37ZqbL0sphVwh1eu+2tVP/SFYLE3Js82h4PYNofgUeQePl2nHuocxA+egTUOYg6F0nrB0FiJtN35e9lyMwfx6wS7vBN834lu8Z+N7UAECRmNP2WPi4D5/48ZpVwh2+d9TPZOfHO1AJAkJjRlPy6uuOnlvnoEVA/Ud34o6l6gxMYhSAxIfevXiD9qxfGrBLu8B1Tp8uOqdNSCwBBYkbD/yDxAPI/SDx+qR/NOUi8iDgHiccv9aO5ihUvIq5ixeOX+tHcB4kXEfdB4vFL/WjupMeLiDvp8filfjTPYsWLiGex4vFzYvRNXxks5zTvc2KtaVpkW2Ev+fOGLWla0ufWwmVeA/HwfRA9iHwfRI+bc6P4RqFeZHyjUI+bc6MKNr8qFVW3OLfubC+4/g9/kpYhZdlexhnn508sQ/HwVpNoIHmrSTRezh/Ne7GiRch7saLxcv5o3qwYLULerBiNl/tH827ejDPk3bwZo/LrQN7unlmevN09M07eHcXvg2QWKb8PkhknL4/iF6bOHCu/MOXlts+8KX6j8Mys+I3CzPeSt0fyK7enjpZfufV2y0drjEfgT80r7Y+2n2rV3EmPtvczPnrgvDnS74klGR/v+4E775gkW2fOdq5NBLEUWc7x4zJqRLmcu3uXpRncKfthn76ypq5B2nNz3Vn0iZUiiMXICl9ukPLx4yzO4EbphuUrZP915W4s9qRVIojl2AY88pCULHrY8izpLd845V7Zfs996V1gJytDkASiC/WqlotXrU7eDgiSgCBd2tqkomqMqKtboXwOlvSX+ppVciwvz+mWESSh+PL3vCMVY2+W7i0tCc2YvWkOFxRI/crnpLXokuwtwtDMCGIIZCZl1LNaw26/1WtJlBwvLVshhy4vzgRJ6o9BkIQj6vFmkwybMM5LSTrkePJpOVRckjBVe9MhiD22p62s/twaevckr85J1DnHhkeXePFn1WeDQ5AsCKKmVCfuZdOnyMV1a7O0AnPTqqtVGxcscv6E/FREEMTcPtGq5Pp9Etfvc3QWGoJ0RiiBf1d33K+cc79Tj6Wox0den/2gs3fIM40VQTIlZfk49ezWFfPnOvGAo3rw8I0Zs5x8tipqjAgSlZjl49XNxOLF1ak8N1HnGk2Tp4o6IQ/lgyApTVp9M/HSp5ZK7/V1WV+h+prs27dNlPfKrsn6WpJeAIIkTTzifOrmYt/aGulTWyNdDh+OOFr/cPVqnt2VVbKrssqr+xpRiSBIVGLZOr69XYrWrJbe69dJr4YXpetHrcZXol4H2lx+vewdPlL2jBotkpNjfA7XCiKIa4mdWG/Bpo1ywWtbpOe2rXJeU6Pk7W+O3MnHvS7qeCTkQOlAeX/QYGkZfHXkGr4PQBBPEla/dKXu0Oe9u1/OPvCBnNXaKrlHjoi6Oqa+yXe8Wzf5ND9fPul5vrRdWNhxx/tofr4n3dtrA0HssaWyBwQQxIMQacEeAQSxx5bKHhBAEA9CpAV7BBDEHlsqe0AAQTwIkRbsEUAQe2yp7AEBBPEgRFqwRwBB7LGlsgcEEMSDEGnBHgEEsceWyh4QQBAPQqQFewQQxB5bKntAAEE8CJEW7BFAEHtsqewBAQTxIERasEcAQeyxpbIHBBDEgxBpwR4BBLHHlsoeEEAQD0KkBXsEEMQeWyp7QABBPAiRFuwRQBB7bKnsAQEE8SBEWrBHAEHssaWyBwQQxIMQacEeAQSxx5bKHhBAEA9CpAV7BBDEHlsqe0AAQTwIkRbsEUAQe2yp7AEBBPEgRFqwRwBB7LGlsgcEEMSDEGnBHgEEsceWyh4QQBAPQqQFewQQxB5bKntAAEE8CJEW7BFAEHtsqewBgf8Coc6ZjF61hZ4AAAAASUVORK5CYII= è¾“å‡º SVG 12345678910111213141516171819202122232425262728293031323334353637383940&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;200&quot; height=&quot;200&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;, &#123; backgroundColor: &#x27;#a5dee5&#x27; &#125;) const rect = new fabric.Rect(&#123; left: 50, top: 50, height: 20, width: 20, fill: &#x27;green&#x27; &#125;) const circle = new fabric.Circle(&#123; left: 80, top: 80, radius: 40, fill: &quot;red&quot; &#125;) canvas.add(rect, circle) console.log(canvas.toSVG()) // è¾“å‡º SVG&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; è¾“å‡º SVG å¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨ canvas.toSVG() å³å¯ã€‚ è¾“å‡ºï¼š 1234567891011121314&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; version=&quot;1.1&quot; width=&quot;200&quot; height=&quot;200&quot; viewBox=&quot;0 0 200 200&quot; xml:space=&quot;preserve&quot;&gt;&lt;desc&gt;Created with Fabric.js 4.6.0&lt;/desc&gt;&lt;defs&gt;&lt;/defs&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;#a5dee5&quot;&gt;&lt;/rect&gt;&lt;g transform=&quot;matrix(1 0 0 1 60.5 60.5)&quot; &gt;&lt;rect style=&quot;stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,128,0); fill-rule: nonzero; opacity: 1;&quot; x=&quot;-10&quot; y=&quot;-10&quot; rx=&quot;0&quot; ry=&quot;0&quot; width=&quot;20&quot; height=&quot;20&quot; /&gt;&lt;/g&gt;&lt;g transform=&quot;matrix(1 0 0 1 120.5 120.5)&quot; &gt;&lt;circle style=&quot;stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,0,0); fill-rule: nonzero; opacity: 1;&quot; cx=&quot;0&quot; cy=&quot;0&quot; r=&quot;40&quot; /&gt;&lt;/g&gt;&lt;/svg&gt; ååºåˆ—åŒ–ğŸ æœ¬èŠ‚æ¡ˆä¾‹åœ¨çº¿é¢„è§ˆ - ååºåˆ—åŒ– ğŸ æœ¬èŠ‚ä»£ç ä»“åº“ ååºåˆ—åŒ–å°±æ˜¯æŠŠ JSON æ•°æ®æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šã€‚ é€šå¸¸æŠŠä»åå°è¯·æ±‚å›æ¥çš„æ•°æ®æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šã€‚ 123456789101112131415161718192021222324&lt;template&gt; &lt;div&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;200&quot; height=&quot;200&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &#x27;vue&#x27;import &#123; fabric &#125; from &#x27;fabric&#x27;function init() &#123; const str = &#x27;&#123;&quot;version&quot;:&quot;4.6.0&quot;,&quot;objects&quot;:[&#123;&quot;type&quot;:&quot;rect&quot;,&quot;version&quot;:&quot;4.6.0&quot;,&quot;originX&quot;:&quot;left&quot;,&quot;originY&quot;:&quot;top&quot;,&quot;left&quot;:50,&quot;top&quot;:50,&quot;width&quot;:20,&quot;height&quot;:20,&quot;fill&quot;:&quot;green&quot;,&quot;stroke&quot;:null,&quot;strokeWidth&quot;:1,&quot;strokeDashArray&quot;:null,&quot;strokeLineCap&quot;:&quot;butt&quot;,&quot;strokeDashOffset&quot;:0,&quot;strokeLineJoin&quot;:&quot;miter&quot;,&quot;strokeUniform&quot;:false,&quot;strokeMiterLimit&quot;:4,&quot;scaleX&quot;:1,&quot;scaleY&quot;:1,&quot;angle&quot;:0,&quot;flipX&quot;:false,&quot;flipY&quot;:false,&quot;opacity&quot;:1,&quot;shadow&quot;:null,&quot;visible&quot;:true,&quot;backgroundColor&quot;:&quot;&quot;,&quot;fillRule&quot;:&quot;nonzero&quot;,&quot;paintFirst&quot;:&quot;fill&quot;,&quot;globalCompositeOperation&quot;:&quot;source-over&quot;,&quot;skewX&quot;:0,&quot;skewY&quot;:0,&quot;rx&quot;:0,&quot;ry&quot;:0&#125;,&#123;&quot;type&quot;:&quot;circle&quot;,&quot;version&quot;:&quot;4.6.0&quot;,&quot;originX&quot;:&quot;left&quot;,&quot;originY&quot;:&quot;top&quot;,&quot;left&quot;:80,&quot;top&quot;:80,&quot;width&quot;:80,&quot;height&quot;:80,&quot;fill&quot;:&quot;red&quot;,&quot;stroke&quot;:null,&quot;strokeWidth&quot;:1,&quot;strokeDashArray&quot;:null,&quot;strokeLineCap&quot;:&quot;butt&quot;,&quot;strokeDashOffset&quot;:0,&quot;strokeLineJoin&quot;:&quot;miter&quot;,&quot;strokeUniform&quot;:false,&quot;strokeMiterLimit&quot;:4,&quot;scaleX&quot;:1,&quot;scaleY&quot;:1,&quot;angle&quot;:0,&quot;flipX&quot;:false,&quot;flipY&quot;:false,&quot;opacity&quot;:1,&quot;shadow&quot;:null,&quot;visible&quot;:true,&quot;backgroundColor&quot;:&quot;&quot;,&quot;fillRule&quot;:&quot;nonzero&quot;,&quot;paintFirst&quot;:&quot;fill&quot;,&quot;globalCompositeOperation&quot;:&quot;source-over&quot;,&quot;skewX&quot;:0,&quot;skewY&quot;:0,&quot;radius&quot;:40,&quot;startAngle&quot;:0,&quot;endAngle&quot;:6.283185307179586&#125;],&quot;background&quot;:&quot;#ddd&quot;&#125;&#x27; // åˆå§‹åŒ–ç”»å¸ƒ const canvas = new fabric.Canvas(&#x27;canvas&#x27;) // ååºåˆ—åŒ– canvas.loadFromJSON(str)&#125;onMounted(() =&gt; &#123; init()&#125;)&lt;/script&gt; ä½¿ç”¨ canvas.loadFromJSON() å¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œé‡Œé¢ä¼ å…¥ä¸€ä¸ª JSONæ ¼å¼ çš„å­—ç¬¦ä¸² å³å¯ã€‚ æœ¬ä¾‹çš„ str ä¿å­˜äº†ä¸€ä¸ª Fabric.js å¯¼å‡ºçš„æ•°æ®ã€‚","tags":["canvas","fabric.js"],"categories":["canvas"]},{"title":"ä¸€ä¸ªå…è´¹å­¦ä¹ ç”Ÿè¯çš„è½»åº”ç”¨","path":"/2025/03/26/ä¸€ä¸ªå…è´¹å­¦ä¹ ç”Ÿè¯çš„è½»åº”ç”¨/","content":"æœ€è¿‘æˆ‘å¼€å‘äº†ä¸€ä¸ªå¸®åŠ©å­¦ä¹ è¯­æ–‡å­—è¯çš„å°åº”ç”¨ã€‚ å¦‚æœä½ å®¶æœ‰æ­£åœ¨è®¤å­—å­¦è¯çš„å­¦ç«¥ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šå¯¹ä½ æœ‰æ‰€å¸®åŠ© :) å¼€å‘èƒŒæ™¯å¼€å‘è¿™ä¸ªç¨‹åºçš„åˆè¡·æ˜¯å¸Œæœ›èƒ½ç»™å­¦ç”Ÿæœ‹å‹çš„è¯­æ–‡å­¦ä¹ æä¾›ä¸€äº›å¸®åŠ©ã€‚ å¦‚æœä½ æ˜¯ä¸€ä½å®¶é•¿å¹¶ä¸”æœ‰æ£€æŸ¥å­©å­ä½œä¸šçš„ç»å†ï¼Œé‚£ä¹ˆå¯¹äºæ—¶ä¸æ—¶å†’å‡ºæ¥ä¸€ä¸ªé”™åˆ«å­—ï¼Œæ—¶ä¸æ—¶ç”¨æ‹¼éŸ³ä»£æ›¿æ–‡å­—ï¼Œæ—¶ä¸æ—¶è¯è¯­æ»¥ç”¨è®©äººå•¼ç¬‘çš†éï¼Œè¿™äº›æƒ…å†µåº”è¯¥ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚é¢å¯¹è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘å¸¸å¸¸æƒ³ï¼šæ€ä¹ˆæ‰èƒ½è®©å­©å­çš„è¯­æ–‡å­¦ä¹ æ›´è½»æ¾ï¼Œå°‘çŠ¯ä¸€äº›é”™è¯¯å‘¢ï¼Ÿå¦‚æœæœ‰ä¸€ä¸ªç¨‹åºèƒ½æŠŠç»å¸¸é”™çš„å­—è¯ä¿å­˜ï¼Œç„¶åå¤šçœ‹å’Œå¤šç»ƒï¼Œåº”è¯¥ä¼šæœ‰æ‰€æ”¹è§‚å§ã€‚ æ­¤å¤–ï¼Œç°åœ¨å­¦ç”Ÿçš„ä¹¦å†™æ°´å¹³ä¹Ÿæ˜¯ä¸¤æåˆ†åŒ–ï¼Œæœ‰çš„å­—å†™å¾—å¾ˆå¥½çœ‹ï¼Œæœ‰çš„å†™çš„å¾ˆæ½¦è‰ï¼›ä¸€ç§æƒ…å†µæ˜¯æ€åº¦çš„é—®é¢˜ï¼Œä¸€ç§æƒ…å†µæ˜¯å­¦ç”Ÿå¯¹æ±‰å­—çš„å­—å‹å’Œç»“æ„æ²¡æœ‰æ¸…æ™°çš„è®¤è¯†ã€‚å¯¹äºåè€…ï¼Œå¦‚æœèƒ½å¤Ÿæœ‰è§„èŒƒä¹¦å†™çš„å¤§å­—å·çš„å¡ç‰‡è¿›è¡Œå¯¹ç…§ä¸´æ‘¹ï¼Œé‚£ä¹ˆå¯¹äºæé«˜ä¹¦å†™æ°´å¹³åº”è¯¥ä¼šæœ‰æ‰€å¸®åŠ©ï¼›å¯¹äºå‰è€…ï¼Œåªèƒ½é å®¶é•¿çš„æ™ºæ…§ï¼Œå…ˆç«¯æ­£å­¦ä¹ æ€åº¦äº† :( åŸºäºä»¥ä¸Šçš„ä¸€äº›æƒ³æ³•ï¼Œæ‰€ä»¥å°±åšäº†è¿™ä¹ˆä¸ªå°åº”ç”¨(http://pzj.freesite.online) åŠŸèƒ½ä»‹ç»ç”Ÿè¯æœ¬ç®¡ç†ç³»ç»Ÿæœ‰å…±äº«çš„ç”Ÿè¯æœ¬ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„ç”Ÿè¯æœ¬ã€‚ å…±äº«çš„ç”Ÿè¯æœ¬ï¼Œç›®å‰åªæœ‰å¹¼å„¿å›­å’Œåˆä¸­éƒ¨åˆ†ï¼Œæœ‰å…¶ä»–éœ€æ±‚å¯ç•™è¨€ã€‚ ç”Ÿè¯æœ¬åˆ—è¡¨ä¸­ï¼Œå¯è®¾ç½®è‡ªå·±çš„ç”Ÿè¯æœ¬ä¸ºå…±äº«æˆ–ç§æœ‰ã€‚å…±äº«çš„ç”Ÿè¯æœ¬ï¼Œå…¶ä»–ç”¨æˆ·ä¹Ÿå¯ä»¥æŸ¥çœ‹ï¼Œä½†ä¸å¯ç¼–è¾‘ã€‚ ç”Ÿè¯æœ¬åˆ—è¡¨ å¡«å…¥åŸºæœ¬ä¿¡æ¯ï¼Œåˆ›å»ºç”Ÿè¯æœ¬ã€‚ åˆ›å»ºç”Ÿè¯æœ¬ æ‰‹åŠ¨è¾“å…¥ç”Ÿè¯æˆ–æ‰¹é‡ä¸Šä¼ ç”Ÿè¯ åˆ›å»ºç”Ÿè¯ æŸ¥çœ‹ç”Ÿè¯æœ¬ä¸­çš„æ‰€æœ‰è¯è¯­ æŸ¥çœ‹æ‰€æœ‰è¯è¯­ æ ‡ç­¾ç®¡ç†ç”Ÿè¯æœ¬ä¸­çš„ç”Ÿè¯å¯ä»¥æ‰“æ ‡ç­¾ï¼Œä¹‹åå¯ä»¥æ ¹æ®æ ‡ç­¾æœç´¢ï¼Œè¿›è¡Œé’ˆå¯¹çš„ç»ƒä¹ ã€‚ æ ‡ç­¾ç®¡ç† è¯è¯­è®¤è¯»è¯è¯­è®¤è¯»é¡µé¢åŒ…æ‹¬ï¼šå­—ä½“åˆ‡æ¢ã€æœç´¢è¿‡æ»¤ã€æ‰“æ ‡ç­¾å’Œè¯è¯­å¡ç‰‡ç­‰åŠŸèƒ½æ¨¡å—ã€‚é‡‡ç”¨å­—ä½“5ï¼Œå¯ä»¥æŸ¥çœ‹è¯è¯­çš„æ‹¼éŸ³ã€å«ä¹‰å’Œå­—å‹ã€‚ è¯è¯­è®¤è¯» æä¾›å¤šç§å­—ä½“ï¼Œå¯åˆ‡æ¢åˆ°åˆé€‚å­—ä½“ï¼Œè¿›è¡Œä¹¦å†™ç»ƒä¹  å­—ä½“åˆ‡æ¢ å­—ä½“åˆ‡æ¢ é¦–å…ˆåº”è¯¥é€‰æ‹©ç”Ÿè¯æœ¬ï¼Œç³»ç»Ÿå†…ç½®å¦‚ä¸‹å…±äº«ç”Ÿè¯æœ¬ é€‰æ‹©ç”Ÿè¯æœ¬ æ¯ä¸ªç”Ÿè¯æœ¬å†…ï¼Œåˆå¯ç»†åˆ†ä¸ºä¸åŒçš„è¯¾æ–‡ é€‰æ‹©è¯¾æ–‡ åœ¨ç¿»é¡µæŸ¥çœ‹ç”Ÿè¯çš„æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥ç»™è¯è¯­æ‰“æ ‡ç­¾ï¼Œä¹‹åå°±èƒ½é€šè¿‡æ ‡ç­¾è¿›è¡Œç­›é€‰äº†ã€‚ æ‰“æ ‡ç­¾ ç”Ÿè¯æµ‹è¯•ç”Ÿè¯æµ‹è¯•é¡µé¢å’Œè¯è¯­è®¤è¯»é¡µé¢ç±»ä¼¼ï¼Œä½†å¢åŠ äº†æµ‹è¯•åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æµ‹è¯•è‡ªå·±è®¤è¯»çš„æ•ˆæœã€‚ç‚¹å‡»å¡ç‰‡ï¼Œå¯ä¸´æ—¶å»æ‰è’™å±‚ï¼ŒæŸ¥çœ‹ç­”æ¡ˆã€‚ ç”Ÿè¯æµ‹è¯• ç™»å½•æ³¨å†Œåªéœ€åŸºæœ¬ä¿¡æ¯ï¼Œå³å¯æ³¨å†Œå…è´¹ä½¿ç”¨ï¼Œé‚®ç®±æœ€å¥½å¡«çœŸå®çš„ï¼Œæ–¹ä¾¿æ‰¾å›å¯†ç ã€‚ ç™»å½•æ³¨å†Œ æ€»ç»“è¿™æ˜¯ä¸€ä¸ªç”¨PHPå¼€å‘çš„ç®€å•åº”ç”¨ï¼Œä¸šåŠ¡é€»è¾‘ä¸æ˜¯å¾ˆå¤æ‚ï¼Œä¸è¿‡å®ƒä¹Ÿæ¶‰åŠäº†å‰åç«¯å¼€å‘ï¼Œæ•°æ®åº“è®¾è®¡ï¼Œç™»å½•é‰´æƒå’Œéƒ¨ç½²ç­‰ç ”å‘ç¯å¢ƒï¼Œä¹Ÿç®—æ˜¯ä¸€æ¬¡å®Œæ•´çš„å¼€å‘å®è·µå§ :) é€šè¿‡æ£é¼“è¿™ä¸ªå°åº”ç”¨ï¼Œä¸ªäººä½“ä¼šæœ€æ·±çš„æ˜¯ï¼šæ´å¯Ÿéœ€æ±‚æ—¶ç¨‹åºå‘˜ä¸€é¡¹å¾ˆé‡è¦çš„æŠ€èƒ½ï¼Œå‘ç°éœ€æ±‚å¹¶ä¸”èƒ½å¤Ÿç”¨è‡ªå·±æŒæ¡çš„çŸ¥è¯†å»è§£å†³é—®é¢˜ï¼Œæ‰èƒ½è·å¾—æˆå°±æ„Ÿï¼Œäº§ç”Ÿæ›´å¤§çš„ä»·å€¼ã€‚ æœ€åï¼Œæ¬¢è¿æœ‰éœ€è¦çš„æœ‹å‹ä½¿ç”¨ï¼Œä¹Ÿæ¬¢è¿æå‡ºå®è´µæ„è§ã€‚(è®¿é—®åœ°å€: http://pzj.freesite.online)","tags":["myapp"]},{"title":"å¦‚ä½•ç”¨vimdiffè§£å†³åˆå¹¶å†²çª","path":"/2025/03/21/å¦‚ä½•ç”¨vimdiffè§£å†³åˆå¹¶å†²çª/","content":"è½¬è½½è‡ª: https://juejin.cn/post/7351300787648921619 vimdiff ä»‹ç»vimdiff ç­‰åŒäº vim -d å‘½ä»¤ï¼Œå³ Vim ç¼–è¾‘å™¨çš„ diff æ¨¡å¼ã€‚ è¯¥å‘½ä»¤åé¢é€šå¸¸ä¼šæ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œè¿™äº›æ–‡ä»¶ä¼šåŒæ—¶åœ¨ Vim ç¼–è¾‘å™¨çš„åˆ†å‰²çª—å£ä¸­æ‰“å¼€ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºæ–‡ä»¶ä¹‹é—´å†…å®¹æœ‰å·®å¼‚çš„éƒ¨åˆ†ã€‚ åŒæ—¶ï¼Œè¯¥æ¨¡å¼ä¸‹è¿˜æä¾›éƒ¨åˆ†å¿«æ·æŒ‰é”®ç”¨äºå®Œæˆæ–‡ä»¶å†…å®¹çš„åˆå¹¶ç­‰æ“ä½œã€‚ å¯åŠ¨ vimdiffvimdiff å‘½ä»¤å¸¸ç”¨äºç¼–è¾‘åŒä¸€æ–‡ä»¶çš„ä¸åŒå†å²ç‰ˆæœ¬ï¼Œå¯¹å„æ–‡ä»¶çš„å†…å®¹è¿›è¡Œæ¯”å¯¹ä¸è°ƒæ•´ã€‚å¦‚ä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼š 123456789$ cat file1Line oneLine 2Line threeLine 4Line 5Line 6 123456789$ cat file2Line 1Line 2Line 3Line 4Line 5Line 6Line 7Line 8 å¯ä»¥ä½¿ç”¨ vim -O2 file1 file2 å‘½ä»¤ï¼Œåœ¨å·¦å³æ’åˆ—çš„ä¸¤ä¸ªçª—å£ä¸­åŒæ—¶æ‰“å¼€ file1 å’Œ file2 ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è€Œ vimdiff file1 file2 å‘½ä»¤ä¼šä»¥åŒæ ·çš„å½¢å¼æ‰“å¼€è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ç”¨ä¸åŒçš„èƒŒæ™¯è‰²é«˜äº®æ˜¾ç¤ºå½¼æ­¤é—´æœ‰å·®åˆ«çš„å†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š ä»ä¸Šé¢çš„ä¸¤å¹…æˆªå›¾ä¸­å¯ä»¥å¾—å‡º vimdiff æ ‡è®°å·®åˆ«å†…å®¹æ—¶çš„å‡ ä¸ªè§„åˆ™ï¼š åªåœ¨æŸä¸€ä¸ªæ–‡ä»¶ä¸­å­˜åœ¨çš„è¡ŒèƒŒæ™¯è‰²è®¾ç½®ä¸ºè“è‰²ï¼Œè€Œå¦ä¸€æ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®åˆ™è¢«æ ‡è®°ä¸ºç»¿è‰²ã€‚ï¼ˆæˆ–è€…è¯´ï¼Œç›¸å¯¹äºå¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå½“å‰æ–‡ä»¶ä¸­â€œå¤šä½™â€çš„è¡Œæ ‡è®°ä¸ºè“è‰²ï¼Œâ€œç¼ºå°‘â€çš„è¡Œåˆ™æ ‡è®°ä¸ºç»¿è‰²ï¼‰ ä¸¤ä¸ªæ–‡ä»¶ä¸­åŒæ—¶å­˜åœ¨ä½†æ˜¯å†…å®¹æœ‰å·®å¼‚çš„è¡Œï¼Œéƒ½æ ‡è®°ä¸ºç²‰è‰²ï¼Œè€Œå¼•èµ·å·®å¼‚çš„æ–‡å­—æ ‡è®°ä¸ºçº¢è‰² é™¤äº† vimdiff FILE_LEFT FILE_RIGHT æˆ–è€… vim -d FILE_LEFT FILE_RIGHT çš„å½¢å¼å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨ Vim ä¸­è¾“å…¥å‘½ä»¤è¿›å…¥ diff æ¨¡å¼ã€‚ æ¯”å¦‚å…ˆè¿›å…¥ Vim ç¼–è¾‘ FILE_LEFT æ–‡ä»¶ï¼ˆvim FILE_LEFTï¼‰ï¼Œå†è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›å…¥ diff æ¨¡å¼ï¼š:vertical diffsplit FILE_RIGHT å…‰æ ‡ç§»åŠ¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ—ä¸¤ç§å¿«æ·é”®ï¼Œåœ¨æ–‡ä»¶çš„å„ä¸ªå·®å¼‚ç‚¹ä¹‹é—´å‰åç§»åŠ¨ï¼š ], cï¼šè·³è½¬åˆ°ä¸‹ä¸ªå·®å¼‚ç‚¹ [, cï¼šè·³è½¬åˆ°ä¸Šä¸ªå·®å¼‚ç‚¹ è‡³äºå…‰æ ‡åœ¨ä¸¤ä¸ªçª—å£ä¹‹å‰çš„åˆ‡æ¢ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‰é”®ï¼š Ctrl-w, lï¼šå…‰æ ‡åˆ‡æ¢åˆ°å³ä¾§çš„çª—å£ Ctrl-w, hï¼šå…‰æ ‡åˆ‡æ¢åˆ°å·¦ä¾§çš„çª—å£ Ctrl-w, wï¼šå…‰æ ‡åœ¨ä¸¤ä¸ªçª—å£é—´å½¼æ­¤åˆ‡æ¢ å†…å®¹åˆå¹¶å¯ä»¥ä½¿ç”¨ d, p ï¼ˆå³ diff putï¼‰å‘½ä»¤ï¼Œå°†å½“å‰å·®å¼‚ç‚¹ä¸­çš„å†…å®¹è¦†ç›–åˆ°å¦ä¸€æ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®ã€‚å¦‚å½“å…‰æ ‡ä½äºå·¦ä¾§æ–‡ä»¶ï¼ˆfile1ï¼‰ä¸­çš„ç¬¬ä¸€è¡Œæ—¶ï¼Œä¾æ¬¡æŒ‰ä¸‹ dã€p é”®ï¼Œåˆ™ file1 ä¸­çš„ Line one è¢«æ¨é€åˆ°å³ä¾§ï¼Œå¹¶æ›¿æ¢æ‰ file2 ä¸­å¯¹åº”ä½ç½®ä¸Šçš„ Line 1 ã€‚æˆªå›¾å¦‚ä¸‹ï¼š è€Œ d, o ï¼ˆå³ diff obtainï¼‰å‘½ä»¤å¯ä»¥å°†å¦ä¸€çª—å£ä¸­å·®å¼‚ç‚¹å¤„çš„å†…å®¹æ‹‰å–åˆ°å½“å‰ä½ç½®å¹¶è¿›è¡Œæ›¿æ¢æ“ä½œã€‚æˆªå›¾å¦‚ä¸‹ï¼š å³åœ¨ file1 çš„ç¬¬ä¸€è¡Œæ‰§è¡Œ d o å‘½ä»¤åï¼Œfile2 ä¸­çš„ç¬¬ä¸€è¡Œå†…å®¹ Line 1 è¢«æ‹‰å–åˆ° file1 ä¸­å¹¶æ›¿æ¢æ‰åŸæ¥ä½ç½®ä¸Šçš„ Line oneã€‚ å¤šæ–‡ä»¶ç¼–è¾‘vimdiff å®é™…ä¸Šæ˜¯ Vim ç¼–è¾‘å™¨çš„ diff æ¨¡å¼ï¼Œå› æ­¤é€‚ç”¨äº Vim ç¼–è¾‘å™¨çš„å‘½ä»¤å’Œå¿«æ·é”®ä¹ŸåŒæ ·å¯ä»¥åœ¨è¯¥æ¨¡å¼ä¸‹ä½¿ç”¨ã€‚å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤å¦‚ä¸‹ï¼š :qaï¼šé€€å‡ºæ‰€æœ‰æ–‡ä»¶ :waï¼šä¿å­˜æ‰€æœ‰æ–‡ä»¶ :wqaï¼šä¿å­˜å¹¶é€€å‡ºæ‰€æœ‰æ–‡ä»¶ qa!ï¼šå¼ºåˆ¶é€€å‡ºï¼ˆä¸ä¿å­˜ï¼‰æ‰€æœ‰æ–‡ä»¶ z oï¼šæŸ¥çœ‹è¢«æŠ˜å çš„å†…å®¹ z cï¼šé‡æ–°æŠ˜å  å…¶ä»–å¸¸ç”¨çš„å‘½ä»¤ä¸å¿«æ·é”®å¯å‚è€ƒ Vim é€ŸæŸ¥æ‰‹å†Œ vimdiff è§£å†²çªä½¿ç”¨ vimdiff ä½œä¸º Git çš„åˆå¹¶å·¥å…·ç¡®å®å¯èƒ½ä¼šè®©æ–°æ‰‹æ„Ÿåˆ°å›°æƒ‘ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œä¸€æ—¦æŒæ¡äº†å®ƒï¼Œå°±å¯ä»¥éå¸¸é«˜æ•ˆåœ°è¿›è¡Œä»£ç åˆå¹¶å’Œæ¯”è¾ƒ Gité…ç½®åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“å¦‚ä½•å°†vimdiffè®¾ç½®ä¸ºGitçš„åˆå¹¶å·¥å…·ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š 123git config merge.tool vimdiffgit config merge.conflictstyle diff3git config mergetool.prompt false è¿™å°†æŠŠGitè®¾ç½®ä¸ºé»˜è®¤çš„åˆå¹¶å·¥å…·ï¼Œåœ¨åˆå¹¶æ—¶æ˜¾ç¤ºå…±åŒç¥–å…ˆï¼Œå¹¶ç¦ç”¨æ‰“å¼€vimdiffçš„æç¤ºã€‚ git config merge.tool vimdiff: è¿™ä¼šå°† vimdiff è®¾ç½®ä¸ºé»˜è®¤çš„åˆå¹¶å·¥å…·ã€‚ git config merge.conflictstyle diff3: è¿™ä¼šå‘Šè¯‰ Git åœ¨åˆå¹¶å†²çªæ—¶æ˜¾ç¤ºå…±åŒç¥–å…ˆçš„ç‰ˆæœ¬ï¼Œè¿™æ ·å°±å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªåˆ†æ”¯ä»¥åŠå®ƒä»¬çš„å…±åŒèµ·ç‚¹çš„å†…å®¹ã€‚ git config mergetool.prompt false: è¿™ä¼šç¦ç”¨æ‰“å¼€åˆå¹¶å·¥å…·æ—¶çš„æç¤ºï¼ŒGit å°†è‡ªåŠ¨æ‰“å¼€ vimdiff è€Œä¸è¯¢é—®æ˜¯å¦æƒ³è¦ç»§ç»­ã€‚ å®Œæˆè¿™äº›è®¾ç½®åï¼Œå½“è¿è¡Œ `git mergetool` å‘½ä»¤æ¥è§£å†³åˆå¹¶å†²çªæ—¶ï¼ŒGit å°†è‡ªåŠ¨ä½¿ç”¨ `vimdiff` æ¥æ‰“å¼€æœ‰å†²çªçš„æ–‡ä»¶ã€‚ åˆ›å»ºå†²çªä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­ä¸¾ä¾‹ï¼š åˆ›å»ºä¸€ä¸ªåä¸ºâ€zooâ€çš„ç›®å½•ï¼Œå¹¶è¿›å…¥â€zooâ€ç›®å½•ï¼Œç„¶ååˆå§‹åŒ–Gitä»“åº“ï¼Œæœ€åæ–°å»ºä¸€ä¸ªanimals.txtã€‚ 1234mkdir zoo # cd zoogit initvi animals.txt åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›åŠ¨ç‰©ä¿¡æ¯åå¹¶ä¿å­˜ï¼š 1234bash ä»£ç è§£è¯»å¤åˆ¶ä»£ç catdogoctopusoctocat ä¹‹åæäº¤è¯¥æ–‡ä»¶ 12git add animals.txtgit commit -m &quot;Initial commit&quot; æ·»åŠ æ–‡ä»¶animals.txtåˆ°Gitï¼Œæäº¤æ–‡ä»¶ï¼Œå¹¶é™„ä¸Šæ¶ˆæ¯â€Initial commitâ€ã€‚ åˆ›å»ºä¸€ä¸ªåä¸ºâ€octodogâ€çš„åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°â€octodogâ€åˆ†æ”¯ï¼Œå¹¶æ‰“å¼€æ–‡ä»¶animals.txtï¼Œå¹¶å°†â€octopusâ€æ”¹ä¸ºâ€octodogâ€ã€‚ 123git branch octodoggit checkout octodogvi animals.txt # let&#x27;s change octopus to octodog æ·»åŠ æ–‡ä»¶animals.txtåˆ°Gitï¼Œæäº¤æ–‡ä»¶ï¼Œå¹¶é™„ä¸Šæ¶ˆæ¯â€Replace octopus with an octodogâ€ã€‚ add animals.txt1git commit -m &quot;Replace octopus with an octodog&quot; åˆ‡æ¢åˆ°â€masterâ€åˆ†æ”¯ï¼Œæ‰“å¼€æ–‡ä»¶animals.txtï¼Œå¹¶å°†â€octopusâ€æ”¹ä¸ºâ€octomanâ€ã€‚ 12git checkout mastervi animals.txt # let&#x27;s change octopus to octoman æ·»åŠ æ–‡ä»¶animals.txtåˆ°Gitï¼Œæäº¤æ–‡ä»¶ï¼Œå¹¶é™„ä¸Šæ¶ˆæ¯â€Replace octopus with an octomanâ€ã€‚ 12git add animals.txtgit commit -m &quot;Replace octopus with an octoman&quot; åˆå¹¶â€octodogâ€åˆ†æ”¯åˆ°â€masterâ€åˆ†æ”¯ã€‚ 1git merge octodog # merge octodog into master æ­¤æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªåˆå¹¶é”™è¯¯ï¼š 123Auto-merging animals.txtCONFLICT (content): Merge conflict in animals.txtAutomatic merge failed; fix conflicts and then commit the result. è¿™è¡¨æ˜åœ¨animals.txtæ–‡ä»¶ä¸­å­˜åœ¨åˆå¹¶å†²çªã€‚ è§£å†³å†²çªè§£å†³è¿™ä¸ªå†²çªå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1git mergetool æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼ŒGitä¼šå°è¯•ä½¿ç”¨vimdiffä½œä¸ºåˆå¹¶å·¥å…·æ¥è§£å†³å†²çªã€‚vimdiffä¼šæ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºä¸¤ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä¸­é—´ä¼šæœ‰å†²çªæ ‡è®°ã€‚éœ€è¦æ‰‹åŠ¨æ¯”è¾ƒè¿™ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ¥æ›¿æ¢å†²çªçš„éƒ¨åˆ†ã€‚ä½¿ç”¨ hjkl é”®åœ¨çª—å£ä¹‹é—´å¯¼èˆªï¼Œä½¿ç”¨ :diffget LOCALã€:diffget REMOTE æˆ– :diffget BASE æ¥å°†å¯¹åº”çª—å£çš„å†…å®¹å¤åˆ¶åˆ° MERGED çª—å£ä¸­ã€‚è§£å†³å†²çªåï¼Œä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼ŒGitä¼šæç¤ºä½ æäº¤å†²çªçš„è§£å†³ç»“æœã€‚ ä¸Šè¿°çª—å£çœ‹èµ·æ¥å¾ˆè¿·ç³Šï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼Œä¸‹é¢è§£é‡Šä¸€ä¸‹éƒ½æœ‰ä»€ä¹ˆã€‚ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼š LOCAL: è¿™æ˜¯å½“å‰åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯æ‰§è¡Œ git merge å‘½ä»¤æ—¶æ‰€åœ¨çš„åˆ†æ”¯ï¼‰çš„æ–‡ä»¶å†…å®¹ã€‚ åœ¨åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œè¿™ä»£è¡¨äº†æ‚¨çš„æœ€æ–°æ›´æ”¹ã€‚ BASE: è¿™æ˜¯ä¸¤ä¸ªåˆ†æ”¯çš„å…±åŒç¥–å…ˆçš„æ–‡ä»¶å†…å®¹ã€‚ å®ƒæ˜¾ç¤ºäº†è‡ªä»ä¸¤ä¸ªåˆ†æ”¯ä»å…±åŒç‚¹åˆ†å¼€ä»¥æ¥ï¼Œå‘ç”Ÿäº†å“ªäº›å˜åŒ–ã€‚ REMOTE: è¿™æ˜¯è¯•å›¾åˆå¹¶è¿›æ¥çš„åˆ†æ”¯çš„æ–‡ä»¶å†…å®¹ã€‚ åœ¨ git merge å‘½ä»¤ä¸­ï¼Œ`` å°±æ˜¯è¿™é‡Œçš„ REMOTEã€‚ MERGED: è¿™æ˜¯åˆå¹¶åçš„æ–‡ä»¶å†…å®¹å°†æ˜¾ç¤ºçš„åœ°æ–¹ã€‚ ç›®æ ‡æ˜¯å°† LOCAL å’Œ REMOTE çš„æ›´æ”¹åˆå¹¶åˆ°è¿™ä¸ªçª—å£ä¸­ï¼Œä»¥è§£å†³æ‰€æœ‰å†²çªã€‚ å‡è®¾æƒ³è¦ä¿ç•™â€œoctodogâ€çš„æ›´æ”¹ï¼ˆæ¥è‡ªREMOTEï¼‰ã€‚ä¸ºæ­¤ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°MERGEDæ–‡ä»¶ï¼ˆCtrl + w, jï¼‰ï¼Œç„¶åç§»åŠ¨åˆ°åˆå¹¶å†²çªåŒºåŸŸã€‚æ¥ç€ï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™LOCALç‰ˆæœ¬ã€BASEç‰ˆæœ¬æˆ–REMOTEç‰ˆæœ¬ä¸­çš„å“ªä¸€éƒ¨åˆ†ï¼Œæˆ–è€…åˆå¹¶è¿™äº›å†…å®¹ã€‚å®Œæˆåï¼Œä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼ŒGitä¼šæç¤ºä½ æäº¤å†²çªçš„è§£å†³ç»“æœã€‚ 1vim ä»£ç è§£è¯»å¤åˆ¶ä»£ç :diffget RE è¿™ä¼šå°†REMOTEä¸­ç›¸åº”çš„æ›´æ”¹æ·»åŠ åˆ°MERGEDæ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ï¼š 123:diffg RE` - ä»REMOTEè·å–å†…å®¹:diffg BA` - ä»BASEè·å–å†…å®¹:diffg LO` - ä»LOCALè·å–å†…å®¹ è¿™äº›å‘½ä»¤å…è®¸å¿«é€Ÿåœ°ä»ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ä¸­è·å–å†…å®¹ï¼Œå¹¶å°†å…¶åº”ç”¨äºMERGEDåŒºåŸŸã€‚ä¸€æ—¦è§£å†³äº†æ‰€æœ‰çš„å†²çªï¼Œä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼ŒGitä¼šæç¤ºæäº¤å†²çªçš„è§£å†³ç»“æœã€‚ ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºï¼ˆå¿«é€Ÿå†™å…¥å¹¶é€€å‡ºå¤šä¸ªæ–‡ä»¶çš„æ–¹æ³•æ˜¯ï¼š:wqaï¼‰ã€‚ä¸€æ—¦è§£å†³äº†æ‰€æœ‰å†²çªå¹¶ä¿å­˜äº†æ–‡ä»¶åè¿è¡Œgit commitï¼Œå®Œæˆè¿™äº›æ­¥éª¤åï¼Œå°±æˆåŠŸåœ°è§£å†³äº†åˆå¹¶å†²çªï¼Œå¹¶å°†æ›´æ”¹æäº¤åˆ°äº† Git ä»“åº“ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å…¶ä»–çš„å‘½ä»¤ï¼š ä½¿ç”¨:diffthiså‘½ä»¤æ¥æ‰“å¼€ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼Œè¿™æ ·å¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ°å·®å¼‚ã€‚ ä½¿ç”¨:nextdifftoå‘½ä»¤æ¥åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå·®å¼‚ï¼Œè¿™æ ·å¯ä»¥é€æ­¥è§£å†³å¤šä¸ªå†²çªã€‚ ä½¿ç”¨:diffoffå‘½ä»¤æ¥å…³é—­å·®å¼‚æ˜¾ç¤ºï¼Œè¿™æ ·å¯ä»¥æ›´ä¸“æ³¨äºç¼–è¾‘ã€‚ ä½¿ç”¨:diffmergeå‘½ä»¤æ¥åˆå¹¶ä¸¤ä¸ªç‰ˆæœ¬ï¼Œè¿™å°†è¦†ç›–å½“å‰çš„MERGEDåŒºåŸŸã€‚ ä½¿ç”¨:diffmergeoffå‘½ä»¤æ¥å…³é—­åˆå¹¶æ˜¾ç¤ºï¼Œè¿™æ ·å¯ä»¥å›åˆ°æ­£å¸¸çš„ç¼–è¾‘æ¨¡å¼ã€‚","tags":["vim","git"]},{"title":"å…¨é¢äº†è§£DNSå’ŒDoH/DoT","path":"/2025/03/06/å…¨é¢äº†è§£DNSå’ŒDoH-DoT/","content":"è½¬è½½è‡ª: https://juejin.cn/post/6913507512859754509 DNS (Domain Name System)ï¼Œç›´è¯‘å°±æ˜¯åŸŸåç³»ç»Ÿï¼Œå®ƒæ‰€æä¾›çš„æœåŠ¡æ˜¯å°†åŸŸåè½¬æ¢ä¸ºä¸»æœº IP åœ°å€ï¼Œè¿™ä¸€è¿‡ç¨‹æˆ‘ä»¬ç§°ä¸ºåŸŸåè§£æ æ ‡å‡†äº’è”ç½‘åŸŸåè§£ææµç¨‹åœ¨ä»‹ç»ä¹‹å‰æˆ‘ä»¬æ¥äº†è§£å‡ ä¸ªåè¯ æ³¨å†Œå±€ï¼šåŸŸåæ³¨å†Œå±€æ˜¯ç®¡ç†é¡¶çº§åŸŸåçš„ç»„ç»‡ï¼Œå®ƒä»¬åˆ›å»ºåŸŸååç¼€ï¼Œè®¾ç½®åŸŸåè§„åˆ™ï¼Œå¹¶ä¸æ³¨å†Œå•†åˆä½œå‘å…¬ä¼—å‡ºå”®åŸŸåï¼Œå¦‚ VeriSign ç®¡ç† .com åŸŸåï¼ŒCNNIC ç®¡ç† .cn åŸŸå æ³¨å†Œå•†ï¼šåŸŸåæ³¨å†Œå•†æ˜¯ç»è¿‡è®¤è¯å¯å‘å…¬ä¼—é”€å”®åŸŸåçš„ç»„ç»‡ï¼Œå¦‚ GoDaddyï¼Œä¸‡ç½‘ç­‰ é¡¶çº§åŸŸåï¼š.comï¼Œ.cnï¼Œ.netï¼Œ.org ç­‰è¢«ç§°ä¸ºé¡¶çº§åŸŸå äºŒçº§åŸŸåï¼šè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨ç­‰åŸŸåï¼Œæ¯”å¦‚ baidu.comï¼Œtaobao.com ç­‰è¢«ç§°ä¸ºäºŒçº§åŸŸå æƒå¨ NS è®°å½•ï¼šåŸŸåæœåŠ¡å™¨è®°å½•ï¼Œç”¨æ¥æŒ‡å®šè¯¥åŸŸåç”±å“ªä¸ª DNS æœåŠ¡å™¨æ¥è¿›è¡Œè§£æã€‚è‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸€èˆ¬ç”±æ³¨å†Œå•†çš„ DNS æœåŠ¡å™¨æä¾›å…è´¹çš„åŸŸåè§£ææœåŠ¡ ä¸Šå›¾å°±æ˜¯æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„äº’è”ç½‘åŸŸåè§£ææµç¨‹ï¼Œå®¢æˆ·ç«¯ä¼šåˆ°æœ¬åœ° DNS æœåŠ¡å™¨é€’å½’æŸ¥è¯¢å‡ºè®°å½•ç»“æœï¼Œè€Œæœ¬åœ° DNS æœåŠ¡å™¨çš„ç¼“å­˜ä¸­æ²¡æœ‰ç›¸åº”çš„è®°å½•ï¼Œåˆ™ä¼šä¾æ¬¡ä»æ ¹åŸŸåæœåŠ¡å™¨ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œæƒé™åŸŸåæœåŠ¡å™¨è¿­ä»£æŸ¥è¯¢å‡ºè®°å½•ç»“æœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥äº†è§£ä¸‹æœ¬åœ° DNS æœåŠ¡å™¨æ˜¯å¦‚ä½•è¿­ä»£æŸ¥è¯¢å‡ºè®°å½•ç»“æœçš„ 1dig @8.8.8.8 www.baidu.com +trace é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«ä¸ºï¼Œé€’å½’æŸ¥è¯¢æ˜¯ A-&gt;B-&gt;C-&gt;Dï¼Œè€Œè¿­ä»£æŸ¥è¯¢æ˜¯ A-&gt;B, A-&gt;C, A-&gt;Dã€‚æœ¬åœ° DNS æœåŠ¡å™¨ä¸€èˆ¬æ˜¯ç½‘ç»œæœåŠ¡å•†æä¾›çš„ DNSï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹ä¸ºå¸¸ç”¨çš„å…¬å…± DNS æ ‡å‡† DNS é¢ä¸´çš„å®‰å…¨é—®é¢˜æˆ‘ä»¬çŸ¥é“æ ‡å‡† DNS åè®®å¦‚åŒå¤§å¤šæ•°æ—©æœŸäº’è”ç½‘åè®®ä¸€æ ·ï¼Œå®Œå…¨æ²¡æœ‰è€ƒè™‘å®‰å…¨é—®é¢˜ï¼Œæ•°æ®æ˜¯é€šè¿‡æ˜æ–‡ä¼ è¾“çš„ã€‚å¸¸è§çš„é’ˆå¯¹ DNS çš„æ”»å‡»æ‰‹æ®µæœ‰ DNS æ¬ºéª—&#x2F;ç¼“å­˜ä¸­æ¯’ (DNS Cache Poisoning)ï¼šåŸç†æ˜¯åˆ©ç”¨ DNS åè®®è®¾è®¡æ—¶çš„å®‰å…¨ç¼ºé™·ï¼Œé€šè¿‡ä¼ªé€  ARP åº”ç­”åŒ…ï¼Œå½“ ARP æ¬ºéª—æˆåŠŸåï¼Œåªæœ‰å—…æ¢åˆ°ç›®æ ‡ä¸»æœºå‘å‡º DNS è¯·æ±‚åŒ…å°±è§£æåç«‹å³æ„é€ ä¸€ä¸ªä¼ªé€ çš„ DNS è¿”å›åŒ…æ¬ºéª—ç›®æ ‡ä¸»æœºï¼Œè§£æå™¨åˆ™ä¼šå°†è¿”å›åŒ…çš„ç»“æœä¿å­˜è¿› DNS ç¼“å­˜è¡¨ä¸­ï¼Œè€Œåå½“çœŸå®çš„ DNS è¿”å›åŒ…åˆ°æ¥æ—¶åˆ™ä¼šè¢«ä¸¢å¼ƒã€‚ç®€å•æ¥è¯´å°±æ˜¯å†’å…… DNS æœåŠ¡å™¨ DNS åŠ«æŒ (DNS Hijacking)ï¼šç»“æœå’Œ DNS ç¼“å­˜ä¸€æ ·ï¼Œéƒ½æ˜¯ç¯¡æ”¹ DNS è§£æç»“æœï¼Œåªæ˜¯ä¸å•å•é’ˆå¯¹çš„æ˜¯è§£æå™¨ä¸­çš„ DNS ç¼“å­˜è¡¨ï¼Œè€Œæ˜¯é’ˆå¯¹ DNS è§£æé“¾è·¯ä¸Šçš„æ¯ä¸€æ­¥ã€‚æ¯”å¦‚ é€šè¿‡æœ¨é©¬ç—…æ¯’æˆ–æ¶æ„è½¯ä»¶ç¯¡æ”¹ DNS é…ç½® (hosts æ–‡ä»¶ï¼ŒDNS æœåŠ¡å™¨åœ°å€ï¼ŒDNS ç¼“å­˜è¡¨ç­‰) åˆ©ç”¨è·¯ç”±å™¨æ¼æ´ç¯¡æ”¹è·¯ç”±å™¨çš„ DNS é…ç½® é˜²å¾¡ DNS å¨èƒçš„æœ€çŸ¥åæ–¹å¼ä¹‹ä¸€æ˜¯ä½¿ç”¨ DNSSEC åè®®ï¼ŒDNSSEC é€šè¿‡å¯¹æ•°æ®è¿›è¡Œæ•°å­—ç­¾åæ¥é˜²æ­¢æ”»å‡»ï¼Œä»¥å¸®åŠ©ç¡®ä¿å…¶æœ‰æ•ˆæ€§ã€‚ä¸ºç¡®ä¿è¿›è¡Œå®‰å…¨æŸ¥æ‰¾ï¼Œæ­¤ç­¾åå¿…é¡»åœ¨ DNS æŸ¥æ‰¾è¿‡ç¨‹çš„æ¯ä¸ªçº§åˆ«è¿›è¡Œï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå®ƒå½“å‰å°šæœªå¾—åˆ°æ™®éé‡‡ç”¨ DoHDoHï¼ŒDNS over HTTPSï¼Œæ˜¯ä¸€ç§å®‰å…¨è§£æåŸŸåçš„æ–¹æ¡ˆã€‚2018å¹´ DoH æ­£å¼æˆä¸ºå›½é™…æ ‡å‡† RFC8484ï¼Œé€šè¿‡åŠ å¯†çš„ HTTPS åè®®è¿›è¡Œ DNS è§£æè¯·æ±‚ï¼Œä»£æ›¿æ ‡å‡†çš„ï¼ŒåŸºäº UDP çš„ DNS åè®®ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…åŸŸåè¢«è¿ DNS åŠ«æŒï¼ŒDNS æ¬ºéª—&#x2F;ç¼“å­˜ä¸­æ¯’ç­‰åŸŸåå®‰å…¨é—®é¢˜ã€‚ç°å¦‚ä»Š DoH&#x2F;DoT åœ¨ Googleï¼ŒFirefox ç­‰æµè§ˆå™¨å·²ç»è·å¾—äº†æ”¯æŒï¼Œå¾®è½¯ä¹Ÿæ”¾å‡ºæ¶ˆæ¯å°†åœ¨ Windows 10 ç³»ç»Ÿçš„åç»­å¼€å‘ä¸­åŠ å…¥ DoH&#x2F;DoT æ”¯æŒï¼Œè‹¹æœåœ¨ WWDC å¤§ä¼šå®£å¸ƒ iOS 14 ä¸ macOS 11 æ–°å¢å¯¹åŠ å¯† DNS çš„æ”¯æŒ (åŒ…æ‹¬ DoH&#x2F;DoT)ï¼ŒåŒæ—¶ DoH&#x2F;DoT å·²ç»è·å¾—éƒ¨åˆ†å…¬å…± DNS æ”¯æŒï¼Œå¦‚ä¸‹æ‰€ç¤º æä¾›å•† ç½‘å€ Cloudflare DNS cloudflare-dns.com&#x2F;dns-query www.cloudflare.com/zh-cn/learnâ€¦ Google Public DNS dns.google&#x2F;dns-query developers.google.com&#x2F;speed&#x2F;publiâ€¦ é˜¿é‡Œäº‘å…¬å…± DNS dns.alidns.com&#x2F;dns-query www.alidns.com/ ç°åœ¨æˆ‘ä»¬å€ŸåŠ©å…¬å…± DNS æ¥äº†è§£ä¸‹ DoHï¼Œå¯ä»¥å‚è€ƒè¿™ä»½æ–‡æ¡£ 123456789101112131415161718192021222324252627282930json ä»£ç è§£è¯»å¤åˆ¶ä»£ç $ curl -H &#x27;accept: application/dns-json&#x27; &#x27;https://cloudflare-dns.com/dns-query?name=baidu.com&amp;type=A&#x27;&#123; &quot;Status&quot;: 0, &quot;TC&quot;: false, &quot;RD&quot;: true, &quot;RA&quot;: true, &quot;AD&quot;: false, &quot;CD&quot;: false, &quot;Question&quot;: [ &#123; &quot;name&quot;: &quot;baidu.com&quot;, &quot;type&quot;: 1 &#125; ], &quot;Answer&quot;: [ &#123; &quot;name&quot;: &quot;baidu.com&quot;, &quot;type&quot;: 1, &quot;TTL&quot;: 546, &quot;data&quot;: &quot;220.181.38.148&quot; &#125;, &#123; &quot;name&quot;: &quot;baidu.com&quot;, &quot;type&quot;: 1, &quot;TTL&quot;: 546, &quot;data&quot;: &quot;39.156.69.79&quot; &#125; ]&#125; Statusï¼ŒDNS æŸ¥è¯¢çš„å“åº”çŠ¶æ€ç ï¼Œå¯ä»¥å‚è€ƒ RFC1035 TCï¼ŒTruncationï¼Œæ ‡å‡†çš„ DNS åè®®å°åŒ…æœ€å¤§é•¿åº¦ä¸º 512Bytesï¼Œè¶…è¿‡å°±ä¼šå‘ç”Ÿæˆªæ–­ï¼Œä½†æ˜¯ç”±äº DoH ä½¿ç”¨çš„æ˜¯ HTTPS åè®®ï¼Œä¸ä¼šå­˜åœ¨æˆªæ–­é—®é¢˜ï¼Œæ‰€ä»¥ TC ä½æ’ä¸º false RDï¼ŒRecursion Desiredï¼Œé€’å½’æœŸæœ›ï¼Œä¸ RA å¯¹åº”ï¼Œç”±äºè¯·æ±‚ç«¯æºå¸¦å‘é€ï¼Œå€¼ä¸º true åˆ™è¡¨ç¤ºé€’å½’è§£æï¼Œå¦åˆ™è¡¨ç¤ºè¿­ä»£è§£æ RAï¼ŒRecursion Availableï¼Œé€’å½’å¯ç”¨ï¼ŒDNS æœåŠ¡å™¨æ˜¯å¦æ”¯æŒé€’å½’æŸ¥è¯¢ï¼Œå¤§å¤šæ•° DNS æœåŠ¡å™¨éƒ½æ˜¯æ”¯æŒé€’å½’æŸ¥è¯¢çš„ï¼Œé™¤äº†å°‘éƒ¨åˆ†æ ¹ DNS æœåŠ¡å™¨ ADï¼Œå¦‚æœä¸º true è¡¨ç¤ºæ¯ä¸€æ¡è®°å½•éƒ½æ˜¯ç»è¿‡ DNSSEC validation CDï¼ŒChecking Disabledï¼Œå¦‚æœä¸º true è¡¨ç¤ºç¦ç”¨ DNSSEC validation Question nameï¼Œè¯·æ±‚åŸŸå Question typeï¼Œè¯·æ±‚ DNS è§£æè®°å½•ï¼Œå¸¸è§çš„è§£æè®°å½•æœ‰ï¼ŒAï¼ŒTXT ç­‰ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ RFC1035 Answer name Answer type Answer TTL Answer dataï¼Œè§£æç»“æœ DoTDoTï¼ŒDNS over TLSï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€ç§å®‰å…¨è§£æåŸŸåçš„æ–¹æ¡ˆï¼Œå›½é™…æ ‡å‡† RFC7858ã€‚DoH å’Œ DoT éƒ½æ˜¯æ›¿ä»£æ ‡å‡† DNS çš„æ–¹æ¡ˆï¼Œé‚£ä¹ˆä¸¤è€…æœ‰ä»€ä¹ˆå·®åˆ«å‘¢ï¼Ÿ ä»ç½‘ç»œå®‰å…¨çš„è§’åº¦æ¥çœ‹ï¼ŒDoT å¯ä»¥è¯´æ›´å¥½ï¼Œå®ƒä½¿ç½‘ç»œç®¡ç†å‘˜èƒ½å¤Ÿç›‘è§†å’Œé˜»æ­¢ DNS æŸ¥è¯¢ï¼Œè¿™å¯¹äºè¯†åˆ«å’Œé˜»æ­¢æ¶æ„æµé‡éå¸¸é‡è¦ã€‚å¦ä¸€æ–¹é¢ï¼ŒDoH æŸ¥è¯¢éšè—åœ¨å¸¸è§„ HTTPS æµé‡ä¸­ï¼Œä¸¤è€…ä½¿ç”¨çš„éƒ½æ˜¯ 443 ç«¯å£ï¼Œè¿™å°±æ„å‘³ç€å¾ˆéš¾åŒºåˆ†æ˜¯å¸¸è§„ HTTPS æµé‡è¿˜æ˜¯ DoH æµé‡ ä»éšç§å®‰å…¨çš„è§’åº¦æ¥çœ‹ï¼ŒDoH æ›´å¥½ï¼Œå°±å¦‚å‰é¢æ‰€è¯´ï¼Œæˆ‘ä»¬æ˜¯å¾ˆéš¾åŒºåˆ†æ˜¯å¸¸è§„ HTTPS æµé‡è¿˜æ˜¯ DoH æµé‡çš„ï¼Œé‚£ä¹ˆå°±ä»é—´æ¥å¢å¼ºäº†ç”¨æˆ·çš„éšç§æ€§ åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨ DoHæˆ‘ä»¬å‰é¢è®²è¿‡ç°å¦‚ä»Š DoH&#x2F;DoT åœ¨ Googleï¼ŒFirefox ç­‰æµè§ˆå™¨å·²ç»è·å¾—äº†æ”¯æŒï¼Œè¿™é‡Œæˆ‘å°†æ¼”ç¤º Chrome 87 å¦‚ä½•ä½¿ç”¨ DoHï¼Œè¿‡ç¨‹å¦‚ä¸‹ 1rust ä»£ç è§£è¯»å¤åˆ¶ä»£ç è®¾ç½® -&gt; éšç§è®¾ç½®å’Œå®‰å…¨æ€§ -&gt; å®‰å…¨ -&gt; ä½¿ç”¨å®‰å…¨ DNS æ¥ä¸‹æ¥æ‰“å¼€ https://1.1.1.1/help éªŒè¯ä¸‹ä½ çš„æµè§ˆå™¨æ˜¯å¦çœŸçš„æ˜¯ç”¨äº† DoHï¼Œå¦‚æœä½¿ç”¨äº† VPN æˆ–è€…å…¶ä»–ä»£ç†å·¥å…·çš„è¯ï¼Œè¯·æš‚æ—¶å…³æ‰ï¼Œä¸ç„¶ä¼šæµ‹è¯•ä¸äº†ã€‚å…¶å®ƒçš„æµè§ˆå™¨é…ç½®å¯ä»¥å‚è€ƒè¿™ä»½æ–‡æ¡£ï¼ŒConfigure your browser to use DNS over HTTPS","tags":["DNS"]},{"title":"å¼€å‘è€…éƒ½åº”è¯¥äº†è§£çš„DNSçŸ¥è¯†","path":"/2025/03/04/å¼€å‘è€…éƒ½åº”è¯¥äº†è§£çš„DNSçŸ¥è¯†/","content":"è½¬è½½è‡ª: https://juejin.cn/post/7023258157241597983 ä»€ä¹ˆæ˜¯ DNSâ€‹åœ¨ä»‹ç»åŸŸåå‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸ºä»€ä¹ˆéœ€è¦åŸŸåï¼Ÿ åŸŸåæ˜“è¯»æ˜“è®°ç½‘ç»œä¸­çš„è®¡ç®—æœºæ˜¯é€šè¿‡IPå»å®šä½èµ„æºçš„ï¼Œä½†æ˜¯IPéš¾è¯»éš¾è®°ï¼Œå¯¹äººä¸å‹å¥½ï¼›æ‰€ä»¥å°±è®¾è®¡äº†ä¸€å¥—é€šè¿‡åŸŸåæŸ¥æ‰¾IPçš„è§£æç³»ç»Ÿã€‚ åŸŸåå¯ä»¥ä¸IPè§£è€¦ä¼ä¸šæˆ–å•ä½çš„åŸŸåé€šå¸¸æ˜¯å›ºå®šçš„ï¼Œ ä½†æ˜¯éšç€ä¸šåŠ¡é€æ¸å‘å±•, æœåŠ¡å¼¹æ€§ä¼¸ç¼©å’Œè´Ÿè½½å‡è¡¡é«˜å¯ç”¨ç­‰å› ç´ ï¼Œä½¿å¾—åŒä¸€ä¸ªåŸŸåä¸åŒç”¨æˆ·è§£æå‡ºçš„ IP å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥åŸŸåä¹Ÿå¯ä»¥ä¿è¯ä¸ IP çš„è§£è€¦ã€‚æ­¤å¤–ï¼ŒDNSè§£æä½œä¸ºç½‘ç»œè¯·æ±‚è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼ŒDNS è§£æçš„æ€§èƒ½å¾ˆé‡è¦ï¼Œéœ€è¦è®¾ç½®åˆç†çš„ DNS è§£ææ¶æ„ã€‚ é‚£ä»€ä¹ˆæ˜¯ DNS å‘¢ï¼Ÿ DNS (Domain Name System)ï¼Œç›´è¯‘å°±æ˜¯åŸŸåç³»ç»Ÿï¼Œå®ƒæ‰€æä¾›çš„æœåŠ¡æ˜¯å°†åŸŸåè½¬æ¢ä¸ºä¸»æœº IP åœ°å€ï¼Œè¿™ä¸€è¿‡ç¨‹æˆ‘ä»¬ç§°ä¸ºåŸŸåè§£æã€‚ DNS æœ¬è´¨æ˜¯ä¸ºäº†ç»´æŠ¤åŸŸåå’Œ IP çš„æ˜ å°„å…³ç³»çš„æœåŠ¡ DNS åˆ†ä¸ºäº†å…¬ç½‘çš„ DNS æœåŠ¡ å’Œ ç§æœ‰çš„ DNS æœåŠ¡ã€‚ DNSç›¸å…³æœ¯è¯­ æ³¨å†Œå±€ï¼šåŸŸåæ³¨å†Œå±€æ˜¯ç®¡ç†é¡¶çº§åŸŸåçš„ç»„ç»‡ï¼Œå®ƒä»¬åˆ›å»ºåŸŸååç¼€ï¼Œè®¾ç½®åŸŸåè§„åˆ™ï¼Œå¹¶ä¸æ³¨å†Œå•†åˆä½œå‘å…¬ä¼—å‡ºå”®åŸŸåï¼Œå¦‚ VeriSign ç®¡ç† .com åŸŸåï¼ŒCNNIC ç®¡ç† .cn åŸŸå æ³¨å†Œå•†ï¼šåŸŸåæ³¨å†Œå•†æ˜¯ç»è¿‡è®¤è¯å¯å‘å…¬ä¼—é”€å”®åŸŸåçš„ç»„ç»‡ï¼Œå¦‚ GoDaddyï¼Œä¸‡ç½‘ç­‰ æƒå¨ NS è®°å½•ï¼šåŸŸåæœåŠ¡å™¨è®°å½•ï¼Œç”¨æ¥æŒ‡å®šè¯¥åŸŸåç”±å“ªä¸ª DNS æœåŠ¡å™¨æ¥è¿›è¡Œè§£æã€‚è‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸€èˆ¬ç”±æ³¨å†Œå•†çš„ DNS æœåŠ¡å™¨æä¾›å…è´¹çš„åŸŸåè§£ææœåŠ¡ åŸŸåç»“æ„æ¯”å¦‚ä¸€ä¸ªåŸŸå mail.tsinghua.edu.cn. è¿™ä¸ªåŸŸååˆ†ä¸ºäº†å‡ ä¸ªå±‚æ¬¡ï¼Œæ¯”å¦‚æ ¹., é¡¶çº§åŸŸå cnï¼ŒäºŒçº§åŸŸå eduï¼Œä¸‰çº§åŸŸå tsinghuaï¼Œå››çº§åŸŸå mailï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ ¹åŸŸåæœåŠ¡å™¨: æ ¹çº§ DNS æœåŠ¡å…¨çƒä¸€å…±æœ‰ 13 é›†ç¾¤ï¼Œå…¶ä¸­ 10 ä¸ªåœ¨ç¾å›½ï¼Œå…¶ä»–åˆ†åˆ«åœ¨è‹±å›½ã€ç‘å…¸ã€æ—¥æœ¬ã€‚æ ¹æœåŠ¡å™¨ä¸»è¦ç”¨æ¥ç®¡ç†äº’è”ç½‘çš„ä¸»ç›®å½•ã€‚å¤§éƒ¨åˆ†é‡‡ç”¨ anycast + BGP æ–¹å¼ç®¡ç†æœåŠ¡é›†ç¾¤ï¼Œanycast æŠ€æœ¯å¯ä»¥æ˜¯çš„å¤šå°æœåŠ¡å¯¹å¤–æš´éœ²åŒä¸€ä¸ª IP åœ°å€ï¼Œç”±è·¯ç”±å±‚é¢çš„ BGP æœºæˆ¿é€‰æ‹©ä¸€ä¸ªå°±è¿‘çš„æœåŠ¡å™¨è¿›è¡Œè§£æä»»åŠ¡ã€‚æ ¹åŸŸåæœåŠ¡å™¨å­˜å‚¨äº†é¡¶çº§çš„ NS(name server) æœåŠ¡å™¨åˆ—è¡¨ã€‚â€‹ é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼šé¡¶çº§åŸŸåä¸»è¦æè¿°è¯¥åŸŸåçš„æ€§è´¨ï¼Œä¸€æ˜¯å›½å®¶å’Œåœ°åŒºé¡¶çº§åŸŸåï¼ˆccTLDsï¼‰ï¼Œç›®å‰200å¤šä¸ªå›½å®¶éƒ½æŒ‰ç…§ISO3166å›½å®¶ä»£ç åˆ†é…äº†é¡¶çº§åŸŸåï¼Œä¾‹å¦‚ä¸­å›½æ˜¯cnï¼Œæ—¥æœ¬æ˜¯jpç­‰ï¼›äºŒæ˜¯é€šç”¨é¡¶çº§åŸŸåï¼ˆgTLDsï¼‰ï¼Œä¾‹å¦‚è¡¨ç¤ºå·¥å•†ä¼ä¸šçš„.comï¼Œè¡¨ç¤ºç½‘ç»œæä¾›å•†çš„ .netï¼Œè¡¨ç¤ºéç›ˆåˆ©ç»„ç»‡çš„ .org ç­‰ã€‚ä¸‰æ˜¯æ–°é¡¶çº§åŸŸåï¼ˆNew gTLDï¼‰å¦‚é€šç”¨çš„ .xyzã€ä»£è¡¨â€œé«˜ç«¯â€çš„ .topã€ä»£è¡¨â€œçº¢è‰²â€çš„ .redã€ä»£è¡¨â€œäººâ€çš„ .men ç­‰ä¸€åƒå¤šç§ã€‚â€‹ äºŒçº§åŸŸåæœåŠ¡å™¨ï¼šäºŒçº§åŸŸåä¸€èˆ¬æ˜¯æŒ‡åŸŸåæ³¨å†Œäººé€‰æ‹©ä½¿ç”¨çš„åç§°ï¼Œå¦‚ yahooï¼comï¼›ä¸Šç½‘çš„å•†ä¸šç»„ç»‡é€šå¸¸ä½¿ç”¨è‡ªå·±çš„å•†æ ‡ã€å•†å·æˆ–å…¶ä»–å•†ä¸šæ ‡å¿—ä½œä¸ºè‡ªå·±çš„ç½‘ä¸Šåç§°ï¼Œå¦‚â€œmicrosoftï¼comâ€ã€‚äºŒçº§ä»¥ä¸Šçš„åŸŸåéƒ½æ˜¯éæ³¨å†Œç±»å‹çš„åŸŸåå¯ä»¥æ¯ä¸€ä¸ªæœåŠ¡è‡ªå·±å»å®šä¹‰ã€‚â€‹ æƒå¨åŸŸåæœåŠ¡å™¨ï¼šæƒå¨åŸŸåæœåŠ¡å™¨æŒ‡æä¾› IP è§£æèƒ½åŠ›çš„DNSï¼Œæˆ–è€…èƒ½å¤Ÿæ§åˆ¶æœ€ç»ˆ IP åœ°å€è§£æçš„æœåŠ¡å™¨ï¼Œä¸€èˆ¬æ˜¯ äºŒçº§åŸŸåæœåŠ¡å™¨ã€‚â€‹ Local DNS: ç”¨æˆ·ä¸Šç½‘éœ€è¦é€šè¿‡ ISP(äº’è”ç½‘æœåŠ¡æä¾›å•†, æ¯”å¦‚ç”µä¿¡ã€ç½‘é€šç­‰) çš„ç½‘ç»œæ¥å…¥äº’è”ç½‘, ISP ä¼šåˆ†é…ç»™ç”¨æˆ·ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨å°±æ˜¯ Local DNSã€‚Local DNS èƒ½å¤Ÿä¸æ–­è¿­ä»£ æ ¹NSã€é¡¶çº§NSã€æƒå¨ NSï¼Œç›´åˆ°èƒ½å¤Ÿè§£æå‡ºè¯¥åŸŸå IP åè¿”å›ç»™ç”¨æˆ·ã€‚ DNS è§£æåŸç† ç”¨æˆ·æ¥å…¥ ISP æä¾›çš„ç½‘ç»œåï¼Œä¼šç»™ç”¨æˆ·åˆ†é…ä¸€ä¸ª ISP æä¾›çš„è§£æ DNS çš„ IP åœ°å€ï¼Œç§°ä¸º Local DNS ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€å¼€å§‹è®¿é—® www.aaa.com é¦–å…ˆä¼šå°† www.aaa.com è¿›è¡ŒåŸŸååœ°å€çš„è§£æå·¥ä½œï¼Œè§£ææˆ IP åœ°å€ã€‚ æµè§ˆå™¨ä¼šä»æœ¬åœ°ç¼“å­˜ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ www.aaa.com åŸŸå DNS è§£æç¼“å­˜ï¼Œæµè§ˆå™¨DNSç¼“å­˜ä¸€èˆ¬æ˜¯ 1min å·¦å³(ä¸åŒçš„æµè§ˆå™¨ä¸ä¸€è‡´), åŒæ—¶å¯¹äº chrome æµè§ˆå™¨ä½ å¯ä»¥é€šè¿‡ chrome:&#x2F;&#x2F;net-internals&#x2F;#dns é“¾æ¥æ¸…é™¤æµè§ˆå™¨æœ¬åœ°ç¼“å­˜çš„ DNS è§£æã€‚å¦‚æœæ²¡æœ‰å¯¹åº”åŸŸåçš„ç¼“å­˜ï¼Œä¼šç»§ç»­è®¿é—®è®¾å¤‡ä¸Šæœ¬åœ° hostã€‚ æœ¬åœ° host æ˜¯ä¸€ä¸ª åŸŸåå’Œ IP çš„æ˜ å°„è¡¨ï¼Œåœ¨ Linux é‡Œä½äº `/etc/hosts` æ–‡ä»¶ä¸­ï¼Œåœ¨ Windows é‡Œæ˜¯ä½äº â€œ`C:\\\\WINDOWS\\\\system32\\\\drivers\\\\etc\\\\hosts`â€ æ–‡ä»¶ä¸­ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„åŸŸåæ˜ å°„ï¼Œåˆ™æµè§ˆå™¨çš„ç½‘ç»œæ¨¡å—ä¼šè¯»å–è®¾å¤‡è¢«åˆ†é…çš„ Local DNS åœ°å€ï¼Œç»™ ISP åˆ†é…çš„ Local DNS å‘é€åŸŸåè§£æè¯·æ±‚ï¼Œè¦æ±‚ Local DNS å¯¹ [www.aaa.com](http://www.aaa.com \"http://www.aaa.com\") åœ°å€è¿›è¡Œè§£æï¼Œæœ€ç»ˆç»™æµè§ˆå™¨è§£æçš„ IP åœ°å€æˆ–è€…è§£æé”™è¯¯æ—¥å¿—ä¿¡æ¯ã€‚ Local DNS ä¸€èˆ¬åœ¨ç”µè„‘ç½‘ç»œé€‚é…å™¨å±æ€§ä¸­å¯ä»¥æŸ¥çœ‹ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹ Local DNSï¼Œ æ¯”å¦‚æ”¹å†™æˆ 8.8.8.8ï¼Œ æˆ–è€…å…¬å¸å†…éƒ¨çš„ DNS è§£ææœåŠ¡ã€‚Local DNS æ”¶åˆ°ç”¨æˆ·çš„è¯·æ±‚åï¼Œä¼šæ ¹æ®åŸŸåçš„ç»“æ„ï¼Œä»æ ¹NS **è¿­ä»£** åœ°è¯·æ±‚å„ä¸ª NS å¾—åˆ°æœ€ç»ˆçš„ IP ã€‚Local DNS æœåŠ¡å™¨ä¸­ä¿å­˜äº† 13 å¤„ æ ¹åŸŸåæœåŠ¡å™¨åœ°å€(å‡ ä¹æ ¹åŸŸåæœåŠ¡å™¨åœ°å€æ˜¯ä¸ä¼šæ›´æ¢çš„)ã€‚Local DNS ä¼šå°† www.aaa.com åœ°å€è§£æè¯·æ±‚å‘é€ç»™ä¸€ä¸ªå°±è¿‘çš„æ ¹åŸŸåæœåŠ¡å™¨ã€‚ æ ¹åŸŸåæœåŠ¡å™¨å‘ç°è¿™ä¸ªåŸŸåæ˜¯å±äº .com é¡¶çº§åŸŸåä¸‹çš„ï¼Œåˆ™è¿”å› .com é¡¶çº§NSåˆ—è¡¨ å’Œ IP åœ°å€ç»™ Local DNS ã€‚Local DNS å¾—åˆ°é¡¶çº§ NS åˆ—è¡¨åï¼Œè¿›ä¸€æ­¥é€‰æ‹©ä¸€ä¸ªå°±è¿‘çš„é¡¶çº§ NS æœåŠ¡å™¨ï¼Œå»è¯·æ±‚è§£æç»“æœã€‚ é¡¶çº§ NS æ¥æ”¶åˆ°æ¥è‡ª Local DNS è¯·æ±‚åï¼Œå‘ç°è¿™æ˜¯æ¥è‡ªäº .aaa è¿™ä¸ªäºŒçº§åŸŸåä¸‹çš„ï¼Œå®ƒæŠŠåœ¨å®ƒè¿™é‡Œç™»è®°æ³¨å†Œçš„ aaa.com NSåˆ—è¡¨è¿”å›ç»™ local DNSã€‚ æ­¤æ—¶è¿”å›ä¸€ä¸ª CNAME åœ°å€ www.aaa.lxdns.comã€‚ local DNS å‘ç°è¿”å›çš„ NS åˆ—è¡¨ä¸­é€šè¿‡ NS ç­–ç•¥é€‰æ‹©å‡ºä¸€ä¸ª CNAME è®°å½•ï¼Œæ‰€ä»¥å°±æ˜¯ç”¨ www.aaa.lxdns.com åœ°å€ç»§ç»­é‡å¤ 4 5 6 æ­¥éª¤ ç›´åˆ°è¯·æ±‚åˆ° lxdns.com NSã€‚ åœ¨ lxdns.com NS ä¸­æˆåŠŸè§£æå‡º www.aaa.lxdns.com A è®°å½•ï¼Œå°† IP 1.1.1.1 è¿”å›ç»™ Local DNSï¼ŒLocal DNS è¿”å›ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨å‘èµ·åˆ° 1.1.1.1 çš„ http è¯·æ±‚åŠ è½½å†…å®¹ã€‚ åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­, æ¶‰åŠåˆ° Local DNS å¦‚ä½•ä»å„ä¸ª NS è¿”å›çš„ä¸‹ä¸€ä¸ª NS åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå”¯ä¸€ IP çš„é—®é¢˜ï¼Œä¸€èˆ¬å¯¹äº bind9 ç­‰è½¯ä»¶éƒ½å®ç°äº†é€šè¿‡å¤šç‚¹éƒ¨ç½² DNS å°±è¿‘é€‰æ‹©ã€‚ DNS è§£æç¤ºä¾‹ ä¸Šå›¾å°±æ˜¯æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„äº’è”ç½‘åŸŸåè§£ææµç¨‹ï¼Œå®¢æˆ·ç«¯ä¼šåˆ°æœ¬åœ° DNS æœåŠ¡å™¨é€’å½’æŸ¥è¯¢å‡ºè®°å½•ç»“æœï¼Œè€Œæœ¬åœ° DNS æœåŠ¡å™¨çš„ç¼“å­˜ä¸­æ²¡æœ‰ç›¸åº”çš„è®°å½•ï¼Œåˆ™ä¼šä¾æ¬¡ä»æ ¹åŸŸåæœåŠ¡å™¨ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œæƒé™åŸŸåæœåŠ¡å™¨è¿­ä»£æŸ¥è¯¢å‡ºè®°å½•ç»“æœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥äº†è§£ä¸‹æœ¬åœ° DNS æœåŠ¡å™¨æ˜¯å¦‚ä½•è¿­ä»£æŸ¥è¯¢å‡ºè®°å½•ç»“æœçš„ 1dig @8.8.8.8 www.baidu.com +trace é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢çš„åŒºåˆ«ä¸ºï¼Œé€’å½’æŸ¥è¯¢æ˜¯ A-&gt;B-&gt;C-&gt;Dï¼Œè€Œè¿­ä»£æŸ¥è¯¢æ˜¯ A-&gt;B, A-&gt;C, A-&gt;Dã€‚æœ¬åœ° DNS æœåŠ¡å™¨ä¸€èˆ¬æ˜¯ç½‘ç»œæœåŠ¡å•†æä¾›çš„ DNSï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹ä¸ºå¸¸ç”¨çš„å…¬å…± DNS DNS è‡ªå®šä¹‰åŒºåŸŸ DNS èµ„æºè®°å½• DNS å¸¸ç”¨å‘½ä»¤1. æŸ¥çœ‹åŸŸåå¯¹åº”çš„ NSdig &#123;domain&#125; dig å‘½ä»¤å¯ä»¥æŸ¥çœ‹åŸŸåçš„è§£æ NS åˆ—è¡¨ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹å‡ºç¼“å­˜æ—¶é—´ 2. æŒ‡å®š Local DNS è¿›è¡ŒåŸŸåè§£ædig @&#123;Local DNS IP&#125; &#123;domain&#125; å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œ CDN çš„è°ƒåº¦æµ‹è¯• 3.æŸ¥çœ‹ DNS çš„ TTL 4.æŸ¥çœ‹ DNS å®Œæ•´è§£æè·¯å¾„dig +trace &#123;domain&#125; +additional 5.æµ‹è¯•ç½‘ç»œå»¶è¿Ÿping &#123;ip&#125; DNS æ€§èƒ½åˆ†æCNAME æ¬¡æ•°è¿‡å¤šè®¾ç½® TTL ä¸åˆç†DNS å¤šç‚¹å°±è¿‘éƒ¨ç½²æ¶æ„å‡çº§ä¼ä¸šå†…ç½‘ DNS å†…ç½‘ web æœåŠ¡ hostname åº”è¯¥è®¾ç½®ä¸º FQDN å¦‚ä½•ç»´æŠ¤ä¸»æœºåå’Œå†…ç½‘ IP å…³ç³» ä¸€äº›ä¸­é—´ä»¶éœ€è¦è¿ç§»æ‰©å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åŸŸåå¯¹å¤–æœåŠ¡ å¯¹è§£æåŸŸåæœ‰æ›´é«˜çš„è¦æ±‚ï¼ˆå®‰å…¨-dnssec æ•ˆç‡-ttlï¼‰ ä½¿ç”¨ bind9 å·¥å…·å»å®ç°","tags":["DNS"]},{"title":"å€¼å¾—äº†è§£çš„Pythonè™šæ‹Ÿç¯å¢ƒ","path":"/2025/02/21/å€¼å¾—äº†è§£çš„Pythonè™šæ‹Ÿç¯å¢ƒ/","content":"è½¬è½½è‡ª: https://blog.csdn.net/peanutwang/article/details/144555317 1. å®‰è£…è™šæ‹Ÿç¯å¢ƒå·¥å…·ä» Python 3.3 å¼€å§‹ï¼ŒPython è‡ªå¸¦äº† venv æ¨¡å—ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚ 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ2.1 ä½¿ç”¨ venv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚è¿™é‡Œæˆ‘ä½¿ç”¨äº† venv æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶ä¸”å‘½åä¸º myvenvï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä»»ä½•å…¶ä»–åç§°ã€‚ python -m venv myvenv python -m venv myvenvï¼šè¿™æ¡å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º myvenvÂ çš„è™šæ‹Ÿç¯å¢ƒå’Œæ–‡ä»¶å¤¹ã€‚ å¦‚æœä½ æœ‰å¤šä¸ª Python ç‰ˆæœ¬ï¼Œä½ å¯èƒ½éœ€è¦æŒ‡å®š Python ç‰ˆæœ¬ï¼Œå¦‚ python3.8 æˆ– python3ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬ã€‚ 2.2 æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶è™šæ‹Ÿç¯å¢ƒåˆ›å»ºåï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª myvenvÂ æ–‡ä»¶å¤¹ã€‚é‡Œé¢åŒ…å«äº†è™šæ‹Ÿç¯å¢ƒæ‰€éœ€çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„ï¼š binï¼šåŒ…å«è™šæ‹Ÿç¯å¢ƒçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ pythonï¼‰ã€‚ libï¼šåŒ…å«è™šæ‹Ÿç¯å¢ƒçš„åº“æ–‡ä»¶ã€‚ includeï¼šåŒ…å«ç”¨äºç¼–è¯‘ C æ‰©å±•æ¨¡å—çš„å¤´æ–‡ä»¶ã€‚ Scriptsï¼ˆWindowsï¼‰ï¼šåŒ…å« activate.bat ç­‰è„šæœ¬ã€‚ linuxä¸‹å®‰è£…ï¼Œæ²¡æœ‰Scriptsæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ source bin&#x2F;activate æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ .\\myvenv\\Scripts\\activate æ‰§è¡Œåï¼Œä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å‡ºç°è™šæ‹Ÿç¯å¢ƒçš„åç§° (myvenv)ï¼Œè¡¨ç¤ºè™šæ‹Ÿç¯å¢ƒå·²ç»è¢«æ¿€æ´»ã€‚ æ¿€æ´»åï¼Œä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œå‰é¢åŠ ä¸Š (myvenv)ï¼Œè¿™è¡¨ç¤ºå½“å‰å·²ç»è¿›å…¥è™šæ‹Ÿç¯å¢ƒã€‚ æˆ–è€…è¿›å…¥myvenvç›®å½•ï¼Œè¿è¡ŒScripts\\activate 4. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå½“è™šæ‹Ÿç¯å¢ƒæ¿€æ´»åï¼Œä½ å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…å’Œç®¡ç† Python åŒ…ã€‚æ‰€æœ‰é€šè¿‡ pip å®‰è£…çš„åŒ…åªä¼šå½±å“å½“å‰è™šæ‹Ÿç¯å¢ƒï¼Œè€Œä¸ä¼šå½±å“å…¨å±€çš„ Python å®‰è£…ã€‚ 4.1 å®‰è£…ä¾èµ–åŒ…ä½ å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨ pip æ¥å®‰è£…ä½ éœ€è¦çš„ä¾èµ–åŒ…ï¼š 1pip install &lt;package_name&gt; 4.2 æŸ¥çœ‹å®‰è£…çš„åŒ…ä½ å¯ä»¥ä½¿ç”¨ pip list æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…çš„æ‰€æœ‰åŒ…ï¼š 1pip list 4.3 å¸è½½åŒ…å¦‚æœä½ ä¸å†éœ€è¦æŸä¸ªåŒ…ï¼Œå¯ä»¥ä½¿ç”¨ pip uninstall å¸è½½å®ƒï¼š pip uninstall &lt;package_name&gt; 5. ç”Ÿæˆ requirements.txtrequirements.txt æ–‡ä»¶æ˜¯è®°å½•é¡¹ç›®ä¾èµ–åŒ…çš„å¸¸è§æ–¹å¼ï¼Œé€šå¸¸ç”¨äºåˆ†äº«å’Œå¤ç°ç¯å¢ƒã€‚ 5.1 åˆ›å»º requirements.txtä½ å¯ä»¥ä½¿ç”¨ pip freeze å‘½ä»¤ç”Ÿæˆå½“å‰è™šæ‹Ÿç¯å¢ƒçš„ä¾èµ–åŒ…åˆ—è¡¨ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° requirements.txt æ–‡ä»¶ä¸­ï¼š pip freeze &gt; requirements.txt è¯¥å‘½ä»¤ä¼šå°†è™šæ‹Ÿç¯å¢ƒä¸­æ‰€æœ‰å·²å®‰è£…çš„åŒ…åŠå…¶ç‰ˆæœ¬è®°å½•åˆ° requirements.txt æ–‡ä»¶ä¸­ã€‚ 5.2 ç”¨ requirements.txt å®‰è£…ä¾èµ–å½“å…¶ä»–äººè·å–åˆ°ä½ çš„é¡¹ç›®ä»£ç æ—¶ï¼Œä»–ä»¬å¯ä»¥ä½¿ç”¨ requirements.txt å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–ï¼š 1pip install -r requirements.txt 6. é€€å‡ºè™šæ‹Ÿç¯å¢ƒå½“ä½ å®Œæˆå·¥ä½œåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š deactivate é€€å‡ºåï¼Œä½ çš„å‘½ä»¤è¡Œä¼šå›åˆ°ç³»ç»Ÿçš„é»˜è®¤ Python ç¯å¢ƒã€‚ linuxä¸‹ä¹Ÿæ˜¯æ‰§è¡Œ deactivate 7. åˆ é™¤è™šæ‹Ÿç¯å¢ƒå¦‚æœä½ ä¸å†éœ€è¦æŸä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥åˆ é™¤å®ƒã€‚åªéœ€è¦åˆ é™¤åŒ…å«è™šæ‹Ÿç¯å¢ƒçš„æ–‡ä»¶å¤¹å³å¯ï¼ˆå¦‚ä¸Šä¾‹çš„ myvenv æ–‡ä»¶å¤¹ï¼‰ã€‚ 8. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„å¥½å¤„ éš”ç¦»ä¾èµ–ï¼šæ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ä¾èµ–åŒ…ï¼Œé¿å…ç‰ˆæœ¬å†²çªã€‚ å¹²å‡€çš„å·¥ä½œç¯å¢ƒï¼šä¸åŒé¡¹ç›®ä¹‹é—´çš„åº“ç‰ˆæœ¬ä¸ä¼šäº’ç›¸å½±å“ã€‚ ä¾¿äºéƒ¨ç½²ï¼šé€šè¿‡ requirements.txt æ–‡ä»¶ï¼Œä½ å¯ä»¥è½»æ¾åœ°ä¸ºå…¶ä»–å¼€å‘è€…æˆ–ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é¡¹ç›®ã€‚ 9.IDLE ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒPython IDLE Shell å¯ä»¥ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œä½†è®¾ç½®èµ·æ¥ç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œå› ä¸º IDLE é»˜è®¤å¯åŠ¨çš„æ˜¯ç³»ç»Ÿ Python ç¯å¢ƒã€‚è¦åœ¨ IDLE ä¸­ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œä½ éœ€è¦æ‰‹åŠ¨æŒ‡å®šè™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨ã€‚ 1myenv\\\\Scripts\\\\python.exe -m idlelib.idle è¿™æ ·ï¼ŒIDLE å°†ä¼šå¯åŠ¨ï¼Œå¹¶ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨ã€‚ä½ å¯ä»¥åœ¨ IDLE ä¸­æ‰§è¡Œä»£ç ï¼Œå¹¶ç¡®ä¿å®ƒä½¿ç”¨çš„æ˜¯è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯å…¨å±€ Python ç¯å¢ƒä¸­çš„åº“ã€‚ æ³¨æ„ï¼šåœ¨IDLEæ²¡æœ‰å…³é—­ä¹‹å‰ï¼Œä¸èƒ½å®‰è£…å…¶ä»–åŒ…ã€‚å› ä¸ºæ˜¾ç¤ºIDLEçš„æ—¶å€™ï¼Œå‘½ä»¤è¿˜åœ¨æ‰§è¡Œã€‚ 10.æ£€æŸ¥æ˜¯å¦è™šæ‹Ÿç¯å¢ƒåœ¨ IDLE ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥å½“å‰ Python ç¯å¢ƒæ˜¯å¦æ˜¯è™šæ‹Ÿç¯å¢ƒï¼š 12import sys print(sys.executable)","tags":["Python"],"categories":["Python"]},{"title":"æœ‰å¿…è¦äº†è§£pythoné¡¹ç›®çš„ä¾èµ–ç®¡ç†æ–‡ä»¶requirements.txt","path":"/2025/02/21/æœ‰å¿…è¦äº†è§£pythoné¡¹ç›®çš„ä¾èµ–ç®¡ç†æ–‡ä»¶requirements-txt/","content":"è½¬è½½è‡ª: https://blog.csdn.net/pearl8899/article/details/113877334 1.ä½œç”¨ä»»ä½•åº”ç”¨ç¨‹åºé€šå¸¸éœ€è¦å®‰è£…å®ƒçš„å¤–éƒ¨ä¾èµ–åº“&#x2F;åŒ…ã€‚requirements.txtåŒ…å«äº†é¡¹ç›®çš„å¤–éƒ¨ä¾èµ–å’Œå…·ä½“çš„ç‰ˆæœ¬å·ï¼Œè¿™æ ·åœ¨éƒ¨ç½²çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…è¿™äº›ä¾èµ–ï¼Œä¿è¯ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚ requirements.txtæ–‡ä»¶æ ¼å¼ï¼š 123requests==1.2.0Â Flask==0.10.1requests==1.2.0Â Flask==0.10.1 è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®‰è£…requirements.txtä¾èµ– 1pip install -r requirements.txt 2.ç”Ÿæˆæ–¹æ³•æ–¹æ³•ä¸€ï¼šæ•´ä¸ªç¯å¢ƒä¸‹çš„å®‰è£…åŒ…éƒ½ä¿å­˜åˆ°requirements.txtä¸­ 1pip freeze &gt; requirements.txt ä½œç”¨èŒƒå›´ï¼špipçš„freezeå‘½ä»¤ä¿å­˜äº†ä¿å­˜å½“å‰Pythonç¯å¢ƒä¸‹æ‰€æœ‰ç±»åº“åŒ…ï¼ŒåŒ…æ‹¬é‚£äº›ä½ æ²¡æœ‰åœ¨å½“å‰é¡¹ç›®ä¸­ä½¿ç”¨çš„ç±»åº“ã€‚ ï¼ˆå¦‚æœä½ æ²¡æœ‰çš„virtualenv) ç”Ÿæˆçš„requirements.txtï¼šé€Ÿåº¦éå¸¸å¿«ï¼Œä¸åˆ°1s 12345678910111213141516absl-py==0.11.0aiohttp==3.7.3async-timeout==3.0.1attrs==20.3.0boto3==1.16.41botocore==1.19.41cachetools==4.2.0certifi==2020.12.5chardet==3.0.4click==7.1.2dataclasses==0.8docopt==0.6.2filelock==3.0.12Flask==1.1.2fsspec==0.8.5future==0.18.2 æ–¹æ³•äºŒï¼šåªç”Ÿæˆå•ä¸ªé¡¹ç›®ä¸­çš„ä½¿ç”¨åˆ°çš„å®‰è£…åŒ… 12pip install pipreqspipreqs . ä½œç”¨èŒƒå›´ï¼šå½“å‰é¡¹ç›®ä½¿ç”¨çš„ç±»åº“å¯¼å‡ºç”Ÿæˆä¸ºrequirements.txtã€‚ ä½¿ç”¨æ–¹æ³•ï¼špipreqs åŠ ä¸Šå½“å‰è·¯å¾„å³å¯ã€‚åœ¨å¯¼å‡ºå½“å‰é¡¹ç›®ä½¿ç”¨çš„ç±»åº“æ—¶ï¼Œå…ˆå®šä½åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼Œç„¶åè°ƒç”¨ pipreqs .&#x2F; â€“encoding&#x3D;utf8 å‘½ä»¤ï¼Œè¯¥å‘½ä»¤é¿å…ç¼–ç é”™è¯¯ï¼Œå¹¶è‡ªåŠ¨åœ¨æ ¹ç›®å½•ç”Ÿæˆ requirements.txt æ–‡ä»¶ã€‚ ç”Ÿæˆçš„requirements.txtï¼šæœ‰ç‚¹æ…¢ï¼Œè€—æ—¶1må¤š 1234567891011xlwt==1.3.0tqdm==4.54.1prefetch_generator==1.0.1nltk==3.5transformers==3.4.0xlrd==1.2.0torch==1.7.1XlsxWriter==1.3.7numpy==1.19.4requests==2.25.1scikit_learn==0.24.1 3.ä¸€é”®å®‰è£…å„ç§åŒ…æœ€å¥½å…ˆç”¨condaå»ºä¸€ä¸ªæ–°ç¯å¢ƒï¼Œåšå¥½ç¯å¢ƒéš”ç¦»ï¼Œä¸ç„¶å¾ˆæœ‰å¯èƒ½ä¼šæ±¡æŸ“ä½ åŸæ¥çš„ç¯å¢ƒï¼Œä¼šå‡ºç°ä»¥å‰è·‘é€šçš„ä»£ç ï¼Œç°åœ¨è·‘ä¸é€šäº†ã€‚ 1pip install -r requirements.txt -i https://pypi.douban.com/simple å‚è€ƒï¼š1.https://blog.csdn.net/Irving\\_zhang/article/details/790875692.https://blog.csdn.net/orangleliu/article/details/60958525","tags":["Python"],"categories":["Python"]},{"title":"å…¨é¢è®¤è¯†æµè¡Œçš„SSRæ¡†æ¶Nextjs","path":"/2025/02/17/å…¨é¢è®¤è¯†æµè¡Œçš„SSRæ¡†æ¶Nextjs/","content":"ç°åœ¨ä¸»æµçš„å‰ç«¯æ¡†æ¶å¤§å¤šç”¨äºåˆ›å»ºSPAåº”ç”¨ï¼ŒSPAçš„ç¼ºç‚¹æ˜¯é¦–å±ç­‰å¾…æ—¶é—´é•¿å’ŒSEOä¸å‹å¥½ï¼Œå¯¹äºé¢å‘ä¸ªäººæ¶ˆè´¹è€…çš„åº”ç”¨æ¥è¯´ï¼Œè¿™å¾ˆå½±å“ä½“éªŒã€‚å› è€Œå‰åç«¯åŒæ„çš„SSRæ–¹æ¡ˆåº”è¿è€Œç”Ÿï¼Œä½†æ˜¯è‡ªå·±æ­å»ºSSRé¡¹ç›®å´æ¯”è¾ƒè´¹åŠ²ï¼ŒNext.jsæ˜¯ä¸€ä¸ªåŸºäºreactçš„SSRæ¡†æ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºSSRé¡¹ç›®. å¸Œæœ›æœ¬æ–‡èƒ½è®©å¤§å®¶å¯¹Next.jsæœ‰ä¸€ä¸ªå…¨é¢çš„äº†è§£ï¼Œçœ‹å®Œåæœ‰æ‰€æ”¶è· :) ç®€ä»‹Next.js æ˜¯ä¸€ä¸ªåŸºäºreactçš„SSRæ¡†æ¶, ç”¨äºæ„å»ºå…¨æ ˆwebåº”ç”¨. å¼€å‘è€…åªéœ€ä¸“æ³¨äºç”¨reactæ„å»ºUI, Next.js å¸®åŠ©æˆ‘ä»¬åšä¼˜åŒ–ï¼ˆSEO &#x2F; å›¾ç‰‡åŠ è½½ &#x2F; é¡µé¢æ€§èƒ½ç­‰ï¼‰, å¹¶ä¸”æä¾›äº†å¾ˆå¤šå…¶ä»–åŠŸèƒ½. Next.jsä½¿ç”¨webpackä½œä¸ºæ„å»ºå·¥å…·, å¹¶ä¸”é»˜è®¤é…ç½®å¥½äº†TSã€Eslintå’Œtailwind.css. ç‰¹ç‚¹ åŸºäºfile-systemçš„è·¯ç”± å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ¸²æŸ“ æ‰©å±•fetch API, ç®€åŒ–æ•°æ®è¯·æ±‚ æ”¯æŒå¾ˆå¤šæ ·å¼æ–¹æ¡ˆ, å¦‚: css module, tailwind css and css-in-js, sass ä¼˜åŒ–å›¾ç‰‡å’Œè„šæœ¬åŠ è½½ å…¨é¢æ”¯æŒTS å®‰è£…åˆ›å»ºnext.jsé¡¹ç›® 1npx create-next-app@latest my-app è·¯ç”±æ”¯æŒä¸¤ç§è·¯ç”±æ–¹å¼: app router å’Œ pages router app router æ”¯æŒæœ€æ–°çš„reactç‰¹æ€§, å¦‚ server component, streaming and server actions é¡¹ç›®ç»“æ„ç¤ºä¾‹: åœ¨ Next.js version 13, å¼•å…¥äº†å…¨æ–°çš„App Routerï¼Œå®ƒæ˜¯åŸºäºReact Server Componentså®ç°çš„.App Router ä¼šæŠŠæ‰€æœ‰çš„ä»£ç éƒ½æ”¾åœ¨åä¸ºappæ–‡ä»¶å¤¹ä¸­. app æ–‡ä»¶å¤¹å¯ä»¥å’Œ pages æ–‡ä»¶å¤¹å…±åŒå­˜åœ¨ï¼Œå…è®¸æˆ‘ä»¬å°†æ—§é¡¹ç›®é€æ­¥åœ°åˆ‡æ¢åˆ°æ–°çš„ App Routerã€‚ é»˜è®¤åœ°å‡ºäºæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘, appæ–‡ä»¶å¤¹ä¸‹çš„ç»„ä»¶éƒ½æ˜¯ Server Componentsï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–‡ä»¶å¼€å¤´å£°æ˜use clientæŠŠç»„ä»¶å˜ä¸ºClient Components. æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„ä½œç”¨ Folders ç”¨äºå®šä¹‰è·¯ç”±. å¦‚: app/dashboard Files ç”¨äºå®šä¹‰è·¯ç”±å¯¹åº”çš„UI, å¦‚ app/dashboard/layout.tsx å’Œ app/dashboard/page.tsx page.js å¯ä»¥è®©å½“å‰æ–‡ä»¶å¤¹è¢«è¯†åˆ«ä¸ºè·¯ç”±ï¼Œå³å¯è¢«å…¬å¼€è®¿é—® åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ /dashboard/analytics URL ä¸æ˜¯å¯ä»¥å…¬å¼€è®¿é—®çš„ï¼Œå› ä¸ºå®ƒä¸åŒ…å«page.js. Route Segmentsæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ª route segment. æ¯ä¸ª route segment åˆå¯¹åº” URL Pathçš„ä¸€ä¸ª segment åµŒå¥—è·¯ç”± &#123;folder&#125;/&#123;subfolder&#125;/page.tsx å®šä¹‰é¡µé¢ (page handler) &#123;folder&#125;/&#123;subfolder&#125;/route.ts å®šä¹‰æ¥å£ (api handler) åŠ¨æ€è·¯ç”± [folder] åŠ¨æ€è·¯ç”± [...folder] catch-all åŠ¨æ€è·¯ç”± [[...folder]] optional catch-all åŠ¨æ€è·¯ç”± åˆ†ç»„è·¯ç”±(folder) å¸¦æ‹¬å·çš„æ–‡ä»¶å¤¹ç”¨äºåˆ†ç»„ï¼Œå¯¹è·¯ç”±è·¯å¾„æ²¡æœ‰å½±å“ï¼Œåœ¨åŒä¸€ä¸ªåˆ†ç»„ä¸‹çš„é¡µé¢å¯ä»¥å…±äº«ä¸€ä¸ªlayout, å¯ç”¨åˆ†ç»„è·¯ç”±æ ¹æ®ä¸šåŠ¡æ¨¡å—ç»„ç»‡ä»£ç æ–‡ä»¶ ç§æœ‰æ–‡ä»¶å¤¹_folder å¸¦æœ‰ä¸‹åˆ’çº¿çš„æ–‡ä»¶å¤¹, é‡Œé¢çš„æ–‡ä»¶ä¼šè¢«è·¯ç”±ç³»ç»Ÿå¿½ç•¥ï¼Œä¸ä¼šè¢«è¯†åˆ«ä¸ºè·¯ç”±ï¼ˆå³ä½¿åŒ…å« page.tsxï¼‰, åªèƒ½è¢«å…¶ä»–æ–‡ä»¶å¼•ç”¨ã€‚ å¹¶åˆ—è·¯ç”±@folder ï¼ˆæ–‡ä»¶å¤¹åä¸ºslotå) å®šä¹‰å¹¶åˆ—è·¯ç”±, å¯ä»¥åœ¨åŒä¸€ä¸ªlayoutä¸‹æ¸²æŸ“å¤šä¸ªé¡µé¢ æ‹¦æˆªè·¯ç”±(.)folder (..)folder (..)(..)folder (...)floder æ‹¦æˆªè·¯ç”±æ˜¯æŒ‡åœ¨å½“å‰é¡µé¢é€šè¿‡&lt;Link&gt;è·³è½¬æ—¶, è‹¥ç›®æ ‡é¡µé¢æœ‰å¯¹åº”çš„æ‹¦æˆªè·¯ç”±ï¼Œåˆ™ä¼šæ¸²æŸ“è¯¥æ‹¦æˆªè·¯ç”±ä¸‹çš„page. ç‰¹æ®Šæ–‡ä»¶åçº¦å®šNext.js æä¾›äº†ä¸€ç»„ç‰¹æ®Šæ–‡ä»¶å»åˆ›å»ºç‰¹æ®Šç»„ä»¶ï¼Œç„¶åç»„ç»‡åµŒå¥—åœ¨ä¸€èµ·ï¼Œå¾—åˆ°æœ€ç»ˆçš„UI layout.tsx\tå¸ƒå±€ç»„ä»¶ï¼Œå®šä¹‰å®ƒä¸‹é¢pageså…±äº«çš„UI page.tsx\té¡µé¢ç»„ä»¶ï¼Œä½¿å½“å‰æ–‡ä»¶è·¯å¾„å¯ä½œä¸ºè·¯ç”±ï¼Œè¢«å…¬å¼€è®¿é—® loading.tsx\tå½“å‰è·¯ç”±ä¸‹çš„Loadingç»„ä»¶ not-found.tsx\tå½“å‰è·¯ç”±çš„Not foundç»„ä»¶ error.tsx\tå½“å‰è·¯ç”±çš„Errorç»„ä»¶ global-error.tsx\tå…¨å±€çš„Errorç»„ä»¶ route.ts\tServer-side API endpoint template.tsx\tç‰¹æ®Šçš„æ¯æ¬¡éƒ½é‡å¤æ¸²æŸ“çš„Layout UI default.tsx\tFallback UI for Parallel Routes ç‰¹æ®Šç»„ä»¶åµŒå¥—æ–¹å¼ç‰¹æ®Šç»„ä»¶éƒ½æ˜¯å½“å‰è·¯ç”±æ‰€å¯¹åº”é¡µé¢UIçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬äº¤ç»‡å½¢æˆå®Œæ•´çš„é¡µé¢ã€‚ åœ¨åµŒå¥—è·¯ç”±ä¸­, æ¯ä¸ªå±‚çº§çš„route segmentå¯¹åº”çš„ç‰¹æ®Šç»„ä»¶æ ‘ï¼Œä¹Ÿä¼šåµŒå¥—å½¢æˆæ›´å¤§æ›´æ·±çš„ç»„ä»¶æ ‘ å…¶ä»–æ–‡ä»¶ç»„ç»‡æ–¹å¼æˆ‘ä»¬å¯ä»¥æŠŠcomponents, styles, testsç­‰æ–‡ä»¶å¤¹ç›´æ¥æ”¾åœ¨appç›®å½•ä¸‹ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥è¢«å…¶ä»–æ–‡ä»¶å¼•ç”¨äº†ã€‚å› ä¸ºå®ƒä»¬ä¸åŒ…å« page.tsx æˆ– route.tsï¼Œæ‰€ä»¥å®ƒä»¬ä¸ä¼šè¢«Next.jsè¯†åˆ«ä¸ºè·¯ç”±ã€‚ åŒæ ·ï¼Œè¯†åˆ«ä¸ºè·¯ç”±çš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œä¹Ÿå¯ä»¥æ”¾ components, styles, testsç­‰æ–‡ä»¶å¤¹ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥è¢«å½“å‰è·¯ç”±ä¸‹çš„é¡µé¢å¼•ç”¨äº†ã€‚ 12345- app - product - page.tsx - components - Modal.tsx è¿™æ˜¯å› ä¸ºå½“æ–‡ä»¶å¤¹è¢«è¯†åˆ«ä¸ºè·¯ç”±æ—¶ï¼Œåªæœ‰page.tsxæˆ–route.tsè¿”å›çš„å†…å®¹ï¼Œæ‰æ˜¯ä¼šè¢«ç”¨æˆ·è®¿é—®åˆ°çš„ã€‚å¦‚ä¸Šä¾‹ä¸­ï¼ŒModal.tsxçš„å†…å®¹ï¼Œä¸ä¼šè¢«ç”¨æˆ·è®¿é—®åˆ°ï¼Œä½†æ˜¯å¯ä»¥è¢«productè·¯ç”±ä¸‹çš„é¡µé¢å¼•ç”¨ã€‚ Pagespage.tsx æ˜¯å¯¹åº”å½“å‰route segmentçš„é¡µé¢ç»„ä»¶ 1234// `app/page.tsx` is the UI for the `/` URLexport default function Page() &#123; return &lt;h1&gt;Hello, Home page!&lt;/h1&gt;&#125; ä¸ºäº†è®©æ–‡ä»¶å¤¹è¢«è¯†åˆ«ä¸ºé¡µé¢è·¯ç”±ï¼Œpage.jsæ–‡ä»¶æ˜¯å¿…é¡»çš„ã€‚ Pages é»˜è®¤æ˜¯Server Components, ä¸è¿‡ä¹Ÿå¯å£°æ˜ä¸º Client Component. Pages å¯ä»¥fetch data. Layoutslayoutæ˜¯è·¨routeå…±äº«çš„UIï¼Œåœ¨å¯¼èˆªæ—¶ï¼Œlayoutä¼šä¿æŒçŠ¶æ€ï¼Œä¿æŒäº¤äº’æ€§ï¼Œä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚layoutä¹Ÿå¯ä»¥åµŒå¥—ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¸‹çš„layoutä¼šè¢« /dashboard å’Œ /dashboard/settings å…±äº« 1234567891011121314export default function DashboardLayout(&#123; children, // will be a page or nested layout&#125;: &#123; children: React.ReactNode&#125;) &#123; return ( &lt;section&gt; &#123;/* Include shared UI here e.g. a header or sidebar */&#125; &lt;nav&gt;&lt;/nav&gt; &#123;children&#125; &lt;/section&gt; )&#125; Root Layoutroot layout æ˜¯å¿…é¡»çš„ï¼Œå®ƒä½äºapp/layout.tsx, ä¸åŒäºå…¶ä»–å±‚çº§çš„layout, route layoutå¿…é¡»åŒ…å« html å’Œ body æ ‡ç­¾, å…è®¸æˆ‘ä»¬å®šä¹‰åˆå§‹è¿”å›ç»™æµè§ˆå™¨çš„htmlå†…å®¹ã€‚ 1234567891011121314export default function RootLayout(&#123; children,&#125;: &#123; children: React.ReactNode&#125;) &#123; return ( &lt;html lang=&quot;en&quot;&gt; &lt;body&gt; &#123;/* Layout UI */&#125; &lt;main&gt;&#123;children&#125;&lt;/main&gt; &lt;/body&gt; &lt;/html&gt; )&#125; Nesting Layoutslayoutæ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œparent layouté€šè¿‡ children propåŒ…è£¹child layoutã€‚ å½“æ–‡ä»¶å¤¹åŒæ—¶åŒ…å« layout.js å’Œ page.js æ–‡ä»¶æ—¶ï¼ŒæŒ‰ç…§å‰é¢æ‰€è¯´çš„ç‰¹æ®Šæ–‡ä»¶ç»„ç»‡æ–¹å¼ï¼Œlayoutä¼šåŒ…è£¹page.Layouts å¯ä»¥ fetch data.parent layout å’Œ child layoutä¹‹é—´ä¼ é€’æ•°æ®æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥fetchç›¸åŒçš„æ¥å£è·å–æ•°æ®ï¼Œfetch APIä¼šå¤ç”¨ç¼“å­˜æ•°æ®, é¿å…æ€§èƒ½å½±å“å¯ä»¥åˆ©ç”¨åˆ†ç»„è·¯ç”±Route Groups æŠŠéœ€è¦ç›¸åŒå¸ƒå±€çš„pagesç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¦å¤–è¿˜å¯ä»¥åˆ©ç”¨Route Groupsåˆ›å»ºå¤šä¸ª root layouts. TemplatesTemplates ç±»ä¼¼ layouts, ä¸åŒçš„åœ°æ–¹æ˜¯templatesåœ¨å¯¼èˆªæ—¶ä¸ºæ¯ä¸ªå­è·¯ç”±åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ 123export default function Template(&#123; children &#125;: &#123; children: React.ReactNode &#125;) &#123; return &lt;div&gt;&#123;children&#125;&lt;/div&gt;&#125; Metadataè‹¥éœ€è¦ä¿®æ”¹ &lt;head&gt; HTML elementsï¼Œå¯ä»¥ä½¿ç”¨ Metadata APIsã€‚Metadata APIs å¯ä»¥åœ¨ page.js æˆ– layout.js æ–‡ä»¶ä¸­å®šä¹‰ã€‚å¯¼å‡º metadata å¯¹è±¡æˆ– generateMetadata å‡½æ•°æ¥å®šä¹‰ metadataã€‚ 12345678910111213import type &#123; Metadata &#125; from &#x27;next&#x27; // either Static metadataexport const metadata: Metadata = &#123; title: &#x27;...&#x27;,&#125; // or Dynamic metadataexport async function generateMetadata(&#123; params &#125;) &#123; return &#123; title: &#x27;...&#x27;, &#125;&#125; generateMetadataä¸­å¯ä»¥å‘èµ·æ•°æ®è¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥åˆ©ç”¨paramså‚æ•°è·å–å½“å‰è·¯ç”±çš„å‚æ•°ã€‚ 1234567891011121314151617181920212223242526272829import type &#123; Metadata, ResolvingMetadata &#125; from &#x27;next&#x27; type Props = &#123; params: &#123; id: string &#125; searchParams: &#123; [key: string]: string | string[] | undefined &#125;&#125; export async function generateMetadata( &#123; params, searchParams &#125;: Props, parent: ResolvingMetadata): Promise&lt;Metadata&gt; &#123; // read route params const id = params.id // fetch data const product = await fetch(`https://.../$&#123;id&#125;`).then((res) =&gt; res.json()) // optionally access and extend (rather than replace) parent metadata const previousImages = (await parent).openGraph?.images || [] return &#123; title: product.title, openGraph: &#123; images: [&#x27;/some-specific-page-image.jpg&#x27;, ...previousImages], &#125;, &#125;&#125; export default function Page(&#123; params, searchParams &#125;: Props) &#123;&#125; æ¸²æŸ“Server componentserver component åº”å½“å£°æ˜ä¸º async function, å› ä¸ºé€šå¸¸éƒ½éœ€è¦è¯·æ±‚æ•°æ®ï¼Œç„¶åé€šè¿‡propsä¼ é€’ç»™client componentserver component ä¸èƒ½åŒ…å«äº¤äº’ï¼Œå³ä¸å¯è¿›è¡ŒDOMäº‹ä»¶ç›‘å¬server component åœ¨åç«¯æ¸²æŸ“åï¼Œä¼šè¢«ç¼“å­˜ï¼Œæé«˜å†æ¬¡è¯·æ±‚çš„å“åº”é€Ÿåº¦ã€‚æ¸²æŸ“ä»»åŠ¡ä¼šæ ¹æ® route segment å’Œ&lt;Suspense&gt; boundariesè¿›è¡Œåˆ†å‰²ï¼Œå¹¶ä¸”é€šè¿‡æµçš„æ–¹å¼å‘é€ç»™å®¢æˆ·ç«¯ï¼Œä»¥å‡å°‘ç­‰å¾…æ—¶é—´ã€‚ç»„ä»¶æ ‘é€šå¸¸ä¼šæ˜¯server componentå’Œclient componentçš„äº’ç›¸äº¤ç»‡ï¼Œserver componentä¼šè¢«ä¼˜å…ˆæ¸²æŸ“æ‰§è¡Œã€‚ æœåŠ¡ç«¯ç»„ä»¶çš„å†…å®¹, ä¹Ÿç§°ä¸º React Server Component Payloadï¼Œ å®ƒåŒ…å«: server componentçš„æ¸²æŸ“å¾—åˆ°çš„è™šæ‹ŸDom client componentçš„å ä½å…ƒç´ å’Œå¼•ç”¨ server componentä¼ ç»™client componentçš„props æ¸²æŸ“è¿‡ç¨‹: æ ¹æ®æœåŠ¡ç«¯è¿”å›çš„htmlï¼Œæ¸²æŸ“ä¸€ä¸ªä¸å¯äº¤äº’çš„é¡µé¢ è·å–è·¯ç”±å¯¹åº”çš„æœåŠ¡ç«¯ç»„ä»¶çš„å†…å®¹(React Server Component Payload) ç”¨æ¥è°ƒå’Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç»„ä»¶æ ‘ï¼Œæ›´æ–°DOM. æ‰§è¡Œhydration, ä½¿é¡µé¢å¯ä»¥äº¤äº’ Client componentclient component ä¸å¯ä»¥å£°æ˜ä¸º async function, å¦åˆ™ä¼šæŠ¥é”™ä½œä¸ºå…¥å£è·¯ç”±çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œclient componentsä¹Ÿä¼šåœ¨æœåŠ¡ç«¯æ‰§è¡Œã€‚ client component å¯ä»¥ä½¿ç”¨ useEffect å’Œ useState ç­‰React hooksï¼Œç»‘å®šDOMäº‹ä»¶ï¼Œè°ƒç”¨æµè§ˆå™¨API. å¦‚æœä¸€ä¸ªç»„ä»¶é€šè¿‡use clientå£°æ˜ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„å­å­™ç»„ä»¶éƒ½ä¼šé»˜è®¤ä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼Œé™¤éæ˜¾å¼å£°æ˜ä¸ºæœåŠ¡ç«¯ç»„ä»¶ã€‚ é»˜è®¤åœ°ï¼Œè¢«è¯†åˆ«ä¸ºè·¯ç”±çš„æ–‡ä»¶å¤¹ä¸‹çš„layoutå’Œpageä¼šå¹¶è¡Œæ¸²æŸ“ã€‚ æ¸²æŸ“ç±»å‹: static (é™æ€æ¸²æŸ“) : åœ¨æ„å»ºæ—¶æ¸²æŸ“ï¼Œé€‚ç”¨äºé™æ€é¡µé¢ï¼Œå¦‚åšå®¢æ–‡ç« ï¼Œä¸ä¼šé¢‘ç¹æ›´æ–°ã€‚ dynamic (åŠ¨æ€æ¸²æŸ“) : åœ¨è¯·æ±‚æ—¶æ¸²æŸ“ï¼Œé€‚ç”¨äºéœ€è¦é¢‘ç¹æ›´æ–°çš„é¡µé¢ï¼Œå¦‚ç”¨æˆ·ä¸ªäººä¸»é¡µï¼Œè´­ç‰©è½¦ç­‰ã€‚ Nextjsä¼šè‡ªåŠ¨é€‰æ‹©ä½¿ç”¨static renderingè¿˜æ˜¯dynamic rendering, å¦‚æœé¡µé¢ä½¿ç”¨åˆ°dynamic functionsé‚£ä¹ˆå°±ä¼šé‡‡ç”¨åŠ¨æ€æ¸²æŸ“ã€‚ dynamic functionsæ˜¯æŒ‡: cookies() headers() props.searchParams å¸¸ç”¨ç»„ä»¶å¼€å‘æ¨¡å¼ï¼šserver component fetch data, é€šè¿‡propsä¼ é€’dataç»™ client component Next.jsåº”ç”¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ…å«æœåŠ¡ç«¯ç»„ä»¶å’Œå®¢æˆ·ç«¯ç»„ä»¶çš„ç»„ä»¶æ ‘ï¼Œå½“å…¶ä¸­ä¸€ä¸ªç»„ä»¶é€šè¿‡use clientå£°æ˜ä¸ºå®¢æˆ·ç«¯ç»„ä»¶æ—¶ï¼Œå®ƒå°±å½¢æˆäº†ä¸€ä¸ªclient subtree client subtrees ä¹Ÿå¯ä»¥åŒ…å« server components æˆ–è€…è°ƒç”¨ server actions 123&lt;ClientComponent&gt; &lt;ServerComponent /&gt;&lt;/ClientComponent&gt; åœ¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼ŒNext.jsä¼šå…ˆæ¸²æŸ“server componentsï¼Œç„¶åè¿”å›ä¸€ä¸ªåŒ…å«server componentsæ¸²æŸ“ç»“æœçš„RSC payloadï¼Œè¿™ä¸ªpayloadä¼šåŒ…å«client subtreeçš„å¼•ç”¨ï¼Œåœ¨å®¢æˆ·ç«¯ï¼ŒReactä¼šä½¿ç”¨RSC payloadæ¥åè°ƒclient subtreeã€‚ æ—¢ç„¶ client component çš„æ¸²æŸ“æ˜¯åœ¨ server componentçš„æ¸²æŸ“ä¹‹åï¼Œé‚£ä¹ˆå°±ä¸èƒ½åœ¨ client component ä¸­å¯¼å…¥ server componentï¼Œå› ä¸ºé‚£ä¼šå¯¼è‡´ä¸€ä¸ªæ–°çš„è¯·æ±‚å›ä¼ åˆ°æœåŠ¡å™¨ï¼Œåº”è¯¥é€šè¿‡propså°† server component ä¼ é€’ç»™ client componentã€‚ 1234567891011// app/page.tsximport ClientComp from &#x27;./client-component&#x27;import ServerComp from &#x27;./server-component&#x27;export default function() &#123; return ( &lt;ClientComp&gt; &lt;ServerComp /&gt; &lt;/ClientComp&gt;)&#125; æ•°æ®è¯·æ±‚Server actionserver action å¯ä»¥åœ¨ client component ä¸­ä½¿ç”¨, ä¼šå‘é€ajaxè¯·æ±‚ç»™å¯¹åº”çš„è·¯ç”±ï¼Œè¿”å›åç«¯æ•°æ®ï¼Œå¯ä»¥éšè—çœŸå®APIï¼Œå¯é€šè¿‡ &lt;form action&gt; æˆ– element onClick callbackè§¦å‘ã€‚ æœåŠ¡ç«¯è¯·æ±‚åœ¨ server component ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ fetch å‡½æ•°æ¥å‘é€è¯·æ±‚ï¼Œè·å–æ•°æ®ã€‚å…¨é¡µé¢åˆ·æ–°æ—¶ï¼Œserver component ä¼šé‡æ–°æ‰§è¡Œï¼Œè·å–æœ€æ–°çš„æ•°æ®ã€‚ æœåŠ¡ç«¯è¯·æ±‚çš„ä¼˜ç‚¹æœ‰: å‡å°‘è¯·æ±‚æ•°é‡ ä¿æŠ¤æ•æ„Ÿæ•°æ® ç¦»æ•°æ®æºæ›´è¿‘ï¼Œæ›´å¿«è·å¾—æ•°æ® å¯ç¼“å­˜ï¼Œæé«˜æ€§èƒ½ å¯ä»¥ä½¿ç”¨fetch APIåœ¨æœåŠ¡ç«¯è¯·æ±‚çš„åœ°æ–¹: server component route handler server actions ç”±äºfetchä¼šç¼“å­˜æ•°æ®ï¼Œæ‰€ä»¥åœ¨æœåŠ¡ç«¯ç»„ä»¶ä¹‹é—´ä¸éœ€è¦ä½¿ç”¨å•å‘æ•°æ®æµæ¨¡å¼ï¼Œé€šè¿‡propsä¼ é€’æ•°æ®ã€‚ç›´æ¥åœ¨æ¯ä¸ªæœåŠ¡ç«¯ç»„ä»¶fetchç›¸åŒçš„æ¥å£å³å¯ï¼Œæ¥å£åªä¼šè¢«è¯·æ±‚ä¸€æ¬¡ã€‚ server component ä¸éœ€è¦é€šè¿‡fetchæ–¹æ³•è°ƒç”¨ route handlerï¼Œå®ƒå¯ä»¥ç›´æ¥è®¿é—®æ•°æ®åº“ è‹¥ç”¨&lt;Suspense&gt;åŒ…è£¹ç»„ä»¶ï¼Œåˆ™ç»„ä»¶ä¼šåŠ¨æ€æ¸²æŸ“ï¼Œä½œä¸ºå…¥å£è·¯ç”±è¿›è¡Œå…¨é¡µé¢æ¸²æŸ“æ—¶ä¸ä¼šåŒ…å«è¯¥åŠ¨æ€ç»„ä»¶ã€‚ 1&lt;Suspense fallback=&#123;&lt;Loading /&gt;&#125;&gt; &lt;Cart /&gt; &lt;/Suspense&gt; fetchç¼“å­˜fetch è®¾ç½®ç¼“å­˜è¯­æ³•: fetch(api, &#123; cahce: &#39;force-cache&#39; &#125;) fetchç¼“å­˜æœ‰æ•ˆæ€§éªŒè¯: time-based fetch(api, &#123;next: &#123; revalidate: 3600 &#125;&#125;) tag-based &amp; path-based 12345678import &#123; revalidatePath, revalidateTag &#125; from &#x27;next/cache&#x27;export async function createPost() &#123; revalidatePath(&#x27;/posts&#x27;)&#125;fetch(api, &#123; next: &#123;tags: [&#x27;haha&#x27;] &#125;&#125;)revalidateTag(&#x27;haha&#x27;) å¯ä»¥æŠŠè·å–æ•°æ®çš„æ–¹æ³•å®šä¹‰åœ¨pageç»„ä»¶å¤–éƒ¨ï¼Œç„¶ååœ¨pageç»„ä»¶ä¸­è°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨è·å–æ•°æ®çš„æ–¹æ³•ã€‚ 12345678910111213141516async function getArtist() &#123; const res = await fetch(api) return res.json()&#125;async function getAlbums() &#123; const res = await fetch(api) return res.json()&#125;export default async function page() &#123; const [artist, albums] = await Promise.all([getArtist(), getAlbums()]) return ( &lt;&gt; &lt;h1&gt; &#123;artist.name&#125; &lt;/h1&gt; &lt;Albums list=&#123;albums&#125; /&gt; &lt;/&gt; )&#125; å®¢æˆ·ç«¯è¯·æ±‚å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®é€‚ç”¨äºè¿™äº›åœºæ™¯: éƒ¨åˆ†æ¸²æŸ“ï¼Œéƒ¨åˆ†UIä»…åœ¨å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œè¿™éƒ¨åˆ†UIæ‰€åŒ…å«çš„æ•°æ®åªèƒ½ä»å®¢æˆ·ç«¯å‘è¯·æ±‚è·å¾— å®æ—¶æ•°æ®ï¼Œå¦‚ï¼šæœç´¢ç»“æœ Server actionserver actions and mutations server actions æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ async function, å®ƒå¯ä»¥åœ¨ server component å’Œ client component è¢«è°ƒç”¨ å£°æ˜server actions: &#39;user server&#39; æŒ‡ä»¤ï¼Œæ”¾åœ¨å‡½æ•°å£°æ˜ä¹‹å‰ 123456789export default function Page() &#123; // server action async function create() &#123; &#x27;user server&#x27; // todo &#125; return (&lt;div&gt;hi&lt;/div&gt;)&#125; &#39;user server&#39; æŒ‡ä»¤ï¼Œ æ”¾åœ¨ä»£ç æ–‡ä»¶é¡¶éƒ¨ 123456// app/actions.ts&#x27;user server&#x27;export async function create() &#123; // todo&#125; åœ¨client componentä¸­ï¼Œä½¿ç”¨server action 123456789// client component// app/ui/button.tsx&#x27;use client&#x27;import &#123; create &#125; from &#x27;@/app/actions&#x27;export function MyButton() &#123; return &lt;Button onClick=&#123;create&#125; /&gt;&#125; Nextjsæ‰©å±•äº† &lt;form&gt; å…ƒç´ ï¼Œå…è®¸å®ƒçš„ action å±æ€§æ¥æ”¶server action useActionState hook, å¯ä»¥è·å–server actionçš„æ‰§è¡ŒçŠ¶æ€ 12345678910111213141516171819202122// app/ui/signup.tsx&#x27;use client&#x27;import &#123; useActionState &#125; from &#x27;react&#x27;// old version react it is called &#x27;useFormState&#x27; // import &#123; useFormState &#125; from &#x27;react-dom&#x27;import &#123; createUser &#125; from &#x27;@/app/actions&#x27;const initialState = &#123; message: &#x27;&#x27; &#125;explort function Signup () &#123; const [state, formAction, pending] = useActionState(createUser, initialState) return ( &lt;form action=&#123;formAction&#125;&gt; &lt;p&gt;&#123;state?.message&#125;&lt;/p&gt; &lt;button disabled=&#123;pending&#125; type=submit&gt;submit&lt;/button&gt; &lt;/form&gt; )&#125; server action åº”å½“è¢«çœ‹åšä¸€ä¸ªå…¬å¼€çš„æ¥å£ï¼Œä¸è¿‡è¿™ä¸ªæ¥å£çš„åœ°å€æ˜¯ä¸€äº›æ²¡æœ‰è¯­ä¹‰çš„éšæœºå­—ç¬¦ å¸¸è§é—®é¢˜å¦‚ä½•åœ¨layoutä¸­è®¿é—®è¯·æ±‚å¯¹è±¡?å‡ºäºåœ¨é¡µé¢é—´å¯¼èˆªæ—¶é‡ç”¨layoutçš„ç›®çš„ï¼Œlayout.tsx ä¸èƒ½è®¿é—®åŸå§‹çš„requestå¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨headers()å’Œcookies()æ–¹æ³•æ¥è®¿é—®ç›¸å¯¹çš„è¯·æ±‚ä¿¡æ¯ã€‚ å¦‚ä½•è®¿é—®é¡µé¢çš„URL?pageé»˜è®¤æ˜¯server component, æ‰€ä»¥æ— æ³•ç›´æ¥è®¿é—®URL, å¯ä»¥ä½¿ç”¨usePathnameå’ŒuseSearchParamsæ¥è·å–URL, å¦å¤–pageçš„propsä¸­ä¹Ÿæœ‰paramså’ŒsearchParamså±æ€§, å¯ä»¥ç›´æ¥è®¿é—®. Server componentä¸­æ€æ ·é‡å®šå‘åˆ°å…¶ä»–é¡µé¢?åœ¨server componentä¸­, å¯ä»¥ä½¿ç”¨redirect()æˆ–permanentRedirect()æ–¹æ³•æ¥é‡å®šå‘åˆ°å…¶ä»–é¡µé¢. æ€æ ·è®¾ç½®cookies? å¯ä»¥åœ¨Server Actions, Middleware or Route Handlersä½¿ç”¨cookies()æ–¹æ³•æ¥è®¾ç½®cookies.You can set cookies in Server Actions or Route Handlers using the cookies function. æ³¨æ„: æˆ‘ä»¬ä¸èƒ½åœ¨pageæˆ–layoutä¸­ç›´æ¥è®¾ç½®cookies, å› ä¸ºHTTPä¸å…è®¸åœ¨æµå¼ä¼ è¾“å¼€å§‹åè®¾ç½®cookiesã€‚ æ€»ç»“Next.jsæ˜¯ä¸€ä¸ªå¼ºå¤§çš„Reactæ¡†æ¶ï¼Œå®ƒæä¾›äº†è®¸å¤šåŠŸèƒ½ï¼Œå¦‚é™æ€ç½‘ç«™ç”Ÿæˆã€æœåŠ¡å™¨ç«¯æ¸²æŸ“å’ŒAPIè·¯ç”±ã€‚é€šè¿‡ä½¿ç”¨Next.jsï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ„å»ºé«˜æ€§èƒ½çš„Webåº”ç”¨ç¨‹åºã€‚","tags":["Nextjs","SSR"],"categories":["Nextjs"]},{"title":"PHPåŸºç¡€çŸ¥è¯†ç»ˆç« ","path":"/2025/01/07/PHPåŸºç¡€çŸ¥è¯†ç»ˆç« /","content":"å¸¸è¨€é“ï¼šæ¸©æ•…è€ŒçŸ¥æ–°ï¼Œæœ¬æ–‡ä¼šæ¥ç€ä»‹ç»ä¸€äº›PHPåŸºç¡€çŸ¥è¯†ï¼Œå¯¹ä¸Šç¯‡PHPåŸºç¡€è¿›è¡Œè¡¥å……ï¼Œå½¢æˆç›¸å¯¹å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ã€‚ å°½å¯èƒ½ä¿æŒå†…å®¹ç®€å•æ˜“æ‡‚ï¼Œå¸Œæœ›è¯»åèƒ½æœ‰æ‰€æ”¶è· :) æœ¬æ–‡ä¾‹å­ä¼šå¸¸ç”¨åˆ°ä¸€äº›è‡ªå®šä¹‰æ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰åœ¨ common.php, å†…å®¹å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpfunction clog($msg, $tag = &#x27;p&#x27;)&#123; // echo $msg, &quot; &quot;; if (PHP_SAPI === &#x27;cli&#x27;) &#123; echo &quot;[$tag]: &quot; . $msg . &quot; &quot;; &#125; else &#123; echo &quot;&lt;$tag&gt;&quot;, $msg, &quot;&lt;/$tag&gt;&quot;; &#125;&#125;function newline()&#123; echo &quot;&lt;br/&gt;&quot;;&#125;function clogList($arr)&#123; echo &quot;&lt;ol&gt;&quot;; foreach ($arr as $val) &#123; clog($val, &#x27;li&#x27;); &#125; echo &quot;&lt;/ol&gt;&quot;;&#125;function title($ttl, $level = 2)&#123; $tag = &quot;h$level&quot;; clog($ttl, $tag);&#125;function comment($con)&#123; clog(&#x27;:: &#x27; . $con, tag: &#x27;blockquote&#x27;);&#125;?&gt; å¸¸ç”¨å†…ç½®æ–¹æ³•issetåˆ¤æ–­å˜é‡æ˜¯å¦å·²å®šä¹‰ä¸ç¡®å®šå˜é‡æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ç”¨isset($varName)å…ˆåˆ¤æ–­ï¼Œä»£ç æ›´å¥å£®ã€‚ 1234&lt;?phpecho isset($done) ? &#x27;y&#x27; : &#x27;n&#x27; // necho $color; // æŠ¥é”™ å› ä¸ºå˜é‡$coloræœªå®šä¹‰?&gt; unsetåˆ é™¤å˜é‡ 123456&lt;?php$like = true;echo $like; // 1unset($like);echo $like; // æŠ¥é”™ å˜é‡å·²ä¸å­˜åœ¨?&gt; exitä¸€èˆ¬ç”¨äºæå‰é€€å‡ºç¨‹åºï¼Œå¦‚ä¸‹ä»£ç åªè¾“å‡º1-9 die($msg)ä¹Ÿå¯ä»¥ç»ˆæ­¢ç¨‹åº 1234567891011121314151617&lt;?phpfunction printNum($i) &#123; if ( $i !== 10 ) &#123; echo $i , &quot; &quot;; &#125; else &#123; exit(0); &#125;&#125;$n = 1;while ($n &lt; 20) &#123; printNum($n); $n++;&#125; var_exportå¯¼å‡ºå˜é‡ä»¥ä»£ç å½¢å¼è¡¨ç¤ºçš„å­—ç¬¦ä¸²ï¼Œå¦‚: var_export(false) sleepsleep($seconds)è®©ç¨‹åºä¼‘çœ &#x2F;æš‚åœè‹¥å¹²ç§’ usleep($milsec)ä¼‘çœ æŒ‡å®šçš„æ¯«ç§’å€¼ 123456&lt;?phpinclude &#x27;inc/header.php&#x27;;clog(date(&#x27;H:i:s&#x27;));sleep(5);clog(date(&#x27;H:i:s&#x27;)); emptyåˆ¤æ–­æ˜¯å¦ä¸ºç©ºåŸå§‹æ•°æ®ç±»å‹éƒ½æœ‰è‡ªå·±é¢„å®šä¹‰çš„ç©ºå€¼ï¼Œåˆ†åˆ«ä¸º: 0, ç©ºä¸², false, null;å¤åˆæ•°æ®ç±»å‹(æ•°ç»„ã€å¯¹è±¡)ä¼šè½¬æ¢ä¸ºå­—ç¬¦ä¸²å†åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œè‹¥å¯¹è±¡æ²¡æœ‰æä¾›è½¬æ¢ä¸ºstringçš„æ–¹æ³•ï¼Œåˆ™ä¼šæŠ¥é”™ 12345678910111213&lt;?phpcomment(&#x27;åˆ¤æ–­å˜é‡ä¸ºç©º&#x27;);class MyObj&#123;&#125;$myObj = new MyObj;$arr = array(&#x27;&#x27;, 0, false, null, array(), $myObj);foreach ($arr as $val) &#123; clog(&quot;$val is empty? &quot; . (empty($val) ? &#x27;yes&#x27; : &#x27;no&#x27;)); // array() -&gt; string throw warning // $myObj -&gt; string throw error&#125;?&gt; evalæ‰§è¡Œä»£ç å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå…¶å®ä¸å¸¸ç”¨ :) 123&lt;?phpeval(&#x27;echo &quot;you are so nice&quot;;&#x27;);?&gt; listlist()æŠŠæ•°ç»„ä¸­çš„å€¼èµ‹ç»™ä¸€äº›å˜é‡ã€‚list()æ˜¯è¯­è¨€ç»“æ„ï¼Œä¸æ˜¯å‡½æ•°ã€‚ 1234&lt;?php /* å¯ç”¨äºäº¤æ¢å¤šä¸ªå˜é‡çš„å€¼ */ list($a, $b) = array($b, $a); list($drink, , $power) = array(&#x27;coffee&#x27;, &#x27;brown&#x27;, &#x27;caffeine&#x27;); é¢„å®šä¹‰å¸¸é‡ PATH_SEPARATOR è·¯å¾„åˆ†éš”ç¬¦(Windowsä¸ºåˆ†å·;ï¼Œç±»Unixä¸ºå†’å·:) DIRECTORY_SEPARATOR ç›®å½•åˆ†éš”ç¬¦ PHP_EOL å½“å‰ç³»ç»Ÿçš„æ¢è¡Œç¬¦ PHP_VERSION PHPç‰ˆæœ¬å· PHP_OS PHPæœåŠ¡æ‰€åœ¨çš„æ“ä½œç³»ç»Ÿ PHP_SAPI ç”¨æ¥åˆ¤æ–­æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œè¿˜æ˜¯æµè§ˆå™¨æ‰§è¡Œçš„ï¼Œå¦‚æœ PHP_SAPI==&#39;cli&#39; è¡¨ç¤ºæ˜¯åœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œ å¤§å°å†™æ•æ„Ÿåªæœ‰å˜é‡æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œç±»å’Œå‡½æ•°éƒ½å¿½ç•¥å¤§å°å†™ 1234567891011&lt;?phpclass Animal &#123; function show() &#123; echo &quot;this is an animal&quot;; &#125;&#125;$a = new animal; // ok ç±»å’Œå‡½æ•°ä¸åŒºåˆ†å¤§å°å†™$c = &#x27;blue&#x27;;echo isset($C) ? &#x27;y&#x27; : &#x27;n&#x27;; // n å˜é‡åŒºåˆ†å¤§å°å†™?&gt; å¯å˜æ ‡è¯†ç¬¦å‰æ–‡è®²åˆ°PHPæ”¯æŒååˆ†åŠ¨æ€çš„è¯­æ³•ï¼Œå…¶å®è´¨å°±æ˜¯æ ‡è¯†ç¬¦çš„å¯å˜æ€§ï¼Œç±»åã€å‡½æ•°åå’Œå˜é‡åç­‰ä¸è¦æ±‚æ˜¯ç›´æ¥å­—é¢é‡ï¼Œå¯ä»¥æ˜¯å˜é‡çš„å€¼ã€‚ å¯å˜å˜é‡å˜é‡åæ˜¯å˜é‡ shellä¹Ÿæ”¯æŒç±»ä¼¼çš„è¯­æ³•ï¼Œç†Ÿæ‚‰shellçš„åŒå­¦åº”è¯¥ä¼šä¼¼æ›¾ç›¸è¯† 123456789&lt;?php$color = &#x27;pink&#x27;; $name = &#x27;color&#x27;; echo $$name; // pink$varname = &quot;english&quot;;$$varname = 90;echo($english); // 90?&gt; å¯å˜å‡½æ•°å‡½æ•°åæ˜¯å˜é‡ 123456&lt;?phpfunction func() &#123; echo &#x27;hello!&#x27;;&#125;$funName = &#x27;func&#x27;; $funName(); // hello å¯å˜ç±»åç±»åæ˜¯å˜é‡ 1234567&lt;?phpclass Person&#123; public $word = &#x27;hello&#x27;;&#125;$className = &#x27;Person&#x27;; $person = new $className; echo $person-&gt;word; å¯å˜å±æ€§å¯¹è±¡çš„å±æ€§åæ˜¯å˜é‡ 12345678&lt;?phpclass Person&#123; public $word = &#x27;hello&#x27;;&#125;$className = &#x27;Person&#x27;; $person = new $className; $prop = &#x27;word&#x27;;echo $person-&gt;$prop; å¯å˜æ–¹æ³•æ–¹æ³•åæ˜¯å˜é‡ 123456789&lt;?phpclass Car&#123; public function run() &#123; echo &quot;car is running...&quot;; &#125;&#125;$car = new Car;$method = &#x27;run&#x27;;$car-&gt;$method(); ä¼ å€èµ‹å€¼å˜é‡çš„èµ‹å€¼é€šå¸¸æ˜¯ä¼ å€¼èµ‹å€¼çš„ï¼Œå¦‚ $a = $b, å…¶å®æ˜¯æŠŠ$bä¿å­˜çš„å€¼å­˜å…¥å˜é‡$a. å¦‚ä¸‹å˜é‡a,bçš„å€¼éƒ½æ˜¯10ï¼Œä½†æ˜¯ä¸¤ä¸ª10ä¸æ˜¯åŒä¸€ä¸ªï¼Œå®ƒä»¬æ‰€åœ¨çš„å†…å­˜åœ°å€ä¸åŒã€‚ 1234&lt;?php$b = 10;$a = $b; è‹¥é‡‡ç”¨ä¼ å€èµ‹å€¼ï¼Œå…¶å®æ˜¯æŠŠbçš„å†…å­˜åœ°å€ä¼ ç»™a, å®ƒä»¬æŒ‡å‘åŒä¸€ä¸ª10 1234&lt;?php$b = 10;$a = &amp;$b; å¸¸é‡å¸¸é‡å®šä¹‰å®šä¹‰å¸¸é‡æœ‰ define() å’Œ const ä¸¤ç§æ–¹å¼ è¯­æ³•: define(å¸¸é‡å, å¸¸é‡å€¼, [isIgnoreCase]) 12345&lt;?phpdefine(&#x27;MAX_TIME&#x27;, 5);const MAX_WIDTH = 200;?&gt; å¸¸é‡è®¿é—®è®¿é—®å¸¸é‡ä¸éœ€è¦åŠ $å‰ç¼€ï¼Œç›´æ¥è®¿é—®; è¿˜å¯ä»¥ç”¨ constant() åŠ¨æ€è®¿é—®å¸¸é‡ 12345&lt;?phpconst HOST = &#x27;pzj.fun&#x27;;echo HOST;$name = &#x27;HOST&#x27;;echo constant($name); å¸¸é‡æ–¹æ³•å¸¸é‡ç›¸å…³çš„æ–¹æ³•: defined($name) åˆ¤æ–­å¸¸é‡æ˜¯å¦å®šä¹‰ get_defined_constants() è·å–å¸¸é‡æ•°ç»„ 123456&lt;?phpconst HOST = &#x27;pzj.fun&#x27;;echo defined(&#x27;HOST&#x27;) ? &#x27;yes&#x27; : &#x27;no&#x27;;print_r(get_defined_constants());?&gt; è¿›åˆ¶è½¬æ¢åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶ã€äºŒè¿›åˆ¶å’Œåè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢ åè¿›åˆ¶ decimal, hexdec -&gt; hex to decimal hexdec() åå…­è¿›åˆ¶è½¬åè¿›åˆ¶ dechex() åè¿›åˆ¶è½¬åå…­è¿›åˆ¶ bindec() äºŒè¿›åˆ¶è½¬åè¿›åˆ¶ decbin() åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ octdec() å…«è¿›åˆ¶è½¬åè¿›åˆ¶ decoct() åè¿›åˆ¶è½¬å…«è¿›åˆ¶ heredocæ‰€è§å³æ‰€å¾—åœ°è¾“å‡ºå¤§æ®µæ–‡æœ¬ï¼Œæ”¯æŒå˜é‡è§£æ 123456789&lt;?php$puntuation = &#x27;!!&#x27;;$con = &lt;&lt;&lt;EOFä¸€å£¶æµŠé…’å–œç›¸é€¢å¤ä»Šå¤šå°‘äº‹éƒ½ä»˜ç¬‘è°ˆä¸­$puntuationEOF;echo $con; nowdocæ‰€è§å³æ‰€å¾—åœ°è¾“å‡ºå¤§æ®µæ–‡æœ¬ï¼Œä¸æ”¯æŒå˜é‡è§£æ, $puntuationä¸ä¼šè¢«è§£æ 12345678910&lt;?php$puntuation = &#x27;!!&#x27;;$poem = &lt;&lt;&lt;&#x27;EOF&#x27;ç§¦æ—¶æ˜æœˆæ±‰æ—¶å…³ï¼Œä¸‡é‡Œé•¿å¾äººæœªè¿˜$puntuationEOF;echo $poem; æ•°æ®ç±»å‹è·å–æ•°æ®ç±»å‹gettype($name) è¿”å›ç±»å‹çš„åç§° 12&lt;?phpecho gettype(&#x27;hi&#x27;); åˆ¤æ–­æ•°æ®ç±»å‹ is_int() is_float() is_string() is_bool() is_null() is_array() is_object() is_resource() ç±»å‹è½¬æ¢ä¸“ç”¨ç±»å‹è½¬æ¢å‡½æ•° boolval() floatval() intval() strval() é€šç”¨ç±»å‹è½¬æ¢å‡½æ•° settype($var, $typename) 12345&lt;?php$n = &#x27;10&#x27;;echo gettype($n);settype($n, &#x27;int&#x27;);echo gettype($n); å¼ºåˆ¶ç±»å‹è½¬æ¢ (typeName) (int) (float) (string) (bool) (array) (object) (unset) è½¬æ¢ä¸ºnull 1234&lt;?php$a = &#x27;12&#x27;;$v = (int)$a;var_dump($v); // int æ–‡ä»¶åŠ è½½ require require_once include include_once requireå’Œincludeéƒ½æ˜¯åŠ è½½ç›®æ ‡è„šæœ¬ï¼Œå¹¶æ‰§è¡Œå®ƒçš„ä»£ç ï¼›requireæ¯”è¾ƒä¸¥æ ¼ï¼Œé‡åˆ°å¤±è´¥æ—¶ï¼Œä¼šç»ˆæ­¢è„šæœ¬ï¼Œ includeæŸ¥æ‰¾è·¯å¾„set_include_path($path) å¯ä»¥è®¾ç½®includeå‘½ä»¤åœ¨å“ªäº›åœ°æ–¹æŸ¥æ‰¾æ–‡ä»¶(ç±»ä¼¼PATHç¯å¢ƒå˜é‡çš„è®¾ç½®) get_include_path() è·å–å½“å‰includeæŸ¥æ‰¾è·¯å¾„çš„è®¾ç½® 12345678910&lt;?phpset_include_path(&#x27;./inc&#x27;);include &#x27;common.php&#x27;;comment(&#x27;è®¾ç½®includeçš„æŸ¥æ‰¾è·¯å¾„&#x27;);clog(&#x27;set_include_path() å¯ä»¥ç®€åŒ–åŠ è½½è·¯å¾„çš„ä¹¦å†™&#x27;);var_dump(get_include_path()); // &#x27;./inc&#x27; å‡½æ•°å‚æ•°ä¼ é€’å½¢å‚å’Œå®å‚ä¹‹é—´å¯æŒ‰å€¼ä¼ é€’ï¼Œä¹Ÿå¯æŒ‰å¼•ç”¨ä¼ é€’ï¼Œé»˜è®¤æŒ‰å€¼ä¼ é€’ã€‚ 123456789101112131415161718192021222324252627282930&lt;?phpinclude &#x27;inc/header.php&#x27;;comment(&#x27;å‚æ•°ä¼ é€’&#x27;);$colors = array(&#x27;red&#x27;, &#x27;blue&#x27;, &#x27;green&#x27;);function update($colorArr)&#123; $colorArr[0] = &#x27;pink&#x27;; print_r($colorArr);&#125;comment(&#x27;é»˜è®¤æŒ‰å€¼ä¼ é€’ï¼Œä¸ä¼šä¿®æ”¹åˆ°å®å‚$colors&#x27;);update($colors);newline();print_r($colors);comment(&#x27;æŒ‰å¼•ç”¨ä¼ é€’,ä¼šä¿®æ”¹åˆ°å®å‚$colors&#x27;);function change(&amp;$colorList)&#123; $colorList[0] = &#x27;purple&#x27;; print_r($colorList);&#125;change($colors);newline();print_r($colors);include &#x27;inc/footer.php&#x27;; ä¸å®šå‚å‡½æ•°å¯æ¥å—ä»»æ„å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç”¨ä¸‹æ¥æ–¹æ³•è·å–å®å‚çš„ä¿¡æ¯ï¼š func_get_args() è°ƒç”¨å‡½æ•°ä¼ å…¥å®å‚ç»„æˆçš„æ•°ç»„ func_num_args() è·å–å®å‚ä¸ªæ•° func_get_arg($n) è·å–ç¬¬nä¸ªå®å‚ 12345678910111213141516&lt;?phpfunction mySum()&#123; $count = func_num_args(); $args = func_get_args(); $first = func_get_arg(0); print_r(array($count, $args, $first)); $result = 0; foreach ($args as $arg) &#123; $result += $arg; &#125; return $result;&#125;$result = mySum(1, 10, 7);clog(&quot;mySum result:&quot; . $result); è¿”å›å€¼ä¼ é€’å‡½æ•°çš„è¿”å›å€¼ä¹Ÿåˆ†æŒ‰å€¼ä¼ é€’å’ŒæŒ‰å¼•ç”¨ä¼ é€’ï¼Œé»˜è®¤æ˜¯æŒ‰å€¼ä¼ é€’ å› ä¸ºè¿”å›å€¼é»˜è®¤æŒ‰å€¼ä¼ é€’ï¼Œæ‰€ä»¥ $outFavs å’Œ $innerFavs æ˜¯ä¸åŒçš„æ•°ç»„ï¼Œä¿®æ”¹$outFavså¹¶ä¸ä¼šå½±å“$innerFav 123456789101112131415&lt;?phpfunction getFavs()&#123; $arr = array(&#x27;coding&#x27;, &#x27;reading&#x27;); $GLOBALS[&#x27;innerFavs&#x27;] = $arr; return $arr;&#125;$outFavs = getFavs();array_push($outFavs, &#x27;sleeping&#x27;);clog(&quot;outFavs::&quot; . implode(&#x27;, &#x27;, $outFavs));newline();clog(&quot;innerFavs::&quot; . implode(&#x27;, &#x27;, $GLOBALS[&#x27;innerFavs&#x27;]));newline(); è¿”å›å€¼æŒ‰å¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥ $outMyArr å’Œ $innerMyArr æ˜¯åŒä¸€ä¸ªæ•°ç»„ï¼Œä¿®æ”¹$outMyArrå¹¶ä¼šå½±å“$innerMyArr 1234567891011121314151617// å‡½æ•°åå‰åŠ  &amp;, è¡¨ç¤ºå‡½æ•°å¯ä»¥è¿”å›å¼•ç”¨function &amp;getMyFavs()&#123; $myArr = array(&#x27;coding&#x27;, &#x27;reading&#x27;); // $GLOBALS[&#x27;innerMyArr&#x27;] = $myArr; // ä¸¤è€…å¹¶éæŒ‡å‘åŒä¸€æ•°ç»„ $GLOBALS[&#x27;innerMyArr&#x27;] = &amp;$myArr; // è®©ä¸¤è€…æŒ‡å‘åŒä¸€æ•°ç»„ return $myArr;&#125;$outMyArr = &amp;getMyFavs();array_push($outMyArr, &#x27;sleeping&#x27;);clog(&quot;outMyArr is:&quot; . implode(&#x27;, &#x27;, $outMyArr));newline();clog(&quot;innerMyArr is:&quot; . implode(&#x27;, &#x27;, $GLOBALS[&#x27;innerMyArr&#x27;]));newline(); åŒ¿åå‡½æ•°å¯ä»¥ä½¿ç”¨å‡½æ•°ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œå£°æ˜å‡½æ•°æ—¶å¯ä»¥ä½¿ç”¨ use($param) æ¥å‘å‡½æ•°ä¸­ä¼ å…¥å‡½æ•°å¤–çš„å˜é‡ï¼Œç»“åˆå˜é‡å¼•ç”¨æ¥å®ç°é—­åŒ…ã€‚ å®šä¹‰åŒ¿åå‡½æ•° 1234$func = function ($msg) &#123; echo $msg;&#125;;$func(&#x27;nice to meet you&#x27;); è¿”å›é—­åŒ…ï¼Œé—­åŒ…ä½¿ç”¨å¤–éƒ¨å˜é‡ 12345678910function getSumFunc()&#123; $num1 = 10; $sumFunc = function ($num2) use ($num1) &#123; return $num1 + $num2; &#125;; return $sumFunc;&#125;$sum = getSumFunc();clog($sum(20)); //30 æ¨¡æ¿è¯­æ³•è¾“å‡ºhtmlphpæ”¯æŒç”¨ç‰¹å®šçš„æ¨¡æ¿è¯­æ³•è¾“å‡ºhtmlï¼Œè§£å†³äº†ç”¨echoè¾“å‡ºå¤§æ®µhtmlå†…å®¹çš„éº»çƒ¦ 12345678910111213141516&lt;?phpinclude &#x27;inc/header.php&#x27;;?&gt;&lt;?php if (isset($_GET[&#x27;admin&#x27;])): ?&gt; &lt;h1&gt;admin user&lt;/h1&gt;&lt;?php else: ?&gt; &lt;h2&gt;normal user&lt;/h2&gt;&lt;?php endif ?&gt;&lt;?phpinclude &#x27;inc/footer.php&#x27;;?&gt; ä½œç”¨åŸŸä½œç”¨åŸŸåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸå’Œå±€éƒ¨ä½œç”¨åŸŸ.ä½œç”¨åŸŸåªé’ˆå¯¹å˜é‡ï¼Œå¸¸é‡æ²¡æœ‰ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨æ‰€æœ‰åœ°æ–¹è¢«è®¿é—®åˆ°ã€‚é€šè¿‡include &#39;./some.php&#39;è½½å…¥æ–‡ä»¶, è¢«è½½å…¥æ–‡ä»¶(some.php)ä¸­å®šä¹‰çš„å˜é‡ä½œç”¨åŸŸå–å†³äºinclude &#39;./some.php&#39;è¯­å¥æ‰€åœ¨çš„ä½ç½®ã€‚ å‡½æ•°å¤–è½½å…¥å°±æ˜¯å…¨å±€ï¼Œå‡½æ•°å†…è½½å…¥å°±æ˜¯å±€éƒ¨ï¼ æ•°æ®åº“ç›¸å…³å‡½æ•° mysql_connect è¿æ¥æ•°æ®åº“ mysql_query å‘é€SQLè¯­å¥ï¼Œæ¥æ”¶æ‰§è¡Œç»“æœ ä»…å¯¹select, show, explain, describeè¯­å¥æ‰§è¡ŒæˆåŠŸè¿”å›ä¸€ä¸ªèµ„æºæ ‡è¯†ç¬¦ï¼Œå…¶ä»–è¯­å¥æˆåŠŸè¿”å›true;å¤±è´¥å‡è¿”å›falseã€‚ mysql_fetch_assoc ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ mysql_fetch_row ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºæ™®é€šæ•°ç»„ mysql_fetch_array ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ï¼Œæˆ–æ™®é€šæ•°ç»„ï¼Œæˆ–äºŒè€…å…¼æœ‰ array mysql_fetch_array ( resource $result [, int $ result_type ] ) å¯é€‰å‚æ•° result_type å¯é€‰å€¼ä¸ºï¼šMYSQL_ASSOCï¼ŒMYSQL_NUM å’Œ MYSQL_BOTH(é»˜è®¤) mysql_free_result é‡Šæ”¾ç»“æœå†…å­˜ mysql_close å…³é—­è¿æ¥ é¢å‘å¯¹è±¡ç±»æˆå‘˜ï¼šç±»å¸¸é‡ã€ç±»å±æ€§&#x2F;é™æ€å±æ€§ã€ç±»æ–¹æ³•&#x2F;é™æ€æ–¹æ³•å¯¹è±¡æˆå‘˜ï¼šå®ä¾‹å±æ€§ã€å®ä¾‹æ–¹æ³•å¯¹è±¡æˆå‘˜è®¿é—®ç”¨-&gt;(å¦‚: $this-&gt;name)ï¼Œç±»æˆå‘˜è®¿é—®ç”¨::(å¦‚: Animal::countï¼Œ self::count) ç±»åã€æ–¹æ³•åã€å±æ€§åå‡ä¸åŒºåˆ†å¤§å°å†™$thisä»£è¡¨æœ¬å¯¹è±¡ï¼Œselfä»£è¡¨æœ¬ç±»ï¼Œparentä»£è¡¨çˆ¶ç±» è®¿é—®æ§åˆ¶ public å…¬æœ‰çš„ï¼ˆç»§æ‰¿é“¾ã€æœ¬ç±»ã€å¤–éƒ¨å‡å¯è®¿é—®ï¼‰ protected ä¿æŠ¤çš„ï¼ˆä»…ç»§æ‰¿é“¾ã€æœ¬ç±»å¯è®¿é—®ï¼‰ private ç§æœ‰çš„ï¼ˆä»…æœ¬ç±»å¯è®¿é—®ï¼‰ å…¼å®¹æ€§é—®é¢˜ å£°æ˜å±æ€§æ—¶ï¼Œvarå…³é”®å­—å£°æ˜çš„é»˜è®¤ä¸ºpublicæƒé™ å£°æ˜æ–¹æ³•æ—¶ï¼Œçœç•¥è®¿é—®ä¿®é¥°ç¬¦ï¼Œé»˜è®¤ä¸ºpublicæƒé™ é‡å†™ overrideç»§æ‰¿æ—¶ï¼Œçˆ¶ç±»çš„æˆå‘˜æ–¹æ³•ä¸æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå­ç±»å¯é‡å†™åŒåæ–¹æ³•è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ã€‚ é‡å†™é™åˆ¶ è®¿é—®æƒé™é™åˆ¶ï¼š å­ç±»çš„æˆå‘˜çš„è®¿é—®æ§åˆ¶å¿…é¡»ç›¸ç­‰æˆ–å¼±äºçˆ¶ç±» (å„¿å­å¿…é¡»æ¯”çˆ¶äº²æ›´å¼€æ”¾)ã€‚ æ–¹æ³•å‚æ•°é™åˆ¶ï¼š å‚æ•°æ•°é‡å¿…é¡»ç›¸åŒï¼Œå‚æ•°åå¯ä¸åŒã€‚ finalæ–¹æ³•å¦‚æœçˆ¶ç±»ä¸­çš„æ–¹æ³•è¢«å£°æ˜ä¸ºfinalï¼Œåˆ™å­ç±»æ— æ³•è¦†ç›–ï¼ˆé‡å†™ï¼‰è¯¥æ–¹æ³•ã€‚ æ„é€ æ–¹æ³•ç±»é€šè¿‡æ„é€ æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡ã€‚è¯­æ³•: void __construct([ mixed $args [, $... ]] ) ææ„æ–¹æ³•ææ„å‡½æ•°ä¼šåœ¨åˆ°æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰å¼•ç”¨éƒ½è¢«åˆ é™¤, æˆ–è€…å½“å¯¹è±¡è¢«æ˜¾å¼é”€æ¯æ—¶æ‰§è¡Œã€‚è¯­æ³•: void __destruct( void ) é™æ€æˆå‘˜(staticå…³é”®å­—) ç”¨staticå£°æ˜ç±»æˆå‘˜&#x2F;ç±»æ–¹æ³•ï¼Œå®ƒä»¬å¯é€šè¿‡ç±»ç›´æ¥è®¿é—®ã€‚ é™æ€æˆå‘˜ï¼ˆå±æ€§æˆ–æ–¹æ³•ï¼‰å‡å±äºç±»ï¼Œæ•…ä¸èƒ½é€šè¿‡$thisæˆ–-&gt;è®¿é—®ã€‚ é™æ€æˆå‘˜æ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œå±äºç±»ã€‚ é™æ€æˆå‘˜ç”¨ç±»è°ƒç”¨ï¼Œéé™æ€æˆå‘˜ç”¨å¯¹è±¡è°ƒç”¨ã€‚ å½“åœ¨ç±»çš„å¤–éƒ¨è®¿é—®é™æ€æˆå‘˜ã€æ–¹æ³•å’Œå¸¸é‡æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ç±»çš„åå­—ã€‚ self å’Œ parent ç”¨äºåœ¨ç±»å†…éƒ¨å¯¹ç±»å±æ€§æˆ–ç±»æ–¹æ³•è¿›è¡Œè®¿é—® ç±»å¸¸é‡ å¸¸é‡çš„å€¼å°†å§‹ç»ˆä¿æŒä¸å˜ã€‚ åœ¨å®šä¹‰å’Œä½¿ç”¨å¸¸é‡çš„æ—¶å€™ä¸éœ€è¦ä½¿ç”¨$ç¬¦å·ã€‚ å¸¸é‡çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå®šå€¼ï¼Œä¸èƒ½æ˜¯å˜é‡. å®šä¹‰ç±»å¸¸é‡ï¼šconst å¸¸é‡å = å¸¸é‡å€¼; ä¸éœ€è¦åŠ publicç­‰è®¿é—®ä¿®é¥°é™å®šç¬¦ ç±»å¸¸é‡å±äºç±»ï¼Œä½¿ç”¨ç±»è®¿é—®ï¼Œç±»å::ç±»å¸¸é‡ æˆ– self::ç±»å¸¸é‡ æŠ½è±¡ç±»å…³é”®å­—ï¼šabstractæŠ½è±¡ç±»ä¸èƒ½ç›´æ¥è¢«å®ä¾‹åŒ–ï¼Œå¿…é¡»å…ˆç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œç„¶åå†å®ä¾‹åŒ–å­ç±»ã€‚æŠ½è±¡ç±»ä¸­è‡³å°‘è¦åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚éæŠ½è±¡ç±»ä¸èƒ½åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚ æ¥å£å…³é”®å­—ï¼šinterfaceä½¿ç”¨æ¥å£å¯ä»¥æŒ‡å®šæŸä¸ªç±»å¿…é¡»å®ç°å“ªäº›æ–¹æ³•ï¼Œä½†ä¸éœ€è¦å®šä¹‰è¿™äº›æ–¹æ³•çš„å…·ä½“å†…å®¹ã€‚ å®šä¹‰æ¥å£ 123interface Runnable &#123; public function show($info);&#125; å®ç°æ¥å£ 12345class Dog implements Runnable &#123; public function show($info) &#123; echo &quot;Hi,&quot; . $info; &#125;&#125; ç±»ä¸æŠ½è±¡ç±»ä¹‹é—´æ˜¯ç»§æ‰¿å…³ç³»ï¼Œç±»ä¸æ¥å£ä¹‹é—´æ˜¯å®ç°å…³ç³»ã€‚ç±»ä¸æŠ½è±¡ç±»æ˜¯å•ç»§æ‰¿ï¼Œç±»ä¸æ¥å£æ˜¯å¤šå®ç°ã€‚ ç±»ä¸å¯¹è±¡ç›¸å…³å‡½æ•° class_exists($class [,$autoload]) æ£€æŸ¥ç±»æ˜¯å¦å·²å®šä¹‰ interface_exists($interface [,$autoload]) æ£€æŸ¥æ¥å£æ˜¯å¦å·²è¢«å®šä¹‰ method_exists($obj, $method) æ£€æŸ¥ç±»çš„æ–¹æ³•æ˜¯å¦å­˜åœ¨ property_exists($class, $property) æ£€æŸ¥å¯¹è±¡æˆ–ç±»æ˜¯å¦å…·æœ‰è¯¥å±æ€§ get_declared_classes(void) è¿”å›ç”±å·²å®šä¹‰ç±»çš„åå­—æ‰€ç»„æˆçš„æ•°ç»„ get_declared_interfaces(void) è¿”å›ä¸€ä¸ªæ•°ç»„åŒ…å«æ‰€æœ‰å·²å£°æ˜çš„æ¥å£ get_class([$obj]) è¿”å›å¯¹è±¡çš„ç±»å get_parent_class([$obj]) è¿”å›å¯¹è±¡æˆ–ç±»çš„çˆ¶ç±»å get_class_methods($class) è¿”å›ç”±ç±»çš„æ–¹æ³•åç»„æˆçš„æ•°ç»„ get_object_vars($obj) è¿”å›ç”±å¯¹è±¡å±æ€§ç»„æˆçš„å…³è”æ•°ç»„ get_class_vars($class) è¿”å›ç”±ç±»çš„é»˜è®¤å±æ€§ç»„æˆçš„æ•°ç»„ is_subclass_of($obj, $class) å¦‚æœæ­¤å¯¹è±¡æ˜¯è¯¥ç±»çš„å­ç±»ï¼Œåˆ™è¿”å›TRUE è‡ªåŠ¨åŠ è½½ç±»åœ¨è¯•å›¾ä½¿ç”¨å°šæœªè¢«å®šä¹‰çš„ç±»æ—¶è‡ªåŠ¨è°ƒç”¨ __autoload å‡½æ•° 1234function __autoload($class_name) &#123; // $_SERVER[&quot;DOCUMENT_ROOT&quot;] å½“å‰è¿è¡Œè„šæœ¬æ‰€åœ¨çš„æ–‡æ¡£æ ¹ç›®å½• require_once $_SERVER[&quot;DOCUMENT_ROOT&quot;] . &quot;/class/$class_name.php&quot;;&#125; spl_autoload_register å¯ä»¥æ³¨å†Œå¤šä¸ªè‡ªåŠ¨åŠ è½½å‡½æ•°ï¼Œå…ˆæ³¨å†Œçš„å…ˆæ‰§è¡Œ; ä¸€æ—¦æ³¨å†Œè‡ªåŠ¨åŠ è½½å‡½æ•°ï¼Œ__autoload å°±å¤±æ•ˆã€‚è¯­æ³•: bool spl_autoload_register ([ callback $autoload_function ] ) åºåˆ—åŒ–æ•°æ®é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–ä¿å­˜åˆ°ç¡¬ç›˜å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œåºåˆ—åŒ–ï¼›åºåˆ—åŒ–åœ¨å­˜æ”¾æ•°æ®æ—¶ï¼Œä¹Ÿä¼šå­˜æ”¾æ•°æ®ç±»å‹ã€‚è¯­æ³•: string serialize ( mixed $value ) ååºåˆ—åŒ–unserialize ä»å·²å­˜å‚¨çš„è¡¨ç¤ºä¸­åˆ›å»ºPHPçš„å€¼è¯­æ³•: mixed unserialize ( string $str [, string $callback ] ) åå°„æœºåˆ¶ Reflectionåå°„çš„ä¸»è¦ä½œç”¨ï¼š è·å–ç»“æ„ä¿¡æ¯ ä»£ç†æ‰§è¡Œ ReflectionClass æŠ¥å‘Šä¸€ä¸ªç±»çš„æœ‰å…³ä¿¡æ¯ ReflectionMethod æŠ¥å‘Šä¸€ä¸ªæ–¹æ³•çš„æœ‰å…³ä¿¡æ¯ ReflectionClass::export è¾“å‡ºç±»ç»“æ„æŠ¥å‘Š ä»£ç†æ‰§è¡Œå®ä¾‹åŒ– ReflectionFunction ç±»çš„å¯¹è±¡ 12345678&lt;?phpfunction sayHi($msg)&#123; echo &quot;hello &quot;, $msg;&#125;$refFunc = new ReflectionFunction(&#x27;sayHi&#x27;);$refFunc-&gt;invoke(&#x27;alice&#x27;); æ–‡ä»¶ç³»ç»Ÿè®¿é—®æ–‡ä»¶çš„è¯»å†™æ“ä½œ file_put_contents å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ è¯­æ³•: int file_put_contents($file, $data [,$flags]) file_get_contents å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸² è¯­æ³•ï¼šstring file_get_contents($file [, bool $use_include_path [,int $offset [,int $maxlen]]]) HTTPç›¸å…³æ–¹æ³•è®¾ç½®å“åº”å¤´123&lt;?phpheader(&#x27;Location: http://demo.com/login.php&#x27;);header(&#x27;Content-Type: application/json&#x27;); è®¾ç½®cookieè¯­æ³•: setcookie($name [,$value [,$expire [,$path [,$domain [,$secure [,$httponly]]]]]]) é€šè¿‡è¶…å…¨å±€å˜é‡ $_COOKIE è¯»å–cookieæ•°æ® æ³¨æ„ï¼šsetcookie()å‡½æ•°å‰ä¸èƒ½æœ‰è¾“å‡º, é™¤éå¼€å¯obç¼“å­˜ï¼ è®¾ç½®sessionå¼€å¯sessionæœºåˆ¶, session_start()é€šè¿‡è¶…å…¨å±€å˜é‡ $_SESSION è¯»å–sessionæ•°æ® session_destroy() é”€æ¯ä¿å­˜sessionæ•°æ®çš„æ–‡ä»¶ æ³¨æ„ï¼šsession_start()å‡½æ•°å‰ä¸èƒ½æœ‰è¾“å‡ºï¼é™¤éå¼€å¯obç¼“å­˜ã€‚ æ­£åˆ™ preg_replace($pattern, $replace, $subject [,$limit [,&amp;$count]]) æ‰§è¡Œæ­£åˆ™æ›¿æ¢ preg_grep($pattern, $input [,$flags]) è¿”å›åŒ¹é…æ¨¡å¼çš„æ•°ç»„æ¡ç›® preg_match($pattern, $subject [,&amp;$matches [,$flags [,$offset]]]) æ‰§è¡Œæ­£åˆ™åŒ¹é… preg_split($pattern, $subject [,$limit [,$flags]]) é€šè¿‡æ­£åˆ™åˆ†éš”å­—ç¬¦ä¸² æ•°æ®åº“æŠ½è±¡å±‚PDO: PHP Data ObjectsPHOæŠ½è±¡å±‚é»˜è®¤è¢«åŠ è½½ï¼Œä½†éœ€åŠ è½½ç›¸åº”æ•°æ®åº“çš„é©±åŠ¨ã€‚ PDOæ˜¯OOPè¯­æ³•ï¼Œæä¾›ä¸‰ä¸ªç±»ï¼š PDOï¼šPDOè‡ªèº« PDOStatementï¼šPDOè¯­å¥ç±»ï¼Œæä¾›å¯¹è¯­å¥çš„åç»­å¤„ç† PDOExceptionï¼šPDOå¼‚å¸¸ç±»ï¼Œæä¾›å¯¹é”™è¯¯çš„å¼‚å¸¸å¤„ç† é¢„å¤„ç†å¼æ‰§è¡ŒSQL, é˜²æ­¢sqlæ³¨å…¥é£é™© PDOStatement PDO::prepare(string $statement) bool PDOStatement::bindParam ( mixed $parameter , mixed &amp;$variable ) bool PDOStatement::execute ([ array $input_parameters ] ) æ—¥æœŸæ—¶é—´å‡½æ•° time() è¿”å›å½“å‰çš„Unixæ—¶é—´æˆ³(ç§’) date($format [,$timestamp]) æ ¼å¼åŒ–ä¸€ä¸ªæœ¬åœ°æ—¶é—´ï¼æ—¥æœŸï¼Œ$timestampé»˜è®¤ä¸ºtime() microtime([$get_as_float]) è¿”å›å½“å‰Unixæ—¶é—´æˆ³å’Œå¾®ç§’æ•° strtotime($time [,$now]) å°†æ—¥æœŸå­—ç¬¦ä¸²è§£æä¸ºUnixæ—¶é—´æˆ³ mktime() è·å–æŒ‡å®šæ—¥æœŸçš„æ—¶é—´æˆ³ strftime($format [,$timestamp]) æ ¹æ®åŒºåŸŸè®¾ç½®æ ¼å¼åŒ–æœ¬åœ°æ—¶é—´ï¼æ—¥æœŸ date_default_timezone_get($timezone) è·å–é»˜è®¤æ—¶åŒº date_default_timezone_set($timezone) è®¾ç½®é»˜è®¤æ—¶åŒº æ•°ç»„å‡½æ•° array_chunk å°†ä¸€ä¸ªæ•°ç»„åˆ†å‰²æˆå¤šä¸ª array_filter ç”¨å›è°ƒå‡½æ•°è¿‡æ»¤æ•°ç»„ä¸­çš„å…ƒç´  array_slice æ•°ç»„ä¸­å–ä¸€ä¸ªç‰‡æ®µ array_keys è¿”å›æ•°ç»„ä¸­æ‰€æœ‰çš„é”®å array_values è¿”å›æ•°ç»„ä¸­æ‰€æœ‰çš„å€¼ï¼Œå¹¶å»ºç«‹æ•°å­—ç´¢å¼• array_merge åˆå¹¶ä¸€ä¸ªæˆ–å¤šä¸ªæ•°ç»„ in_array æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ array_reverse è¿”å›ä¸€ä¸ªå•å…ƒé¡ºåºç›¸åçš„æ•°ç»„ array_splice æŠŠæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†å»æ‰å¹¶ç”¨å…¶å®ƒå€¼å–ä»£ array_unique ç§»é™¤æ•°ç»„ä¸­é‡å¤çš„å€¼ implode å°†æ•°ç»„å…ƒç´ å€¼ç”¨æŸä¸ªå­—ç¬¦ä¸²è¿æ¥æˆå­—ç¬¦ä¸² explode ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²å¦ä¸€ä¸ªå­—ç¬¦ä¸² array_map å°†å›è°ƒå‡½æ•°ä½œç”¨åˆ°ç»™å®šæ•°ç»„çš„å•å…ƒä¸Šï¼Œåªèƒ½å¤„ç†å…ƒç´ å€¼ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªæ•°ç»„ array_walk å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªæˆå‘˜åº”ç”¨æŒ‡å®šå‡½æ•°ï¼Œä¸foreachåŠŸèƒ½ç›¸åŒ array_push åœ¨æœ«å°¾æ·»åŠ å…ƒç´ (å…¥æ ˆ) array_pop æŠŠæœ«å°¾å…ƒç´ å¼¹å‡º(å‡ºæ ˆ) array_unshift åœ¨å¼€å¤´æ·»åŠ å…ƒç´  array_shift å°†æ•°ç»„å¼€å¤´çš„å…ƒç´ ç§»é™¤ æ€»ç»“PHPç¡®å®æ˜¯ä¸€é—¨æ¯”è¾ƒå…¨é¢çš„ç¨‹åºè¯­è¨€ï¼Œæ”¯æŒé¢å‘å¯¹è±¡ã€æ¨¡å—åŒ–ã€å‘½åç©ºé—´å’Œé—­åŒ…ç­‰ç‰¹æ€§ï¼Œè‡³äºå®ƒæ˜¯å¦æ˜¯æœ€å¥½çš„è¯­è¨€ï¼Œè¿™ä¸ªé—®é¢˜å°±è§ä»è§æ™ºäº†ã€‚ é€šè¿‡è¿™ä¸¤ç¯‡PHPåŸºç¡€çŸ¥è¯†çš„è®²è§£ï¼Œç›¸ä¿¡è¦çœ‹æ‡‚PHPä»£ç åº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼›å¦‚æœæœ‰ç”¨åˆ° CMS , Wordpress å’Œå…è´¹è™šæ‹Ÿæœºçš„è¯ï¼Œæˆ‘ä»¬è¦åšä¸€äº›åŠŸèƒ½ä¿®æ”¹æ—¶ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚","tags":["PHP"],"categories":["PHP"]},{"title":"è½¯ç¡¬é“¾æ¥å°ç™½æ–‡","path":"/2024/12/13/è½¯ç¡¬é“¾æ¥å°ç™½æ–‡/","content":"è½¬è½½è‡ª: https://blog.csdn.net/weixin_42301220&#x2F;article&#x2F;details&#x2F;134520854 1. è½¯é“¾æ¥å’Œç¡¬é“¾æ¥ç®€ä»‹ ä»€ä¹ˆæ˜¯è½¯é“¾æ¥è½¯é“¾æ¥(Symbolic Link),ä¹Ÿç§°ä¸º ç¬¦å·é“¾æ¥ ,æ˜¯åŒ…å«äº†æºæ–‡ä»¶ä½ç½®ä¿¡æ¯çš„ç‰¹æ®Šæ–‡ä»¶ã€‚å®ƒçš„ä½œç”¨æ˜¯é—´æ¥æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ã€‚å¦‚æœè½¯é“¾æ¥çš„æºæ–‡ä»¶è¢«åˆ é™¤æˆ–ç§»åŠ¨äº†,è½¯é“¾æ¥å°±æ‰“ä¸å¼€äº†ã€‚ ä»€ä¹ˆæ˜¯ç¡¬é“¾æ¥ç¡¬é“¾æ¥(Hard Link)æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹(inode)æ¥è¿›è¡Œé“¾æ¥ã€‚åœ¨Linuxç³»ç»Ÿä¸­,æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç´¢å¼•èŠ‚ç‚¹,è®°å½•æ–‡ä»¶çš„æ—¥æœŸ,å¤§å°,æ‰€åœ¨å—ç­‰ä¿¡æ¯ã€‚ç¡¬é“¾æ¥å°±æ˜¯æŒ‡å‘æºæ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹çš„è¿æ¥ã€‚åˆ é™¤æºæ–‡ä»¶,ä¸å½±å“ç¡¬é“¾æ¥çš„è®¿é—®ã€‚ ä¼šæœ‰å¤šä¸ªç¡¬é“¾æ¥æŒ‡å‘æºæ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹ï¼Œæ‰€æœ‰ç¡¬é“¾æ¥éƒ½è¢«åˆ é™¤æ—¶ï¼Œæºæ–‡ä»¶æ‰ä¼šçœŸæ­£è¢«åˆ é™¤ls -l -i å¯æŸ¥çœ‹ç¡¬é“¾æ¥çš„ä¸ªæ•°, å’Œç´¢å¼•èŠ‚ç‚¹åºå·find -type f -inum &#123;inodeNumber&#125; å¯æŸ¥çœ‹æŒ‡å®šç´¢å¼•èŠ‚ç‚¹çš„æ‰€æœ‰ç¡¬é“¾æ¥ è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ« è½¯é“¾æ¥æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç‹¬ç«‹æ–‡ä»¶,å®ƒå†…å®¹è®°å½•æºæ–‡ä»¶ä½ç½®;ç¡¬é“¾æ¥åªæ˜¯æºæ–‡ä»¶çš„å¼•ç”¨,ä¸å ç”¨å®é™…ç©ºé—´ã€‚ åˆ é™¤è½¯é“¾æ¥ä¸å½±å“æºæ–‡ä»¶ï¼šåˆ é™¤æºæ–‡ä»¶,è½¯é“¾æ¥å¤±æ•ˆã€‚åˆ é™¤ç¡¬é“¾æ¥ä¸å½±å“æºæ–‡ä»¶,éœ€å°†æºæ–‡ä»¶å’Œå…¨éƒ¨ç¡¬é“¾æ¥åˆ é™¤,æºæ–‡ä»¶æ‰ä¼šåˆ é™¤ï¼ˆæ¢å¥è¯è¯´ï¼Œå¦‚:rm -f nami.jpg åªæ˜¯åˆ é™¤äº†å…¶ä¸­ä¸€ä¸ªç¡¬é“¾æ¥ï¼Œé€šè¿‡å…¶ä»–ç¡¬é“¾æ¥è®¿é—®ä¾æ—§æœ‰æ•ˆï¼‰ã€‚ è½¯é“¾æ¥å¯ä»¥è·¨åˆ†åŒº;ç¡¬é“¾æ¥ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿã€‚ è½¯é“¾æ¥å¯ä»¥é’ˆå¯¹ç›®å½•;ç¡¬é“¾æ¥ä¸èƒ½é’ˆå¯¹ç›®å½•ã€‚ 2. è½¯é“¾æ¥ä½¿ç”¨ åˆ›å»ºè½¯é“¾æ¥çš„è¯­æ³• 1ln -s æºæ–‡ä»¶æˆ–ç›®å½• è½¯é“¾æ¥çš„æ–‡ä»¶æˆ–ç›®å½• -s å‚æ•°è¡¨ç¤ºåˆ›å»ºçš„æ˜¯è½¯é“¾æ¥ã€‚ åˆ›å»ºè½¯é“¾æ¥ç¤ºä¾‹ 12# å°†test.txtè½¯é“¾æ¥åˆ°test_linkln -s test.txt test_link è¿™æ ·å°±åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªtest_linkçš„è½¯é“¾æ¥æ–‡ä»¶,å®ƒæŒ‡å‘test.txtã€‚å¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°test_link ï¼Œç®­å¤´å°±è¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªé“¾æ¥ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡è®¿é—®&#x2F;ä¿®æ”¹test_link æ¥è®¿é—®&#x2F;ä¿®æ”¹test.txtçš„å†…å®¹ã€‚ ä½¿ç”¨llå‘½ä»¤å¯ä»¥çœ‹åˆ°è½¯é“¾æ¥çš„ç›¸å…³ä¿¡æ¯: 12345ll test_linkvim test_link# èƒ½çœ‹åˆ°ä¿®æ”¹åçš„å†…å®¹cat test.txt ä¸ºç›®å½•åˆ›å»ºè½¯é“¾æ¥è½¯é“¾æ¥å¯ä»¥ä¸ºç›®å½•åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œæ–¹å¼ä¸ä¸ºæ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥ç±»ä¼¼ï¼š 12# å°†/usr/local/dir1ç›®å½•è½¯é“¾æ¥åˆ°dir1_linkln -s /usr/local/dir1 dir1_link è¿™æ ·è®¿é—®dir1_linkå°±ç›¸å½“äºè®¿é—®dir1ç›®å½•ä¸­çš„å†…å®¹ã€‚ ä¿®æ”¹å’Œåˆ é™¤è½¯é“¾æ¥åˆ é™¤æˆ–ä¿®æ”¹è½¯é“¾æ¥ä¸ä¼šå½±å“æºæ–‡ä»¶&#x2F;ç›®å½•,å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚ åˆ é™¤è½¯é“¾æ¥ 123rm test_link#æˆ–è€…unlink test_link ä¿®æ”¹è½¯é“¾æ¥ï¼Œä¿®æ”¹è½¯é“¾æ¥çš„æŒ‡å‘åï¼Œ test_link æŒ‡å‘ test2.xt 1ln -sf test2.txt test_link 3. ç¡¬é“¾æ¥ä½¿ç”¨æ–¹æ³• åˆ›å»ºç¡¬é“¾æ¥è¯­æ³• 1ln æºæ–‡ä»¶ ç¡¬é“¾æ¥å ä¸ä½¿ç”¨-så‚æ•°é»˜è®¤åˆ›å»ºç¡¬é“¾æ¥ã€‚ åˆ›å»ºç¡¬é“¾æ¥ç¤ºä¾‹ 1ln test.txt test_hardlink è¿™æ ·å°±åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªtest_hardlinkçš„ç¡¬é“¾æ¥æ–‡ä»¶,æŒ‡å‘test.txt æŸ¥çœ‹ç¡¬é“¾æ¥ä¿¡æ¯ä½¿ç”¨llå‘½ä»¤å¯ä»¥çœ‹åˆ°ç¡¬é“¾æ¥ä¿¡æ¯: 1ll test_hardlink å¯ä»¥çœ‹åˆ°test_hardlinkæ˜¯ä¸€ä¸ªç¡¬é“¾æ¥æ–‡ä»¶,æŒ‡å‘test.txt, ç´¢å¼•èŠ‚ç‚¹ç›¸åŒã€‚ ä¿®æ”¹å’Œåˆ é™¤ç¡¬é“¾æ¥åˆ é™¤æˆ–ä¿®æ”¹ç¡¬é“¾æ¥ä¸å½±å“æºæ–‡ä»¶,å®ƒåªæ˜¯ä¸€ä¸ªç›®å½•é¡¹å¼•ç”¨æºæ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹ã€‚ åˆ é™¤ç¡¬é“¾æ¥ 123rm test_hardlink # æˆ–è€…unlink test_hardlink ä¿®æ”¹ç¡¬é“¾æ¥å†…å®¹, æºæ–‡ä»¶å†…å®¹å°†è·Ÿç€ä¸€èµ·å˜åŒ–ã€‚ 1vim test_hardlink ä¸ºç›®å½•åˆ›å»ºç¡¬é“¾æ¥ç¡¬é“¾æ¥æ— æ³•é’ˆå¯¹ç›®å½•è¿›è¡Œåˆ›å»ºã€‚ 12ln dir1 dir1_hardlinkln: failed to create hard link â€˜dir1_hardlinkâ€™ =&gt; â€˜dir1â€™: Invalid argument 4. æ€»ç»“ è½¯é“¾æ¥é€šè¿‡æŒ‡å‘æºæ–‡ä»¶çš„è·¯å¾„å»ºç«‹é“¾æ¥,ç¡¬é“¾æ¥é€šè¿‡ç´¢å¼•èŠ‚ç‚¹å»ºç«‹é“¾æ¥ã€‚ è½¯é“¾æ¥å¯ä»¥è·¨æ–‡ä»¶ç³»ç»Ÿ,ç¡¬é“¾æ¥ä¸èƒ½ã€‚è½¯é“¾æ¥å¯ä»¥å¯¹ç›®å½•åˆ›å»ºé“¾æ¥,ç¡¬é“¾æ¥ä¸å¯ä»¥ã€‚ åˆ é™¤è½¯é“¾æ¥å’Œç¡¬é“¾æ¥éƒ½ä¸å½±å“æºæ–‡ä»¶ã€‚ è§£é™¤è½¯é“¾æ¥å’Œç¡¬é“¾æ¥,ç›´æ¥åˆ é™¤é“¾æ¥æ–‡ä»¶å³å¯ã€‚"},{"title":"HTTPçš„ä¸‰æ¬¡æ¡æ‰‹","path":"/2024/12/11/HTTPçš„ä¸‰æ¬¡æ¡æ‰‹/","content":"è½¬è½½è‡ª: https://segmentfault.com/a/1190000045536632 HTTPå’ŒHTTPSçš„æ¡æ‰‹ä¸æŒ¥æ‰‹è¿‡ç¨‹è¯¦è§£åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼ŒHTTP å’Œ HTTPS æ˜¯å¸¸è§çš„åè®®ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºæ— åŠ å¯†å’ŒåŠ å¯†çš„è¯·æ±‚ä¸å“åº”è¿‡ç¨‹ã€‚å°½ç®¡å®ƒä»¬çš„åŸºæœ¬å·¥ä½œåŸç†ç›¸ä¼¼ï¼Œä½†ç”±äºå®‰å…¨æ€§è¦æ±‚ï¼ŒHTTPSéœ€è¦æ¯”HTTPæ›´å¤æ‚çš„æ­¥éª¤æ¥ç¡®ä¿æ•°æ®ä¼ è¾“çš„åŠ å¯†æ€§å’Œå®Œæ•´æ€§ã€‚ä¸‹é¢å°†è¯¦ç»†è§£é‡ŠHTTPä¸HTTPSçš„æ¡æ‰‹å’ŒæŒ¥æ‰‹è¿‡ç¨‹ï¼Œå¹¶å¯¹ä¸¤è€…è¿›è¡Œå¯¹æ¯”ã€‚ ä¸€ã€HTTPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸‰æ¬¡æ¡æ‰‹æ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´å»ºç«‹TCPè¿æ¥çš„è¿‡ç¨‹ï¼Œç¡®ä¿è¿æ¥çš„å¯é æ€§ã€‚ å®¢æˆ·ç«¯å‘é€SYNåŒ…å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª SYNï¼ˆåŒæ­¥ï¼‰åŒ…ï¼Œå‘Šè¯‰æœåŠ¡å™¨å®ƒå¸Œæœ›å»ºç«‹è¿æ¥ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº SYN_SEND çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„å“åº”ã€‚ æœåŠ¡ç«¯å›åº”SYN-ACKåŒ…æœåŠ¡ç«¯æ¥æ”¶åˆ°SYNåŒ…åï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥ï¼Œäºæ˜¯å‘é€ä¸€ä¸ª SYN-ACKï¼ˆåŒæ­¥-ç¡®è®¤ï¼‰åŒ…ç»™å®¢æˆ·ç«¯ã€‚æœåŠ¡ç«¯å¤„äº SYN_RCVD çŠ¶æ€ã€‚ å®¢æˆ·ç«¯å›åº”ACKåŒ…å®¢æˆ·ç«¯æ”¶åˆ°SYN-ACKåŒ…åï¼Œå‘æœåŠ¡ç«¯å‘é€ ACKï¼ˆç¡®è®¤ï¼‰åŒ…ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¤„äº ESTABLISHEDï¼ˆå·²å»ºç«‹è¿æ¥ï¼‰çŠ¶æ€ï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼Œæ•°æ®ä¼ è¾“å¯ä»¥å¼€å§‹ã€‚ HTTPçš„ä¸‰æ¬¡æ¡æ‰‹ç¤ºæ„å›¾ï¼š 1234å®¢æˆ·ç«¯ æœåŠ¡ç«¯ |--------------------SYN------------------&gt;| |&lt;------------------SYN-ACK-----------------| |-------------------ACK-------------------&gt;| äºŒã€HTTPSçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹HTTPSé™¤äº†åŒ…å«HTTPçš„ä¸‰æ¬¡æ¡æ‰‹å¤–ï¼Œè¿˜æ¶‰åŠåˆ°SSL&#x2F;TLSåè®®çš„æ¡æ‰‹ï¼Œè¿™ä¸€è¿‡ç¨‹æ›´ä¸ºå¤æ‚ï¼Œä¸»è¦ç”¨äºç¡®ä¿é€šä¿¡çš„å®‰å…¨æ€§ã€‚ å®¢æˆ·ç«¯å‘é€ClientHelloå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª ClientHello æ¶ˆæ¯ï¼ŒåŒ…å«å…¶æ”¯æŒçš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚RSAã€ECDSAç­‰ï¼‰ã€æ”¯æŒçš„åè®®ç‰ˆæœ¬ã€å‹ç¼©æ–¹æ³•ä»¥åŠç”Ÿæˆçš„éšæœºæ•°ç­‰ä¿¡æ¯ã€‚ æœåŠ¡ç«¯å‘é€ServerHelloå¹¶å‘è¯ä¹¦æœåŠ¡ç«¯æ”¶åˆ°ClientHelloåï¼Œé€‰æ‹©ä¸€ç§åŠ å¯†ç®—æ³•å¹¶è¿”å› ServerHello æ¶ˆæ¯ï¼Œå‘é€å…¶æ•°å­—è¯ä¹¦ä»¥ä¾¿å®¢æˆ·ç«¯éªŒè¯å…¶èº«ä»½ã€‚ å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦å¹¶ç”ŸæˆPreMasterSecretå®¢æˆ·ç«¯éªŒè¯æœåŠ¡ç«¯çš„è¯ä¹¦æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæœ‰æ•ˆï¼Œåˆ™ç”Ÿæˆä¸€ä¸ª PreMasterSecretï¼Œé€šè¿‡æœåŠ¡ç«¯çš„å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ã€‚ åŒæ–¹ç”Ÿæˆä¼šè¯å¯†é’¥å¹¶ç¡®è®¤æœåŠ¡ç«¯ä½¿ç”¨ç§é’¥è§£å¯†PreMasterSecretï¼Œå¹¶ä¸å®¢æˆ·ç«¯å„è‡ªç”Ÿæˆä¼šè¯å¯†é’¥ã€‚æœ€åï¼ŒåŒæ–¹é€šè¿‡ Finished æ¶ˆæ¯ç¡®è®¤æ¡æ‰‹è¿‡ç¨‹å·²å®Œæˆï¼Œè¿›å…¥åŠ å¯†é€šä¿¡é˜¶æ®µã€‚ HTTPSçš„æ¡æ‰‹ç¤ºæ„å›¾ï¼š 12345å®¢æˆ·ç«¯ æœåŠ¡ç«¯ |------------------ClientHello----------------&gt;| |&lt;---------------ServerHello + Cert------------| |----------------PreMasterSecret -------------&gt;| |&lt;------------------Finished-------------------| ä¸‰ã€HTTPçš„å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹TCPè¿æ¥çš„å…³é—­éœ€è¦å››æ¬¡æŒ¥æ‰‹ï¼Œä»¥ç¡®ä¿åŒæ–¹éƒ½èƒ½æ­£ç¡®åœ°å…³é—­è¿æ¥ï¼Œé¿å…æ•°æ®ä¸¢å¤±ã€‚ å®¢æˆ·ç«¯å‘é€FINåŒ…å®¢æˆ·ç«¯æ²¡æœ‰æ•°æ®å‘é€æ—¶ï¼Œå‘é€ä¸€ä¸ª FINï¼ˆç»“æŸï¼‰åŒ…ï¼Œå‘ŠçŸ¥æœåŠ¡ç«¯å…³é—­è¿æ¥ã€‚ æœåŠ¡ç«¯å›åº”ACKåŒ…æœåŠ¡ç«¯æ¥æ”¶åˆ°FINåŒ…åï¼Œå‘é€ä¸€ä¸ª ACKï¼ˆç¡®è®¤ï¼‰åŒ…ï¼Œè¡¨ç¤ºå·²æ”¶åˆ°å…³é—­è¯·æ±‚ã€‚ æœåŠ¡ç«¯å‘é€FINåŒ…æœåŠ¡ç«¯åœ¨å®Œæˆæ•°æ®å‘é€åï¼Œå‘é€ä¸€ä¸ª FIN åŒ…ç»™å®¢æˆ·ç«¯ï¼Œè¡¨ç¤ºå®ƒä¹Ÿå¸Œæœ›å…³é—­è¿æ¥ã€‚ å®¢æˆ·ç«¯å›åº”ACKåŒ…å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„FINåŒ…åï¼Œå‘é€ä¸€ä¸ª ACK åŒ…ç¡®è®¤ã€‚æ­¤æ—¶ï¼Œè¿æ¥æ­£å¼å…³é—­ã€‚ HTTPçš„å››æ¬¡æŒ¥æ‰‹ç¤ºæ„å›¾ï¼š 12345å®¢æˆ·ç«¯ æœåŠ¡ç«¯ |-------------------FIN---------------------&gt;| |&lt;------------------ACK-----------------------| |&lt;------------------FIN-----------------------| |-------------------ACK---------------------&gt;| å››ã€HTTPSçš„å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹HTTPSåœ¨å››æ¬¡æŒ¥æ‰‹çš„åŸºç¡€ä¸Šè¿˜æ¶‰åŠåˆ°SSL&#x2F;TLSåè®®å±‚çš„å…³é—­ã€‚è¿‡ç¨‹ä¸HTTPç›¸ä¼¼ï¼Œä½†ç”±äºåŠ å¯†æ•°æ®çš„å¤„ç†ï¼Œæ¡æ‰‹å’ŒæŒ¥æ‰‹è¿‡ç¨‹ç›¸å¯¹å¤æ‚ã€‚ å®¢æˆ·ç«¯å‘é€å…³é—­è¿æ¥è¯·æ±‚å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå…³é—­è¿æ¥çš„æ¶ˆæ¯ï¼Œè¦æ±‚å…³é—­SSL&#x2F;TLSä¼šè¯ã€‚ æœåŠ¡ç«¯å›åº”å…³é—­è¿æ¥æ¶ˆæ¯æœåŠ¡ç«¯å›åº”å…³é—­è¿æ¥çš„æ¶ˆæ¯ï¼Œè¡¨ç¤ºåŒæ„æ–­å¼€SSL&#x2F;TLSä¼šè¯ã€‚ æœåŠ¡ç«¯å‘é€å…³é—­è¿æ¥è¯·æ±‚æœåŠ¡ç«¯å‘é€å…³é—­è¿æ¥çš„æ¶ˆæ¯ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æœåŠ¡ç«¯å³å°†æ–­å¼€è¿æ¥ã€‚ å®¢æˆ·ç«¯å›åº”å…³é—­è¿æ¥æ¶ˆæ¯å®¢æˆ·ç«¯å›åº”å…³é—­è¿æ¥æ¶ˆæ¯ï¼Œæœ€ç»ˆå®ŒæˆSSL&#x2F;TLSè¿æ¥çš„æ–­å¼€ã€‚ äº”ã€HTTPä¸HTTPSçš„åŒºåˆ«ä¸è”ç³» é¡¹ç›® HTTP HTTPS åŠ å¯† ä¸åŠ å¯†ï¼Œæ•°æ®ä¼ è¾“æ˜æ–‡ ä½¿ç”¨SSL&#x2F;TLSåè®®åŠ å¯†ï¼Œç¡®ä¿æ•°æ®å®‰å…¨æ€§ å®‰å…¨æ€§ æ— æ•°æ®ä¿æŠ¤ï¼Œå®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰ ä½¿ç”¨è¯ä¹¦è¿›è¡Œèº«ä»½éªŒè¯ï¼Œé˜²æ­¢ä¼ªè£…ä¸ç¯¡æ”¹æ•°æ® æ¡æ‰‹è¿‡ç¨‹ ä¸‰æ¬¡æ¡æ‰‹ï¼Œç®€å•çš„TCPè¿æ¥å»ºç«‹è¿‡ç¨‹ ä¸‰æ¬¡æ¡æ‰‹ä¸SSL&#x2F;TLSæ¡æ‰‹ç»“åˆï¼Œå®‰å…¨æ€§æ›´é«˜ æŒ¥æ‰‹è¿‡ç¨‹ å››æ¬¡æŒ¥æ‰‹ï¼ŒTCPè¿æ¥æ­£å¸¸å…³é—­ å››æ¬¡æŒ¥æ‰‹ï¼Œç¡®ä¿åŠ å¯†è¿æ¥æ–­å¼€ ç«¯å£ 80ç«¯å£ 443ç«¯å£ å…­ã€æ€»ç»“ HTTPä¸HTTPSéƒ½ä¾èµ–äºTCPè¿æ¥çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ï¼Œä½†HTTPSåœ¨è¿™åŸºç¡€ä¸Šå¢åŠ äº†SSL&#x2F;TLSåè®®å±‚çš„åŠ å¯†ä¸èº«ä»½éªŒè¯ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚ HTTPSçš„æ¡æ‰‹å’ŒæŒ¥æ‰‹è¿‡ç¨‹æ›´ä¸ºå¤æ‚ï¼Œéœ€è¦è¿›è¡Œæ•°å­—è¯ä¹¦éªŒè¯ã€å¯†é’¥äº¤æ¢ç­‰æ­¥éª¤ï¼Œå› æ­¤å®ƒæ¯”HTTPæ›´åŠ å®‰å…¨ã€‚ åœ¨è®¾è®¡ç½‘ç»œé€šä¿¡ç³»ç»Ÿæ—¶ï¼Œé€‰æ‹©ä½¿ç”¨HTTPè¿˜æ˜¯HTTPSå–å†³äºæ˜¯å¦éœ€è¦ä¿éšœæ•°æ®çš„å®‰å…¨æ€§ã€‚å¦‚æœæ•°æ®ä¼ è¾“æ¶‰åŠæ•æ„Ÿä¿¡æ¯ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨HTTPSã€‚"},{"title":"SQLåŸºç¡€å…¥é—¨","path":"/2024/12/10/SQLåŸºç¡€å…¥é—¨/","content":"è½¬è½½è‡ª: https://segmentfault.com/a/1190000045376785 MySQLæ˜¯ä»€ä¹ˆMysqlæ˜¯ä¸€ä¸ªæ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œç®¡ç†çš„æ˜¯æ•°æ®åº“ï¼Œmysqlä¸‹å¯ä»¥ç®¡ç†å¤šä¸ªæ•°æ®åº“ã€‚ å…³ç³»æ•°æ®åº“ä¸­ç”¨è¡¨å­˜å‚¨ä¿¡æ¯ã€‚ æ”¯æŒè¿æ¥æ•°100ä¸ªç”¨æˆ· MySQLåŸºæœ¬æŒ‡ä»¤DDLæŸ¥çœ‹æ•°æ®åº“ï¼š1show databases; è¿›å…¥æ•°æ®åº“ï¼š1use æ•°æ®åº“å; æŸ¥çœ‹æ•°æ®åº“çš„è¡¨ï¼š1show tables; æ–°å»ºæ•°æ®åº“ï¼š1create database æ•°æ®åº“å; åˆ é™¤æ•°æ®è¡¨ï¼š1dorp table è¡¨å sqlæ’å…¥æ•°æ®ï¼š12345insert into è¡¨åï¼ˆå­—æ®µï¼Œå­—æ®µï¼‰valueï¼ˆæ•°æ®ï¼Œæ•°æ®ï¼‰;# å¦‚æœè¦æ’å…¥æ‰€æœ‰åˆ—çš„æ•°æ®ï¼Œå¯ä»¥ä¸æ ‡æ˜åˆ—åï¼Œä½†æ˜¯æ’å…¥çš„å€¼ï¼Œå¿…é¡»æŒ‰ç…§åˆ—çš„é¡ºåºã€‚insert into è¡¨å valueï¼ˆæ•°æ®ï¼Œæ•°æ®ï¼Œæ•°æ®ï¼‰ï¼›# å¯ä»¥ä¸€è¡Œsqlï¼Œä½¿ç”¨valuesæ’å…¥å¤šæ¡æ•°æ®ã€‚insert into è¡¨å valueï¼ˆæ•°æ®ï¼Œæ•°æ®ï¼Œæ•°æ®ï¼‰ï¼Œï¼ˆæ•°æ®ï¼Œæ•°æ®ï¼Œæ•°æ®ï¼‰; åˆ é™¤æ•°æ®ï¼š1delete from student where name=&#x27;ç‹åˆš&#x27;; ä¿®æ”¹æ•°æ®ï¼š1update student set age=20 where name=â€™æç™½â€˜; DQLï¼ˆæŸ¥è¯¢ï¼‰æŸ¥è¯¢è¯­å¥ï¼š12select * from studentï¼› æŸ¥è¯¢studentè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚select student_id,student_name from student; æŸ¥è¯¢æŒ‡å®šçš„åˆ—åã€‚ æ³¨æ„äº‹é¡¹ï¼šåœ¨å·¥ä½œç¯å¢ƒä¸­ä¸è¦ï¼ˆå°½é‡é¿å…ï¼‰ä½¿ç”¨ * æŸ¥è¯¢ æ•°æ®å®‰å…¨ IO ç½‘ç»œä¸‰æ–¹é¢ã€‚ å¯ä»¥ä½¿ç”¨aså¯¹åˆ—åèµ·åˆ«åã€‚å¯¹ç»“æœé›†çš„åˆ—å‘½å as name nameæ˜¯è“è‰²çš„ å…³é”®å­— æœ‰äº›å…³é”®å­—ä¼šæ”¹å˜è¯­æ³•è¯­ä¹‰å¯ä»¥ä½¿ç”¨ç€é‡å·`` æ¡ä»¶æŸ¥è¯¢ï¼šæ ¹æ®æŒ‡å®šçš„æ¡ä»¶ï¼Œæ£€ç´¢æ•°æ®ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚ 12select student_id,student_name,birthday,gender from student where student_name=&#x27;æå››&#x27;; å¤šæ¡ä»¶æŸ¥è¯¢ï¼š1234select student_id,student_name,birthday,gender from student where student_name=&#x27;æå››&#x27; and student_id = 9;select student_id,student_name,birthday,gender from student where student_name=&#x27;æå››&#x27; or gender = &#x27;å¥³&#x27;; ä½¿ç”¨in å…³é”®å­—åŒ¹é…å¤šä¸ªå€¼1SELECT * FROM student WHERE student_id IN (1,3,8,10,12); ä¹Ÿå¯ä»¥ä½¿ç”¨not in æ’é™¤åŒ¹é…é¡¹ 1SELECT * FROM student WHERE student_id NOT IN (1,3,8,10,12); æ¨¡ç³ŠæŸ¥è¯¢ï¼šæŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å§“åå§“å¼ çš„å­¦ç”Ÿï¼š 1SELECT * FROM student WHERE student_name LIKE &#x27;å¼ %&#x27; æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å§“åä¸‰ä¸ªå­—çš„å­¦ç”Ÿï¼š 1SELECT * FROM student where student_name LIKE &#x27;___&#x27;; æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å§“åå§“å¼ ä¸¤ä¸ªå­—çš„å­¦ç”Ÿï¼š 1SELECT * FROM student WHERE student_name LIKE &#x27;å¼ _&#x27;; æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å§“åå¸¦å¼ çš„å­¦ç”Ÿï¼š 1SELECT * FROM student WHERE student_name LIKE &#x27;%å¼ %&#x27;; æ’åºï¼šæ’åºæ–¹å¼ order by æ­£åºï¼ˆå‡åºï¼‰ ASC ï¼ˆé»˜è®¤ï¼‰ å€’åº ï¼ˆå€’å™ï¼‰DESC 1SELECT * FROM student ORDER BY student_id DESC; ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šåˆ—è¿›è¡Œæ’åº å½“ç¬¬ä¸€åˆ—çš„å€¼ç›¸åŒæ—¶å†é€šè¿‡ç¬¬äºŒåˆ—çš„å†…å®¹è¿›è¡Œæ’åº 1SELECT * FROM student ORDER BY student_name,student_id DESC; ä»¥ä¸Šçš„sqlè¯­å¥order by ä¹‹åæŒ‰ç…§student_name æ­£åºæ’åˆ—ï¼Œstudent_idå€’åºæ’åº æ¯ä¸€åˆ—éƒ½æœ‰è‡ªå·±çš„æ’åºæ–¹å¼ï¼Œä¸å†™å°±æ˜¯é»˜è®¤ ASC éƒ¨åˆ†æŸ¥è¯¢ï¼š(LIMIT)ä»é›¶å¼€å§‹éƒ¨åˆ†æŸ¥è¯¢ æ¯”å¦‚æŸ¥è¯¢å‰ä¸‰å æŸ¥è¯¢å‰ä¸‰ä¸ªæ•°æ® LIMIT 1select * FROM student LIMIT 3; æŸ¥è¯¢4-7 1select * from student limit 3,4; å‰ä¸‰åå°±æ˜¯ 1select * from student limit 0,3; åˆå¹¶æŸ¥è¯¢ï¼šunion å’Œunion all éƒ½æœ‰åˆå¹¶å¤šä¸ªsqlè¯­å¥çš„ä½œç”¨ union ä¼šå°†ç»“æœä¸€æ ·çš„æ•°æ®åˆå¹¶ä¸€ä¸ªï¼ˆå»é‡ï¼‰ï¼ˆæ•´ä½“å»é‡ï¼‰ union å‰åå…³è”çš„ç»“æœé›†çš„åˆ—æ•°å¿…é¡»ä¸€æ ·å’Œç±»å‹æ— å…³ 1select student_id from student union select * from student; ç»“æœå»é‡ï¼šï¼ˆDISTINCTï¼‰ 1SELECT DISTINCT name FROM student; æ³¨æ„ï¼šä»¥ä¸ŠSQLè¯­å¥DISTINCTæ˜¯å¯¹ç»“æœé›†å»é‡ï¼Œå¹¶ä¸æ˜¯å¯¹nameå»é‡ åµŒå¥—æŸ¥è¯¢å’Œå…³è”æŸ¥è¯¢åµŒå¥—æŸ¥è¯¢ä¸€ä¸ªæŸ¥è¯¢è¯­è¨€ä¸­åµŒå¥—è¿™å¦ä¸€ä¸ªæŸ¥è¯¢ å®ä¾‹ æœ‰ä¸åŠæ ¼æˆç»©çš„å­¦ç”Ÿçš„ä¿¡æ¯ -- æˆç»©è¡¨ä¸­ä¸åŠæ ¼çš„ä¿¡æ¯ 1SELECT * FROM score WHERE score &lt; 60; -- æœ‰ä¸åŠæ ¼æˆç»©çš„å­¦ç”Ÿçš„ä¿¡æ¯ æ–¹å¼ä¸€ 12SELECT DISTINCT * FROM student,score WHERE score.score &lt; 60 and student.student_id = score.student_id; æ–¹å¼äºŒ 12SELECT student_name FROM student WHERE student_id in (SELECT DISTINCT student_id FROM score WHERE score &lt; 60); å°†å­æŸ¥è¯¢å½“åšä¸€ä¸ªè¡¨è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢ -- æ€»æˆç»©æœ€é«˜çš„å­¦ç”Ÿid 12SELECT * FROM( SELECT student_id,SUM(score) as sumscore FROM score GROUP BY student_id )as a ORDER BY sumscore DESC LIMIT 1; -- å½“å°†å­æŸ¥è¯¢å½“åšè¡¨è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢ éœ€è¦ç»™å­æŸ¥è¯¢èµ·åˆ«å å…³è”æŸ¥è¯¢-- å½“æˆ‘ä»¬æ‰€éœ€è¦çš„æŸ¥è¯¢ç»“æœåœ¨ä¸¤å¼ è¡¨æˆ–è€…å¤šå¼ è¡¨ä¸­ï¼Œè¿™æ˜¯å°±éœ€è¦å…³è”æŸ¥è¯¢ã€‚ -- æŸ¥è¯¢ å­¦ç”Ÿçš„åå­—å’Œæˆç»© å­¦ç”Ÿåå­—åœ¨student æˆç»© score -- å°†å¤šä¸ªè¡¨çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ¡ä»¶ å…³è”åœ¨ä¸€å™¨ -- å·¦è¿æ¥ å³è¿æ¥ -- left join ä»¥å·¦è¡¨ä¸ºä¸»è¡¨ ç»“æœé›†ä¸­åŒ…å«ä¸»è¡¨çš„æ‰€æœ‰æ•°æ®,ç»“æœé›†ä¸­æ˜¾ç¤ºå‰¯è¡¨ä¸­å’Œä¸»è¡¨æœ‰å…³è”çš„æ•°æ® 1SELECT a.*,b.* FROM student a left JOIN score b on a.student_id = b.student_id; -- å†…é“¾æ¥ åªæ˜¾ç¤ºä¸¤ä¸ªæœ‰å…³è”çš„æ•°æ® 1SELECT a.*,b.* FROM student a INNER JOIN score b ON a.student_id = b.student_id; -- mysqlä¸æ”¯æŒå…¨å¤–é“¾æ¥ full join Oracle æ”¯æŒ -- mysql å€ŸåŠ©unionå®ç°å…¨å¤–é“¾æ¥ 123SELECT a.*,b.* FROM student a left JOIN score b on a.student_id = b.student_id; UNION SELECT a.*,b.* FROM student a RIGHT JOIN score b on a.student_id = b.student_id; æ³¨æ„äº‹é¡¹ï¼šNULLå€¼ sqlä¸­å¯¹ç©ºå€¼çš„åˆ¤æ–­ ä¸èƒ½ç”¨&#x3D; ä½¿ç”¨is,éç©ºéªŒè¯ç”¨ not null æ•°æ®åº“çš„å¸¸ç”¨ç±»å‹æ•´æ•°ç±»å‹ tinyintï¼ˆ0-255ï¼‰1å­—èŠ‚ int 4å­—èŠ‚ æ–‡æœ¬ charï¼ˆå®šé•¿ï¼‰ varcharï¼ˆå˜é•¿ï¼‰ text æµ®ç‚¹å‹ doubleï¼ˆ7ï¼Œ2ï¼‰ decimalï¼ˆ10ï¼Œ2ï¼‰ æ—¶é—´ doubleæ˜¯åŒç²¾åº¦çš„ï¼Œè€Œdecimalæ˜¯ç²¾ç¡®çš„æˆ‘ä»¬å»ºè®®ä½¿ç”¨decimalä¿å­˜é‡‘èã€æ±‡ç‡ã€ç¨ç‡ã€ä»·æ ¼ç­‰ æ•°æ®åº“æ˜¯éœ€è¦ä¼˜åŒ–çš„,å…¶ä¸­ä¹‹ä¸€æ˜¯é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ start transaction å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ savepoint ä¿å­˜ç‚¹åâ€“è®¾ç½®ä¿å­˜ç‚¹ rollback to ä¿å­˜ç‚¹åâ€“å›é€€äº‹åŠ¡ rollback å›é€€å…¨éƒ¨äº‹åŠ¡ commit æäº¤äº‹åŠ¡ï¼Œæ‰€ä»¥çš„æ“ä½œç”Ÿæ•ˆï¼Œ ä¸èƒ½å›é€€ 12345678910111213141516171819202122232425create table TEXT( id int, name VARCHAR(32));-- å¼€å¯äº‹åŠ¡start TRANSACTION--è®¾ç½®ä¿å­˜ç‚¹SAVEPOINT a-- æ‰§è¡Œdmlæ“ä½œINSERT INTO TEXT values(100,&#x27;tom&#x27;);--è®¾ç½®ä¿å­˜ç‚¹bSAVEPOINT b-- æ‰§è¡Œdmlæ“ä½œINSERT INTO TEXT values(200,&#x27;jack&#x27;);select * from TEXT;-- å›é€€åˆ°brollback to b-- å›é€€åˆ°arollback to a äº‹åŠ¡ç®¡ç†å›é€€äº‹åŠ¡åœ¨ä»‹ç»å›é€€äº‹åŠ¡å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ä¿å­˜ç‚¹ï¼ˆsavepointï¼‰ä¿å­˜ç‚¹æ˜¯äº‹åŠ¡ä¸­çš„ç‚¹ï¼Œç”¨äºå–æ¶ˆéƒ¨åˆ†äº‹åŠ¡ï¼Œå½“ç»“æŸäº‹åŠ¡æ—¶ï¼ˆcommitï¼‰ï¼Œä¼šè‡ªåŠ¨çš„åˆ é™¤è¯¥äº‹åŠ¡æ‰€å®šä¹‰çš„æ‰€æœ‰ä¿å­˜ç‚¹ï¼Œå½“æ‰§è¡Œå›é€€äº‹åŠ¡æ—¶ï¼Œé€šè¿‡æŒ‡å®šä¿å­˜ç‚¹å¯ä»¥å›é€€åˆ°æŒ‡å®šçš„ç‚¹ã€‚ æäº¤äº‹åŠ¡ä½¿ç”¨comitè¯­å¥å¯ä»¥æäº¤äº‹åŠ¡ï¼Œå½“æ‰§è¡Œäº†commitè¯­å¥åï¼Œä¼šç¡®è®¤äº‹åŠ¡çš„å˜åŒ–ã€ç»“æŸäº‹åŠ¡ã€åˆ é™¤ä¿å­˜ç‚¹ã€é‡Šæ”¾é”ï¼Œæ•°æ®ç”Ÿæ•ˆã€‚å½“ä½¿ç”¨commitè¯­å¥ç»“æŸäº‹åŠ¡ä¹‹åï¼Œå…¶ä»–ä¼šè¯å°†å¯ä»¥æŸ¥çœ‹åˆ°äº‹åŠ¡å˜åŒ–åçš„æ–°æ•°æ®ã€‚ tipsï¼šå¦‚æœä¸å¼€å§‹äº‹åŠ¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒDMLæ“ä½œæ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œä¸èƒ½å›æ»šã€‚mysql çš„äº‹åŠ¡éœ€è¦å­˜å‚¨å¼•æ“ä¸ºinnodb ï¼Œè€Œmyisam ä¸æ”¯æŒã€‚ savepointï¼ˆä¿å­˜ç‚¹ï¼‰SAVEPOINT é€šè¿‡è‡ªå®šä¹‰çš„åç§°è®¾ç½®ä¸€ä¸ªå­˜å‚¨ç‚¹ï¼Œå¦‚æœå½“å‰äº‹åŠ¡å·²ç»æœ‰äº†ä¸€ä¸ªåŒåçš„ SAVEPOINT ï¼Œé‚£ä¹ˆæ—§çš„å°†ä¼šè¢«æ›¿ä»£ã€‚ ROLLBACK TO SAVEPOINT å­å¥å¯ä»¥å°†å½“å‰äº‹åŠ¡å›é€€åˆ°è‡ªå®šä¹‰çš„å­˜å‚¨ç‚¹ä½ç½®ï¼Œè€Œä¸ä¼šç»“æŸäº‹åŠ¡ï¼ŒInnoDB ä¸ä¼šé‡Šæ”¾å†…å­˜ä¸­çš„è¡Œé”ï¼ˆå¯¹äºæ–°æ’å…¥çš„è¡Œï¼Œé”ä¿¡æ¯æ˜¯ç”±å­˜å‚¨åœ¨è¡Œä¸­çš„äº‹åŠ¡IDæºå¸¦ï¼Œè€Œä¸ä¼šå•ç‹¬å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé‚£ä¹ˆå¯¹äºè¿™ç±»é”ï¼Œæ˜¯ä¼šè¢«é‡Šæ”¾çš„ï¼‰ï¼Œå­˜å‚¨ç‚¹ä¹‹åè¯­å¥éƒ½ä¼šæ’¤é”€æ‰§è¡Œï¼ŒåŒ…æ‹¬æ–°è®¾ç½®çš„å­˜å‚¨ç‚¹ï¼Œä¹ŸåŒæ ·ä¼šè¢«åˆ é™¤ã€‚ RELEASE SAVEPOINT å­å¥ï¼Œä¼šä»å½“å‰çš„äº‹åŠ¡ SAVEPOINT é›†åˆä¸­ï¼Œç§»é™¤æŒ‡å®šåç§°çš„ SAVEPOINT ã€‚ éš”ç¦»çº§åˆ«äº‹åŠ¡éš”ç¦»çº§åˆ«ä»‹ç»å¤šä¸ªè¿æ¥å¼€å¯å„è‡ªäº‹åŠ¡æ“ä½œæ•°æ®åº“ä¸­æ•°æ®æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿè¦è´Ÿè´£éš”ç¦»æ“ä½œï¼Œä»¥ä¿è¯å„ä¸ªè¿æ¥åœ¨è·å–æ•°æ®æ—¶çš„å‡†ç¡®æ€§ã€‚ è„è¯»ï¼ˆdirty teadï¼‰å½“ä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„ä¿®æ”¹æ—¶ï¼Œäº§ç”Ÿè„è¯»ã€‚ ä¸å¯é‡å¤è¯»ï¼ˆnonrepeatable readï¼‰åŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹æˆ–åˆ é™¤ï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿä¸å¯é‡å¤è¯»ã€‚ å¹»è¯»ï¼ˆphantom readï¼‰åŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„æ’å…¥æ“ä½œï¼Œæ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿå¹»è¯»ã€‚ æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ« select @@transaction_isolation;æŸ¥çœ‹ç³»ç»Ÿå½“å‰çº§åˆ« select @@global.tranction_isolation;è®¾ç½®éš”ç¦»çº§åˆ« set session transaction isolation level read uncommittedè®¾ç½®ç³»ç»Ÿéš”ç¦»çº§åˆ« set global transaction isolation level read uncommittedACIDäº‹åŠ¡acidç‰¹æ€§ åŸå­æ€§ï¼š åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ ä¸€è‡´æ€§ï¼š äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚ éš”ç¦»æ€§ï¼š äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚ æŒä¹…æ€§ï¼š æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚ æ•°æ®åº“é¢è¯•é—®é¢˜mb3å’Œmb4æœ‰ä»€ä¹ˆåŒºåˆ«1é¦–å…ˆmè¡¨ç¤ºmaxï¼Œbè¡¨ç¤ºbyteï¼Œmb3è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦æœ€å¤šå ç”¨ä¸‰ä¸ªbyteåŒç†mb4å ç”¨4ä¸ªï¼Œæœ€å¤§çš„ä¸åŒåœ¨äºmb4æ¯”mb3å¤šå‡ºæ¥çš„ä¸€å­—èŠ‚å¯ä»¥è¡¨ç¤ºè¡¨æƒ…æ–‡å­—ã€‚è‹±æ–‡å ç”¨ä¸€ä¸ªå­—èŠ‚ã€ä¸­ä¸œåœ°åŒºçš„é˜¿æ‹‰ä¼¯è¯­å 2å­—èŠ‚ï¼Œä¸œäºšåœ°åŒºè¯­è¨€å 3å­—èŠ‚ã€‚ æ•°æ®åº“è¿æ¥å‘½ä»¤æ˜¯ä»€ä¹ˆ1234567mysql -u root -pï¼›-uï¼šä»£è¡¨ç”¨æˆ·rootæ˜¯è¶…çº§ç”¨æˆ·-pï¼š æ˜¯å¯†ç  varcharå’Œcharçš„åŒºåˆ«1varcharæ˜¯å¯å˜çš„æ–‡æœ¬ç±»å‹æ›´åŠ çµæ´»ï¼ŒèŠ‚çœç©ºé—´ï¼Œä½†æ˜¯charç±»å‹çš„æ€§èƒ½æ›´å¥½ç‰¹åˆ«æ˜¯æŸ¥è¯¢æ•°æ®æ—¶ã€‚","tags":["SQL"],"categories":["SQL"]},{"title":"webå¼€å‘çš„è¶æ‰‹å…µå™¨Fiddler","path":"/2024/11/28/webå¼€å‘çš„è¶æ‰‹å…µå™¨Fiddler/","content":"Fiddler æ˜¯ä»€ä¹ˆFiddler æ˜¯ä¸€ä¸ª http è°ƒè¯•ä»£ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹ã€ä¿®æ”¹ã€é‡å‘ã€ä¿å­˜å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ http é€šè®¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æµ‹è¯•ç½‘ç«™æ€§èƒ½ï¼Œè¯Šæ–­ç½‘ç»œé—®é¢˜ã€‚Fiddler å……å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸­é—´äººï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„Httpé€šä¿¡éƒ½ç»è¿‡ Fiddlerï¼Œä»è€Œå¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹é€šä¿¡å†…å®¹ã€‚ ä¸­é—´äººæ”»å‡»ä¹Ÿæ˜¯é‡‡ç”¨ç›¸åŒçš„åŸç†ï¼Œå³ä½¿æ˜¯Httpsçš„è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è¢«æŠ“å–å’Œè§£å¯† Fiddleråªèƒ½æŠ“å–åº”ç”¨å±‚çš„Httpé€šä¿¡ï¼Œå¦‚æœè¦æŸ¥çœ‹æ›´åº•å±‚çš„é€šä¿¡ç»†èŠ‚ï¼Œå¯ä»¥ç”¨ white sharpsï¼Œwireshark ç­‰å·¥å…·ã€‚ Fiddler å¯ä»¥æŠ“å–localhoståŸŸåä¸‹çš„ç½‘ç»œè¯·æ±‚ æ•è· http é€šè®¯ æ‰“å¼€ fiddlerï¼Œç‚¹å‡» file/capture trafficï¼Œæˆ–è€…ç›´æ¥æŒ‰ F12ï¼Œå¼€å§‹æ•è· http é€šè®¯ã€‚ åœ¨ session list ä¸­å¯ä»¥çœ‹åˆ°æ•è·åˆ°çš„ http é€šè®¯ã€‚ æŸ¥çœ‹è¯·æ±‚å’Œå“åº” åœ¨ session list ä¸­ï¼ŒåŒå‡»ä¸€ä¸ª sessionï¼Œå¯ä»¥çœ‹åˆ°è¯¥ session çš„è¯·æ±‚å’Œå“åº”ã€‚ åœ¨ Inspectors ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚å¤´ã€å“åº”å¤´ã€å“åº”ä½“ç­‰ã€‚ æŠ“å–æ‰‹æœºä¸Šçš„ http é€šè®¯ è®¾ç½®å…è®¸è¿œç¨‹è®¾å¤‡è¿æ¥ å…è®¸è¿œç¨‹è®¾å¤‡è¿æ¥ tools/fiddler options/connection/allow remote computers to connect æ‰‹æœºå®‰è£… fiddler è¯ä¹¦ æ‰‹æœºæµè§ˆå™¨æ‰“å¼€ yourIP:8888 é€‰æ‹©ä¼šè¯ ä»»æ„å¤šé€‰ ctrl + click å¤šé€‰è¿ç»­çš„ä¼šè¯ shift + click å‘ä¸Š&#x2F;å‘ä¸‹å•é€‰ ctrl + up/down å‘ä¸Š&#x2F;å‘ä¸‹è¿ç»­å¤šé€‰ ctrl + shfit + up/down åé€‰ä¼šè¯ ctrl + i ç„¦ç‚¹å…ˆå®šä½åˆ° session list é€‰æ‹©å½“å‰ä¼šè¯çš„çˆ¶ä¼šè¯ P å¾ˆå®ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚é€‰æ‹©ä¸€ä¸ª js, æŒ‰Pï¼Œå°±ä¼šå®šä½åˆ°è§¦å‘è¯¥jsè¯·æ±‚çš„htmlè¯·æ±‚ é€‰æ‹©å½“å‰ä¼šè¯çš„å­ä¼šè¯ C åŒæ ·å®ç”¨ï¼šé€‰æ‹© html è¯·æ±‚ï¼ŒæŒ‰C, å®šä½æ‰€æœ‰ç”±è¯¥ html è¯·æ±‚è§¦å‘çš„é™æ€èµ„æºè¯·æ±‚ æŸ¥æ‰¾ä¼šè¯ctrl + f æ‰“å¼€æŸ¥æ‰¾å¯¹è¯æ¡†ï¼Œå¯ä»¥è®¾ç½®åªæŸ¥æ‰¾è¯·æ±‚æˆ–åªæŸ¥æ‰¾å“åº”ï¼ŒæŸ¥æ‰¾å†…å®¹å¯ä»¥æŒ‡å®šheaderæˆ–body, åŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚ ä¼šè¯å¯¹æ¯”é€‰æ‹©ä¸¤ä¸ªä¼šè¯ï¼Œå³é”® é€‰æ‹© compare å‘½ä»¤(éœ€å®‰è£…å¯¹æ¯”å·¥å…· winMerge), å¯¹æ¯”æˆåŠŸå’Œå¤±è´¥çš„ä¸¤æ¬¡è¯·æ±‚ï¼Œæ–¹ä¾¿æ‰¾å‡ºå·®å¼‚ã€‚ åˆ é™¤ä¼šè¯ åˆ é™¤é€‰ä¸­ä¼šè¯ delete åˆ é™¤æœªé€‰ä¸­ä¼šè¯ shift + delete åŒå…ˆåé€‰ctrl+i, å†åˆ é™¤ åˆ é™¤æ‰€æœ‰ä¼šè¯ ctrl + x é…ç½®hostså¯ä»¥é€šè¿‡Fiddleré…ç½®DNSæ˜ å°„ï¼Œè¿™æ ·å°±ä¸å¿…åœ¨Cç›˜çš„hostsæ–‡ä»¶ä¸­ä¿®æ”¹äº†ã€‚ Hostsé…ç½®ä½äºèœå• Tools/Hosts quickboxquickbox æ˜¯ fiddler çš„ä¸€ä¸ªå·¥å…·æ ï¼Œå¯ä»¥å¿«é€Ÿæ‰§è¡Œä¸€äº›æ“ä½œ, å¦‚: æŸ¥æ‰¾ä¼šè¯ï¼Œè®¾ç½®æ–­ç‚¹ç­‰ã€‚ alt + q å…‰æ ‡å®šä½åˆ° quickExecã€‚ æŸ¥æ‰¾ä¼šè¯ åœ¨urlæ ¹æ®å…³é”®å­—æŸ¥æ‰¾ ? keyword æ ¹æ®content-typeæŸ¥æ‰¾ select image, select json æ ¹æ®hostnameæŸ¥æ‰¾ @target Hostname æ ¹æ®å“åº”çš„statusæŸ¥æ‰¾ =304 æ ¹æ®è¯·æ±‚æ–¹æ³•æŸ¥æ‰¾ =post æ ¹æ®content-lengthæŸ¥æ‰¾ &gt;1000 æ ¹æ®åŸŸåæŸ¥æ‰¾ @google æ ¹æ®è¯·æ±‚å¤´æŸ¥æ‰¾select @Request.Accept html æ ¹æ®å“åº”å¤´æŸ¥æ‰¾ select @Response.set-cookie domain é«˜äº®ä¼šè¯ è®¾ç½®é«˜äº®urlåŒ…å«å…³é”®å­—çš„ä¼šè¯ bold /app.js å®ç”¨åŠŸèƒ½: åç»­æ•è·çš„åŒ¹é…ä¼šè¯ä¹Ÿä¼šè¢«é«˜äº® å–æ¶ˆé«˜äº® bold è¿‡æ»¤ä¼šè¯ æ ¹æ®content-typeè¿‡æ»¤ï¼Œallbut image åˆ é™¤æ‰€æœ‰ä¼šè¯ï¼Œimageä¼šè¯é™¤å¤– æ ¹æ®content-typeè¿‡æ»¤ keeponly image åªä¿ç•™imageä¼šè¯, ä½œç”¨åŒä¸Š æ–­ç‚¹ è®¾ç½®æ–­ç‚¹ï¼Œæ–­ç‚¹ç±»å‹ä¸º before request, urlåŒ…å«baiduçš„è¯·æ±‚éƒ½ä¼šè¢«ä¸­æ–­ bpu baidu æ¸…é™¤æ–­ç‚¹ bpu bpu ä¸å¸¦å‚æ•°ï¼Œåˆ™è¡¨ç¤ºæ¸…é™¤æ–­ç‚¹ è®¾ç½®æ–­ç‚¹ï¼Œæ–­ç‚¹ç±»å‹ä¸º after response, urlåŒ…å«baiduçš„å“åº”éƒ½ä¼šè¢«ä¸­æ–­ bpafter baidu æ¸…é™¤æ–­ç‚¹ bpafter bpafter ä¸å¸¦å‚æ•°ï¼Œåˆ™è¡¨ç¤ºæ¸…é™¤æ–­ç‚¹ æ‰§è¡Œæ–­ç‚¹ go åœ¨ inspector é¢æ¿ä¿®æ”¹è¯·æ±‚&#x2F;å“åº”å†…å®¹åç»§ç»­æ‰§è¡Œ æ ¹æ®è¯·æ±‚æ–¹æ³•è®¾ç½®æ–­ç‚¹ bpm POST æ¸…é™¤ bpm æ–­ç‚¹ bpm æ ¹æ®å“åº”çŠ¶æ€ç è®¾ç½®æ–­ç‚¹ bps 404 æ¸…é™¤ bps æ–­ç‚¹ bps ä¿®æ”¹è¯·æ±‚urlå¯ä»¥æŠŠè¯·æ±‚urlçš„åŸŸåä¿®æ”¹ä¸ºæœ¬åœ°ipï¼Œæ–¹ä¾¿è°ƒè¯• è®¾ç½®urlæ›¿æ¢ urlreplace www.dev.com localhost æ¸…é™¤urlæ›¿æ¢ urlreplace åˆ é™¤æ‰€æœ‰ä¼šè¯ æ¸…é™¤æ‰€æœ‰ä¼šè¯ cls æ¸…é™¤æ‰€æœ‰ä¼šè¯ clear æ„é€ è¯·æ±‚å¯ä»¥å…¨æ–°åˆ›å»ºè¯·æ±‚ï¼Œæˆ–åŸºäºç°æœ‰sessionåˆ›å»ºè¯·æ±‚ compose é¢æ¿ä¸­ï¼Œæ‰‹åŠ¨åˆ›å»ºæ‰€æœ‰çš„è¯·æ±‚å‚æ•° æ‹–ä¸€ä¸ª session åˆ° compose é¢æ¿ä¸­ï¼Œä¿®æ”¹å¹¶å‘é€æ”¹è¯·æ±‚ æŒ‰ä½shift, ç‚¹å‡» execute æŒ‰é’® , ä¼šåœ¨è¯·æ±‚å‘å‡ºå‰æ–­ç‚¹ï¼Œå…è®¸å†æ¬¡ä¿®æ”¹ autoResponder è‡ªåŠ¨å“åº”ä»å·¦ä¾§æ‹–ä¸€ä¸ª session åˆ° autoresponder ä¸­ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºåŒ¹é…è§„åˆ™å’Œå“åº”å†…å®¹ åŸºäºsessionåˆ›å»ºçš„autoresponse, é»˜è®¤è§„åˆ™ç²¾ç¡®åŒ¹é…(EXACT:the-url)ï¼Œé»˜è®¤å“åº”ä¸ºè¯¥ session çš„ response(*200-SESSION-6) ç”¨æˆ·å¯ä¿®æ”¹åŒ¹é…è§„åˆ™ï¼Œäº¦å¯ä¿®æ”¹å“åº”å†…å®¹ï¼Œåœ¨ rule list ä¸­é€‰æ‹©è¯¥ rule, æŒ‰enterç¼–è¾‘å“åº”å†…å®¹ã€‚ è‡ªåŠ¨å“åº”çš„åŒ¹é…è§„åˆ™ æ™®é€šå­—ç¬¦ä¸²ï¼ŒåŒ¹é…URLåŒ…å«è¯¥å­—ç¬¦ä¸²çš„è¯·æ±‚ hello.com NOT:æ™®é€šå­—ç¬¦ä¸²ï¼ŒåŒ¹é…URLä¸åŒ…å«è¯¥å­—ç¬¦ä¸²çš„è¯·æ±‚ NOT: hello.com é€šé…ç¬¦åŒ¹é…æ‰€æœ‰è¯·æ±‚ * ç²¾ç¡®åŒ¹é…ï¼ŒURLå®Œå…¨ç›¸åŒçš„è¯·æ±‚ EXACT: http://localhost/test.php?foo=BAR æ­£åˆ™åŒ¹é… regex:(?inxs)http://localhost/\\w+\\.php , regex:.+(gif|png|jpg)$æ­£åˆ™ä¿®é¥°ç¬¦: i ignore case å¿½ç•¥å¤§å°å†™ n requires explicit capture groups è¦æ±‚æ˜ç¡®çš„æ•è·ç»„ s enables single-line syntax å•è¡Œ x enables comments after the #character æ”¯æŒ# ååŠ æ³¨é‡Š è‡ªåŠ¨å“åº”çš„å†…å®¹ æœ¬åœ°æ–‡ä»¶ http://targetUrl é‡å®šå‘åˆ°ç›®æ ‡url *redir:http://targetUrl *bpu è¯·æ±‚å‰æ–­ç‚¹ *bpafter å“åº”å‰æ–­ç‚¹ *delay: Xms å»¶è¿Ÿå‘å‡ºè¯·æ±‚ *header: hi=hello ä¿®æ”¹&#x2F;æ–°å¢è¯·æ±‚å¤´ *CORSPreflightAllow è¿”å›å…è®¸è·¨åŸŸçš„ header *reset Reset the client connection *drop close the client connection *exit è¯¥è§„åˆ™ä»€ä¹ˆéƒ½ä¸åš,è®©åç»­è§„åˆ™å¤„ç† è‡ªåŠ¨å“åº”ç¤ºä¾‹å°†æ­£åˆ™è§„åˆ™æ•è·åˆ°çš„å‚æ•°ï¼Œåº”ç”¨åˆ°ç›®æ ‡ url 12rule: regex:youdao\\.com(.\\*)action: http://localhost/test.php$1 FiddlerScriptFiddler Script æ˜¯ç”¨ JScript.NET è¯­è¨€å†™çš„ï¼Œå¯ä»¥è‡ªåŠ¨ä¿®æ”¹ Request å’Œ Response. è¿™æ ·æˆ‘ä»¬å°±æ— éœ€æ‰‹åŠ¨è®¾ç½®â€æ–­ç‚¹â€ã€‚ Fiddler Scriptå®é™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ CustomRules.js ï¼Œä¿å­˜åœ¨ C:\\Users\\sea\\Documents\\Fiddler2\\Scripts\\CustomRules.js æ‰“å¼€ Fiddler Scriptï¼Œ ç‚¹å‡»èœå• Rules-&gt;Customize Rules æˆ–è€… ctrl + r ä¸»è¦æ–¹æ³•12345678// åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¿®æ”¹Requestçš„å†…å®¹ï¼Œ æˆ‘ä»¬ç”¨å¾—æœ€å¤š,static function OnBeforeRequest(oSession: Session)// åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä¿®æ”¹Responseçš„å†…å®¹ï¼Œstatic function OnBeforeResponse(oSession: Session) å¸¸ç”¨å¯¹è±¡å’Œæ–¹æ³•fiddlerScript Editor æœ‰æ™ºèƒ½æç¤º å¯¹è±¡ oSession oSession.url, oSession.fullUrl, oSession.host, oSession.hostname, oSession.oRequest, oSession.oResponse, oSession.HostNameIs(), oSession.uriContains() FiddlerObject FiddlerObject.log() æ–¹æ³• å­—ç¬¦ä¸²å¤„ç†æ–¹æ³• replace(), indexOf(), substring() ä¾‹å­é«˜äº®è¯·æ±‚ å’Œ æ‰“å°æ—¥å¿— 12345678function onBeforeRequest(oSession) &#123; if(oSession.HostNameIs(&#x27;www.cnblogs.com&#x27;)) &#123; oSession[&#x27;ui-color&#x27;] = &#x27;red&#x27; FiddlerObject.log(oSession.url) // ä¸å¸¦ http:// FiddlerObject.log(oSession.fullUrl) // å¸¦ http:// &#125;&#125; æ·»åŠ &#x2F;åˆ é™¤ è¯·æ±‚å¤´ 12345678function OnBeforeRequest(oSession) &#123; oSession.oRequest[&#x27;x-hi&#x27;] = &#x27;hello&#x27;; oSession.RequestHeaders.Add(&#x27;foo&#x27;, &#x27;foolish&#x27;); oSession.RequestHeaders.Remove(&#x27;Cache-Control&#x27;); // åˆ é™¤è¯·æ±‚å¤´ // or use oRequest oSession.oRequest.headers.Add(&#x27;foo&#x27;, &#x27;foolish&#x27;); oSession.oRequest.headers.Remove(&#x27;Cache-Control&#x27;);&#125; æ·»åŠ å“åº”å¤´éƒ¨ æ”¯æŒ CORS 12345function onBeforeResponse(oSession) &#123; if(oSession.HostNameIs(&#x27;www.test.com&#x27;)) &#123; oSession.ResponseHeaders.Add(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;http://10.66.51.87:9091&#x27;) &#125;&#125; å°†è¯·æ±‚é‡å®šå‘åˆ°å…¶ä»–ä¸»æœº 1234567891011121314function OnBeforeRequest(oSession) &#123; if(oSession.HostnameIs(&#x27;test.com&#x27;)) &#123; // test.com:90/foo/bar -&gt; localhost:90/foo/bar oSession.hostname = &#x27;localhost&#x27;; &#125; if(oSession.host == &#x27;foo.com:90&#x27;) &#123; oSession.host = &#x27;bar.com:9012&#x27;; // host == hostname:port &#125; if(oSession.fullUrl.indexOf(&#x27;http://www.foo.com&#x27;) == 0) &#123; oSession.fullUrl = oSession.fullUrl.replace(&#x27;http://www.foo.com&#x27;, &#x27;https://www.bar.com&#x27;) &#125;&#125; å°†ä¸€ä¸ª url é‡å®šå‘åˆ°å¦å¤–çš„ url 123456function OnBeforeRequest(oSession) &#123; if(oSession.url == &#x27;example.com/test.js&#x27;) &#123; // oSession.url ä¸åŒ…æ‹¬protocol oSession.url = &#x27;localhost.com/mock-test.js&#x27;; &#125;&#125; å–æ¶ˆå‘é€ cookie 123function OnBeforeRequest(oSession) &#123; oSession.oRequest.headers.Remove(&#x27;Cookie&#x27;);&#125; æ›¿æ¢ html æ–‡ä»¶çš„å†…å®¹ 1234567function OnBeforeResponse(oSession) &#123; if(oSession.HostnameIs(&#x27;www.test.com&#x27;) &amp;&amp; oSession.oResponse.headers.ExistsAndContains(&#x27;Content-type&#x27;, &#x27;text/html&#x27;)) &#123; var body = oSession.GetResponseBodyAsString(); body = body.replace(&#x27;foo&#x27;, &#x27;bar&#x27;); oSession.utilSetResponseBody(body); &#125;&#125; æ›¿æ¢ json æ–‡ä»¶çš„å†…å®¹ 12345678function OnBeforeResponse(oSession) &#123; if(oSession.HostnameIs(&#x27;www.test.com&#x27;) &amp;&amp; oSession.oResponse.headers.ExistsAndContains(&#x27;Content-type&#x27;, &#x27;application/json&#x27;)) &#123; var body = oSession.GetResponseBodyAsString(); var json = JSON.parse(body); json.name = &#x27;bar&#x27;; oSession.utilSetResponseBody(JSON.stringify(json)); &#125;&#125;"},{"title":"äºŒç»´ç ç™»å½•è¯¦è§£","path":"/2024/11/04/äºŒç»´ç ç™»å½•è¯¦è§£/","content":"è½¬è½½è‡ª: https://juejin.cn/post/7389952503041884170 å‰è¨€äºŒç»´ç å…¶å®æ˜¯ä¸€ä¸ªåŒ…å«å‚æ•°çš„é“¾æ¥ï¼ŒäºŒç»´ç ç™»å½•å°±æ˜¯é€šè¿‡ç”¨åŒ…å«ç™»å½•æ€çš„æ‰‹æœºæ‰«æäºŒç»´ç ï¼Œå°†å‚æ•°å’Œtokenä¼ é€’ç»™åç«¯ï¼Œè¯·æ±‚æˆæƒç™»å½•åˆ°å±•ç¤ºäºŒç»´ç ç³»ç»Ÿï¼Œä»è€Œå®ç°ç™»å½•ã€‚ äºŒç»´ç ç™»å½•è®©ç”¨æˆ·çœå»äº†è¾“å…¥è´¦å·å¯†ç çš„éº»çƒ¦ã€‚ ç™»å½•ç®€å•ç‚¹æ¥è¯´å¯ä»¥æ¦‚æ‹¬ä¸ºä¿©ç‚¹ å‘Šè¯‰ç³»ç»Ÿæˆ‘æ˜¯è° å‘ç³»ç»Ÿè¯æ˜æˆ‘æ˜¯è° ä¸‹é¢æˆ‘ä»¬å°±ä¼šå›´ç»•ç€è¿™ä¿©ç‚¹æ¥å±•å¼€è¯¦ç»†è¯´æ˜ åŸç†è§£æå…¶å®å¤§éƒ¨åˆ†çš„äºŒç»´ç å°±æ˜¯ä¸€ä¸ªurlåœ°å€ æˆ‘ä»¬ä»¥æ˜é‡‘æ‰«ç ç™»å½•ä¸ºä¾‹æ¥è¿›è¡Œå‰–æ æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªè§£æ juejin.cn&#x2F;app?next_urâ€¦ æˆ‘ä»¬å¯ä»¥å‘ç°å®ƒå®é™…å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªurl æ•´ä¸ªä¸‰ç«¯äº¤äº’çš„è¿‡ç¨‹å¤§æ¦‚æ˜¯è¿™æ ·å­çš„ï¼š æµç¨‹æ¦‚è¿°ç®€å•æ¥è¯´æ°›å›´ä¸‹é¢çš„æ­¥éª¤ï¼š PCç«¯ï¼šè¿›å…¥äºŒç»´ç ç™»å½•é¡µé¢ï¼Œè¯·æ±‚æœåŠ¡ç«¯è·å–äºŒç»´ç çš„IDã€‚ æœåŠ¡ç«¯ï¼šç”ŸæˆäºŒç»´ç IDï¼Œå¹¶å°†å…¶ä¸è¯·æ±‚çš„è®¾å¤‡ç»‘å®šåï¼Œè¿”å›æœ‰æ•ˆçš„äºŒç»´ç IDã€‚ PCç«¯ï¼šæ ¹æ®äºŒç»´ç IDç”ŸæˆäºŒç»´ç å›¾ç‰‡ï¼Œå¹¶å±•ç¤ºå‡ºæ¥ã€‚ ç§»åŠ¨ç«¯ï¼šæ‰«æäºŒç»´ç ï¼Œè§£æå‡ºäºŒç»´ç IDã€‚ ç§»åŠ¨ç«¯ï¼šä½¿ç”¨ç§»åŠ¨ç«¯çš„tokenå’ŒäºŒç»´ç IDè¯·æ±‚æœåŠ¡ç«¯è¿›è¡Œç™»å½•ã€‚ æœåŠ¡ç«¯ï¼šè§£æéªŒè¯è¯·æ±‚ï¼Œç»‘å®šç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶è¿”å›ç»™ç§»åŠ¨ç«¯ä¸€ä¸ªç”¨äºäºŒæ¬¡ç¡®è®¤çš„ä¸´æ—¶tokenã€‚ PCç«¯ï¼šå±•ç¤ºäºŒç»´ç ä¸ºâ€œå¾…ç¡®è®¤â€çŠ¶æ€ã€‚ ç§»åŠ¨ç«¯ï¼šä½¿ç”¨äºŒç»´ç IDã€ä¸´æ—¶tokenå’Œç§»åŠ¨ç«¯çš„tokenè¿›è¡Œç¡®è®¤ç™»å½•ã€‚ æœåŠ¡ç«¯ï¼šéªŒè¯é€šè¿‡åï¼Œä¿®æ”¹äºŒç»´ç çŠ¶æ€ï¼Œå¹¶è¿”å›ç»™PCç«¯ä¸€ä¸ªç™»å½•çš„tokenã€‚ ä¸‹é¢æˆ‘ä»¬æ¥ç”¨ä¸€ä¸ªpythonçš„ä»£ç æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚ é¦–å…ˆæ˜¯æœåŠ¡ç«¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142from flask import Flask, request, jsonifyimport uuidimport timeâ€‹app = Flask(__name__)â€‹# å­˜å‚¨äºŒç»´ç IDå’Œå¯¹åº”çš„è®¾å¤‡ä¿¡æ¯ä»¥åŠä¸´æ—¶tokenqr_code_store = &#123;&#125;temporary_tokens = &#123;&#125;â€‹@app.route(&#x27;/generate_qr&#x27;, methods=[&#x27;POST&#x27;])def generate_qr(): device_id = request.json[&#x27;device_id&#x27;] qr_id = str(uuid.uuid4()) qr_code_store[qr_id] = &#123;&#x27;device_id&#x27;: device_id, &#x27;timestamp&#x27;: time.time(), &#x27;status&#x27;: &#x27;waiting&#x27;&#125; return jsonify(&#123;&#x27;qr_id&#x27;: qr_id&#125;)â€‹@app.route(&#x27;/scan_qr&#x27;, methods=[&#x27;POST&#x27;])def scan_qr(): qr_id = request.json[&#x27;qr_id&#x27;] token = request.json[&#x27;token&#x27;] if qr_id in qr_code_store: qr_code_store[qr_id][&#x27;status&#x27;] = &#x27;scanned&#x27; temp_token = str(uuid.uuid4()) temporary_tokens[temp_token] = &#123;&#x27;qr_id&#x27;: qr_id, &#x27;timestamp&#x27;: time.time()&#125; return jsonify(&#123;&#x27;temp_token&#x27;: temp_token&#125;) return jsonify(&#123;&#x27;error&#x27;: &#x27;Invalid QR code&#x27;&#125;), 400â€‹@app.route(&#x27;/confirm_login&#x27;, methods=[&#x27;POST&#x27;])def confirm_login(): qr_id = request.json[&#x27;qr_id&#x27;] temp_token = request.json[&#x27;temp_token&#x27;] mobile_token = request.json[&#x27;mobile_token&#x27;] if temp_token in temporary_tokens and temporary_tokens[temp_token][&#x27;qr_id&#x27;] == qr_id: login_token = str(uuid.uuid4()) qr_code_store[qr_id][&#x27;status&#x27;] = &#x27;confirmed&#x27; return jsonify(&#123;&#x27;login_token&#x27;: login_token&#125;) return jsonify(&#123;&#x27;error&#x27;: &#x27;Invalid confirmation&#x27;&#125;), 400â€‹if __name__ == &#x27;__main__&#x27;: app.run(debug=True)â€‹ ä¹‹åæ¥çœ‹PCç«¯(è¿™é‡Œåº”è¯¥ç”¨H5é¡µé¢æ¯”è¾ƒåˆé€‚)ï¼š 12345678910111213import requestsimport jsonâ€‹# 1. è¯·æ±‚ç”ŸæˆäºŒç»´ç IDresponse = requests.post(&#x27;http://localhost:5000/generate_qr&#x27;, json=&#123;&#x27;device_id&#x27;: &#x27;PC_device&#x27;&#125;)qr_id = response.json()[&#x27;qr_id&#x27;]â€‹# 2. æ ¹æ®äºŒç»´ç IDç”ŸæˆäºŒç»´ç å›¾ç‰‡ (æ­¤å¤„çœç•¥ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç”ŸæˆäºŒç»´ç å›¾ç‰‡)print(f&quot;QR Code ID: &#123;qr_id&#125;&quot;)â€‹# 7. æ˜¾ç¤ºäºŒç»´ç è¿›å…¥â€œå¾…ç¡®è®¤â€çŠ¶æ€print(&quot;QR Code Status: Waiting for confirmation&quot;)â€‹ ä¹‹åå†æ¥çœ‹ç§»åŠ¨ç«¯çš„ä»£ç  (è¿™é‡Œä¹Ÿç”¨pythonæ¨¡æ‹Ÿå‘èµ·è¯·æ±‚)ï¼š 12345678910111213141516171819import requestsâ€‹# 4. æ‰«æäºŒç»´ç ï¼Œè§£æå‡ºäºŒç»´ç IDqr_id = &#x27;è§£æå‡ºçš„äºŒç»´ç ID&#x27;token = &#x27;ç§»åŠ¨ç«¯token&#x27;â€‹# 5. è¯·æ±‚æœåŠ¡ç«¯è¿›è¡Œç™»å½•response = requests.post(&#x27;http://localhost:5000/scan_qr&#x27;, json=&#123;&#x27;qr_id&#x27;: qr_id, &#x27;token&#x27;: token&#125;)temp_token = response.json()[&#x27;temp_token&#x27;]â€‹# 8. ä½¿ç”¨äºŒç»´ç IDã€ä¸´æ—¶tokenå’Œç§»åŠ¨ç«¯çš„tokenè¿›è¡Œç¡®è®¤ç™»å½•response = requests.post(&#x27;http://localhost:5000/confirm_login&#x27;, json=&#123;&#x27;qr_id&#x27;: qr_id, &#x27;temp_token&#x27;: temp_token, &#x27;mobile_token&#x27;: token&#125;)login_token = response.json().get(&#x27;login_token&#x27;)â€‹if login_token: print(&quot;ç™»å½•æˆåŠŸï¼&quot;)else: print(&quot;ç™»å½•å¤±è´¥ï¼&quot;)â€‹ è¿™æ ·ä¸€ä¸ªç®€å•çš„äºŒç»´ç ç™»å½•çš„æµç¨‹å°±å‡ºæ¥äº† æ¡ˆä¾‹è§£æäº†è§£äº†æµç¨‹ä¹‹åæˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä»–å¤§å‹ç½‘ç«™æ˜¯å¦‚ä½•å®æ–½çš„ è¿™é‡Œæ‹¿å“”å“©å“”å“©æ¥ä¸¾ä¾‹ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„é‚£ä¸ªjsonå®ä¾‹ 123456789101112&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;0&quot;, &quot;ttl&quot;: 1, &quot;data&quot;: &#123; &quot;url&quot;: &quot;&quot;, &quot;refresh_token&quot;: &quot;&quot;, &quot;timestamp&quot;: 0, &quot;code&quot;: 86101, &quot;message&quot;: &quot;æœªæ‰«ç &quot; &#125;&#125; æˆ‘ä»¬å¯ä»¥å‘ç°bç«™æ˜¯ä¸æ–­çš„å»å‘é€è¿™ä¸ªè¯·æ±‚ï¼Œå»è½®è¯¢å¾—åˆ°æœ€æ–°çš„æ‰«ç çŠ¶æ€ï¼Œè¯·æ±‚é—´éš”å¤§çº¦1s ä¹‹åå½“æˆ‘ä»¬æ‰«æåå‘ç°å·²ç»å˜æˆç­‰å¾…ç¡®è®¤ å½“æˆ‘ä»¬ç¡®è®¤åï¼Œä¼šè¿”å› å’Œæˆ‘ä»¬è¯´çš„æµç¨‹å¤§æ¦‚çš„ç›¸åŒã€‚ PS: ç§»åŠ¨ç«¯å’ŒæœåŠ¡ç«¯ç¡®è®¤ç™»å½•åï¼ŒæœåŠ¡ç«¯æ€ä¹ˆé€šçŸ¥åˆ°PCç«¯ï¼Œå¹¶å‘é€tokenè¿‡å»ï¼Œè¿™ä¸ªå®ç°ç»†èŠ‚å…¶å®ä¸€ç›´æ¯”è¾ƒå¥½å¥‡ï¼ŒåŸæ¥æ˜¯ç”±å‰ç«¯ä¸€ç›´è½®è¯¢å®ç°çš„ã€‚ :)"},{"title":"ä¸€æ–‡åƒé€ React SSR æœåŠ¡ç«¯æ¸²æŸ“å’ŒåŒæ„åŸç†","path":"/2024/07/31/ä¸€æ–‡åƒé€-React-SSR-æœåŠ¡ç«¯æ¸²æŸ“å’ŒåŒæ„åŸç†/","content":"åŸæ–‡åœ°å€javascript - ä¸€æ–‡åƒé€ React SSR æœåŠ¡ç«¯æ¸²æŸ“å’ŒåŒæ„åŸç† - å‰ç«¯å¼ å¤§èƒ–-æŠ€æœ¯å®è·µå’Œæ¢ç´¢ - SegmentFault æ€å¦ å…¨ç½‘æœ€å®Œæ•´çš„ React SSR åŒæ„æŠ€æœ¯åŸç†è§£æä¸å®è·µï¼Œä»é›¶å¼€å§‹æ‰‹æŠŠæ‰‹å¸¦ä½ æ‰“é€ è‡ªå·±çš„åŒæ„åº”ç”¨å¼€å‘éª¨æ¶ï¼Œå¸®åŠ©å¤§å®¶å½»åº•æ·±å…¥ç†è§£æœåŠ¡ç«¯æ¸²æŸ“åŠåº•å±‚å®ç°åŸç†ï¼Œå­¦å®Œæœ¬è¯¾ç¨‹ï¼Œä½ ä¹Ÿå¯ä»¥æ‰“é€ è‡ªå·±çš„åŒæ„æ¡†æ¶ã€‚ å†™åœ¨å‰é¢å‰æ®µæ—¶é—´ä¸€ç›´åœ¨ç ”ç©¶react ssræŠ€æœ¯ï¼Œç„¶åå†™äº†ä¸€ä¸ªå®Œæ•´çš„ssrå¼€å‘éª¨æ¶ã€‚ä»Šå¤©å†™æ–‡ï¼Œä¸»è¦æ˜¯æŠŠæˆ‘çš„ç ”ç©¶æˆæœçš„ç²¾åå†…å®¹æ•´ç†è½åœ°ï¼Œå¦å¤–é€šè¿‡å†æ¬¡æ¢³ç†å¸Œæœ›å‘ç°æ›´å¤šä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥è®©æ›´å¤šçš„äººå°‘è¸©ä¸€äº›å‘ï¼Œè®©è·Ÿå¤šçš„äººç†è§£å’ŒæŒæ¡è¿™ä¸ªæŠ€æœ¯ã€‚ ç›¸ä¿¡çœ‹è¿‡æœ¬æ–‡ï¼ˆå‰ææ˜¯èƒ½å¯¹ä½ çš„èƒƒå£ï¼Œä¹Ÿèƒ½è¾ƒå¥½çš„æ¶ˆåŒ–å¸æ”¶ï¼‰ä½ ä¸€å®šä¼šå¯¹ react ssr æœåŠ¡ç«¯æ¸²æŸ“æŠ€æœ¯æœ‰ä¸€ä¸ªæ·±å…¥çš„ç†è§£ï¼Œå¯ä»¥æ‰“é€ è‡ªå·±çš„è„šæ‰‹æ¶ï¼Œæ›´å¯ä»¥ç”¨æ¥æ”¹é€ è‡ªå·±çš„å®é™…é¡¹ç›®ï¼Œå½“ç„¶è¿™ä¸ä»…é™äº react ï¼Œå…¶ä»–æ¡†æ¶éƒ½ä¸€æ ·ï¼Œæ¯•ç«ŸåŸç†éƒ½æ˜¯ç›¸ä¼¼çš„ã€‚ ä¸ºä»€ä¹ˆè¦æœåŠ¡ç«¯æ¸²æŸ“(ssr)è‡³äºä¸ºä»€ä¹ˆè¦æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶éƒ½æœ‰æ‰€é—»ï¼Œè€Œä¸”æ¯ä¸ªäººéƒ½èƒ½è¯´å‡ºå‡ ç‚¹æ¥ã€‚ é¦–å±ç­‰å¾…åœ¨ SPA æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„æ•°æ®è¯·æ±‚å’Œ Dom æ¸²æŸ“éƒ½åœ¨æµè§ˆå™¨ç«¯å®Œæˆï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—®é¡µé¢çš„æ—¶å€™å¾ˆå¯èƒ½ä¼šå­˜åœ¨â€œç™½å±â€ç­‰å¾…ï¼Œè€ŒæœåŠ¡ç«¯æ¸²æŸ“æ‰€æœ‰æ•°æ®è¯·æ±‚å’Œ htmlå†…å®¹å·²åœ¨æœåŠ¡ç«¯å¤„ç†å®Œæˆï¼Œæµè§ˆå™¨æ”¶åˆ°çš„æ˜¯å®Œæ•´çš„ html å†…å®¹ï¼Œå¯ä»¥æ›´å¿«çš„çœ‹åˆ°æ¸²æŸ“å†…å®¹ï¼Œåœ¨æœåŠ¡ç«¯å®Œæˆæ•°æ®è¯·æ±‚è‚¯å®šæ˜¯è¦æ¯”åœ¨æµè§ˆå™¨ç«¯æ•ˆç‡è¦é«˜çš„å¤šã€‚ æ²¡è€ƒè™‘SEOçš„æ„Ÿå—æœ‰äº›ç½‘ç«™çš„æµé‡æ¥æºä¸»è¦è¿˜æ˜¯é æœç´¢å¼•æ“ï¼Œæ‰€ä»¥ç½‘ç«™çš„ SEO è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œè€Œ SPA æ¨¡å¼å¯¹æœç´¢å¼•æ“ä¸å¤Ÿå‹å¥½ï¼Œè¦æƒ³å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜åªèƒ½é‡‡ç”¨æœåŠ¡ç«¯ç›´å‡ºã€‚æ”¹å˜ä¸äº†åˆ«äººï¼ˆæœç´¢yinqingï¼‰ï¼Œåªèƒ½æ”¹å˜è‡ªå·±ã€‚ SSR + SPA ä½“éªŒå‡çº§åªå®ç° SSR å…¶å®æ²¡å•¥æ„ä¹‰ï¼ŒæŠ€æœ¯ä¸Šæ²¡æœ‰ä»»ä½•å‘å±•å’Œè¿›æ­¥ï¼Œå¦åˆ™ SPA æŠ€æœ¯å°±ä¸ä¼šå‡ºç°ã€‚ ä½†æ˜¯å•çº¯çš„ SPAåˆä¸å¤Ÿå®Œç¾ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹æ¡ˆå°±æ˜¯è¿™ä¸¤ç§ä½“éªŒå’ŒæŠ€æœ¯çš„ç»“åˆï¼Œç¬¬ä¸€æ¬¡è®¿é—®é¡µé¢æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ŒåŸºäºç¬¬ä¸€æ¬¡è®¿é—®åç»­çš„äº¤äº’å°±æ˜¯ SPA çš„æ•ˆæœå’Œä½“éªŒï¼Œè¿˜ä¸å½±å“SEO æ•ˆæœï¼Œè¿™å°±æœ‰ç‚¹å®Œç¾äº†ã€‚ å•çº¯å®ç° ssr å¾ˆç®€å•ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¼ ç»ŸæŠ€æœ¯ï¼Œä¹Ÿä¸åˆ†è¯­è¨€ï¼Œéšä¾¿ç”¨ php ã€jspã€aspã€node ç­‰éƒ½å¯ä»¥å®ç°ã€‚ ä½†æ˜¯è¦å®ç°ä¸¤ç§æŠ€æœ¯çš„ç»“åˆï¼ŒåŒæ—¶å¯ä»¥æœ€å¤§é™åº¦çš„é‡ç”¨ä»£ç ï¼ˆåŒæ„ï¼‰ï¼Œå‡å°‘å¼€å‘ç»´æŠ¤æˆæœ¬ï¼Œé‚£å°±éœ€è¦é‡‡ç”¨ react æˆ–è€… vue ç­‰å‰ç«¯æ¡†æ¶ç›¸ç»“åˆ node (ssr) æ¥å®ç°ã€‚ æœ¬æ–‡ä¸»è¦è¯´ React SSR æŠ€æœ¯ ,å½“ç„¶ vue ä¹Ÿä¸€æ ·ï¼Œåªæ˜¯æŠ€æœ¯æ ˆä¸åŒè€Œå·²ã€‚ æ ¸å¿ƒåŸç†æ•´ä½“æ¥è¯´ react æœåŠ¡ç«¯æ¸²æŸ“åŸç†ä¸å¤æ‚ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„å†…å®¹å°±æ˜¯åŒæ„ã€‚ node server æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¾—åˆ°å½“å‰çš„req url path,ç„¶ååœ¨å·²æœ‰çš„è·¯ç”±è¡¨å†…æŸ¥æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Œæ‹¿åˆ°éœ€è¦è¯·æ±‚çš„æ•°æ®ï¼Œå°†æ•°æ®ä½œä¸º propsã€contextæˆ–è€…store å½¢å¼ä¼ å…¥ç»„ä»¶ï¼Œç„¶ååŸºäº react å†…ç½®çš„æœåŠ¡ç«¯æ¸²æŸ“api renderToString() or renderToNodeStream() æŠŠç»„ä»¶æ¸²æŸ“ä¸º htmlå­—ç¬¦ä¸²æˆ–è€… stream æµ, åœ¨æŠŠæœ€ç»ˆçš„ html è¿›è¡Œè¾“å‡ºå‰éœ€è¦å°†æ•°æ®æ³¨å…¥åˆ°æµè§ˆå™¨ç«¯(æ³¨æ°´)ï¼Œserver è¾“å‡º(response)åæµè§ˆå™¨ç«¯å¯ä»¥å¾—åˆ°æ•°æ®(è„±æ°´)ï¼Œæµè§ˆå™¨å¼€å§‹è¿›è¡Œæ¸²æŸ“å’ŒèŠ‚ç‚¹å¯¹æ¯”ï¼Œç„¶åæ‰§è¡Œç»„ä»¶çš„componentDidMount å®Œæˆç»„ä»¶å†…äº‹ä»¶ç»‘å®šå’Œä¸€äº›äº¤äº’ï¼Œæµè§ˆå™¨é‡ç”¨äº†æœåŠ¡ç«¯è¾“å‡ºçš„ html èŠ‚ç‚¹ï¼Œæ•´ä¸ªæµç¨‹ç»“æŸã€‚ æŠ€æœ¯ç‚¹ç¡®å®ä¸å°‘ï¼Œä½†æ›´å¤šçš„æ˜¯æ¶æ„å’Œå·¥ç¨‹å±‚é¢çš„ï¼Œéœ€è¦æŠŠå„ä¸ªçŸ¥è¯†ç‚¹è¿›è¡Œé“¾æ¥å’Œæ•´åˆã€‚ è¿™é‡Œæ”¾ä¸€ä¸ªæ¶æ„å›¾ react ssrä» ejs å¼€å§‹å®ç° ssr å¾ˆç®€å•ï¼Œå…ˆçœ‹ä¸€ä¸ª node ejsçš„æ —å­ã€‚ 12345678910111213// index.html&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;react ssr &lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;%= data %&gt;&lt;/body&gt;&lt;/html&gt; 12345678910111213141516171819202122 //node ssr const ejs = require(&#x27;ejs&#x27;); const http = require(&#x27;http&#x27;);http.createServer((req, res) =&gt; &#123; if (req.url === &#x27;/&#x27;) &#123; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); // æ¸²æŸ“æ–‡ä»¶ index.ejs ejs.renderFile(&#x27;./views/index.ejs&#x27;, &#123; title: &#x27;react ssr&#x27;, data: &#x27;é¦–é¡µ&#x27;&#125;, (err, data) =&gt; &#123; if (err ) &#123; console.log(err); &#125; else &#123; res.end(data); &#125; &#125;) &#125;&#125;).listen(8080); jsx åˆ°å­—ç¬¦ä¸²ä¸Šé¢æˆ‘ä»¬ç»“åˆ ejsæ¨¡æ¿å¼•æ“ ï¼Œå®ç°äº†ä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„è¾“å‡ºï¼Œhtml å’Œ æ•°æ®ç›´æ¥è¾“å‡ºåˆ°å®¢æˆ·ç«¯ã€‚ å‚è€ƒä»¥ä¸Šï¼Œæˆ‘ä»¬ç»“åˆ reactç»„ä»¶ æ¥å®ç°æœåŠ¡ç«¯æ¸²æŸ“ç›´å‡ºï¼Œä½¿ç”¨ jsx æ¥ä»£æ›¿ ejsï¼Œä¹‹å‰æ˜¯åœ¨ html é‡Œä½¿ç”¨ ejs æ¥ç»‘å®šæ•°æ®ï¼Œç°åœ¨æ”¹å†™æˆä½¿ç”¨jsx æ¥ç»‘å®šæ•°æ®,ä½¿ç”¨ react å†…ç½® api æ¥æŠŠç»„ä»¶æ¸²æŸ“ä¸º html å­—ç¬¦ä¸²ï¼Œå…¶ä»–æ²¡æœ‰å·®åˆ«ã€‚ ä¸ºä»€ä¹ˆreact ç»„ä»¶å¯ä»¥è¢«è½¬æ¢ä¸º htmlå­—ç¬¦ä¸²å‘¢ï¼Ÿ ç®€å•çš„è¯´æˆ‘ä»¬å†™çš„ jsx çœ‹ä¸Šå»å°±åƒåœ¨å†™ htmlï¼ˆå…¶å®å†™çš„æ˜¯å¯¹è±¡ï¼‰ æ ‡ç­¾ï¼Œå…¶å®ç»è¿‡ç¼–è¯‘åéƒ½ä¼šè½¬æ¢æˆReact.createElementæ–¹æ³•ï¼Œæœ€ç»ˆä¼šè¢«è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡(è™šæ‹ŸDOM)ï¼Œè€Œä¸”å’Œå¹³å°æ— å…³ï¼Œæœ‰äº†è¿™ä¸ªå¯¹è±¡ï¼Œæƒ³è½¬æ¢æˆä»€ä¹ˆé‚£å°±çœ‹å¿ƒæƒ…äº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738const React = require(&#x27;react&#x27;);const &#123; renderToString&#125; = require( &#x27;react-dom/server&#x27;);const http = require(&#x27;http&#x27;);//ç»„ä»¶class Index extends React.Component&#123; constructor(props)&#123; super(props); &#125; render()&#123; return &lt;h1&gt;&#123;this.props.data.title&#125;&lt;/h1&gt; &#125;&#125; //æ¨¡æ‹Ÿæ•°æ®çš„è·å–const fetch = function () &#123; return &#123; title:&#x27;react ssr&#x27;, data:[] &#125;&#125;//æœåŠ¡http.createServer((req, res) =&gt; &#123; if (req.url === &#x27;/&#x27;) &#123; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); const data = fetch(); const html = renderToString(&lt;Index data=&#123;data&#125;/&gt;); res.end(html); &#125;&#125;).listen(8080); ps:ä»¥ä¸Šä»£ç ä¸èƒ½ç›´æ¥è¿è¡Œï¼Œéœ€è¦ç»“åˆbabel ä½¿ç”¨ @babel&#x2F;preset-react è¿›è¡Œè½¬æ¢ 123npx babel script.js --out-file script-compiled.js --presets=@babel/preset-react å¼•å‡ºé—®é¢˜åœ¨ä¸Šé¢éå¸¸ç®€å•çš„å°±æ˜¯å®ç°äº† react ssr ,æŠŠjsxä½œä¸ºæ¨¡æ¿å¼•æ“ï¼Œä¸è¦å°çœ‹ä¸Šé¢çš„ä¸€å°æ®µä»£ç ï¼Œä»–å¯ä»¥å¸®æˆ‘ä»¬å¼•å‡ºä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯å®Œæ•´å®ç° react ssr çš„åŸºçŸ³ã€‚ åŒç«¯è·¯ç”±å¦‚ä½•ç»´æŠ¤ï¼Ÿ é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°æˆ‘åœ¨ server ç«¯å®šä¹‰äº†è·¯ç”± â€˜&#x2F;â€˜ï¼Œä½†æ˜¯åœ¨ react SPA æ¨¡å¼ä¸‹æˆ‘ä»¬éœ€è¦ä½¿ç”¨react-routeræ¥å®šä¹‰è·¯ç”±ã€‚é‚£æ˜¯ä¸æ˜¯å°±éœ€è¦ç»´æŠ¤ä¸¤å¥—è·¯ç”±å‘¢ï¼Ÿ è·å–æ•°æ®çš„æ–¹æ³•å’Œé€»è¾‘å†™åœ¨å“ªé‡Œï¼Ÿ å‘ç°æ•°æ®è·å–çš„fetch å†™çš„ç‹¬ç«‹çš„æ–¹æ³•ï¼Œå’Œç»„ä»¶æ²¡æœ‰ä»»ä½•å…³è”ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›çš„æ˜¯æ¯ä¸ªè·¯ç”±éƒ½æœ‰è‡ªå·±çš„ fetch æ–¹æ³•ã€‚ æœåŠ¡ç«¯ html èŠ‚ç‚¹æ— æ³•é‡ç”¨ è™½ç„¶ç»„ä»¶åœ¨æœåŠ¡ç«¯å¾—åˆ°äº†æ•°æ®ï¼Œä¹Ÿèƒ½æ¸²æŸ“åˆ°æµè§ˆå™¨å†…ï¼Œä½†æ˜¯å½“æµè§ˆå™¨ç«¯è¿›è¡Œç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ç›´å‡ºçš„å†…å®¹ä¼šä¸€é—ªè€Œè¿‡æ¶ˆå¤±ã€‚ å¥½äº†ï¼Œé—®é¢˜æœ‰äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥ä¸€æ­¥çš„æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚ åŒæ„æ‰æ˜¯æ ¸å¿ƒreact ssr çš„æ ¸å¿ƒå°±æ˜¯åŒæ„ï¼Œæ²¡æœ‰åŒæ„çš„ ssr æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ æ‰€è°“åŒæ„å°±æ˜¯é‡‡ç”¨ä¸€å¥—ä»£ç ï¼Œæ„å»ºåŒç«¯ï¼ˆserver å’Œ clientï¼‰é€»è¾‘ï¼Œæœ€å¤§é™åº¦çš„é‡ç”¨ä»£ç ï¼Œä¸ç”¨ç»´æŠ¤ä¸¤å¥—ä»£ç ã€‚è€Œä¼ ç»Ÿçš„æœåŠ¡ç«¯æ¸²æŸ“æ˜¯æ— æ³•åšåˆ°çš„ï¼Œreact çš„å‡ºç°æ‰“ç ´äº†è¿™ä¸ªç“¶é¢ˆï¼Œå¹¶ä¸”ç°åœ¨å·²ç»å¾—åˆ°äº†æ¯”è¾ƒå¹¿æ³›çš„åº”ç”¨ã€‚ è·¯ç”±åŒæ„åŒç«¯ä½¿ç”¨åŒä¸€å¥—è·¯ç”±è§„åˆ™ï¼Œnode server é€šè¿‡req url path è¿›è¡Œç»„ä»¶çš„æŸ¥æ‰¾ï¼Œå¾—åˆ°éœ€è¦æ¸²æŸ“çš„ç»„ä»¶ã€‚ &#x2F;&#x2F;ç»„ä»¶å’Œè·¯ç”±é…ç½® ï¼Œä¾›åŒç«¯ä½¿ç”¨ routes-config.js 12345678910111213141516171819202122232425262728293031323334353637class Detail extends React.Component&#123; render()&#123; return &lt;div&gt;detail&lt;/div&gt; &#125;&#125;class Index extends React.Component &#123; render() &#123; return &lt;div&gt;index&lt;/div&gt; &#125;&#125;const routes = [ &#123; path: &quot;/&quot;, exact: true, component: Home &#125;, &#123; path: &#x27;/detail&#x27;, exact: true, component:Detail, &#125;, &#123; path: &#x27;/detail/:a/:b&#x27;, exact: true, component: Detail &#125; ];//å¯¼å‡ºè·¯ç”±è¡¨export default routes; &#x2F;&#x2F;å®¢æˆ·ç«¯ è·¯ç”±ç»„ä»¶ 123456789101112131415161718import routes from &#x27;./routes-config.js&#x27;;function App()&#123; return ( &lt;Layout&gt; &lt;Switch&gt; &#123; routes.map((item,index)=&gt;&#123; return &lt;Route path=&#123;item.path&#125; key=&#123;index&#125; exact=&#123;item.exact&#125; render=&#123;item.component&#125;&gt;&lt;/Route&gt; &#125;) &#125; &lt;/Switch&gt; &lt;/Layout&gt; );&#125;export default App; node server è¿›è¡Œç»„ä»¶æŸ¥æ‰¾ è·¯ç”±åŒ¹é…å…¶å®å°±æ˜¯å¯¹ ç»„ä»¶path è§„åˆ™çš„åŒ¹é…ï¼Œå¦‚æœè§„åˆ™ä¸å¤æ‚å¯ä»¥è‡ªå·±å†™ï¼Œå¦‚æœæƒ…å†µå¾ˆå¤šç§è¿˜æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„åº“æ¥å®Œæˆã€‚ matchRoutes(routes, pathname) 123456789101112131415161718192021222324252627282930313233343536//å¼•å…¥å®˜æ–¹åº“import &#123; matchRoutes &#125; from &quot;react-router-config&quot;;import routes from &#x27;./routes-config.js&#x27;;const path = req.path;const branch = matchRoutes(routes, path);//å¾—åˆ°è¦æ¸²æŸ“çš„ç»„ä»¶const Component = branch[0].route.component; //node server http.createServer((req, res) =&gt; &#123; const url = req.url; //ç®€å•å®¹é”™ï¼Œæ’é™¤å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶çš„è¯·æ±‚ if(url.indexOf(&#x27;.&#x27;)&gt;-1) &#123; res.end(&#x27;&#x27;); return false;&#125; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); const data = fetch(); //æŸ¥æ‰¾ç»„ä»¶ const branch = matchRoutes(routes,url); //å¾—åˆ°ç»„ä»¶ const Component = branch[0].route.component; //å°†ç»„ä»¶æ¸²æŸ“ä¸º html å­—ç¬¦ä¸² const html = renderToString(&lt;Component data=&#123;data&#125;/&gt;); res.end(html); &#125;).listen(8080); å¯ä»¥çœ‹ä¸‹matchRoutesæ–¹æ³•çš„è¿”å›å€¼,å…¶ä¸­route.component å°±æ˜¯ è¦æ¸²æŸ“çš„ç»„ä»¶ 1234567891011[ &#123; route: &#123; path: &#x27;/detail&#x27;, exact: true, component: [Function: Detail] &#125;, match: &#123; path: &#x27;/detail&#x27;, url: &#x27;/detail&#x27;, isExact: true, params: &#123;&#125; &#125; &#125; ] react-router-config è¿™ä¸ªåº“ç”±react å®˜æ–¹ç»´æŠ¤ï¼ŒåŠŸèƒ½æ˜¯å®ç°åµŒå¥—è·¯ç”±çš„æŸ¥æ‰¾ï¼Œä»£ç æ²¡æœ‰å¤šå°‘ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚ æ–‡ç« èµ°åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“äº†è·¯ç”±åŒæ„ï¼Œæ‰€ä»¥ä¸Šé¢çš„ç¬¬ä¸€ä¸ªé—®é¢˜ ï¼š ã€åŒç«¯è·¯ç”±å¦‚ä½•ç»´æŠ¤ï¼Ÿã€‘ è§£å†³äº†ã€‚ æ•°æ®åŒæ„ï¼ˆé¢„å–åŒæ„ï¼‰è¿™é‡Œå¼€å§‹è§£å†³æˆ‘ä»¬æœ€å¼€å§‹å‘ç°çš„ç¬¬äºŒä¸ªé—®é¢˜ - ã€è·å–æ•°æ®çš„æ–¹æ³•å’Œé€»è¾‘å†™åœ¨å“ªé‡Œï¼Ÿã€‘ æ•°æ®é¢„å–åŒæ„ï¼Œè§£å†³åŒç«¯å¦‚ä½•ä½¿ç”¨åŒä¸€å¥—æ•°æ®è¯·æ±‚æ–¹æ³•æ¥è¿›è¡Œæ•°æ®è¯·æ±‚ã€‚ å…ˆè¯´ä¸‹æµç¨‹ï¼Œåœ¨æŸ¥æ‰¾åˆ°è¦æ¸²æŸ“çš„ç»„ä»¶åï¼Œéœ€è¦é¢„å…ˆå¾—åˆ°æ­¤ç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®ï¼Œç„¶åå°†æ•°æ®ä¼ é€’ç»™ç»„ä»¶åï¼Œå†è¿›è¡Œç»„ä»¶çš„æ¸²æŸ“ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™ç»„ä»¶å®šä¹‰é™æ€æ–¹æ³•æ¥å¤„ç†ï¼Œç»„ä»¶å†…å®šä¹‰å¼‚æ­¥æ•°æ®è¯·æ±‚çš„æ–¹æ³•ä¹Ÿåˆæƒ…åˆç†ï¼ŒåŒæ—¶å£°æ˜ä¸ºé™æ€ï¼ˆstaticï¼‰ï¼Œåœ¨ server ç«¯å’Œç»„ä»¶å†…éƒ½ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ç»„ä»¶ï¼ˆfunctionï¼‰ æ¥è¿›è¡Œè®¿é—®ã€‚ æ¯”å¦‚ Index.getInitialProps 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//ç»„ä»¶class Index extends React.Component&#123; constructor(props)&#123; super(props); &#125; //æ•°æ®é¢„å–æ–¹æ³• é™æ€ å¼‚æ­¥ æ–¹æ³• static async getInitialProps(opt) &#123; const fetch1 =await fetch(&#x27;/xxx.com/a&#x27;); const fetch2 = await fetch(&#x27;/xxx.com/b&#x27;); return &#123; res:[fetch1,fetch2] &#125; &#125; render()&#123; return &lt;h1&gt;&#123;this.props.data.title&#125;&lt;/h1&gt; &#125;&#125;//node server http.createServer((req, res) =&gt; &#123; const url = req.url; if(url.indexOf(&#x27;.&#x27;)&gt;-1) &#123; res.end(&#x27;&#x27;); return false;&#125; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); //ç»„ä»¶æŸ¥æ‰¾ const branch = matchRoutes(routes,url); //å¾—åˆ°ç»„ä»¶ const Component = branch[0].route.component; //æ•°æ®é¢„å– const data = Component.getInitialProps(branch[0].match.params); //ä¼ å…¥æ•°æ®ï¼Œæ¸²æŸ“ç»„ä»¶ä¸º html å­—ç¬¦ä¸² const html = renderToString(&lt;Component data=&#123;data&#125;/&gt;); res.end(html); &#125;).listen(8080); å¦å¤–è¿˜æœ‰åœ¨å£°æ˜è·¯ç”±çš„æ—¶å€™æŠŠæ•°æ®è¯·æ±‚æ–¹æ³•å…³è”åˆ°è·¯ç”±ä¸­ï¼Œæ¯”å¦‚å®šä¸€ä¸ª loadData æ–¹æ³•ï¼Œç„¶ååœ¨æŸ¥æ‰¾åˆ°è·¯ç”±åå°±å¯ä»¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨loadDataè¿™ä¸ªæ–¹æ³•ã€‚ çœ‹ä¸‹å‚è€ƒä»£ç  123456789101112const loadBranchData = (location) =&gt; &#123; const branch = matchRoutes(routes, location.pathname) const promises = branch.map((&#123; route, match &#125;) =&gt; &#123; return route.loadData ? route.loadData(match) : Promise.resolve(null) &#125;) return Promise.all(promises)&#125; ä¸Šé¢è¿™ç§æ–¹å¼å®ç°ä¸Šæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä»èŒè´£åˆ’åˆ†çš„è§’åº¦æ¥è¯´æœ‰äº›ä¸å¤Ÿæ¸…æ™°ï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ç›´æ¥é€šè¿‡ç»„ä»¶æ¥å¾—åˆ°å¼‚æ­¥æ–¹æ³•ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬çš„ç¬¬äºŒä¸ªé—®é¢˜ - ã€è·å–æ•°æ®çš„æ–¹æ³•å’Œé€»è¾‘å†™åœ¨å“ªé‡Œï¼Ÿã€‘ è§£å†³äº†ã€‚ æ¸²æŸ“åŒæ„å‡è®¾æˆ‘ä»¬ç°åœ¨åŸºäºä¸Šé¢å·²ç»å®ç°çš„ä»£ç ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿä½¿ç”¨ webpack è¿›è¡Œäº†é…ç½®ï¼Œå¯¹ä»£ç è¿›è¡Œäº†è½¬æ¢å’Œæ‰“åŒ…ï¼Œæ•´ä¸ªæœåŠ¡å¯ä»¥è·‘èµ·æ¥ã€‚ è·¯ç”±èƒ½å¤Ÿæ­£ç¡®åŒ¹é…ï¼Œæ•°æ®é¢„å–æ­£å¸¸ï¼ŒæœåŠ¡ç«¯å¯ä»¥ç›´å‡ºç»„ä»¶çš„ html ï¼Œæµè§ˆå™¨åŠ è½½ js ä»£ç æ­£å¸¸ï¼ŒæŸ¥çœ‹ç½‘é¡µæºä»£ç èƒ½çœ‹åˆ° html å†…å®¹ï¼Œå¥½åƒæˆ‘ä»¬çš„æ•´ä¸ªæµç¨‹å·²ç»èµ°å®Œã€‚ ä½†æ˜¯å½“æµè§ˆå™¨ç«¯çš„ js æ‰§è¡Œå®Œæˆåï¼Œå‘ç°æ•°æ®é‡æ–°è¯·æ±‚äº†ï¼Œç»„ä»¶çš„é‡æ–°æ¸²æŸ“å¯¼è‡´é¡µé¢çœ‹ä¸Šå»æœ‰äº›é—ªçƒã€‚ è¿™æ˜¯å› ä¸ºåœ¨æµè§ˆå™¨ç«¯ï¼ŒåŒç«¯èŠ‚ç‚¹å¯¹æ¯”å¤±è´¥ï¼Œå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å½“æœåŠ¡ç«¯å’Œæµè§ˆå™¨ç«¯æ¸²æŸ“çš„ç»„ä»¶å…·æœ‰ç›¸åŒçš„props å’Œ DOM ç»“æ„çš„æ—¶å€™ï¼Œç»„ä»¶æ‰èƒ½åªæ¸²æŸ“ä¸€æ¬¡ã€‚ åˆšåˆšæˆ‘ä»¬å®ç°äº†åŒç«¯çš„æ•°æ®é¢„å–åŒæ„ï¼Œä½†æ˜¯æ•°æ®ä¹Ÿä»…ä»…æ˜¯æœåŠ¡ç«¯æœ‰ï¼Œæµè§ˆå™¨ç«¯æ˜¯æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œå½“å®¢æˆ·ç«¯è¿›è¡Œé¦–æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™æ²¡æœ‰åˆå§‹åŒ–çš„æ•°æ®ï¼Œæ¸²æŸ“å‡ºçš„èŠ‚ç‚¹è‚¯å®šå’ŒæœåŠ¡ç«¯ç›´å‡ºçš„èŠ‚ç‚¹ä¸åŒï¼Œå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ æ•°æ®æ³¨æ°´åœ¨æœåŠ¡ç«¯å°†é¢„å–çš„æ•°æ®æ³¨å…¥åˆ°æµè§ˆå™¨ï¼Œä½¿æµè§ˆå™¨ç«¯å¯ä»¥è®¿é—®åˆ°ï¼Œå®¢æˆ·ç«¯è¿›è¡Œæ¸²æŸ“å‰å°†æ•°æ®ä¼ å…¥å¯¹åº”çš„ç»„ä»¶å³å¯ï¼Œè¿™æ ·å°±ä¿è¯äº†propsçš„ä¸€è‡´ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364 //node server å‚è€ƒä»£ç http.createServer((req, res) =&gt; &#123; const url = req.url; if(url.indexOf(&#x27;.&#x27;)&gt;-1) &#123; res.end(&#x27;&#x27;); return false;&#125; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); console.log(url); //æŸ¥æ‰¾ç»„ä»¶ const branch = matchRoutes(routes,url); //å¾—åˆ°ç»„ä»¶ const Component = branch[0].route.component; //æ•°æ®é¢„å– const data = Component.getInitialProps(branch[0].match.params); //ç»„ä»¶æ¸²æŸ“ä¸º html const html = renderToString(&lt;Component data=&#123;data&#125;/&gt;); //æ•°æ®æ³¨æ°´ const propsData = `&lt;textarea style=&quot;display:none&quot; id=&quot;krs-server-render-data-BOX&quot;&gt;$&#123;JSON.stringify(data)&#125;&lt;/textarea&gt;`; // é€šè¿‡ ejs æ¨¡æ¿å¼•æ“å°†æ•°æ®æ³¨å…¥åˆ°é¡µé¢ ejs.renderFile(&#x27;./index.html&#x27;, &#123; htmlContent: html, propsData &#125;, // æ¸²æŸ“çš„æ•°æ®key: å¯¹åº”åˆ°äº†ejsä¸­çš„index (err, data) =&gt; &#123; if (err) &#123; console.log(err); &#125; else &#123; console.log(data); res.end(data); &#125; &#125;) &#125;).listen(8080); //node ejs html &lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;rootEle&quot;&gt; &lt;%- htmlContent %&gt; //ç»„ä»¶ htmlå†…å®¹ &lt;/div&gt; &lt;%- propsData %&gt; //ç»„ä»¶ init state ï¼Œç°åœ¨æ˜¯ä¸ªå­—ç¬¦ä¸²&lt;/body&gt;&lt;/html&gt;&lt;/body&gt; éœ€è¦å€ŸåŠ© ejs æ¨¡æ¿ï¼Œå°†æ•°æ®ç»‘å®šåˆ°é¡µé¢ä¸Šï¼Œä¸ºäº†é˜²æ­¢ XSSæ”»å‡»ï¼Œè¿™é‡Œæˆ‘æŠŠæ•°æ®å†™åˆ°äº† textarea æ ‡ç­¾é‡Œã€‚ ä¸‹å›¾ä¸­ï¼Œæˆ‘çœ‹ç€æ˜æ–‡æ•°æ®éš¾å—ï¼Œå¯¹æ•°æ®åšäº†base64ç¼–ç  ï¼Œç”¨ä¹‹å‰éœ€è¦è½¬ç ï¼Œçœ‹ä¸ªäººéœ€è¦ã€‚ æ•°æ®è„±æ°´ä¸Šä¸€æ­¥æ•°æ®å·²ç»æ³¨å…¥åˆ°äº†æµè§ˆå™¨ç«¯ï¼Œè¿™ä¸€æ­¥è¦åœ¨å®¢æˆ·ç«¯ç»„ä»¶æ¸²æŸ“å‰å…ˆæ‹¿åˆ°æ•°æ®ï¼Œå¹¶ä¸”ä¼ å…¥ç»„ä»¶å°±å¯ä»¥äº†ã€‚ å®¢æˆ·ç«¯å¯ä»¥ç›´æ¥ä½¿ç”¨id=krs-server-render-data-BOX è¿›è¡Œæ•°æ®è·å–ã€‚ ç¬¬ä¸€ä¸ªæ–¹æ³•ç®€å•ç²—æš´ï¼Œå¯ç›´æ¥åœ¨ç»„ä»¶å†…çš„constructor æ„é€ å‡½æ•° å†…è¿›è¡Œè·å–ï¼Œå¦‚æœæ€•ä»£ç é‡å¤ï¼Œå¯ä»¥å†™ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚ ç¬¬äºŒä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡ context ä¼ é€’ï¼Œåªéœ€è¦åœ¨å…¥å£å¤„ä¼ å…¥ï¼Œåœ¨ç»„ä»¶ä¸­å£°æ˜ static contextType å³å¯ã€‚ æˆ‘æ˜¯é‡‡ç”¨context ä¼ é€’ï¼Œä¸ºäº†åé¢æ–¹ä¾¿é›†æˆ redux çŠ¶æ€ç®¡ç† ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// å®šä¹‰ context ç”Ÿäº§è€… ç»„ä»¶import React,&#123;createContext&#125; from &#x27;react&#x27;;import RootContext from &#x27;./route-context&#x27;;export default class Index extends React.Component &#123; constructor(props,context) &#123; super(props); &#125; render() &#123; return &lt;RootContext.Provider value=&#123;this.props.initialData||&#123;&#125;&#125;&gt; &#123;this.props.children&#125; &lt;/RootContext.Provider&gt; &#125;&#125;//å…¥å£ app.jsimport React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#123; BrowserRouter &#125; from &#x27;react-router-dom&#x27;;import Routes from &#x27;../&#x27;;import Provider from &#x27;./provider&#x27;;//æ¸²æŸ“å…¥å£ æ¥æ”¶è„±æ°´æ•°æ®function renderUI(initialData) &#123; ReactDOM.hydrate(&lt;BrowserRouter&gt;&lt;Provider initialData=&#123;initialData&#125;&gt; &lt;Routes /&gt; &lt;/Provider&gt; &lt;/BrowserRouter&gt;, document.getElementById(&#x27;rootEle&#x27;), (e) =&gt; &#123; &#125;);&#125;//å‡½æ•°æ‰§è¡Œå…¥å£function entryIndex() &#123; let APP_INIT_DATA = &#123;&#125;; let state = true; //å–å¾—æ•°æ® let stateText = document.getElementById(&#x27;krs-server-render-data-BOX&#x27;); if (stateText) &#123; APP_INIT_DATA = JSON.parse(stateText.value || &#x27;&#123;&#125;&#x27;); &#125; if (APP_INIT_DATA) &#123;//å®¢æˆ·ç«¯æ¸²æŸ“ renderUI(APP_INIT_DATA); &#125;&#125;//å…¥å£æ‰§è¡ŒentryIndex(); è¡Œæ–‡è‡³æ­¤ï¼Œæ ¸å¿ƒçš„å†…å®¹å·²ç»åŸºæœ¬è¯´å®Œï¼Œå‰©ä¸‹çš„å°±æ˜¯ç»„ä»¶å†…å¦‚ä½•ä½¿ç”¨è„±æ°´çš„æ•°æ®ã€‚ ä¸‹é¢é€šè¿‡ context æ‹¿åˆ°æ•°æ® , ä»£ç ä»…ä¾›å‚è€ƒï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥è¿›è¡Œå°è£…å’Œè°ƒæ•´ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970import React from &#x27;react&#x27;;import &#x27;./css/index.scss&#x27;;export default class Index extends React.Component &#123; constructor(props, context) &#123; super(props, context); //å°†context å­˜å‚¨åˆ° state this.state = &#123; ... context &#125; &#125; //è®¾ç½®æ­¤å‚æ•° æ‰èƒ½æ‹¿åˆ° context æ•°æ® static contextType = RootContext; //æ•°æ®é¢„å–æ–¹æ³• static async getInitialProps(krsOpt) &#123; if (__SERVER__) &#123; //å¦‚æœæ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„è¯ å¯ä»¥åšçš„å¤„ç†,node ç«¯è®¾ç½®çš„å…¨å±€å˜é‡ &#125; const fetch1 = fetch.postForm(&#x27;/fe_api/filed-manager/get-detail-of-type&#x27;, &#123; data: &#123; ofTypeId: 4000 &#125; &#125;); const fecth2 = fetch.postForm(&#x27;/fe_api/filed-manager/get-detail-of-type&#x27;, &#123; data: &#123; ofTypeId: 2000 &#125; &#125;); const resArr = await fetch.multipleFetch(fetch1, fecth2); //è¿”å›æ‰€æœ‰æ•°æ® return &#123; page: &#123;&#125;, fetchData: resArr &#125; &#125; componentDidMount() &#123; if (!this.isSSR) &#123; //éæœåŠ¡ç«¯æ¸²æŸ“éœ€è¦è‡ªèº«è¿›è¡Œæ•°æ®è·å– Index.getInitialProps(this.props.krsOpt).then(data =&gt; &#123; this.setState(&#123; ...data &#125;, () =&gt; &#123; //å¯æœ‰çš„ä¸€äº›æ“ä½œ &#125;); &#125;); &#125; &#125; render() &#123; //å¾—åˆ° state å†…çš„æ•°æ®ï¼Œè¿›è¡Œé€»è¾‘åˆ¤æ–­å’Œå®¹é”™ï¼Œç„¶åæ¸²æŸ“ const &#123; page, fetchData &#125; = this.state; const [res] = fetchData || []; return &lt;div className=&quot;detailBox&quot;&gt; &#123; res &amp;&amp; res.data.map(item =&gt; &#123; return &lt;div key=&#123;item.id&#125;&gt;&#123;item.keyId&#125;:&#123;item.keyName&#125;---&#123;item.setContent&#125;&lt;/div&gt; &#125;) &#125; &lt;/div&gt; &#125;&#125; åˆ°æ­¤æˆ‘ä»¬çš„ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šã€æœåŠ¡ç«¯ html èŠ‚ç‚¹æ— æ³•é‡ç”¨ ã€‘å·²ç»è§£å†³,ä½†äººä¸å¤Ÿå®Œç¾ï¼Œè¯·ç»§ç»­çœ‹ã€‚ css è¿‡æ»¤æˆ‘ä»¬åœ¨å†™ç»„ä»¶çš„æ—¶å€™å¤§éƒ¨åˆ†éƒ½ä¼šå¯¼å…¥ç›¸å…³çš„ css æ–‡ä»¶ã€‚ 1234567891011121314151617181920212223import &#x27;./css/index.scss&#x27;;//å¯¼å…¥css//ç»„ä»¶class Index extends React.Component&#123; constructor(props)&#123; super(props); &#125; static async getInitialProps() &#123; const fetch1 =await fetch(&#x27;/xxx.com/a&#x27;); const fetch2 = await fetch(&#x27;/xxx.com/b&#x27;); return &#123; res:[fetch1,fetch2] &#125; &#125; render()&#123; return &lt;h1&gt;&#123;this.props.data.title&#125;&lt;/h1&gt; &#125;&#125; ä½†æ˜¯è¿™ä¸ª css æ–‡ä»¶åœ¨æœåŠ¡ç«¯æ— æ³•æ‰§è¡Œï¼Œå…¶å®æƒ³æƒ³åœ¨æœåŠ¡ç«¯æœ¬æ¥å°±ä¸éœ€è¦æ¸²æŸ“ css ã€‚ä¸ºä»€ä¹ˆä¸ç›´æ¥å¹²æ‰ï¼Ÿ æ‰€ä»¥ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘è¿™é‡Œå†™äº†ä¸€ä¸ªbabel æ’ä»¶ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å¹²æ‰ css çš„å¯¼å…¥ä»£ç ã€‚ 12345678910111213141516171819202122232425/** * åˆ é™¤ css çš„å¼•å…¥ * å¯èƒ½ç¤¾åŒºå·²ç»æœ‰ç°æˆçš„æ’ä»¶ä½†æ˜¯ä¸æƒ³è´¹åŠ²å„¿æ‰¾äº†ï¼Œè¿˜æ˜¯è‡ªå·±å†™ä¸€ä¸ªå§ã€‚ */module.exports = function (&#123; types: babelTypes &#125;) &#123; return &#123; name: &quot;no-require-css&quot;, visitor: &#123; ImportDeclaration(path, state) &#123; let importFile = path.node.source.value; if(importFile.indexOf(&#x27;.scss&#x27;)&gt;-1)&#123; // å¹²æ‰css å¯¼å…¥ path.remove(); &#125; &#125; &#125; &#125;;&#125;;//.babelrc ä¸­ä½¿ç”¨ &quot;plugins&quot;: [ &quot;./webpack/babel/plugin/no-require-css&quot; //å¼•å…¥ ] åŠ¨æ€è·¯ç”±çš„ SSRç°åœ¨è¦è¯´ä¸€ä¸ªæ›´åŠ æ ¸å¿ƒçš„å†…å®¹ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„ä¸€ä¸ªå‹è½´äº®ç‚¹ï¼Œå¯ä»¥è¯´æ˜¯å…¨ç½‘å”¯ä¸€,æˆ‘ä¹‹å‰ä¹Ÿçœ‹è¿‡å¾ˆå¤šæ–‡ç« å’Œèµ„æ–™éƒ½æ²¡æœ‰ç»†è¯´è¿™ä¸€å—å„¿çš„å®ç°ã€‚ ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»ä¸€æ­¥ä¸€æ­¥çš„å®ç°äº† React SSR åŒæ„ çš„å®Œæ•´æµç¨‹ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰å°‘ç‚¹ä»€ä¹ˆä¸œè¥¿ã€‚ SPAæ¨¡å¼ä¸‹å¤§éƒ¨åˆ†éƒ½ä¼šå®ç°ç»„ä»¶åˆ†åŒ…å’ŒæŒ‰éœ€åŠ è½½ï¼Œé˜²æ­¢æ‰€æœ‰ä»£ç æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶è¿‡å¤§å½±å“é¡µé¢çš„åŠ è½½å’Œæ¸²æŸ“ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ é‚£ä¹ˆåŸºäº SSR çš„ç»„ä»¶æŒ‰éœ€åŠ è½½å¦‚ä½•å®ç°å‘¢ï¼Ÿ å½“ç„¶æˆ‘ä»¬æ‰€é™å®šæŒ‰éœ€çš„ç²’åº¦æ˜¯è·¯ç”±çº§åˆ«çš„ï¼Œè¯·æ±‚ä¸åŒçš„è·¯ç”±åŠ¨æ€åŠ è½½å¯¹åº”çš„ç»„ä»¶ã€‚ å¦‚ä½•å®ç°ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼Ÿåœ¨ webpack2 æ—¶æœŸä¸»è¦ä½¿ç”¨require.ensureæ–¹æ³•æ¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œä»–ä¼šå•ç‹¬æ‰“åŒ…æŒ‡å®šçš„æ–‡ä»¶ï¼Œåœ¨å½“ä¸‹ webpack4ï¼Œæœ‰äº†æ›´åŠ è§„èŒƒçš„çš„æ–¹å¼å®ç°æŒ‰éœ€åŠ è½½ï¼Œé‚£å°±æ˜¯åŠ¨æ€å¯¼å…¥ import(&#39;./xx.js&#39;),å½“ç„¶å®ç°çš„æ•ˆæœå’Œ require.ensureæ˜¯ç›¸åŒçš„ã€‚ å’±ä»¬è¿™é‡Œåªè¯´å¦‚ä½•å€ŸåŠ©è¿™ä¸ªè§„èŒƒå®ç°æŒ‰éœ€åŠ è½½çš„è·¯ç”±ï¼Œå…³äºåŠ¨æ€å¯¼å…¥çš„å®ç°åŸç†å…ˆæŒ‰ä¸‹ä¸è¡¨ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ import æ–¹æ³•ä¼ å…¥ä¸€ä¸ªjsæ–‡ä»¶åœ°å€ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œç„¶ååœ¨ then æ–¹æ³•å†…å›è°ƒå¾—åˆ°æŒ‰éœ€çš„ç»„ä»¶ã€‚ä»–çš„åŸç†å…¶å®å°±æ˜¯é€šè¿‡ jsonp çš„æ–¹å¼ï¼ŒåŠ¨æ€è¯·æ±‚è„šæœ¬ï¼Œç„¶ååœ¨å›è°ƒå†…å¾—åˆ°ç»„ä»¶ã€‚ 123import(&#x27;../index&#x27;).then(res=&gt;&#123; //xxxx&#125;); é‚£ç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†å‡ ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„ä¿¡æ¯ã€‚ å¦‚ä½•åŠ è½½è„šæœ¬ - import ç»“åˆ webpack è‡ªåŠ¨å®Œæˆ è„šæœ¬æ˜¯å¦åŠ è½½å®Œæˆ - é€šè¿‡åœ¨ then æ–¹æ³•å›è°ƒè¿›è¡Œå¤„ç† è·å–å¼‚æ­¥æŒ‰ç»„ä»¶ - é€šè¿‡åœ¨ then æ–¹æ³•å›è°ƒå†…è·å– æˆ‘ä»¬å¯ä»¥è¯•ç€æŠŠä¸Šé¢çš„é€»è¾‘æŠ½è±¡æˆä¸ºä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨è·¯ç”±é…ç½®çš„åœ°æ–¹è¿›è¡Œå¯¼å…¥åï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å°±å®Œæˆäº†ç»„ä»¶çš„æŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ å…ˆçœ‹ä¸‹æŒ‰éœ€åŠ è½½ç»„ä»¶, ç›®çš„æ˜¯åœ¨ import å®Œæˆçš„æ—¶å€™å¾—åˆ°æŒ‰éœ€çš„ç»„ä»¶ï¼Œç„¶åæ›´æ”¹å®¹å™¨ç»„ä»¶çš„ stateï¼Œå°†è¿™ä¸ªå¼‚æ­¥ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/** * æŒ‰éœ€åŠ è½½çš„å®¹å™¨ç»„ä»¶ * @class Bundle * @extends &#123;Component&#125; */export default class Async extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; COMPT: null &#125;; &#125; UNSAFE_componentWillMount() &#123; //æ‰§è¡Œç»„ä»¶åŠ è½½ if (!this.state.COMPT) &#123; this.load(this.props); &#125; &#125; load(props) &#123; this.setState(&#123; COMPT: null &#125;); //æ³¨æ„è¿™é‡Œï¼Œè¿”å›Promiseå¯¹è±¡; C.default æŒ‡å‘æŒ‰éœ€ç»„ä»¶ props.load().then((C) =&gt; &#123; this.setState(&#123; COMPT: C.default ? C.default : COMPT &#125;); &#125;); &#125; render() &#123; return this.state.COMPT ? this.props.children(this.state.COMPT) : &lt;span&gt;æ­£åœ¨åŠ è½½......&lt;/span&gt;; &#125;&#125; Async å®¹å™¨ç»„ä»¶æ¥æ”¶ä¸€ä¸ª props ä¼ è¿‡æ¥çš„ load æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯ Promiseç±»å‹ï¼Œç”¨æ¥åŠ¨æ€å¯¼å…¥ç»„ä»¶ã€‚ åœ¨ç”Ÿå‘½å‘¨æœŸ UNSAFE_componentWillMount å¾—åˆ°æŒ‰éœ€çš„ç»„ä»¶ï¼Œå¹¶å°†ç»„ä»¶å­˜å‚¨åˆ° state.COMPTå†…,åŒæ—¶åœ¨ render æ–¹æ³•ä¸­åˆ¤æ–­è¿™ä¸ªçŠ¶æ€çš„å¯ç”¨æ€§ï¼Œç„¶åè°ƒç”¨this.props.children æ–¹æ³•è¿›è¡Œæ¸²æŸ“ã€‚ 123456//è°ƒç”¨const LazyPageCom = (props) =&gt; ( &lt;Async load=&#123;() =&gt; import(&#x27;../index&#x27;)&#125;&gt; &#123;(C) =&gt; &lt;C &#123;...props&#125; /&gt;&#125;//è¿”å›å‡½æ•°ç»„ä»¶ &lt;/Async&gt;); å½“ç„¶è¿™åªæ˜¯å…¶ä¸­ä¸€ç§æ–¹æ³•ï¼Œä¹Ÿæœ‰å¾ˆå¤šæ˜¯é€šè¿‡ react-loadable åº“æ¥è¿›è¡Œå®ç°ï¼Œä½†æ˜¯å®ç°æ€è·¯åŸºæœ¬ç›¸åŒ,æœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸‹æºç ã€‚ 12345678910111213141516//å‚è€ƒä»£ç import React from &#x27;react&#x27;;import Loadable from &#x27;react-loadable&#x27;;//loading ç»„ä»¶const Loading =()=&gt;&#123; return ( &lt;div&gt;loading&lt;/div&gt; ) &#125;//å¯¼å‡ºç»„ä»¶export default Loadable(&#123; loader:import(&#x27;../index&#x27;), loading:Loading&#125;); åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å®ç°äº†ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ï¼Œå‰©ä¸‹å°±æ˜¯é…ç½®åˆ°è·¯ç”±ã€‚ çœ‹ä¸‹ä¼ªä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//index.jsclass Index extends React.Component &#123; render() &#123; return &lt;div&gt;detail&lt;/div&gt; &#125;&#125;//detail.jsclass Detail extends React.Component &#123; render() &#123; return &lt;div&gt;detail&lt;/div&gt; &#125;&#125;//routes.js//æŒ‰éœ€åŠ è½½ index ç»„ä»¶const AyncIndex = (props) =&gt; ( &lt;Async load=&#123;() =&gt; import(&#x27;../index&#x27;)&#125;&gt; &#123;(C) =&gt; &lt;C &#123;...props&#125; /&gt;&#125; &lt;/Async&gt;);//æŒ‰éœ€åŠ è½½ detai ç»„ä»¶const AyncDetail = (props) =&gt; ( &lt;Async load=&#123;() =&gt; import(&#x27;../index&#x27;)&#125;&gt; &#123;(C) =&gt; &lt;C &#123;...props&#125; /&gt;&#125; &lt;/Async&gt;);const routes = [ &#123; path: &quot;/&quot;, exact: true, component: AyncIndex &#125;, &#123; path: &#x27;/detail&#x27;, exact: true, component: AyncDetail, &#125;]; ç»“åˆè·¯ç”±çš„æŒ‰éœ€åŠ è½½å·²ç»é…ç½®å®Œæˆï¼Œå…ˆä¸ç®¡ serverç«¯ æ˜¯å¦éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œæ­¤æ—¶çš„ä»£ç æ˜¯å¯ä»¥è¿è¡Œçš„ï¼ŒæŒ‰éœ€ä¹Ÿæ˜¯ ok çš„ã€‚ ä½†æ˜¯ssræ— æ•ˆäº†ï¼ŒæŸ¥çœ‹ç½‘é¡µæºä»£ç æ— å†…å®¹ã€‚ åŠ¨æ€è·¯ç”± SSR åŒç«¯é…ç½®ssræ— æ•ˆäº†,è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ ä¸Šé¢æˆ‘ä»¬åœ¨åšè·¯ç”±åŒæ„çš„æ—¶å€™ï¼ŒåŒç«¯ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª routeé…ç½®æ–‡ä»¶routes-config.js,ç°åœ¨ç»„ä»¶æ”¹æˆäº†æŒ‰éœ€åŠ è½½ï¼Œæ‰€ä»¥åœ¨è·¯ç”±æŸ¥æ‰¾åå¾—åˆ°çš„ç»„ä»¶å‘ç”Ÿæ”¹å˜äº† - AyncDetail,AyncIndexï¼Œæ ¹æœ¬æ— æ³•è½¬æ¢å‡ºç»„ä»¶å†…å®¹ã€‚ ssr æ¨¡å¼ä¸‹ server ç«¯å¦‚ä½•å¤„ç†è·¯ç”±æŒ‰éœ€åŠ è½½å…¶å®å¾ˆç®€å•ï¼Œä¹Ÿæ˜¯å‚è€ƒå®¢æˆ·ç«¯çš„å¤„ç†æ–¹å¼ï¼Œå¯¹è·¯ç”±é…ç½®è¿›è¡ŒäºŒæ¬¡å¤„ç†ã€‚server ç«¯åœ¨è¿›è¡Œç»„ä»¶æŸ¥æ‰¾å‰ï¼Œå¼ºåˆ¶æ‰§è¡Œ import æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªå…¨æ–°çš„é™æ€è·¯ç”±è¡¨ï¼Œå†å»è¿›è¡Œç»„ä»¶çš„æŸ¥æ‰¾ã€‚ 1234567891011121314151617181920212223//è·å¾—é™æ€è·¯ç”±import routes from &#x27;routes-config.js&#x27;;//å¾—åˆ°åŠ¨æ€è·¯ç”±çš„é…ç½®export async function getStaticRoutes() &#123; const staticRoutes = [];//å­˜æ”¾æ–°è·¯ç”± for (; i &lt; len; i++) &#123; let item = routes[i]; //å­˜æ”¾é™æ€è·¯ç”± staticRoutes.push(&#123; ...item, ...&#123; component: (await item.component().props.load()).default &#125; &#125;); &#125; return staticRoutes; //è¿”å›é™æ€è·¯ç”±&#125; å¦‚ä»Šæˆ‘ä»¬ç¦»ç›®æ ‡æ›´è¿‘äº†ä¸€æ­¥ï¼Œserverç«¯å·²å…¼å®¹äº†æŒ‰éœ€è·¯ç”±çš„æŸ¥æ‰¾ã€‚ä½†æ˜¯è¿˜æ²¡å®Œï¼ æˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—®é¡µé¢çš„è¯ï¼Œssr ç”Ÿæ•ˆäº†ï¼ŒæŸ¥çœ‹ç½‘é¡µæºä»£ç å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ html å†…å®¹ã€‚ ä½†æ˜¯é¡µé¢ä¸Šä¼šæ˜¾ç¤ºç›´å‡ºçš„å†…å®¹ï¼Œç„¶åæ˜¾ç¤º&lt;span&gt;æ­£åœ¨åŠ è½½......&lt;/span&gt; ,ç¬é—´åˆå˜æˆç›´å‡ºçš„å†…å®¹ã€‚ ### ssr æ¨¡å¼ä¸‹ client ç«¯å¦‚ä½•å¤„ç†è·¯ç”±æŒ‰éœ€åŠ è½½ è¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æ˜¯ä¸æ˜¯çœ‹çš„æœ‰ç‚¹ç´¯äº†ï¼Œå†åšæŒä¸€ä¸‹å°±æˆåŠŸäº†ã€‚ å…¶å®æœ‰é—®é¢˜æ‰æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼Œé—®é¢˜è§£å†³äº†ï¼Œè·¯å°±é€šäº†ã€‚ é¦–å…ˆæˆ‘ä»¬çŸ¥é“æµè§ˆå™¨ç«¯ä¼šå¯¹å·²æœ‰çš„èŠ‚ç‚¹è¿›è¡ŒåŒç«¯å¯¹æ¯”ï¼Œå¦‚æœå¯¹æ¯”å¤±è´¥å°±ä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿™å¾ˆæ˜æ˜¾å°±æ˜¯ä¸ªé—®é¢˜ã€‚ å’±åˆ†æä¸€ä¸‹ï¼Œé¦–å…ˆæœåŠ¡ç«¯ç›´å‡ºäº† html å†…å®¹ï¼Œè€Œæ­¤æ—¶æµè§ˆå™¨ç«¯jsæ‰§è¡Œå®Œåéœ€è¦åšæŒ‰éœ€åŠ è½½ï¼Œåœ¨æŒ‰éœ€åŠ è½½å‰çš„ç»„ä»¶é»˜è®¤çš„å†…å®¹å°±æ˜¯&lt;span&gt;æ­£åœ¨åŠ è½½......&lt;/span&gt; è¿™ä¸ªç¼ºçœå†…å®¹å’ŒæœåŠ¡ç«¯ç›´å‡ºçš„ html å†…å®¹å®Œå…¨ä¸åŒï¼Œæ‰€ä»¥å¯¹æ¯”å¤±è´¥ï¼Œé¡µé¢ä¼šæ¸²æŸ“æˆ &lt;span&gt;æ­£åœ¨åŠ è½½......&lt;/span&gt;,ç„¶åæŒ‰éœ€åŠ è½½å®Œæˆåç»„ä»¶å†æ¬¡æ¸²æŸ“ï¼Œæ­¤æ—¶æ¸²æŸ“çš„å°±æ˜¯çœŸæ­£çš„ç»„ä»¶äº†ã€‚ å¦‚ä½•è§£å†³å‘¢ï¼Ÿ å…¶å®ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œåªæ˜¯ä¸ç¡®å®šæ˜¯å¦å¯è¡Œï¼Œè¯•è¿‡å°±çŸ¥é“ã€‚ æ—¢ç„¶å®¢æˆ·ç«¯éœ€è¦å¤„ç†æŒ‰éœ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç­‰è¿™ä¸ªæŒ‰éœ€ç»„ä»¶åŠ è½½å®Œåå†è¿›è¡Œæ¸²æŸ“æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šå¯ä»¥çš„ï¼ å¦‚ä½•æŒ‰éœ€å‘¢ï¼Ÿ å‘â€œæœåŠ¡ç«¯åŒå­¦â€å­¦ä¹ ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶å¹¶å¼ºåˆ¶ æ‰§è¡ŒimportæŒ‰éœ€ï¼Œåªæ˜¯è¿™é‡Œä¸æ˜¯è½¬æ¢ä¸ºé™æ€è·¯ç”±ï¼Œåªæ‰¾åˆ°æŒ‰éœ€çš„ç»„ä»¶å®ŒæˆåŠ¨æ€åŠ è½½å³å¯ã€‚ æ—¢ç„¶æœ‰äº†æ€è·¯ï¼Œé‚£å°±æ’¸èµ·ä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import React,&#123;createContext&#125; from &#x27;react&#x27;;import RootContext from &#x27;./route-context&#x27;;export default class Index extends React.Component &#123; constructor(props,context) &#123; super(props); &#125; render() &#123; return &lt;RootContext.Provider value=&#123;this.props.initialData||&#123;&#125;&#125;&gt; &#123;this.props.children&#125; &lt;/RootContext.Provider&gt; &#125;&#125;//å…¥å£ app.jsimport React from &#x27;react&#x27;;import ReactDOM from &#x27;react-dom&#x27;;import &#123; BrowserRouter &#125; from &#x27;react-router-dom&#x27;;import Routes from &#x27;../&#x27;;import Provider from &#x27;./provider&#x27;;//æ¸²æŸ“å…¥å£function renderUI(initialData) &#123; ReactDOM.hydrate(&lt;BrowserRouter&gt;&lt;Provider initialData=&#123;initialData&#125;&gt; &lt;Routes /&gt; &lt;/Provider&gt; &lt;/BrowserRouter&gt;, document.getElementById(&#x27;rootEle&#x27;), (e) =&gt; &#123; &#125;);&#125;function entryIndex() &#123; let APP_INIT_DATA = &#123;&#125;; let state = true; //å–å¾—æ•°æ® let stateText = document.getElementById(&#x27;krs-server-render-data-BOX&#x27;); //æ•°æ®è„±æ°´ if (stateText) &#123; APP_INIT_DATA = JSON.parse(stateText.value || &#x27;&#123;&#125;&#x27;); &#125; if (APP_INIT_DATA) &#123;//å®¢æˆ·ç«¯æ¸²æŸ“ - renderUI(true, APP_INIT_DATA); //æŸ¥æ‰¾ç»„ä»¶ + matchComponent(document.location.pathname, routesConfig()).then(res =&gt; &#123; renderUI(true, APP_INIT_DATA); &#125;); &#125;&#125;//æ‰§è¡Œå…¥å£entryIndex(); matchComponent æ˜¯æˆ‘å°è£…çš„ä¸€ä¸ªç»„ä»¶æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œåœ¨æ–‡ç« å¼€å§‹å·²ç»ä»‹ç»è¿‡ç±»ä¼¼çš„å®ç°ï¼Œä»£ç å°±ä¸è´´äº†ã€‚ æ ¸å¿ƒäº®ç‚¹è¯´å®Œï¼Œæ•´ä¸ªæµç¨‹åŸºæœ¬ç»“æŸï¼Œå‰©ä¸‹çš„éƒ½æ˜¯äº›æœ‰çš„æ²¡çš„äº†ï¼Œæˆ‘æ‰“ç®—è¦æ”¶å·¥äº†ã€‚ å…¶ä»–SEO æ”¯æŒé¡µé¢çš„ SEO æ•ˆæœå–å†³äºé¡µé¢çš„ä¸»ä½“å†…å®¹å’Œé¡µé¢çš„ TDKï¼ˆæ ‡é¢˜ title,æè¿° description,å…³é”®è¯ keywordï¼‰ä»¥åŠå…³é”®è¯çš„åˆ†å¸ƒå’Œå¯†åº¦ï¼Œç°åœ¨æˆ‘ä»¬å®ç°äº† ssræ‰€ä»¥é¡µé¢çš„ä¸»ä½“å†…å®¹æœ‰äº†ï¼Œé‚£å¦‚ä½•è®¾ç½®é¡µé¢çš„æ ‡é¢˜å¹¶ä¸”è®©æ¯ä¸ªé¡µé¢ï¼ˆè·¯ç”±ï¼‰çš„æ ‡é¢˜éƒ½ä¸åŒå‘¢ï¼Ÿ åªè¦æˆ‘ä»¬æ¯è¯·æ±‚ä¸€ä¸ªè·¯ç”±çš„æ—¶å€™è¿”å›ä¸åŒçš„ tdk å°±å¯ä»¥äº†ã€‚ è¿™é‡Œæˆ‘åœ¨æ‰€å¯¹åº”ç»„ä»¶æ•°æ®é¢„å–çš„æ–¹æ³•å†…åŠ äº†çº¦å®šï¼Œè¿”å›çš„æ•°æ®ä¸ºå›ºå®šæ ¼å¼ï¼Œå¿…é¡»åŒ…å« page å¯¹è±¡ï¼Œpage å¯¹è±¡å†…åŒ…å« tdk çš„ä¿¡æ¯ã€‚ çœ‹ä»£ç ç¬é—´å°±æ˜ç™½ã€‚ 1234567891011121314151617181920212223242526272829import &#x27;./css/index.scss&#x27;;//ç»„ä»¶class Index extends React.Component&#123; constructor(props)&#123; super(props); &#125; static async getInitialProps() &#123; const fetch1 =await fetch(&#x27;/xxx.com/a&#x27;); const fetch2 = await fetch(&#x27;/xxx.com/b&#x27;); return &#123; page:&#123; tdk:&#123; title:&#x27;æ ‡é¢˜&#x27;, keyword:&#x27;å…³é”®è¯&#x27;, description:&#x27;æè¿°&#x27; &#125; &#125; res:[fetch1,fetch2] &#125; &#125; render()&#123; return &lt;h1&gt;&#123;this.props.data.title&#125;&lt;/h1&gt; &#125;&#125; è¿™æ ·ä½ çš„ tdk å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦è®¾ç½®æˆé™æ€è¿˜æ˜¯ä»æ¥å£æ‹¿åˆ°çš„ã€‚ç„¶åå¯ä»¥åœ¨ esj æ¨¡æ¿é‡Œè¿›è¡Œç»‘å®šï¼Œä¹Ÿå¯ä»¥åœ¨ componentDidMounté€šè¿‡ jsdocument.title=this.state.page.tdk.titleè®¾ç½®é¡µé¢çš„æ ‡é¢˜ã€‚ 12345678910111213141516171819&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;meta name=&quot;keywords&quot; content=&quot;&lt;%=page.tdk.keyword%&gt;&quot; /&gt; &lt;meta name=&quot;description&quot; content=&quot;content=&quot;&lt;%=page.tdk.description%&gt;&quot; /&gt; &lt;title&gt;&lt;%=page.tdk.title%&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;rootEle&quot;&gt; &lt;%- htmlContent %&gt; &lt;/div&gt; &lt;%- propsData %&gt;&lt;/body&gt;&lt;/html&gt;&lt;/body&gt;&lt;%page.staticSource.js.forEach(function(item)&#123;%&gt; fetch åŒæ„å¯ä»¥ä½¿ç”¨isomorphic-fetchã€axiosæˆ–è€…whatwg-fetch + node-fetch ç­‰åº“æ¥å®ç°æ”¯æŒåŒç«¯çš„ fetch æ•°æ®è¯·æ±‚ï¼Œè¿™é‡Œæ¨èä½¿ç”¨axios ä¸»è¦æ˜¯æ¯”è¾ƒæ–¹ä¾¿ã€‚ TODO å’Œ æ€è€ƒæ²¡æœ‰ä»‹ç»ç»“åˆ redux çŠ¶æ€ç®¡ç†çš„ ssr å®ç°ï¼Œå…¶å®ä¹Ÿä¸å¤æ‚ï¼Œå…³é”®è¿˜æ˜¯çœ‹ä¸šåŠ¡ä¸­æ˜¯å¦éœ€è¦ä½¿ç”¨reduxï¼Œå› ä¸ºæ–‡ä¸­å·²ç»å®ç°äº†ä½¿ç”¨ context ä¼ é€’æ•°æ®ï¼Œç›´æ¥æ”¹æˆæŒ‰store ä¼ é€’ä¹Ÿå¾ˆå®¹æ˜“,ä½†æ˜¯æ›´å¤šçš„è¿˜æ˜¯å¯¹ react-redux çš„åº”ç”¨ã€‚ 123456789//æ¸²æŸ“å…¥å£ ä»£ç ä»…ä¾›å‚è€ƒ function renderUI(initialData) &#123; ReactDOM.hydrate(&lt;BrowserRouter&gt;&lt;Provider store=&#123;initialData&#125;&gt; &lt;Routes /&gt; &lt;/Provider&gt; &lt;/BrowserRouter&gt;, document.getElementById(&#x27;rootEle&#x27;), (e) =&gt; &#123; &#125;);&#125; æœåŠ¡ç«¯åŒæ„æ¸²æŸ“è™½ç„¶å¯ä»¥æå‡é¦–å±çš„å‡ºç°æ—¶é—´ï¼Œåˆ©äº SEOï¼Œå¯¹ä½ç«¯ç”¨æˆ·å‹å¥½ï¼Œä½†æ˜¯å¼€å‘å¤æ‚åº¦æœ‰æ‰€æé«˜ï¼Œä»£ç éœ€è¦å…¼å®¹åŒç«¯è¿è¡Œï¼ˆruntimeï¼‰,è¿˜æœ‰ä¸€äº›åº“åªèƒ½åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œåœ¨æœåŠ¡ç«¯åŠ è½½ä¼šç›´æ¥æŠ¥é”™ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦è¿›è¡Œåšä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚ åŒæ—¶ä¹Ÿä¼šå¤§å¤§çš„å¢åŠ æœåŠ¡ç«¯è´Ÿè½½ï¼Œå½“ç„¶è¿™éƒ½å®¹æ˜“è§£å†³ï¼Œå¯ä»¥æ”¹ç”¨renderToNodeStream() æ–¹æ³•é€šè¿‡æµå¼è¾“å‡ºæ¥æå‡æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½ï¼Œå¯ä»¥è¿›è¡Œç›‘æ§å’Œæ‰©å®¹ï¼Œæ‰€ä»¥æ˜¯å¦éœ€è¦ ssr æ¨¡å¼ï¼Œè¿˜è¦çœ‹å…·ä½“çš„äº§å“çº¿å’Œç”¨æˆ·å®šä½ã€‚ æœ€åæœ¬æ–‡æœ€åˆä» react ssr çš„æ•´ä½“å®ç°åŸç†ä¸Šè¿›è¡Œè¯´æ˜ï¼Œç„¶åé€æ­¥çš„æŠ›å‡ºé—®é¢˜ï¼Œå¾ªåºæ¸è¿›çš„é€æ­¥è§£å†³ï¼Œæœ€ç»ˆå®Œæˆäº†æ•´ä¸ªReact SSR æ‰€éœ€è¦å¤„ç†çš„æŠ€æœ¯ç‚¹ï¼ŒåŒæ—¶å¯¹æ¯ä¸ªæŠ€æœ¯ç‚¹å’Œé—®é¢˜åšäº†è¯¦ç»†çš„è¯´æ˜ã€‚ ä½†å®ç°æ–¹å¼å¹¶ä¸å”¯ä¸€ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹å¼ï¼Œ æ¯”å¦‚ next.js, umi.js,ä½†æ˜¯åŸç†ç›¸ä¼¼ï¼Œå…·ä½“å·®å¼‚æˆ‘ä¼šæ¥ä¸‹æ¥è¿›è¡Œå¯¹æ¯”åè¾“å‡ºã€‚ æºç å‚è€ƒç”±äºä¸Šé¢æ–‡ä¸­çš„ä»£ç è¾ƒä¸ºé›¶æ•£ï¼Œææ€•ä¸èƒ½ç›´æ¥è¿è¡Œã€‚ä¸ºäº†æ–¹ä¾¿å¤§å®¶çš„å‚è€ƒå’Œå­¦ä¹ ï¼Œæˆ‘æŠŠæ¶‰åŠåˆ°ä»£ç è¿›è¡Œæ•´ç†ã€å®Œå–„å’Œä¿®æ”¹ï¼Œå¢åŠ äº†ä¸€äº›åŸºç¡€é…ç½®å’Œå·¥ç¨‹åŒ–å¤„ç†ï¼Œç›®å‰å·²å½¢æˆä¸€ä¸ªå®Œæ•´çš„å¼€å‘éª¨æ¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œçœ‹æ•ˆæœï¼Œæ‰€æœ‰çš„ä»£ç éƒ½åœ¨è¿™ä¸ªéª¨æ¶é‡Œï¼Œæ¬¢è¿star æ¬¢è¿ ä¸‹è½½ï¼Œäº¤æµå­¦ä¹ ã€‚ é¡¹ç›®ä»£ç åœ°å€: https://github.com/Bigerfe/koa-react-ssr è¯´ç‚¹æ„Ÿæƒ³å¾ˆå¤šä¸œè¥¿éƒ½å¯ä»¥åŸºäºä½ ç°æœ‰çš„çŸ¥è¯†åˆ›é€ å‡ºæ¥ã€‚ åªè¦æ˜ç™½äº†å…¶ä¸­çš„åŸç†ï¼Œç„¶åæ¢³ç†å‡ºå®ç°çš„æ€è·¯ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ’¸ä»£ç äº†ï¼ŒæœŸé—´ä¼šå¤§é‡çš„è‡ªåŠ¨æˆ–è¢«åŠ¨çš„ä»ä½ ç°æœ‰çš„çŸ¥è¯†åº“é‡Œè¿›è¡Œè°ƒå–ï¼Œä¸€æ­¥ä¸€æ­¥çš„ï¼Œåªè¦ä¸æ€•éº»çƒ¦ï¼Œéƒ½èƒ½æå¾—å®šã€‚ è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºä»€ä¹ˆä¸Šæ¥å…ˆè¦è¯´ä¸‹reac ssr åŸç† çš„åŸå› ï¼Œå› ä¸ºå®ƒæŒ‡å¯¼äº†æˆ‘çš„å®è·µã€‚ å…¨æ–‡éƒ½æ˜¯è‡ªå·±äº²æ‰‹ä¸€ä¸ªä¸€ä¸ªç å‡ºï¼Œä¹Ÿå…¨éƒ¨éƒ½æ˜¯å‡ºè‡ªæœ¬äººçš„ç†è§£ï¼Œä½†ä¸ªäººæ–‡é‡‡æœ‰é™ï¼Œæ‰€ä»¥å¯¼è‡´å¾ˆå¤šè¡¨è¾¾è¯´çš„éƒ½æ˜¯å¤§ç™½è¯ï¼Œè¡¨è¾¾ä¸å¤Ÿæ¸…æ¥šçš„åœ°æ–¹è¿˜è¯·æŒ‡å‡ºå’Œæ–§æ­£ï¼Œä½†æ˜¯çœŸæ­£çš„æ ¸å¿ƒå·²å…¨éƒ¨æ¶µç›–ã€‚ å¸Œæœ›æœ¬æ–‡çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿå¯ä»¥å¯¹å¾—ä½æˆ‘è¿™ä¸ªè‡ªä¿¡çš„æ ‡é¢˜ã€‚ å‚è€ƒèµ„æ–™https://github.com/ReactTrainâ€¦https://reacttraining.com/reaâ€¦https://blog.seosiwei.com/detâ€¦https://www.jianshu.com/p/47câ€¦ æ›´å¤šç²¾å½©å¥½ç©æœ‰ç”¨çš„å‰ç«¯å†…å®¹ï¼Œè¯·å…³æ³¨å…¬ä¼—å·ã€Šå‰ç«¯å¼ å¤§èƒ–ã€‹","tags":["React","SSR"]},{"title":"Canvaså…¥é—¨çŸ¥è¯†å›¾è§£","path":"/2024/04/12/Canvaså…¥é—¨çŸ¥è¯†å›¾è§£/","content":"åŸæ–‡åœ°å€Canvas ä»å…¥é—¨åˆ°åŠæœ‹å‹æ”¾å¼ƒï¼ˆå›¾è§£ç‰ˆï¼‰ - æ˜é‡‘ æœ¬æ–‡å°±ç”¨å…‰çš„é€Ÿåº¦å°† canvas ç»™å…¥é—¨äº†ã€‚ è¦å…¥é—¨ä¸€ä¸ªæŠ€æœ¯ï¼Œå‰æœŸæœ€é‡è¦æ˜¯å¿«ï¼æ‰€ä»¥æœ¬æ–‡åªè®²å…¥é—¨å†…å®¹ï¼Œèƒ½åº”ä»˜ç®€å•é¡¹ç›®ã€‚æ·±å…¥çš„çŸ¥è¯†ç‚¹ä¼šåœ¨å…¶ä»–æ–‡ç« è®²è§£ã€‚ Canvas æ˜¯ä»€ä¹ˆï¼Ÿ Canvas ä¸­æ–‡åå« â€œç”»å¸ƒâ€ï¼Œæ˜¯ HTML5 æ–°å¢çš„ä¸€ä¸ªæ ‡ç­¾ã€‚ Canvas å…è®¸å¼€å‘è€…é€šè¿‡ JSåœ¨è¿™ä¸ªæ ‡ç­¾ä¸Šç»˜åˆ¶å„ç§å›¾æ¡ˆã€‚ Canvas æ‹¥æœ‰å¤šç§ç»˜åˆ¶è·¯å¾„ã€çŸ©å½¢ã€åœ†å½¢ã€å­—ç¬¦ä»¥åŠå›¾ç‰‡çš„æ–¹æ³•ã€‚ Canvas åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ â€œä»£æ›¿â€ å›¾ç‰‡ã€‚ Canvas å¯ç”¨äºåŠ¨ç”»ã€æ¸¸æˆã€æ•°æ®å¯è§†åŒ–ã€å›¾ç‰‡ç¼–è¾‘å™¨ã€å®æ—¶è§†é¢‘å¤„ç†ç­‰é¢†åŸŸã€‚ Canvas å’Œ SVG çš„åŒºåˆ« Canvas SVG ç”¨JSåŠ¨æ€ç”Ÿæˆå…ƒç´ ï¼ˆä¸€ä¸ªHTMLå…ƒç´ ï¼‰ ç”¨XMLæè¿°å…ƒç´ ï¼ˆç±»ä¼¼HTMLå…ƒç´ é‚£æ ·ï¼Œå¯ç”¨å¤šä¸ªå…ƒç´ æ¥æè¿°ä¸€ä¸ªå›¾å½¢ï¼‰ ä½å›¾ï¼ˆå—å±å¹•åˆ†è¾¨ç‡å½±å“ï¼‰ çŸ¢é‡å›¾ï¼ˆä¸å—å±å¹•åˆ†è¾¨ç‡å½±å“ï¼‰ ä¸æ”¯æŒäº‹ä»¶ æ”¯æŒäº‹ä»¶ æ•°æ®å‘ç”Ÿå˜åŒ–éœ€è¦é‡ç»˜ ä¸éœ€è¦é‡ç»˜ å°±ä¸Šé¢çš„æè¿°è€Œè¨€å¯èƒ½æœ‰ç‚¹éš¾æ‡‚ï¼Œä½ å¯ä»¥æ‰“å¼€ AntV æ——ä¸‹çš„å›¾å½¢ç¼–è¾‘å¼•æ“åšå¯¹æ¯”ã€‚G6 æ˜¯ä½¿ç”¨ canvas å¼€å‘çš„ï¼ŒX6 æ˜¯ä½¿ç”¨ svg å¼€å‘çš„ã€‚ æˆ‘çš„å»ºè®®æ˜¯ï¼šå¦‚æœè¦å±•ç¤ºçš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚ä¸€æ¡æ•°æ®å°±æ˜¯ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œé‚£ä½¿ç”¨ canvas ä¼šæ¯”è¾ƒåˆé€‚ï¼›å¦‚æœç”¨æˆ·æ“ä½œçš„äº¤äº’æ¯”è¾ƒå¤šï¼Œè€Œä¸”å¯¹æ¸…æ™°åº¦æœ‰è¦æ±‚ï¼ˆçŸ¢é‡å›¾ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨ svg ä¼šæ¯”è¾ƒåˆé€‚ã€‚ èµ·æ­¥å­¦ä¹ å‰ç«¯ä¸€å®šè¦åŠ¨æ‰‹æ•²ä»£ç ï¼Œç„¶åçœ‹æ•ˆæœå±•ç¤ºã€‚ èµ·æ­¥é˜¶æ®µä¼šç”¨å‡ å¥ä»£ç è¯´æ˜ canvas å¦‚ä½•ä½¿ç”¨ï¼Œæœ¬ä¾‹ä¼šç”»ä¸€æ¡ç›´çº¿ã€‚ ç”»æ¡ç›´çº¿ åœ¨ HTML ä¸­åˆ›å»º canvas å…ƒç´  é€šè¿‡ js è·å– canvas æ ‡ç­¾ ä» canvas æ ‡ç­¾ä¸­è·å–åˆ°ç»˜å›¾å·¥å…· é€šè¿‡ç»˜å›¾å·¥å…·ï¼Œåœ¨ canvas æ ‡ç­¾ä¸Šç»˜åˆ¶å›¾å½¢ 1234567891011121314151617181920&lt;!-- 1ã€åˆ›å»º canvas å…ƒç´  --&gt;&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;200&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; // 2ã€è·å– canvas å¯¹è±¡ const cnv = document.getElementById(&#x27;c&#x27;) // 3ã€è·å– canvas ä¸Šä¸‹æ–‡ç¯å¢ƒå¯¹è±¡ const cxt = cnv.getContext(&#x27;2d&#x27;) // 4ã€ç»˜åˆ¶å›¾å½¢ cxt.moveTo(100, 100) // èµ·ç‚¹åæ ‡ (x, y) cxt.lineTo(200, 100) // ç»ˆç‚¹åæ ‡ (x, y) cxt.stroke() // å°†èµ·ç‚¹å’Œç»ˆç‚¹è¿æ¥èµ·æ¥&lt;/script&gt; moveTo ã€ lineTo å’Œ stroke æ–¹æ³•æš‚æ—¶å¯ä»¥ä¸ç”¨ç®¡ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ç»˜åˆ¶å›¾å½¢ï¼Œè¿™äº›æ–¹æ³•åœ¨åé¢ä¼šè®²åˆ°~ æ³¨æ„ç‚¹1ã€é»˜è®¤å®½é«˜canvas æœ‰ é»˜è®¤çš„ å®½åº¦(300px) å’Œ é«˜åº¦(150px) å¦‚æœä¸åœ¨ canvas ä¸Šè®¾ç½®å®½é«˜ï¼Œé‚£ canvas å…ƒç´ çš„é»˜è®¤å®½åº¦æ˜¯300pxï¼Œé»˜è®¤é«˜åº¦æ˜¯150pxã€‚ 2ã€è®¾ç½® canvas å®½é«˜canvas å…ƒç´ æä¾›äº† width å’Œ height ä¸¤ä¸ªå±æ€§ï¼Œå¯è®¾ç½®å®ƒçš„å®½é«˜ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå±æ€§åªéœ€ä¼ å…¥æ•°å€¼ï¼Œä¸éœ€è¦ä¼ å…¥å•ä½ï¼ˆæ¯”å¦‚ px ç­‰ï¼‰ã€‚ 1&lt;canvas width=&quot;600&quot; height=&quot;400&quot;&gt;&lt;/canvas&gt; 3ã€ä¸èƒ½é€šè¿‡ CSS è®¾ç½®ç”»å¸ƒçš„å®½é«˜ä½¿ç”¨ css è®¾ç½® canvas çš„å®½é«˜ï¼Œä¼šå‡ºç° å†…å®¹è¢«æ‹‰ä¼¸ çš„åæœï¼ï¼ï¼ 12345678910111213141516171819202122232425&lt;style&gt; #c &#123; width: 400px; height: 400px; border: 1px solid #ccc; &#125;&lt;/style&gt;&lt;canvas id=&quot;c&quot;&gt;&lt;/canvas&gt;&lt;script&gt; // 1ã€è·å–canvaså¯¹è±¡ const cnv = document.getElementById(&#x27;c&#x27;) // 2ã€è·å–canvasä¸Šä¸‹æ–‡ç¯å¢ƒå¯¹è±¡ const cxt = cnv.getContext(&#x27;2d&#x27;) // 3ã€ç»˜åˆ¶å›¾å½¢ cxt.moveTo(100, 100) // èµ·ç‚¹ cxt.lineTo(200, 100) // ç»ˆç‚¹ cxt.stroke() // å°†èµ·ç‚¹å’Œç»ˆç‚¹è¿æ¥èµ·æ¥ console.log(cnv.width) // è·å– canvas çš„å®½åº¦ï¼Œè¾“å‡ºï¼š300 console.log(cnv.height) // è·å– canvas çš„é«˜åº¦ï¼Œè¾“å‡ºï¼š150&lt;/script&gt; canvas çš„é»˜è®¤å®½åº¦æ˜¯300pxï¼Œé»˜è®¤é«˜åº¦æ˜¯150pxã€‚ å¦‚æœä½¿ç”¨ css ä¿®æ”¹ canvas çš„å®½é«˜ï¼ˆæ¯”å¦‚æœ¬ä¾‹å˜æˆ 400px * 400pxï¼‰ï¼Œé‚£å®½åº¦å°±ç”± 300px æ‹‰ä¼¸åˆ° 400pxï¼Œé«˜åº¦ç”± 150px æ‹‰ä¼¸åˆ° 400pxã€‚ ä½¿ç”¨ js è·å– canvas çš„å®½é«˜ï¼Œæ­¤æ—¶è¿”å›çš„æ˜¯ canvas çš„é»˜è®¤å€¼ã€‚ æœ€åå‡ºç°çš„æ•ˆæœå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ 4ã€çº¿æ¡é»˜è®¤å®½åº¦å’Œé¢œè‰²çº¿æ¡çš„é»˜è®¤å®½åº¦æ˜¯ 1px ï¼Œé»˜è®¤é¢œè‰²æ˜¯é»‘è‰²ã€‚ ä½†ç”±äºé»˜è®¤æƒ…å†µä¸‹ canvas ä¼šå°†çº¿æ¡çš„ä¸­å¿ƒç‚¹å’Œåƒç´ çš„åº•éƒ¨å¯¹é½ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ˜¾ç¤ºæ•ˆæœæ˜¯ 2px å’Œéçº¯é»‘è‰²é—®é¢˜ã€‚ 5ã€IEå…¼å®¹æ€§é«˜æš‚æ—¶åªæœ‰ IE 9 ä»¥ä¸Šæ‰æ”¯æŒ canvas ã€‚ä½†å¥½æ¶ˆæ¯æ˜¯ IE å·²ç»æœ‰è‡ªå·±çš„å¢“ç¢‘äº†ã€‚ å¦‚éœ€å…¼å®¹ IE 7 å’Œ 8 ï¼Œå¯ä»¥ä½¿ç”¨ ExplorerCanvas ã€‚ä½†å³ä½¿æ˜¯ä½¿ç”¨äº† ExplorerCanvas ä»ç„¶ä¼šæœ‰æ‰€é™åˆ¶ï¼Œæ¯”å¦‚æ— æ³•ä½¿ç”¨ fillText() æ–¹æ³•ç­‰ã€‚ åŸºç¡€å›¾å½¢åæ ‡ç³»åœ¨ç»˜åˆ¶åŸºç¡€å›¾å½¢ä¹‹å‰ï¼Œéœ€è¦å…ˆææ¸…é™¤ Canvas ä½¿ç”¨çš„åæ ‡ç³»ã€‚ Canvas ä½¿ç”¨çš„æ˜¯ W3C åæ ‡ç³» ï¼Œä¹Ÿå°±æ˜¯éµå¾ªæˆ‘ä»¬å±å¹•ã€æŠ¥çº¸çš„é˜…è¯»ä¹ æƒ¯ï¼Œä»ä¸Šå¾€ä¸‹ï¼Œä»å·¦å¾€å³ã€‚ W3C åæ ‡ç³» å’Œ æ•°å­¦ç›´è§’åæ ‡ç³» çš„ Xè½´ æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ Yè½´ çš„åå‘ç›¸åã€‚ W3C åæ ‡ç³» çš„ Yè½´ æ­£æ–¹å‘å‘ä¸‹ã€‚ ç›´çº¿ä¸€æ¡ç›´çº¿æœ€ç®€å•çš„èµ·æ­¥æ–¹å¼æ˜¯ç”»ä¸€æ¡ç›´çº¿ã€‚è¿™é‡Œæ‰€è¯´çš„ â€œç›´çº¿â€ æ˜¯å‡ ä½•å­¦é‡Œçš„ â€œçº¿æ®µâ€ çš„æ„æ€ã€‚ éœ€è¦ç”¨åˆ°è¿™3ä¸ªæ–¹æ³•ï¼š moveTo(x1, y1)ï¼šèµ·ç‚¹åæ ‡ (x, y) lineTo(x2, y2)ï¼šä¸‹ä¸€ä¸ªç‚¹çš„åæ ‡ (x, y) stroke()ï¼šå°†æ‰€æœ‰åæ ‡ç”¨ä¸€æ¡çº¿è¿èµ·æ¥ èµ·æ­¥é˜¶æ®µå¯ä»¥å…ˆè¿™æ ·ç†è§£ã€‚ 1234567891011&lt;canvas id=&quot;c&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç»˜åˆ¶ç›´çº¿ cxt.moveTo(50, 100) // èµ·ç‚¹åæ ‡ cxt.lineTo(200, 50) // ä¸‹ä¸€ä¸ªç‚¹çš„åæ ‡ cxt.stroke() // å°†ä¸Šé¢çš„åæ ‡ç”¨ä¸€æ¡çº¿è¿æ¥èµ·æ¥&lt;/script&gt; ä¸Šé¢çš„ä»£ç æ‰€å‘ˆç°çš„æ•ˆæœï¼Œå¯ä»¥çœ‹ä¸‹å›¾è§£é‡Šï¼ˆæ‰‹ä¸å¤ªèªæ˜ï¼Œç”»å¾—ä¸æ˜¯å¾ˆæ ‡å‡†ï¼Œå¸Œæœ›èƒ½çœ‹æ‡‚ï¼‰ å¤šæ¡ç›´çº¿å¦‚éœ€ç”»å¤šæ¡ç›´çº¿ï¼Œå¯ä»¥ç”¨ä¼šä¸Šé¢é‚£å‡ ä¸ªæ–¹æ³•ã€‚ 1234567891011121314&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.stroke() cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.stroke()&lt;/script&gt; ä»”ç»†è§‚å¯Ÿä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¸¤æ¡çº¿çš„ç²—ç»†ä¸ä¸€æ ·çš„ï¼Ÿ æ˜æ˜ä½¿ç”¨çš„æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç¬¬äºŒæ¡ç›´çº¿çš„ Yè½´ çš„å€¼æ˜¯æœ‰å°æ•°ç‚¹ã€‚ ç­”ï¼šé»˜è®¤æƒ…å†µä¸‹ canvas ä¼šå°†çº¿æ¡çš„ä¸­å¿ƒç‚¹å’Œåƒç´ çš„åº•éƒ¨å¯¹é½ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ˜¾ç¤ºæ•ˆæœæ˜¯ 2px å’Œéçº¯é»‘è‰²é—®é¢˜ã€‚ ä¸Šå›¾æ¯ä¸ªæ ¼å­ä»£è¡¨ 1pxã€‚ çº¿çš„ä¸­å¿ƒç‚¹ä¼šå’Œç”»å¸ƒåƒç´ ç‚¹çš„åº•éƒ¨å¯¹é½ï¼Œæ‰€ä»¥ä¼šçº¿ä¸­é—´æ˜¯é»‘è‰²çš„ï¼Œä½†ç”±äºä¸€ä¸ªåƒç´ å°±ä¸èƒ½å†åˆ‡å‰²äº†ï¼Œæ‰€ä»¥ä¼šæœ‰åŠä¸ªåƒç´ è¢«æŸ“è‰²ï¼Œå°±å˜æˆäº†æµ…ç°è‰²ã€‚ æ‰€ä»¥å¦‚æœä½ è®¾ç½®çš„ Yè½´ å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå°±ä¼šå‡ºç°ä¸Šé¢é‚£ç§æƒ…å†µã€‚ è®¾ç½®æ ·å¼ lineWidthï¼šçº¿çš„ç²—ç»† strokeStyleï¼šçº¿çš„é¢œè‰² lineCapï¼šçº¿å¸½ï¼šé»˜è®¤: butt; åœ†å½¢: round; æ–¹å½¢: square 123456789101112131415161718192021&lt;canvas id=&quot;c&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç»˜åˆ¶ç›´çº¿ cxt.moveTo(50, 50) cxt.lineTo(200, 50) // ä¿®æ”¹ç›´çº¿çš„å®½åº¦ cxt.lineWidth = 20 // ä¿®æ”¹ç›´çº¿çš„é¢œè‰² cxt.strokeStyle = &#x27;pink&#x27; // ä¿®æ”¹ç›´çº¿ä¸¤ç«¯æ ·å¼ cxt.lineCap = &#x27;round&#x27; // é»˜è®¤: butt; åœ†å½¢: round; æ–¹å½¢: square cxt.stroke()&lt;/script&gt; æ–°å¼€è·¯å¾„å¼€è¾Ÿæ–°è·¯å¾„çš„æ–¹æ³•ï¼š beginPath() åœ¨ç»˜åˆ¶å¤šæ¡çº¿æ®µçš„åŒæ—¶ï¼Œè¿˜è¦è®¾ç½®çº¿æ®µæ ·å¼ï¼Œé€šå¸¸éœ€è¦å¼€è¾Ÿæ–°è·¯å¾„ã€‚ è¦ä¸ç„¶æ ·å¼ä¹‹é—´ä¼šç›¸äº’æ±¡æŸ“ã€‚ æ¯”å¦‚è¿™æ · 123456789101112131415161718&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç¬¬ä¸€æ¡çº¿ cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.lineWidth = 10 cxt.strokeStyle = &#x27;pink&#x27; cxt.stroke() // ç¬¬äºŒæ¡çº¿ cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.stroke()&lt;/script&gt; å¦‚æœä¸æƒ³ç›¸äº’æ±¡æŸ“ï¼Œéœ€è¦åš2ä»¶äº‹ï¼š ä½¿ç”¨ beginPath() æ–¹æ³•ï¼Œé‡æ–°å¼€ä¸€ä¸ªè·¯å¾„ è®¾ç½®æ–°çº¿æ®µçš„æ ·å¼ï¼ˆå¿…é¡»é¡¹ï¼‰ å¦‚æœä¸Šé¢2æ­¥å´äº†å…¶ä¸­1æ­¥éƒ½ä¼šæœ‰å½±å“ã€‚ åªä½¿ç”¨ beginPath() 12345678910111213141516171819&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç¬¬ä¸€æ¡çº¿ cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.lineWidth = 10 cxt.strokeStyle = &#x27;pink&#x27; cxt.stroke() // ç¬¬äºŒæ¡çº¿ cxt.beginPath() // é‡æ–°å¼€å¯ä¸€ä¸ªè·¯å¾„ cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.stroke()&lt;/script&gt; ç¬¬ä¸€æ¡çº¿çš„æ ·å¼ä¼šå½±å“ä¹‹åçš„çº¿ã€‚ ä½†å¦‚æœä½¿ç”¨äº† beginPath() ï¼Œåé¢çš„çº¿æ®µä¸ä¼šå½±å“å‰é¢çš„çº¿æ®µã€‚ 12345678910111213141516171819&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç¬¬ä¸€æ¡çº¿ cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.stroke() // ç¬¬äºŒæ¡çº¿ cxt.beginPath() // é‡æ–°å¼€å¯ä¸€ä¸ªè·¯å¾„ cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.lineWidth = 4 cxt.strokeStyle = &#x27;red&#x27; cxt.stroke()&lt;/script&gt; è®¾ç½®æ–°çº¿æ®µçš„æ ·å¼ï¼Œæ²¡ä½¿ç”¨ beginPath() çš„æƒ…å†µè¿™ä¸ªæƒ…å†µä¼šåè¿‡æ¥ï¼Œåé¢çš„çº¿èƒ½å½±å“å‰é¢çš„çº¿ã€‚ 1234567891011121314151617181920&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç¬¬ä¸€æ¡çº¿ cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.lineWidth = 10 cxt.strokeStyle = &#x27;pink&#x27; cxt.stroke() // ç¬¬äºŒæ¡çº¿ cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.lineWidth = 4 cxt.strokeStyle = &#x27;red&#x27; cxt.stroke()&lt;/script&gt; æ­£ç¡®çš„åšæ³•åœ¨è®¾ç½® beginPath() çš„åŒæ—¶ï¼Œä¹Ÿå„è‡ªè®¾ç½®æ ·å¼ã€‚è¿™æ ·å°±èƒ½åšåˆ°ç›¸äº’ä¸å½±å“äº†ã€‚ 12345678910111213141516171819&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(20, 100) cxt.lineTo(200, 100) cxt.lineWidth = 10 cxt.strokeStyle = &#x27;pink&#x27; cxt.stroke() cxt.beginPath() // é‡æ–°å¼€å¯ä¸€ä¸ªè·¯å¾„ cxt.moveTo(20, 120.5) cxt.lineTo(200, 120.5) cxt.lineWidth = 4 cxt.strokeStyle = &#x27;red&#x27; cxt.stroke()&lt;/script&gt; æŠ˜çº¿å’Œ ç›´çº¿ å·®ä¸å¤šï¼Œéƒ½æ˜¯ä½¿ç”¨ moveTo() ã€lineTo() å’Œ stroke() æ–¹æ³•å¯ä»¥ç»˜åˆ¶æŠ˜çº¿ã€‚ 12345678910111213&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(50, 200) cxt.lineTo(100, 50) cxt.lineTo(200, 200) cxt.lineTo(250, 50) cxt.stroke()&lt;/script&gt; ç”»è¿™ç§æŠ˜çº¿ï¼Œæœ€å¥½åœ¨è‰ç¨¿çº¸ä¸Šç”»ä¸€ä¸ªåæ ‡ç³»ï¼Œè‡ªå·±è®¡ç®—å¹¶æç»˜ä¸€ä¸‹æ¯ä¸ªç‚¹å¤§æ¦‚åœ¨ä»€ä¹ˆä»€ä¹ˆä½ç½®ï¼Œæœ€ååœ¨ canvas ä¸­çœ‹çœ‹æ•ˆæœã€‚ çŸ©å½¢æ ¹æ®å‰é¢çš„åŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥ ä½¿ç”¨çº¿æ®µæ¥æç»˜çŸ©å½¢ï¼Œä½† canvas ä¹Ÿæä¾›äº† rect() ç­‰æ–¹æ³•å¯ä»¥ç›´æ¥ç”ŸæˆçŸ©å½¢ã€‚ ä½¿ç”¨çº¿æ®µæç»˜çŸ©å½¢å¯ä»¥ä½¿ç”¨å‰é¢ç”»çº¿æ®µçš„æ–¹æ³•æ¥ç»˜åˆ¶çŸ©å½¢ 123456789101112131415canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç»˜åˆ¶çŸ©å½¢ cxt.moveTo(50, 50) cxt.lineTo(200, 50) cxt.lineTo(200, 120) cxt.lineTo(50, 120) cxt.lineTo(50, 50) // éœ€è¦é—­åˆï¼Œåˆæˆ–è€…ä½¿ç”¨ closePath() æ–¹æ³•è¿›è¡Œé—­åˆï¼Œæ¨èä½¿ç”¨ closePath() cxt.stroke()&lt;/script&gt; ä¸Šé¢çš„ä»£ç å‡ ä¸ªç‚¹åˆ†åˆ«å¯¹åº”ä¸‹å›¾ã€‚ ä½¿ç”¨ strokeRect() æè¾¹çŸ©å½¢ strokeStyleï¼šè®¾ç½®æè¾¹çš„å±æ€§ï¼ˆé¢œè‰²ã€æ¸å˜ã€å›¾æ¡ˆï¼‰ strokeRect(x, y, width, height)ï¼šæè¾¹çŸ©å½¢ï¼ˆxå’Œyæ˜¯çŸ©å½¢å·¦ä¸Šè§’èµ·ç‚¹ï¼›width å’Œ height æ˜¯çŸ©å½¢çš„å®½é«˜ï¼‰ strokeStyle å¿…é¡»å†™åœ¨ strokeRect() å‰é¢ï¼Œä¸ç„¶æ ·å¼ä¸ç”Ÿæ•ˆã€‚ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // strokeStyle å±æ€§ // strokeRect(x, y, width, height) æ–¹æ³• cxt.strokeStyle = &#x27;pink&#x27; cxt.strokeRect(50, 50, 200, 100)&lt;/script&gt; ä¸Šé¢çš„ä»£ç å¯ä»¥è¿™æ ·ç†è§£ ä½¿ç”¨ fillRect() å¡«å……çŸ©å½¢fillRect() å’Œ strokeRect() æ–¹æ³•å·®ä¸å¤šï¼Œä½† fillRect() çš„ä½œç”¨æ˜¯å¡«å……ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒfillStyle å¿…é¡»å†™åœ¨ fillRect() ä¹‹å‰ï¼Œä¸ç„¶æ ·å¼ä¸ç”Ÿæ•ˆã€‚ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // fillStyle å±æ€§ // fillRect(x, y, width, height) æ–¹æ³• cxt.fillStyle = &#x27;pink&#x27; cxt.fillRect(50, 50, 200, 100) // fillRect(x, y, width, height)&lt;/script&gt; åŒæ—¶ä½¿ç”¨ strokeRect() å’Œ fillRect()åŒæ—¶ä½¿ç”¨ strokeRect() å’Œ fillRect() ä¼šäº§ç”Ÿæè¾¹å’Œå¡«å……çš„æ•ˆæœ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.strokeStyle = &#x27;red&#x27; cxt.strokeRect(50, 50, 200, 100) // strokeRect(x, y, width, height) cxt.fillStyle = &#x27;yellow&#x27; cxt.fillRect(50, 50, 200, 100) // fillRect(x, y, width, height)&lt;/script&gt; ä½¿ç”¨ rect() ç”ŸæˆçŸ©å½¢rect() å’Œ fillRect() ã€strokeRect() çš„ç”¨æ³•å·®ä¸å¤šï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼š strokeRect() å’Œ fillRect() è¿™ä¸¤ä¸ªæ–¹æ³•è°ƒç”¨åä¼šç«‹å³ç»˜åˆ¶ï¼›rect() æ–¹æ³•è¢«è°ƒç”¨åï¼Œä¸ä¼šç«‹åˆ»ç»˜åˆ¶çŸ©å½¢ï¼Œè€Œæ˜¯éœ€è¦è°ƒç”¨ stroke() æˆ– fill() è¾…åŠ©æ¸²æŸ“ã€‚ 1234567891011121314&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.strokeStyle = &#x27;red&#x27; cxt.fillStyle = &#x27;pink&#x27; cxt.rect(50, 50, 200, 100) // rect(x, y, width, height) cxt.stroke() cxt.fill()&lt;/script&gt; ç­‰ä»·å…¬å¼ï¼š 12345678910111213141516171819cxt.strokeStyle = &#x27;red&#x27;,cxt.rect(50, 50, 200, 100)cxt.stroke()// ç­‰ä»·äºcxt.strokeStyle = &#x27;red&#x27;cxt.strokerect(50, 50, 200, 100)// -----------------------------cxt.fillStyle = &#x27;hotpink&#x27;cxt.rect(50, 50, 200, 100)cxt.fill()// ç­‰ä»·äºcxt.fillStyle = &#x27;yellowgreen&#x27;cxt.fillRect(50, 50, 200, 100) ä½¿ç”¨ clearRect() æ¸…ç©ºçŸ©å½¢ä½¿ç”¨ clearRect() æ–¹æ³•å¯ä»¥æ¸…ç©ºæŒ‡å®šåŒºåŸŸã€‚ 1clearRect(x, y, width, height) å…¶è¯­æ³•å’Œåˆ›å»º cxt.rect() å·®ä¸å¤šã€‚ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.fillStyle = &#x27;pink&#x27; // è®¾ç½®å¡«å……é¢œè‰² cxt.fillRect(50, 50, 200, 200) // å¡«å……çŸ©å½¢ cxt.clearRect(60, 60, 180, 90) // æ¸…ç©ºçŸ©å½¢&lt;/script&gt; æ¸…ç©ºç”»å¸ƒcanvas ç”»å¸ƒå…ƒç´ æ˜¯çŸ©å½¢ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æŠŠæ•´ä¸ªç”»å¸ƒæ¸…ç©ºæ‰ã€‚ 123// çœç•¥éƒ¨åˆ†ä»£ç cxt.clearRect(0, 0, cnv.width, cnv.height) è¦æ¸…ç©ºçš„åŒºåŸŸï¼šä»ç”»å¸ƒå·¦ä¸Šè§’å¼€å§‹ï¼Œç›´åˆ°ç”»å¸ƒçš„å®½å’Œç”»å¸ƒçš„é«˜ä¸ºæ­¢ã€‚ å¤šè¾¹å½¢Canvas è¦ç”»å¤šè¾¹å½¢ï¼Œéœ€è¦ä½¿ç”¨ moveTo() ã€ lineTo() å’Œ closePath() ã€‚ ä¸‰è§’å½¢è™½ç„¶ä¸‰è§’å½¢æ˜¯å¸¸è§å›¾å½¢ï¼Œä½† canvas å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼ rect() çš„æ–¹æ³•æ¥ç»˜åˆ¶ä¸‰è§’å½¢ã€‚ éœ€è¦ç¡®å®šä¸‰è§’å½¢3ä¸ªç‚¹çš„åæ ‡ä½ç½®ï¼Œç„¶åä½¿ç”¨ stroke() æˆ–è€… fill() æ–¹æ³•ç”Ÿæˆä¸‰è§’å½¢ã€‚ 1234567891011121314151617&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(50, 50) cxt.lineTo(200, 50) cxt.lineTo(200, 200) // æ³¨æ„ç‚¹ï¼šå¦‚æœä½¿ç”¨ lineTo é—­åˆå›¾å½¢ï¼Œæ˜¯ä¸èƒ½å¾ˆå¥½é—­åˆæ‹è§’ä½çš„ã€‚ cxt.lineTo(50, 50) // é—­åˆ cxt.stroke()&lt;/script&gt; æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè‡ªåŠ¨ä»æœ€åä¸€ä¸ªç‚¹è¿æ¥åˆ°èµ·ç‚¹ã€‚æœ€åä¸€æ­¥éœ€è¦è®¾ç½®ä¸€ä¸‹ cxt.lineTo(50, 50) ï¼Œè®©å®ƒä¸ cxt.moveTo(50, 50) ä¸€æ ·ã€‚è¿™æ ·å¯ä»¥è®©è·¯å¾„å›åˆ°èµ·ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé—­åˆæ•ˆæœã€‚ ä½†è¿™æ ·åšå…¶å®æ˜¯æœ‰ç‚¹é—®é¢˜çš„ï¼Œè€Œä¸”ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œè¦è®°ä½èµ·å§‹ç‚¹åæ ‡ã€‚ ä¸Šé¢çš„é—­åˆæ“ä½œï¼Œå¦‚æœé‡åˆ°è®¾ç½®äº† lineWidth æˆ–è€… lineJoin å°±ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼š 12// çœç•¥éƒ¨åˆ†ä»£ç cxt.lineWidth = 20 å½“çº¿æ®µå˜ç²—åï¼Œèµ·å§‹ç‚¹å’Œç»“æŸç‚¹çš„é“¾æ¥å¤„ï¼Œæ‹è§’å°±å‡ºç°â€œä¸æ­£å¸¸â€ç°è±¡ã€‚ å¦‚æœéœ€è¦çœŸæ­£é—­åˆï¼Œå¯ä»¥ä½¿ç”¨ closePath() æ–¹æ³•ã€‚ 12345678910111213141516&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(50, 50) cxt.lineTo(200, 50) cxt.lineTo(200, 200) // æ‰‹åŠ¨é—­åˆ cxt.closePath() cxt.lineJoin = &#x27;miter&#x27; // çº¿æ¡è¿æ¥çš„æ ·å¼ã€‚miter: é»˜è®¤; bevel: æ–œé¢; round: åœ†è§’ cxt.lineWidth = 20 cxt.stroke()&lt;/script&gt; ä½¿ç”¨ cxt.closePath() å¯ä»¥è‡ªåŠ¨å°†ç»ˆç‚¹å’Œèµ·å§‹ç‚¹è¿æ¥èµ·æ¥ï¼Œæ­¤æ—¶çœ‹ä¸Šå»å°±æ­£å¸¸å¤šäº†ã€‚ è±å½¢æœ‰ä¸€ç»„é‚»è¾¹ç›¸ç­‰çš„å¹³è¡Œå››è¾¹å½¢æ˜¯è±å½¢ 12345678910111213&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(150, 50) cxt.lineTo(250, 100) cxt.lineTo(150, 150) cxt.lineTo(50, 100) cxt.closePath() cxt.stroke()&lt;/script&gt; è¦ç»˜åˆ¶ç›´çº¿ç±»å‹çš„å›¾å½¢ï¼Œåœ¨è‰ç¨¿çº¸ä¸Šæ ‡è®°å‡ºèµ·å§‹ç‚¹å’Œæ¯ä¸ªæ‹è§’çš„ç‚¹ï¼Œç„¶åå†è¿çº¿å³å¯ã€‚ç›¸å¯¹æ›²çº¿å›¾å½¢æ¥è¯´ï¼Œç›´çº¿å›¾å½¢æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚ åœ†å½¢ç»˜åˆ¶åœ†å½¢çš„æ–¹æ³•æ˜¯ arc()ã€‚ è¯­æ³•ï¼š 1arc(x, y, r, sAngle, eAngleï¼Œcounterclockwise) x å’Œ y: åœ†å¿ƒåæ ‡ r: åŠå¾„ sAngle: å¼€å§‹è§’åº¦ eAngle: ç»“æŸè§’åº¦ counterclockwise: ç»˜åˆ¶æ–¹å‘ï¼ˆtrue: é€†æ—¶é’ˆ; false: é¡ºæ—¶é’ˆï¼‰ï¼Œé»˜è®¤ false å¼€å§‹è§’åº¦å’Œç»“æŸè§’åº¦ï¼Œéƒ½æ˜¯ä»¥å¼§åº¦ä¸ºå•ä½ã€‚ä¾‹å¦‚ 180Â°å°±å†™æˆ Math.PI ï¼Œ360Â°å†™æˆ Math.PI * 2 ï¼Œä»¥æ­¤ç±»æ¨ã€‚ åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†è®©è‡ªå·±æˆ–è€…åˆ«çš„å¼€å‘è€…æ›´å®¹æ˜“çœ‹æ‡‚å¼§åº¦çš„æ•°å€¼ï¼Œ1Â°åº”è¯¥å†™æˆ Math.PI / 180ã€‚ 100Â°: 100 * Math.PI / 180 110Â°: 110 * Math.PI / 180 241Â°: 241 * Math.PI / 180 æ³¨æ„ï¼šç»˜åˆ¶åœ†å½¢ä¹‹å‰ï¼Œå¿…é¡»å…ˆè°ƒç”¨ beginPath() æ–¹æ³•ï¼ï¼ï¼ åœ¨ç»˜åˆ¶å®Œæˆä¹‹åï¼Œè¿˜éœ€è¦è°ƒç”¨ closePath() æ–¹æ³•ï¼ï¼ï¼ 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.beginPath() cxt.arc(150, 150, 80, 0, 360 * Math.PI / 180) cxt.closePath() cxt.stroke()&lt;/script&gt; åŠåœ†å¦‚æœä½¿ç”¨ arc() æ–¹æ³•ç”»åœ†æ—¶ï¼Œæ²¡åšåˆ°åˆšå¥½ç»•å®Œä¸€å‘¨ï¼ˆ360Â°ï¼‰å°±ç›´æ¥é—­åˆè·¯å¾„ï¼Œå°±ä¼šå‡ºç°åŠåœ†çš„çŠ¶æ€ã€‚ 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.beginPath() cxt.arc(150, 150, 100, 0, 180 * Math.PI / 180) // é¡ºæ—¶é’ˆ cxt.closePath() cxt.stroke()&lt;/script&gt; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œcxt.arc æœ€åä¸€ä¸ªå‚æ•°æ²¡ä¼ ï¼Œé»˜è®¤æ˜¯ false ï¼Œæ‰€ä»¥æ˜¯é¡ºæ—¶é’ˆç»˜åˆ¶ã€‚ å¦‚æœå¸Œæœ›åŠåœ†çš„å¼§é¢åœ¨ä¸Šæ–¹ï¼Œå¯ä»¥å°† cxt.arc æœ€åä¸€ä¸ªå‚æ•°è®¾ç½®æˆ true 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.beginPath() cxt.arc(150, 150, 100, 0, 180 * Math.PI / 180, true) cxt.closePath() cxt.stroke()&lt;/script&gt; å¼§çº¿ä½¿ç”¨ arc() æ–¹æ³•ç”»åŠåœ†æ—¶ï¼Œå¦‚æœæœ€åä¸è°ƒç”¨ closePath() æ–¹æ³•ï¼Œå°±ä¸ä¼šå‡ºç°é—­åˆè·¯å¾„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé‚£æ˜¯ä¸€æ¡å¼§çº¿ã€‚ åœ¨ canvas ä¸­ï¼Œç”»å¼§çº¿æœ‰2ä¸­æ–¹æ³•ï¼šarc() å’Œ arcTo() ã€‚ arc() ç”»å¼§çº¿å¦‚æœæƒ³ç”»ä¸€æ¡ 0Â° ~ 30Â° çš„å¼§çº¿ï¼Œå¯ä»¥è¿™æ ·å†™ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.beginPath() cxt.arc(150, 150, 100, 0, 30 * Math.PI / 180) cxt.stroke()&lt;/script&gt; åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œçº¢çº¿ä»£è¡¨ç”»å‡ºæ¥çš„é‚£æ¡å¼§çº¿ã€‚ arcTo() ç”»å¼§çº¿arcTo() çš„ä½¿ç”¨æ–¹æ³•ä¼šæ›´åŠ å¤æ‚ï¼Œå¦‚æœåˆå­¦çœ‹ä¸å¤ªæ‡‚çš„è¯å¯ä»¥å…ˆè·³è¿‡ï¼Œçœ‹å®Œåé¢çš„å†å›æ¥è¡¥è¡¥ã€‚ è¯­æ³•ï¼š 1arcTo(cx, cy, x2, y2, radius) cx: ä¸¤åˆ‡çº¿äº¤ç‚¹çš„æ¨ªåæ ‡ cy: ä¸¤åˆ‡çº¿äº¤ç‚¹çš„çºµåæ ‡ x2: ç»“æŸç‚¹çš„æ¨ªåæ ‡ y2: ç»“æŸç‚¹çš„çºµåæ ‡ radius: åŠå¾„ å…¶ä¸­ï¼Œ(cx, cy) ä¹Ÿå«æ§åˆ¶ç‚¹ï¼Œ(x2, y2) ä¹Ÿå«ç»“æŸç‚¹ã€‚ æ˜¯ä¸æ˜¯æœ‰ç‚¹å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ x1 å’Œ y1 ï¼Ÿ (x1, y1) æ˜¯å¼€å§‹ç‚¹ï¼Œé€šå¸¸æ˜¯ç”± moveTo() æˆ–è€… lineTo() æä¾›ã€‚ arcTo() æ–¹æ³•åˆ©ç”¨ å¼€å§‹ç‚¹ã€æ§åˆ¶ç‚¹å’Œç»“æŸç‚¹å½¢æˆçš„å¤¹è§’ï¼Œç»˜åˆ¶ä¸€æ®µä¸å¤¹è§’çš„ä¸¤è¾¹ç›¸åˆ‡å¹¶ä¸”åŠå¾„ä¸º radius çš„åœ†å¼§ã€‚ ä¸¾ä¸ªä¾‹å­ 1234567891011&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(40, 40) cxt.arcTo(120, 40, 120, 120, 80) cxt.stroke()&lt;/script&gt; åŸºç¡€æ ·å¼å‰é¢å­¦å®ŒåŸºç¡€å›¾å½¢ï¼Œæ¥ä¸‹æ¥å¯ä»¥å¼€å§‹äº†è§£ä¸€ä¸‹å¦‚ä½•è®¾ç½®å…ƒç´ çš„åŸºç¡€æ ·å¼ã€‚ æè¾¹ stroke()å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œå…¶å®å·²ç»çŸ¥é“ä½¿ç”¨ stroke() æ–¹æ³•è¿›è¡Œæè¾¹äº†ã€‚è¿™é‡Œå°±ä¸å†å¤šè®²è¿™ä¸ªæ–¹æ³•ã€‚ çº¿æ¡å®½åº¦ lineWidthlineWidth é»˜è®¤å€¼æ˜¯ 1 ï¼Œé»˜è®¤å•ä½æ˜¯ pxã€‚ è¯­æ³•ï¼š 1lineWidth = çº¿å®½ 123456789101112131415161718192021222324252627&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // çº¿å®½ 10 cxt.beginPath() cxt.moveTo(50, 50) cxt.lineTo(250, 50) cxt.lineWidth = 10 // è®¾ç½®çº¿å®½ cxt.stroke() // çº¿å®½ 20 cxt.beginPath() cxt.moveTo(50, 150) cxt.lineTo(250, 150) cxt.lineWidth = 20 // è®¾ç½®çº¿å®½ cxt.stroke() // çº¿å®½ 30 cxt.beginPath() cxt.moveTo(50, 250) cxt.lineTo(250, 250) cxt.lineWidth = 30 // è®¾ç½®çº¿å®½ cxt.stroke()&lt;/script&gt; çº¿æ¡é¢œè‰² strokeStyleä½¿ç”¨ strokeStyle å¯ä»¥è®¾ç½®çº¿æ¡é¢œè‰² è¯­æ³•: 1strokeStyle = é¢œè‰²å€¼ 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.moveTo(50, 50) cxt.lineTo(250, 50) cxt.lineWidth = 20 cxt.strokeStyle = &#x27;pink&#x27; // è®¾ç½®é¢œè‰² cxt.stroke()&lt;/script&gt; ä¸ºäº†å±•ç¤ºæ–¹ä¾¿ï¼Œæˆ‘å°† lineWidth è®¾ä¸º 20ã€‚ çº¿å¸½ lineCapçº¿å¸½æŒ‡çš„æ˜¯çº¿æ®µçš„å¼€å§‹å’Œç»“å°¾å¤„çš„æ ·å¼ï¼Œä½¿ç”¨ lineCap å¯ä»¥è®¾ç½® è¯­æ³•ï¼š 1lineCap = &#x27;å±æ€§å€¼&#x27; å±æ€§å€¼åŒ…æ‹¬ï¼š butt: é»˜è®¤å€¼ï¼Œæ— çº¿å¸½ square: æ–¹å½¢çº¿å¸½ round: åœ†å½¢çº¿å¸½ 12345678910111213141516171819202122232425262728293031&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // è®¾ç½®çº¿å®½ï¼Œæ–¹ä¾¿æ¼”ç¤º cxt.lineWidth = 16 // é»˜è®¤çº¿å¸½ butt cxt.beginPath() cxt.moveTo(50, 60) cxt.lineTo(250, 60) cxt.stroke() // æ–¹å½¢çº¿å¸½ square cxt.beginPath() cxt.lineCap = &#x27;square&#x27; cxt.moveTo(50, 150) cxt.lineTo(250, 150) cxt.stroke() // åœ†å½¢çº¿å¸½ round cxt.beginPath() cxt.lineCap = &#x27;round&#x27; cxt.moveTo(50, 250) cxt.lineTo(250, 250) cxt.stroke()&lt;/script&gt; ä½¿ç”¨ square å’Œ round çš„è¯ï¼Œä¼šä½¿çº¿æ¡å˜å¾—ç¨å¾®é•¿ä¸€ç‚¹ç‚¹ï¼Œè¿™æ˜¯ç»™çº¿æ¡å¢åŠ çº¿å¸½çš„éƒ¨åˆ†ï¼Œè¿™ä¸ªé•¿åº¦åœ¨æ—¥å¸¸å¼€å‘ä¸­éœ€è¦æ³¨æ„ã€‚ çº¿å¸½åªå¯¹çº¿æ¡çš„å¼€å§‹å’Œç»“å°¾å¤„äº§ç”Ÿä½œç”¨ï¼Œå¯¹æ‹è§’ä¸ä¼šäº§ç”Ÿä»»ä½•ä½œç”¨ã€‚ æ‹è§’æ ·å¼ lineJoinå¦‚æœéœ€è¦è®¾ç½®æ‹è§’æ ·å¼ï¼Œå¯ä»¥ä½¿ç”¨ lineJoin ã€‚ è¯­æ³•ï¼š 1lineJoin = &#x27;å±æ€§å€¼&#x27; å±æ€§å€¼åŒ…æ‹¬ï¼š miter: é»˜è®¤å€¼ï¼Œå°–è§’ round: åœ†è§’ bevel: æ–œè§’ 123456789101112131415161718192021222324252627282930&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.lineWidth = 20 // é»˜è®¤ï¼Œå°–è§’ cxt.moveTo(50, 40) cxt.lineTo(200, 40) cxt.lineTo(200, 90) cxt.stroke() // æ–œè§’ bevel cxt.beginPath() cxt.moveTo(50, 140) cxt.lineTo(200, 140) cxt.lineTo(200, 190) cxt.lineJoin = &#x27;bevel&#x27; cxt.stroke() // åœ†è§’ round cxt.beginPath() cxt.moveTo(50, 240) cxt.lineTo(200, 240) cxt.lineTo(200, 290) cxt.lineJoin = &#x27;round&#x27; cxt.stroke()&lt;/script&gt; è™šçº¿ setLineDash()ä½¿ç”¨ setLineDash() æ–¹æ³•å¯ä»¥å°†æè¾¹è®¾ç½®æˆè™šçº¿ã€‚ è¯­æ³•ï¼š 1setLineDash([]) éœ€è¦ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œä¸”å…ƒç´ æ˜¯æ•°å€¼å‹ã€‚ è™šçº¿åˆ†3ç§æƒ…å†µ åªä¼ 1ä¸ªå€¼ æœ‰2ä¸ªå€¼ æœ‰3ä¸ªä»¥ä¸Šçš„å€¼ 1234567891011121314151617181920212223242526272829&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.lineWidth = 20 cxt.strokeStyle = &#x27;pink&#x27; cxt.moveTo(50, 50) cxt.lineTo(200, 50) cxt.setLineDash([10]) // åªä¼ 1ä¸ªå‚æ•°ï¼Œå®çº¿ä¸ç©ºç™½éƒ½æ˜¯ 10px cxt.stroke() cxt.beginPath() cxt.moveTo(50, 100) cxt.lineTo(200, 100) cxt.setLineDash([10, 20]) // 2ä¸ªå‚æ•°ï¼Œæ­¤æ—¶ï¼Œå®çº¿æ˜¯ 10px, ç©ºç™½ 20px cxt.stroke() cxt.beginPath() cxt.moveTo(50, 150) cxt.lineTo(200, 150) cxt.setLineDash([10, 20, 5]) // ä¼ 3ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œæ­¤ä¾‹ï¼š10pxå®çº¿ï¼Œ20pxç©ºç™½ï¼Œ5pxå®çº¿ï¼Œ10pxç©ºç™½ï¼Œ20pxå®çº¿ï¼Œ5pxç©ºç™½ â€¦â€¦ cxt.stroke()&lt;/script&gt; æ­¤å¤–ï¼Œè¿˜å¯ä»¥å§‹ç»ˆ cxt.getLineDash() è·å–è™šçº¿ä¸é‡å¤çš„è·ç¦»ï¼› ç”¨ cxt.lineDashOffset è®¾ç½®è™šçº¿çš„åç§»ä½ã€‚ å¡«å……ä½¿ç”¨ fill() å¯ä»¥å¡«å……å›¾å½¢ï¼Œæ ¹æ®å‰é¢çš„ä¾‹å­åº”è¯¥æŒæ¡äº†å¦‚ä½•ä½¿ç”¨ fill() 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.fillStyle = &#x27;pink&#x27; cxt.rect(50, 50, 200, 100) cxt.fill()&lt;/script&gt; å¯ä»¥ä½¿ç”¨ fillStyle è®¾ç½®å¡«å……é¢œè‰²ï¼Œé»˜è®¤æ˜¯é»‘è‰²ã€‚ éé›¶ç¯ç»•å¡«å……åœ¨ä½¿ç”¨ fill() æ–¹æ³•å¡«å……æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸ªè§„åˆ™ï¼šéé›¶ç¯ç»•å¡«å……ã€‚ åœ¨ä½¿ç”¨ moveTo å’Œ lineTo æè¿°å›¾å½¢æ—¶ï¼Œå¦‚æœæ˜¯æŒ‰é¡ºæ—¶é’ˆç»˜åˆ¶ï¼Œè®¡æ•°å™¨ä¼šåŠ 1ï¼›å¦‚æœæ˜¯é€†æ—¶é’ˆï¼Œè®¡æ•°å™¨ä¼šå‡1ã€‚ å½“å›¾å½¢æ‰€å¤„çš„ä½ç½®ï¼Œè®¡æ•°å™¨çš„ç»“æœä¸º0æ—¶ï¼Œå®ƒå°±ä¸ä¼šè¢«å¡«å……ã€‚ è¿™æ ·è¯´æœ‰ç‚¹å¤æ‚ï¼Œå…ˆçœ‹çœ‹ä¾‹å­ 123456789101112131415161718192021&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // å¤–å±‚çŸ©å½¢ cxt.moveTo(50, 50) cxt.lineTo(250, 50) cxt.lineTo(250, 250) cxt.lineTo(50, 250) cxt.closePath() // å†…å±‚çŸ©å½¢ cxt.moveTo(200, 100) cxt.lineTo(100, 100) cxt.lineTo(100, 200) cxt.lineTo(200, 200) cxt.closePath() cxt.fill()&lt;/script&gt; è¯·çœ‹çœ‹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ç”»äº†2ä¸ªçŸ©å½¢ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰ç”¨ beginPath() æ–¹æ³•å¼€è¾Ÿæ–°è·¯å¾„ã€‚ å†…å±‚çŸ©å½¢æ˜¯é€†æ—¶é’ˆç»˜åˆ¶çš„ï¼Œæ‰€ä»¥å†…å±‚çš„å€¼æ˜¯ -1 ï¼Œå®ƒåˆç»è¿‡å¤–å±‚çŸ©å½¢ï¼Œè€Œå¤–å±‚çŸ©å½¢æ˜¯é¡ºæ—¶é’ˆç»˜åˆ¶ï¼Œæ‰€ä»¥ç»è¿‡å¤–å±‚æ—¶å€¼ +1ï¼Œæœ€ç»ˆå†…å±‚çš„å€¼ä¸º 0 ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å¡«å……ã€‚ æ–‡æœ¬Canvas æä¾›äº†ä¸€äº›æ“ä½œæ–‡æœ¬çš„æ–¹æ³•ã€‚ ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹åœ¨ Canvas ä¸­å¦‚ä½•ç»™æœ¬æ–‡è®¾ç½®æ ·å¼ã€‚ æ ·å¼ fontå’Œ CSS è®¾ç½® font å·®ä¸å¤šï¼ŒCanvas ä¹Ÿå¯ä»¥é€šè¿‡ font è®¾ç½®æ ·å¼ã€‚ è¯­æ³•ï¼š 1cxt.font = &#x27;font-style font-variant font-weight font-size/line-height font-family&#x27; å¦‚æœéœ€è¦è®¾ç½®å­—å· font-sizeï¼Œéœ€è¦åŒäº‹è®¾ç½® font-familyã€‚ 1cxt.font = &#x27;30px å®‹ä½“&#x27; æè¾¹ strokeText()ä½¿ç”¨ strokeText() æ–¹æ³•è¿›è¡Œæ–‡æœ¬æè¾¹ è¯­æ³•ï¼š 1strokeText(text, x, y, maxWidth) text: å­—ç¬¦ä¸²ï¼Œè¦ç»˜åˆ¶çš„å†…å®¹ x: æ¨ªåæ ‡ï¼Œæ–‡æœ¬å·¦è¾¹è¦å¯¹é½çš„åæ ‡ï¼ˆé»˜è®¤å·¦å¯¹é½ï¼‰ y: çºµåæ ‡ï¼Œæ–‡æœ¬åº•è¾¹è¦å¯¹é½çš„åæ ‡ maxWidth: å¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºæ–‡æœ¬æ¸²æŸ“çš„æœ€å¤§å®½åº¦ï¼ˆpxï¼‰ï¼Œå¦‚æœæ–‡æœ¬è¶…å‡º maxWidth è®¾ç½®çš„å€¼ï¼Œæ–‡æœ¬ä¼šè¢«å‹ç¼©ã€‚ 123456789&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.font = &#x27;60px Arial&#x27; // å°†å­—å·è®¾ç½®æˆ 60pxï¼Œæ–¹ä¾¿è§‚å¯Ÿ cxt.strokeText(&#x27;é›·çŒ´&#x27;, 30, 90)&lt;/script&gt; è®¾ç½®æè¾¹é¢œè‰² strokeStyleä½¿ç”¨ strokeStyle è®¾ç½®æè¾¹é¢œè‰²ã€‚ 12345678910&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.font = &#x27;60px Arial&#x27; // å°†å­—å·è®¾ç½®æˆ 60pxï¼Œæ–¹ä¾¿è§‚å¯Ÿ cxt.strokeStyle = &#x27;pink&#x27; // è®¾ç½®æ–‡æœ¬æè¾¹é¢œè‰² cxt.strokeText(&#x27;é›·çŒ´&#x27;, 30, 90)&lt;/script&gt; å¡«å…… fillTextä½¿ç”¨ fillText() å¯å¡«å……æ–‡æœ¬ã€‚ è¯­æ³•å’Œ strokeText() ä¸€æ ·ã€‚ 1fillText(text, x, y, maxWidth) 123456789&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.font = &#x27;60px Arial&#x27; cxt.fillText(&#x27;é›·çŒ´&#x27;, 30, 90)&lt;/script&gt; è®¾ç½®å¡«å……é¢œè‰² fillStyleä½¿ç”¨ fillStyle å¯ä»¥è®¾ç½®æ–‡æœ¬å¡«å……é¢œè‰²ã€‚ 12345678910&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) cxt.font = &#x27;60px Arial&#x27; cxt.fillStyle = &#x27;pink&#x27; cxt.fillText(&#x27;é›·çŒ´&#x27;, 30, 90)&lt;/script&gt; è·å–æ–‡æœ¬é•¿åº¦ measureText()measureText().width æ–¹æ³•å¯ä»¥è·å–æ–‡æœ¬çš„é•¿åº¦ï¼Œå•ä½æ˜¯ px ã€‚ 123456789101112&lt;canvas id=&quot;c&quot; width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) let text = &#x27;é›·çŒ´&#x27; cxt.font = &#x27;bold 40px Arial&#x27; cxt.fillText(text, 40, 80) console.log(cxt.measureText(text).width) // 80&lt;/script&gt; æ°´å¹³å¯¹é½æ–¹å¼ textAlignä½¿ç”¨ textAlign å±æ€§å¯ä»¥è®¾ç½®æ–‡å­—çš„æ°´å¹³å¯¹é½æ–¹å¼ï¼Œä¸€å…±æœ‰5ä¸ªå€¼å¯é€‰ start: é»˜è®¤ã€‚åœ¨æŒ‡å®šä½ç½®çš„æ¨ªåæ ‡å¼€å§‹ã€‚ end: åœ¨æŒ‡å®šåæ ‡çš„æ¨ªåæ ‡ç»“æŸã€‚ left: å·¦å¯¹é½ã€‚ right: å³å¯¹é½ã€‚ center: å±…ä¸­å¯¹é½ã€‚ çº¢çº¿æ˜¯è¾…åŠ©å‚è€ƒçº¿ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;canvas id=&quot;c&quot; width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // ç«–å‘çš„è¾…åŠ©çº¿ï¼ˆå‚è€ƒçº¿ï¼Œåœ¨ç”»å¸ƒä¸­é—´ï¼‰ cxt.moveTo(200, 0) cxt.lineTo(200, 400) cxt.strokeStyle = &#x27;red&#x27; cxt.stroke() cxt.font = &#x27;30px Arial&#x27; // æ¨ªåæ ‡å¼€å§‹ä½å¯¹é½ cxt.textAlign = &#x27;start&#x27; // é»˜è®¤å€¼, cxt.fillText(&#x27;é›·çŒ´ start&#x27;, 200, 40) // æ¨ªåæ ‡ç»“æŸä½å¯¹é½ cxt.textAlign = &#x27;end&#x27; // ç»“æŸå¯¹é½ cxt.fillText(&#x27;é›·çŒ´ end&#x27;, 200, 100) // å·¦å¯¹é½ cxt.textAlign = &#x27;left&#x27; // å·¦å¯¹é½ cxt.fillText(&#x27;é›·çŒ´ left&#x27;, 200, 160) // å³å¯¹é½ cxt.textAlign = &#x27;right&#x27; // å³å¯¹é½ cxt.fillText(&#x27;é›·çŒ´ right&#x27;, 200, 220) // å±…ä¸­å¯¹é½ cxt.textAlign = &#x27;center&#x27; // å³å¯¹é½ cxt.fillText(&#x27;é›·çŒ´ center&#x27;, 200, 280)&lt;/script&gt; ä»ä¸Šé¢çš„ä¾‹å­çœ‹ï¼Œstart å’Œ left çš„æ•ˆæœå¥½åƒæ˜¯ä¸€æ ·çš„ï¼Œend å’Œ right ä¹Ÿå¥½åƒæ˜¯ä¸€æ ·çš„ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„ç¡®ä¸€æ ·ã€‚ä½†åœ¨æŸäº›å›½å®¶æˆ–è€…æŸäº›åœºåˆï¼Œé˜…è¯»æ–‡å­—çš„ä¹ æƒ¯æ˜¯ ä»å³å¾€å·¦ æ—¶ï¼Œstart å°±å’Œ right ä¸€æ ·äº†ï¼Œend å’Œ left ä¹Ÿä¸€æ ·ã€‚è¿™æ˜¯éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ å‚ç›´å¯¹é½æ–¹å¼ textBaselineä½¿ç”¨ textBaseline å±æ€§å¯ä»¥è®¾ç½®æ–‡å­—çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚ åœ¨ä½¿ç”¨ textBaseline å‰ï¼Œéœ€è¦è‡ªè¡Œäº†è§£ css çš„æ–‡æœ¬åŸºçº¿ã€‚ ç”¨ä¸€å¼ ç½‘å›¾è§£é‡Šä¸€ä¸‹åŸºçº¿ textBaseline å¯é€‰å±æ€§ï¼š alphabetic: é»˜è®¤ã€‚æ–‡æœ¬åŸºçº¿æ˜¯æ™®é€šçš„å­—æ¯åŸºçº¿ã€‚ top: æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„é¡¶ç«¯ã€‚ bottom: æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„åº•ç«¯ã€‚ middle: æ–‡æœ¬åŸºçº¿æ˜¯ em æ–¹æ¡†çš„æ­£ä¸­ã€‚ hanging: æ–‡æœ¬åŸºçº¿æ˜¯æ‚¬æŒ‚åŸºçº¿ã€‚ çº¢çº¿æ˜¯è¾…åŠ©å‚è€ƒçº¿ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;canvas id=&quot;c&quot; width=&quot;800&quot; height=&quot;300&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // æ¨ªå‘çš„è¾…åŠ©çº¿ï¼ˆå‚è€ƒçº¿ï¼Œåœ¨ç”»å¸ƒä¸­é—´ï¼‰ cxt.moveTo(0, 150) cxt.lineTo(800, 150) cxt.strokeStyle = &#x27;red&#x27; cxt.stroke() cxt.font = &#x27;20px Arial&#x27; // é»˜è®¤ alphabetic cxt.textBaseline = &#x27;alphabetic&#x27; cxt.fillText(&#x27;é›·çŒ´ alphabetic&#x27;, 10, 150) // é»˜è®¤ top cxt.textBaseline = &#x27;top&#x27; cxt.fillText(&#x27;é›·çŒ´ top&#x27;, 200, 150) // é»˜è®¤ bottom cxt.textBaseline = &#x27;bottom&#x27; cxt.fillText(&#x27;é›·çŒ´ bottom&#x27;, 320, 150) // é»˜è®¤ middle cxt.textBaseline = &#x27;middle&#x27; cxt.fillText(&#x27;é›·çŒ´ middle&#x27;, 480, 150) // é»˜è®¤ hanging cxt.textBaseline = &#x27;hanging&#x27; cxt.fillText(&#x27;é›·çŒ´ hanging&#x27;, 640, 150)&lt;/script&gt; æ³¨æ„ï¼šåœ¨ç»˜åˆ¶æ–‡å­—çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯ä»¥æ–‡å­—çš„å·¦ä¸‹è§’ä½œä¸ºå‚è€ƒç‚¹è¿›è¡Œç»˜åˆ¶ å›¾ç‰‡åœ¨ Canvas ä¸­å¯ä»¥ä½¿ç”¨ drawImage() æ–¹æ³•ç»˜åˆ¶å›¾ç‰‡ã€‚ æ¸²æŸ“å›¾ç‰‡æ¸²æŸ“å›¾ç‰‡çš„æ–¹å¼æœ‰2ä¸­ï¼Œä¸€ç§æ˜¯åœ¨JSé‡ŒåŠ è½½å›¾ç‰‡å†æ¸²æŸ“ï¼Œå¦ä¸€ç§æ˜¯æŠŠDOMé‡Œçš„å›¾ç‰‡æ‹¿åˆ° canvas é‡Œæ¸²æŸ“ã€‚ æ¸²æŸ“çš„è¯­æ³•ï¼š 1drawImage(image, dx, dy) image: è¦æ¸²æŸ“çš„å›¾ç‰‡å¯¹è±¡ã€‚ dx: å›¾ç‰‡å·¦ä¸Šè§’çš„æ¨ªåæ ‡ä½ç½®ã€‚ dy: å›¾ç‰‡å·¦ä¸Šè§’çš„çºµåæ ‡ä½ç½®ã€‚ JSç‰ˆåœ¨ JS é‡ŒåŠ è½½å›¾ç‰‡å¹¶æ¸²æŸ“ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š åˆ›å»º Image å¯¹è±¡ å¼•å…¥å›¾ç‰‡ ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œæˆ ä½¿ç”¨ drawImage() æ–¹æ³•æ¸²æŸ“å›¾ç‰‡ 123456789101112131415161718&lt;canvas id=&quot;c&quot; width=&quot;500&quot; height=&quot;500&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) // 1 åˆ›å»º Image å¯¹è±¡ const image = new Image() // 2 å¼•å…¥å›¾ç‰‡ image.src = &#x27;./images/dog.jpg&#x27; // 3 ç­‰å¾…å›¾ç‰‡åŠ è½½å®Œæˆ image.onload = () =&gt; &#123; // 4 ä½¿ç”¨ drawImage() æ–¹æ³•æ¸²æŸ“å›¾ç‰‡ cxt.drawImage(image, 30, 30) &#125;&lt;/script&gt; DOMç‰ˆ 1234567891011121314151617&lt;style&gt; #dogImg &#123; display: none; &#125;&lt;/style&gt;&lt;img src=&quot;./images/dog.jpg&quot; id=&quot;dogImg&quot;/&gt;&lt;canvas id=&quot;c&quot; width=&quot;500&quot; height=&quot;500&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) const image = document.getElementById(&#x27;dogImg&#x27;) cxt.drawImage(image, 70, 70)&lt;/script&gt; å› ä¸ºå›¾ç‰‡æ˜¯ä» DOM é‡Œè·å–åˆ°çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦åœ¨ window.onload è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä½¿ç”¨ drawImage éƒ½å¯ä»¥æ­£å¸¸æ¸²æŸ“å›¾ç‰‡ã€‚ æœ¬ä¾‹ä½¿ç”¨äº† css çš„æ–¹å¼ï¼ŒæŠŠå›¾ç‰‡çš„ display è®¾ç½®æˆ none ã€‚å› ä¸ºæˆ‘ä¸æƒ³è¢« &lt;img&gt; å½±å“åˆ°æœ¬ä¾‹è®²è§£ã€‚ å®é™…å¼€å‘è¿‡ç¨‹ä¸­æŒ‰ç…§å®é™…æƒ…å†µè®¾ç½®å³å¯ã€‚ è®¾ç½®å›¾ç‰‡å®½é«˜å‰é¢çš„ä¾‹å­éƒ½æ˜¯ç›´æ¥åŠ è½½å›¾ç‰‡ï¼Œå›¾ç‰‡é»˜è®¤çš„å®½é«˜æ˜¯å¤šå°‘å°±åŠ è½½å¤šå°‘ã€‚ å¦‚æœéœ€è¦æŒ‡å®šå›¾ç‰‡å®½é«˜ï¼Œå¯ä»¥åœ¨å‰é¢çš„åŸºç¡€ä¸Šå†æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼š 1drawImage(image, dx, dy, dw, dh) imageã€ dxã€ dy çš„ç”¨æ³•å’Œå‰é¢ä¸€æ ·ã€‚ dw ç”¨æ¥å®šä¹‰å›¾ç‰‡çš„å®½åº¦ï¼Œdh å®šä¹‰å›¾ç‰‡çš„é«˜åº¦ã€‚ 12345678910111213&lt;canvas id=&quot;c&quot; width=&quot;500&quot; height=&quot;500&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) const image = new Image() image.src = &#x27;./images/dog.jpg&#x27; image.onload = () =&gt; &#123; cxt.drawImage(image, 30, 30, 100, 100) &#125;&lt;/script&gt; æˆ‘æŠŠå›¾ç‰‡çš„å°ºå¯¸è®¾ä¸º 100px * 100pxï¼Œå›¾ç‰‡çœ‹ä¸Šå»æ¯”ä¹‹å‰å°±å°äº†å¾ˆå¤šã€‚ æˆªå–å›¾ç‰‡æˆªå›¾å›¾ç‰‡åŒæ ·ä½¿ç”¨drawImage() æ–¹æ³•ï¼Œåªä¸è¿‡ä¼ å…¥çš„å‚æ•°æ•°é‡æ¯”ä¹‹å‰éƒ½å¤šï¼Œè€Œä¸”é¡ºåºä¹Ÿæœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚ 1drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh) ä»¥ä¸Šå‚æ•°ç¼ºä¸€ä¸å¯ image: å›¾ç‰‡å¯¹è±¡ sx: å¼€å§‹æˆªå–çš„æ¨ªåæ ‡ sy: å¼€å§‹æˆªå–çš„çºµåæ ‡ sw: æˆªå–çš„å®½åº¦ sh: æˆªå–çš„é«˜åº¦ dx: å›¾ç‰‡å·¦ä¸Šè§’çš„æ¨ªåæ ‡ä½ç½® dy: å›¾ç‰‡å·¦ä¸Šè§’çš„çºµåæ ‡ä½ç½® dw: å›¾ç‰‡å®½åº¦ dh: å›¾ç‰‡é«˜åº¦ 12345678910111213&lt;canvas id=&quot;c&quot; width=&quot;500&quot; height=&quot;500&quot; style=&quot;border: 1px solid #ccc;&quot;&gt;&lt;/canvas&gt;&lt;script&gt; const cnv = document.getElementById(&#x27;c&#x27;) const cxt = cnv.getContext(&#x27;2d&#x27;) const image = new Image() image.src = &#x27;./images/dog.jpg&#x27; image.onload = () =&gt; &#123; cxt.drawImage(image, 0, 0, 100, 100, 30, 30, 200, 200) &#125;&lt;/script&gt; æ€»ç»“æœ¬æ–‡ä¸»è¦è®²è§£äº†åœ¨ Canvas ä¸­ç»˜åˆ¶ä¸€äº›åŸºç¡€å›¾å½¢ï¼Œè¿˜æœ‰ä¸€äº›åŸºç¡€æ ·å¼è®¾ç½®ã€‚ è¿˜æœ‰æ›´å¤šé«˜çº§çš„ç©æ³•ä¼šåœ¨ä¹‹åçš„æ–‡ç« ä¸­è®²åˆ°ï¼Œæ¯”å¦‚æ¸å˜ã€æŠ•å½±ã€æ»¤é•œç­‰ç­‰ã€‚ ä»£ç ä»“åº“â­é›·çŒ´ Canvas æ¨èé˜…è¯»ğŸ‘ã€ŠFabric.js ä»å…¥é—¨åˆ°è†¨èƒ€ã€‹ ğŸ‘ã€Šã€Three.jsã€èµ·é£ï¼ã€‹ ğŸ‘ã€Šconsole.logä¹Ÿèƒ½æ’å›¾ï¼ï¼ï¼ã€‹ ğŸ‘ã€Šçº¯csså®ç°117ä¸ªLoadingæ•ˆæœã€‹ ğŸ‘ã€Šè§†å·®ç‰¹æ•ˆçš„åŸç†å’Œå®ç°æ–¹æ³•ã€‹ ğŸ‘ã€Šè¿™18ä¸ªç½‘ç«™èƒ½è®©ä½ çš„é¡µé¢èƒŒæ™¯ç‚«é…·èµ·æ¥ã€‹ ç‚¹èµ + å…³æ³¨ + æ”¶è— &#x3D; å­¦ä¼šäº†","tags":["Canvas"],"categories":["Canvas"]},{"title":"SVGå¿«é€Ÿå…¥é—¨ï¼ˆå›¾è§£ç‰ˆï¼‰","path":"/2024/04/12/SVGå¿«é€Ÿå…¥é—¨ï¼ˆå›¾è§£ç‰ˆï¼‰/","content":"åŸæ–‡åœ°å€SVG ä»å…¥é—¨åˆ°åæ‚”ï¼Œæ€ä¹ˆä¸æ—©ç‚¹å­¦èµ·æ¥ï¼ˆå›¾è§£ç‰ˆï¼‰ - æ˜é‡‘ åœ¨æˆ‘æ¥è§¦ SVG ä¹‹å‰ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¾ˆé«˜æ·±çš„ä¸œè¥¿ï¼Œæœ‰ç‚¹ææƒ§ã€‚æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦ SVG æ˜¯åœ¨ iconfontç½‘ç«™ï¼Œæˆ‘æ²¡ç†å®ƒæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œåæ­£å°±è·Ÿç€æ•™ç¨‹ç”¨ã€‚ç¬¬äºŒæ¬¡æ¥è§¦å°±æ˜¯åœ¨ ã€ŠCSSæ­ç§˜ï¼ˆå›¾çµå‡ºå“ï¼‰ã€‹ è¿™æœ¬ä¹¦ï¼Œé‡Œé¢ä¼šè®²åˆ° SVG ç›¸å…³çš„å†…å®¹ï¼Œè€Œæˆ‘é€‰æ‹©äº†è·³è¿‡è¿™éƒ¨åˆ†å†…å®¹ã€‚ã€‚ã€‚ ä¹‹åæ˜¯æ€ä¹ˆå­¦ä¼šçš„æˆ‘ä¹Ÿå¿˜äº†ã€‚ æœ€è¿‘æ—¶é—´æ¯”è¾ƒå¤šï¼Œå°±æŠŠæˆ‘æ‡‚çš„çŸ¥è¯†ç”¨äººè¯æ•´ç†å‡ºæ¥ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€‚ æœ¬æ–‡ä¸»è¦æŠŠ â€œå¯è§†â€ æ–¹é¢çš„å†…å®¹æ•´ç†å‡ºæ¥ï¼Œæ“ä½œäº¤äº’æ–¹é¢(åŠ¨ç”»ã€äº¤äº’äº‹ä»¶ç­‰) çš„å†…å®¹ç•™åˆ°ä¸‹ä¸€ç¯‡~ ä»€ä¹ˆæ˜¯SVGåœ¨å­¦ä¹  SVG ä¹‹å‰ï¼Œé¦–å…ˆè¦äº†è§£ ä½å›¾ å’Œ çŸ¢é‡å›¾ çš„åŒºåˆ«ã€‚ ç®€å•æ¥è¯´ï¼š ä½å›¾ï¼šæ”¾å¤§ä¼šå¤±çœŸå›¾åƒè¾¹ç¼˜æœ‰é”¯é½¿ï¼›æ˜¯ç”±åƒç´ ç‚¹ç»„æˆï¼›å‰ç«¯çš„ Canvas å°±æ˜¯ä½å›¾æ•ˆæœã€‚ çŸ¢é‡å›¾ï¼šæ”¾å¤§ä¸ä¼šå¤±çœŸï¼›ä½¿ç”¨ XML æè¿°å›¾å½¢ã€‚ æˆ‘åœ¨ çŸ¥ä¹ ä¸Šæ‰¾äº†ä¸€ä¸ªå›¾å¯¹è¯´æ˜ä¸€ä¸‹ã€‚ å·¦è¾¹æ˜¯ä½å›¾ï¼Œå³è¾¹æ˜¯çŸ¢é‡å›¾ é‚£ä¹ˆ SVG æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒæ˜¯çŸ¢é‡å›¾çš„å…¶ä¸­ä¸€ç§æ ¼å¼ã€‚å®ƒæ˜¯ç”¨ XML æ¥æè¿°å›¾å½¢çš„ã€‚ å¯¹äºåˆå­¦ SVG çš„å‰ç«¯æ¥è¯´ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸º â€œSVG æ˜¯ä¸€å¥—æ–°æ ‡ç­¾â€ã€‚ æ‰€ä»¥å¯ä»¥ä½¿ç”¨ CSS æ¥è®¾ç½®æ ·å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ JS å¯¹ SVG è¿›è¡Œæ“ä½œã€‚ SVGçš„ä½¿ç”¨æ–¹å¼ä½¿ç”¨æ–¹æ³•SVG çš„ä½¿ç”¨æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæˆ‘æœ€æ¨èç›´æ¥åœ¨ HTML ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å½“ HTML æ ‡ç­¾ä½¿ç”¨ã€‚ æˆ‘åœ¨ ã€ŠSVG åœ¨å‰ç«¯çš„7ç§ä½¿ç”¨æ–¹æ³•ã€‹ é‡Œè®°å½•äº†å‡ ç§ä½¿ç”¨æ–¹æ³•ï¼š åœ¨æµè§ˆå™¨ç›´æ¥æ‰“å¼€ å†…åµŒåˆ° HTML ä¸­ï¼ˆæ¨èâ­â­â­ï¼‰ CSS èƒŒæ™¯å›¾ï¼ˆæ¨èâ­ï¼‰ ä½¿ç”¨ img æ ‡ç­¾å¼•å…¥ï¼ˆæ¨èâ­ï¼‰ ä½¿ç”¨ iframe æ ‡ç­¾å¼•å…¥ï¼ˆä¸æ¨èâŒï¼‰ ä½¿ç”¨ embed æ ‡ç­¾å¼•å…¥ï¼ˆä¸æ¨èâŒï¼‰ ä½¿ç”¨ object æ ‡ç­¾å¼•å…¥ï¼ˆä¸æ¨èâŒï¼‰ SVGé»˜è®¤å®½é«˜åœ¨ HTML ä¸­ä½¿ç”¨ SVG ï¼Œç›´æ¥ç”¨ &lt;svg&gt; æ ‡ç­¾å³å¯ã€‚ 1&lt;svg&gt;&lt;/svg&gt; åœ¨ä¸ç»™ &lt;svg&gt; è®¾ç½®å®½é«˜æ—¶ï¼Œå®ƒçš„é»˜è®¤å®½åº¦æ˜¯ 300px ï¼Œé»˜è®¤é«˜åº¦æ˜¯ 150px ã€‚è¿™ç‚¹å’Œ &lt;canvas&gt; æ˜¯ä¸€æ ·çš„ã€‚ åŸºç¡€å›¾å½¢HTML çš„å…ƒç´ å¤§å¤šæ•°é»˜è®¤éƒ½æ˜¯çŸ©å½¢ï¼ŒSVG åœ¨å½¢çŠ¶ä¸Šæ›´åŠ ä¸°å¯Œã€‚ çŸ©å½¢ rectçŸ©å½¢ä½¿ç”¨ &lt;rect&gt; æ ‡ç­¾ï¼Œé»˜è®¤å¡«å……è‰²æ˜¯é»‘è‰²ï¼Œå½“åªè®¾ç½®å®½é«˜æ—¶ï¼Œæ¸²æŸ“å‡ºæ¥çš„çŸ©å½¢å°±æ˜¯é»‘è‰²çš„çŸ©å½¢ã€‚ ç¨åè¿˜ä¼šè¯´æ˜å¦‚ä½•è®¾ç½®æ ·å¼ï¼ˆæ¯”å¦‚è¾¹æ¡†ã€å¡«å……è‰²ç­‰ï¼‰ï¼Œè¿™é‡Œåªåˆ—å‡ºçŸ©å½¢åŸºç¡€å±æ€§ï¼š x: å·¦ä¸Šè§’xè½´åæ ‡ y: å·¦ä¸Šè§’yè½´åæ ‡ width: å®½åº¦ height: é«˜åº¦ rx: åœ†è§’ï¼Œxè½´çš„åŠå¾„ ry: åœ†è§’ï¼Œyè½´çš„åŠå¾„ åŸºç¡€æ¬¾ï¼ˆåªè®¾ç½®å®½é«˜ï¼‰ 123&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect width=&quot;200&quot; height=&quot;100&quot;&gt;&lt;/rect&gt;&lt;/svg&gt; è®¾ç½®çŸ©å½¢ä½ç½®é€šè¿‡ x å’Œ y å¯ä»¥è®¾ç½®çŸ©å½¢ä½ç½® 123456789&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;30&quot; y=&quot;20&quot; width=&quot;200&quot; height=&quot;100&quot; &gt; &lt;/rect&gt;&lt;/svg&gt; åœ†è§’çŸ©å½¢ 123456789&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect width=&quot;200&quot; height=&quot;100&quot; rx=&quot;20&quot; ry=&quot;40&quot; &gt; &lt;/rect&gt;&lt;/svg&gt; rx æ˜¯è®¾ç½®xè½´çš„åŠå¾„ï¼Œry è®¾ç½®yè½´çš„åŠå¾„ã€‚ rx çš„æœ€å¤§å€¼æ˜¯çŸ©å½¢å®½åº¦çš„ä¸€åŠï¼Œry çš„æœ€å¤§å€¼æ˜¯çŸ©å½¢é«˜åº¦çš„ä¸€åŠã€‚ å½“åªè®¾ç½® rx æˆ–è€… ry å…¶ä¸­ä¸€ä¸ªå€¼æ—¶ï¼Œå¦ä¸€ä¸ªå±æ€§ä¹Ÿä¼šä½¿ç”¨ä¸€æ ·çš„å€¼ã€‚ æ¯”å¦‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect width=&quot;200&quot; height=&quot;100&quot; rx=&quot;30&quot; &gt; &lt;/rect&gt;&lt;/svg&gt; æ­¤æ—¶ rx å’Œ ry éƒ½æ˜¯ 30ã€‚ rectç‰ˆçš„åœ†å½¢åœ†è§’çš„æ¦‚å¿µå’Œ CSS çš„ border-radius æœ‰ç‚¹åƒï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œç”¨ &lt;rect&gt; ä¹Ÿå¯ä»¥ç”»åœ†å½¢å‘¢ï¼Ÿ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect width=&quot;100&quot; height=&quot;100&quot; rx=&quot;50&quot; &gt; &lt;/rect&gt;&lt;/svg&gt; åªè¦æŠŠå®½é«˜è®¾æˆä¸€æ ·ï¼Œåœ†è§’è®¾æˆå®½åº¦çš„ä¸€åŠå°±èƒ½å®ç°åœ†å½¢ã€‚è¿™æ˜¯åœ¨ HTML é‡Œçš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚ åŒç†ä¹Ÿç”¨ &lt;rect&gt; å®ç°æ¤­åœ†ï¼Œä½†åœ¨ SVG ä¸­æ˜¯ä¸ä¼šè¿™æ ·åšçš„ã€‚å› ä¸º SVG é‡Œæœ‰ä¸“é—¨çš„åœ†å½¢å’Œæ¤­åœ†çš„æ ‡ç­¾ã€‚ åœ†å½¢ circleåœ†å½¢ä½¿ç”¨ &lt;circle&gt; æ ‡ç­¾ï¼ŒåŸºç¡€å±æ€§æœ‰ï¼š cx: åœ†å¿ƒåœ¨xè½´çš„åæ ‡ cy: åœ†å¿ƒåœ¨yè½´çš„åæ ‡ r: åŠå¾„ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;circle cx=&quot;60&quot; cy=&quot;80&quot; r=&quot;50&quot; &gt; &lt;/circle&gt;&lt;/svg&gt; æ¤­åœ† ellipseæ¤­åœ†ä½¿ç”¨ &lt;ellipse&gt; æ ‡ç­¾ï¼ŒåŸºç¡€å±æ€§æœ‰ï¼š cx: åœ†å¿ƒåœ¨xè½´çš„åæ ‡ cy: åœ†å¿ƒåœ¨yè½´çš„åæ ‡ rx: xè½´çš„åŠå¾„ ry: yè½´çš„åŠå¾„ 123456789&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;ellipse cx=&quot;100&quot; cy=&quot;40&quot; rx=&quot;80&quot; ry=&quot;30&quot; &gt; &lt;/ellipse&gt;&lt;/svg&gt; &lt;ellipse&gt; å’Œ &lt;circle&gt; å·®ä¸å¤šï¼Œåªæ˜¯å°†åŠå¾„æ‹†æˆxè½´å’Œyè½´çš„ã€‚ ç›´çº¿ lineç›´çº¿ä½¿ç”¨ &lt;line&gt; æ ‡ç­¾ï¼ŒåŸºç¡€å±æ€§æœ‰ï¼š x1: èµ·å§‹ç‚¹xåæ ‡ y1: èµ·å§‹ç‚¹yåæ ‡ x2: ç»“æŸç‚¹xåæ ‡ y2: ç»“æŸç‚¹yåæ ‡ stroke: æè¾¹é¢œè‰² 12345678910&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;line x1=&quot;30&quot; y1=&quot;40&quot; x2=&quot;200&quot; y2=&quot;180&quot; stroke=&quot;blue&quot; &gt; &lt;/line&gt;&lt;/svg&gt; åªæœ‰ x1 å’Œ x2 ï¼Œæ²¡æœ‰ x3 ï¼Œä¹Ÿæ²¡æœ‰ y3 ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;line&gt; éœ€è¦ä½¿ç”¨è®¾ç½® stroke å±æ€§æ‰ä¼šæœ‰ç»˜åˆ¶æ•ˆæœã€‚ æŠ˜çº¿ polylineä½¿ç”¨ &lt;polyline&gt; å¯ä»¥ç»˜åˆ¶æŠ˜çº¿ï¼ŒåŸºç¡€å±æ€§æœ‰ï¼š points: ç‚¹é›† stroke: æè¾¹é¢œè‰² fill: å¡«å……é¢œè‰² 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;polyline points=&quot;10 10, 200 80, 230 230&quot; stroke=&quot;#000&quot; fill=&quot;none&quot; &gt; &lt;/polyline&gt;&lt;/svg&gt; points æ¥å—çš„å€¼æ˜¯ä¸€ä¸²ç‚¹é›†ï¼Œç‚¹é›†æ˜¯ä¸¤ä¸¤ä¸€ç»„è¡¨ç¤ºä¸€ä¸ªåæ ‡ã€‚ å…¶å®ç‚¹é›†å®Œå…¨ä¸éœ€è¦ç”¨é€—å·éš”å¼€ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä½¿ç”¨äº†é€—å·éš”å¼€ï¼Œå®Œå…¨æ˜¯ä¸ºäº†è®©è‡ªå·±é˜…è¯»ä»£ç æ—¶æ¯”ä»·æ˜“æ‡‚ã€‚ä¸€ä¸ªé€—å·åˆ†éš”ä¸€ä¸ª xy åæ ‡ã€‚ åœ¨ç»˜åˆ¶æŠ˜çº¿æ˜¯ï¼Œæˆ‘é€šå¸¸æ˜¯å°† fill è®¾ç½®æˆ none ï¼Œå› ä¸º fill é»˜è®¤å€¼æ˜¯é»‘è‰²ï¼Œå¦‚æœä¸è®¾ç½®æˆ none ä¼šå‡ºç°ä»¥ä¸‹æ•ˆæœï¼š 1234567&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;polyline points=&quot;10 10, 200 80, 230 230&quot; stroke=&quot;#000&quot; &gt; &lt;/polyline&gt;&lt;/svg&gt; å°† fill è®¾ç½®æˆ none åï¼Œå¿…é¡»è®¾ç½® stroke ä¸ºä¸€ä¸ªæœ‰é¢œè‰²çš„å€¼ï¼Œä¸ç„¶ä¸ä¼šæœ‰æ¸²æŸ“æ•ˆæœã€‚ å¤šè¾¹å½¢ polygonå¤šè¾¹å½¢ä½¿ç”¨ &lt;polygon&gt; æ ‡ç­¾ï¼ŒåŸºç¡€å±æ€§å’Œ &lt;polyline&gt; å·®ä¸å¤šï¼š points: ç‚¹é›† stroke: æè¾¹é¢œè‰² fill: å¡«å……é¢œè‰² &lt;polygon&gt; ä¼šè‡ªåŠ¨é—­åˆï¼ˆè‡ªåŠ¨å°†èµ·å§‹ç‚¹å’Œç»“æŸç‚¹é“¾æ¥èµ·æ¥ï¼‰ã€‚ 123&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;polygon points=&quot;10 10, 200 80, 230 230&quot;&gt;&lt;/polygon&gt;&lt;/svg&gt; ç›´çº¿è·¯å¾„ pathå…¶å®åœ¨ SVG é‡Œï¼Œæ‰€æœ‰åŸºæœ¬å›¾å½¢éƒ½æ˜¯ &lt;path&gt; çš„ç®€å†™ã€‚æ‰€æœ‰æè¿°è½®å»“çš„æ•°æ®éƒ½æ”¾åœ¨ d å±æ€§é‡Œï¼Œd æ˜¯ data çš„ç®€å†™ã€‚ d å±æ€§åˆåŒ…æ‹¬ä»¥ä¸‹ä¸»è¦çš„å…³é”®å­—ï¼ˆæ³¨æ„å¤§å°å†™ï¼ï¼‰ï¼š M: èµ·å§‹ç‚¹åæ ‡ï¼Œmoveto çš„æ„æ€ã€‚æ¯ä¸ªè·¯å¾„éƒ½å¿…é¡»ä»¥ M å¼€å§‹ã€‚M ä¼ å…¥ x å’Œ y åæ ‡ï¼Œç”¨é€—å·æˆ–è€…ç©ºæ ¼éš”å¼€ã€‚ L: è½®å»“åæ ‡ï¼Œlineto çš„æ„æ€ã€‚L æ˜¯è·Ÿåœ¨ M åé¢çš„ã€‚å®ƒä¹Ÿæ˜¯å¯ä»¥ä¼ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªåæ ‡ã€‚å¤§å†™çš„ L æ˜¯ä¸€ä¸ªç»å¯¹ä½ç½®ã€‚ l: è¿™æ˜¯å°å†™ Lï¼Œå’Œ L çš„ä½œç”¨å·®ä¸å¤šï¼Œä½† l æ˜¯ä¸€ä¸ªç›¸å¯¹ä½ç½®ã€‚ H: å’Œä¸Šä¸€ä¸ªç‚¹çš„Yåæ ‡ç›¸ç­‰ï¼Œæ˜¯ horizontal lineto çš„æ„æ€ã€‚å®ƒæ˜¯ä¸€ä¸ªç»å¯¹ä½ç½®ã€‚ h: å’Œ H å·®ä¸å¤šï¼Œä½† h ä½¿ç”¨çš„æ˜¯ç›¸å¯¹å®šä½ã€‚ V: å’Œä¸Šä¸€ä¸ªç‚¹çš„Xåæ ‡ç›¸ç­‰ï¼Œæ˜¯vertical lineto çš„æ„æ€ã€‚å®ƒæ˜¯ä¸€ä¸ªç»å¯¹ä½ç½®ã€‚ v: è¿™æ˜¯ä¸€ä¸ªå°å†™çš„ v ï¼Œå’Œå¤§å†™ V çš„å·®ä¸å¤šï¼Œä½†å°å†™ v æ˜¯ä¸€ä¸ªç›¸å¯¹å®šä½ã€‚ Z: å…³é—­å½“å‰è·¯å¾„ï¼Œclosepath çš„æ„æ€ã€‚å®ƒä¼šç»˜åˆ¶ä¸€æ¡ç›´çº¿å›åˆ°å½“å‰å­è·¯å¾„çš„èµ·ç‚¹ã€‚ æ¦‚å¿µè¯´äº†ä¸€å †ï¼Œè¿˜æ˜¯ç”¨å†™ demo çš„æ–¹å¼æ¥å±•ç¤ºä¼šæ›´åŠ ç›´è§‚ã€‚ åŸºç¡€ç‰ˆ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 L 50 40 L 100 10&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œé€šè¿‡1ä¸ª M å’Œ3ä¸ª L æç»˜äº†3ä¸ªç‚¹ã€‚ ä½¿ç”¨ stroke è®¾ç½®æè¾¹çš„é¢œè‰²ï¼Œä½¿ç”¨ fill=&quot;none&quot; å°†å¡«å……è‰²æ”¹æˆé€æ˜ã€‚æœ€åå°±å½¢æˆä¸Šå›¾çš„æ•ˆæœã€‚ ç®€å†™å¦‚æœå…¨æ˜¯ä½¿ç”¨å¤§å†™ L æ¥æè¿°æ¯ä¸ªç‚¹çš„ä½ç½®ï¼Œé‚£å¯ä»¥æŠŠ L ä¹Ÿå»æ‰ï¼Œç›´æ¥å†™ç‚¹é›†ã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 50 40 100 10&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; ä¸Šé¢çš„ d=&quot;M 10 10 50 40 100 10&quot; ç­‰åŒäº d=&quot;M 10 10 L 50 40 L 100 10&quot; ã€‚ é—­åˆè·¯å¾„åœ¨ d çš„æ•°æ®é›†é‡Œï¼Œä½¿ç”¨ Z å¯ä»¥é—­åˆè·¯å¾„ã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 L 50 40 L 100 10 Z&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; è½®å»“åæ ‡ç›¸å¯¹ä½ç½® lä½¿ç”¨ L çš„å°å†™æ–¹å¼ l å¯ä»¥å®ç°ç›¸å¯¹ä½ç½®å†™æ³•ã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 l 50 40 l 100 10 Z&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œd=&quot;M 10 10 l 50 40 l 100 10 Z&quot; ç­‰åŒäº d=&quot;M 10 10 L 60 50 L 160 60 Z&quot; ã€‚ l é‡Œçš„å‚æ•°ä¼šä¸å‰ä¸€ä¸ªç‚¹çš„ x å’Œ y è¿›è¡Œç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„åæ ‡ã€‚ H å’Œ hH åé¢åªéœ€ä¼ å…¥ Xåæ ‡ å³å¯ï¼Œå®ƒçš„ Yåæ ‡ ä¸å‰ä¸€ä¸ªç‚¹ç›¸åŒã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 H 100&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œd=&quot;M 10 10 H 100&quot; ç­‰åŒäº d=&quot;M 10 10 L 100 10&quot; è€Œ h å’Œ H çš„ä½œç”¨å·®ä¸å¤šï¼Œåªä¸è¿‡ä¼ å…¥çš„æ•°æ®ä¼šå’Œå‰ä¸€ä¸ªç‚¹çš„ Xåæ ‡ ç›¸åŠ ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ç‚¹ï¼Œè¿™å°±æ˜¯ç›¸å¯¹ä½ç½®ã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 h 100&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; å¯ä»¥è®² H å’Œ h çš„ä¾‹å­äº§ç”Ÿçš„å›¾ç‰‡å¯¹ç…§ä¸€ä¸‹ã€‚ V å’Œ vV åé¢åªéœ€ä¼ å…¥ Yåæ ‡ å³å¯ï¼Œå®ƒçš„ Xåæ ‡ ä¸å‰ä¸€ä¸ªç‚¹ç›¸åŒã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 V 100&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; v å’Œ V çš„ä½œç”¨å·®ä¸å¤šï¼Œå°å†™ v æ˜¯ä¸€ä¸ªç›¸å¯¹ä½ç½®ã€‚ 12345678&lt;svg width=&quot;300&quot; height=&quot;300&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;path d=&quot;M 10 10 v 100&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; &gt; &lt;/path&gt;&lt;/svg&gt; æ›²çº¿ - æ¤­åœ†å¼§è·¯å¾„ pathåœ¨ SVG ä¸­ï¼Œç”»æ›²çº¿å…¶å®æœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚æˆ‘è§‰å¾—æœ€ç®€å•çš„æ˜¯ æ¤­åœ†å¼§æ›²çº¿ï¼Œå…¶å®è¿˜æœ‰ è´å¡å°”æ›²çº¿ã€ä¸‰æ¬¡è´å¡å°”æ›²çº¿ ç­‰ä¸€ç³»åˆ—å¤æ‚çš„æ›²çº¿ã€‚ä½†æˆ‘è§‰å¾—è¿™å¯¹åˆå­¦è€…æ¥è¯´å¯èƒ½ä¸€ä¸‹å­éš¾ä»¥æ¥å—ï¼Œæ‰€ä»¥æˆ‘åœ¨ ã€ŠCanvas ä»å…¥é—¨åˆ°åŠæœ‹å‹æ”¾å¼ƒï¼ˆå›¾è§£ç‰ˆï¼‰ã€‹ é‡Œä¹Ÿæ²¡å†™ã€‚ä¹‹åæ‰“ç®—å†å†™ä¸€ç¯‡è´å¡å°”æ›²çº¿ç›¸å…³çš„æ–‡ç« éª—ç‚¹èµ~ ä»€ä¹ˆæ˜¯æ¤­åœ†å¼§ï¼Ÿå‰é¢è®²åˆ°çš„ ç›´çº¿è·¯å¾„ path æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œå®ƒæŠŠæ‰€æœ‰ç‚¹éƒ½ç”¨ç›´çº¿è¿æ¥èµ·æ¥å³å¯ã€‚åªè¦ç¡®å®š2ä¸ªç‚¹å°±å¯ä»¥ç”»å‡ºä¸€æ ¹çº¿æ®µã€‚ ä½†å¦‚æœåªç”¨ä¸¤ä¸ªç‚¹ï¼Œå¯ä»¥äº§ç”Ÿæ— æ•°æ¡æ›²çº¿ã€‚æ‰€ä»¥éœ€è¦æ·»åŠ æ›´å¤šçš„å‚æ•°æ¥ç¡®å®šå¦‚ä½•ç»˜åˆ¶ä¸€æ¡æ›²çº¿ã€‚è€Œåœ¨ç§ç§æ–¹æ³•ä¸­ï¼Œæˆ‘è®¤ä¸º æ¤­åœ†å¼§æ›²çº¿ æ˜¯æœ€ç®€å•çš„ã€‚ æ¤­åœ†å¼§æ›²çº¿ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å’Œæ¤­åœ†æœ‰å…³çš„ã€‚å¦‚æœåœ¨æ¤­åœ†ä¸Šé€‰æ‹©ä¸¤ä¸ªç‚¹ï¼Œå°±å¯ä»¥æˆªå–2æ¡æ›²çº¿ã€‚ æ¯”å¦‚è¿™æ ·ï¼Œçº¢çº¿å¤„å°±å°†æ¤­åœ†æˆªå–æˆ2æ®µå¼§çº¿ã€‚ æ¤­åœ†å¼§å…¬å¼åœ¨ SVG ä¸­å¯ä»¥ä½¿ç”¨ path é…åˆ Aå±æ€§ ç»˜åˆ¶æ¤­åœ†å¼§ã€‚ 1A(rx, ry, xr, laf, sf, x, y) rx: æ¤­åœ†Xè½´åŠå¾„ ry: æ¤­åœ†Yè½´åŠå¾„ xr: æ¤­åœ†æ—‹è½¬è§’åº¦ laf: æ˜¯å¦é€‰æ‹©å¼§é•¿è¾ƒé•¿çš„é‚£ä¸€æ®µã€‚0: çŸ­è¾¹ï¼ˆå°äº180åº¦ï¼‰; 1: é•¿è¾¹ï¼ˆå¤§äºç­‰äº180åº¦ï¼‰ sf: æ˜¯å¦é¡ºæ—¶é’ˆç»˜åˆ¶ã€‚0: é€†æ—¶é’ˆ; 1: é¡ºæ—¶é’ˆ x: ç»ˆç‚¹Xè½´åæ ‡ y: ç»ˆç‚¹Yè½´åæ ‡ ä¸Šé¢çš„å…¬å¼ä¸­å¹¶æ²¡æœ‰å¼€å§‹ç‚¹ï¼Œå¼€å§‹ç‚¹æ˜¯ç”± M å†³å®šçš„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç¡®å®š2ä¸ªç‚¹ï¼Œå†ç¡®å®šæ¤­åœ†åŠå¾„ï¼Œå°±å¯ç”»å‡º2ä¸ªæ¤­åœ† é€šè¿‡å¼€å§‹ç‚¹å’Œç»“æŸç‚¹è£åˆ‡ï¼Œå¯ä»¥å¾—åˆ°4æ¡å¼§çº¿ï¼Œä¹Ÿå°±æ˜¯è¯´2ä¸ªç‚¹å¯ä»¥ç¡®å®š2ä¸ªç›¸åŒæ—‹è½¬è§’åº¦çš„æ¤­åœ†çš„ä½ç½®ï¼Œå¯ä»¥åˆ‡å‡º4æ¡å¼§çº¿ã€‚ 1234567891011121314151617181920212223242526272829&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- çº¢ --&gt; &lt;path d=&quot;M 125 75 A 100 50 0 0 0 225 125&quot; stroke=&quot;red&quot; fill=&quot;none&quot; /&gt; &lt;!-- é»„ --&gt; &lt;path d=&quot;M 125 75 A 100 50 0 0 1 225 125&quot; stroke=&quot;yellow&quot; fill=&quot;none&quot; /&gt; &lt;!-- è“ --&gt; &lt;path d=&quot;M 125 75 A 100 50 0 1 0 225 125&quot; stroke=&quot;blue&quot; fill=&quot;none&quot; /&gt; &lt;!-- ç»¿ --&gt; &lt;path d=&quot;M 125 75 A 100 50 0 1 1 225 125&quot; stroke=&quot;green&quot; fill=&quot;none&quot; /&gt;&lt;/svg&gt; ç»˜åˆ¶å¼§çº¿æ˜¯æ¯”è¾ƒæŠ½è±¡çš„ï¼Œé€šå¸¸æˆ‘æ˜¯ä¸ä¼šæ‰‹åŠ¨ç»˜åˆ¶çš„ï¼Œæˆ‘ä¼šä½¿ç”¨ Illustrator ç»˜åˆ¶ï¼Œç„¶åç”Ÿæˆ SVG æ¥ä½¿ç”¨ã€‚ è®¾ç½®æ ·å¼çš„æ–¹æ³•è®¾ç½® SVG å…ƒç´ æ ·å¼å…¶å®å’Œ CSS å·®ä¸å¤šï¼Œå¸¸è§çš„æ–¹æ³•æœ‰4ç§ã€‚ å±æ€§æ ·å¼ å†…è”æ ·å¼ å†…éƒ¨æ ·å¼ å¤–éƒ¨æ ·å¼ å±æ€§æ ·å¼ç›´æ¥åœ¨å…ƒç´ å±æ€§ä¸Šè®¾ç½®æ ·å¼ï¼Œæ¯”å¦‚å°†çŸ©å½¢å¡«å……è‰²æ”¹æˆç²‰çº¢ 123456789&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;pink&quot; /&gt;&lt;/svg&gt; å†…è”æ ·å¼æŠŠæ‰€æœ‰æ ·å¼å†™åœ¨ style å±æ€§é‡Œ 123456789&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; style=&quot;fill: pink;&quot; /&gt;&lt;/svg&gt; å†…éƒ¨æ ·å¼å°†æ ·å¼å†™åœ¨ &lt;style&gt; æ ‡ç­¾é‡Œ 123456789101112131415&lt;style&gt; .rect &#123; fill: pink; &#125;&lt;/style&gt;&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; class=&quot;rect&quot; /&gt;&lt;/svg&gt; å¤–éƒ¨æ ·å¼å°†æ ·å¼å†™åœ¨ .css æ–‡ä»¶é‡Œï¼Œç„¶ååœ¨é¡µé¢ä¸­å¼•å…¥è¯¥ CSS æ–‡ä»¶ã€‚ å¸¸ç”¨æ ·å¼è®¾ç½®SVG è®¾ç½®æ ·å¼çš„å±æ€§å’Œ CSS ç¨å¾®æœ‰ç‚¹ä¸åŒï¼Œä½†åˆå­¦æ—¶ä¸éœ€è¦äº†è§£å¤ªæ·±å…¥ï¼Œæˆ‘ä»¬åªéœ€å°†å¸¸ç”¨çš„å­¦ä¼šå³å¯ã€‚ æ¯”å¦‚å¡«å……è‰²ã€æè¾¹é¢œè‰²ç­‰ã€‚ è¯´åˆ°é¢œè‰²ï¼ŒSVG å’Œ CSS æ”¯æŒçš„é¢œè‰²å€¼å…¶å®å·®ä¸å¤šçš„ï¼Œæ¯”å¦‚ï¼š å…³é”®å­—: redã€pinkã€blue ç­‰ åå…­è¿›åˆ¶: æ”¯æŒ3ä½æˆ–6ä½ï¼Œ#0f0ã€#00ff00 RGB å’Œ RGBA: æ¯”å¦‚ rgb(10, 20, 30) æˆ– rgba(10, 20, 30, 0.4) HSL å’Œ HSLA æ¥ä¸‹æ¥è®²åˆ°çš„æ‰€æœ‰å¸¸è§„å±æ€§ï¼Œé™¤äº†åœ¨å…ƒç´ å±æ€§ä¸Šè®¾ç½®ä¹‹å¤–ï¼Œéƒ½æ”¯æŒåœ¨ CSS ä¸­è®¾ç½®ã€‚ å¡«å…… fillè¦å¡«å……å›¾æ¡ˆé¢œè‰²ï¼Œå¯ä»¥è®¾ç½® fill å±æ€§ã€‚è¿™ä¸ªå±æ€§åœ¨å‰é¢çš„ä¾‹å­ä¹Ÿä½¿ç”¨è¿‡å¤šæ¬¡ã€‚ fill é»˜è®¤æ˜¯ #000000 ï¼Œä¹Ÿå°±æ˜¯é»‘è‰²ã€‚ 123456789&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;greenyellow&quot; /&gt;&lt;/svg&gt; ä¹Ÿå¯ä»¥ä½¿ç”¨ none æˆ–è€… transparent å°†å¡«å……è‰²è®¾ç½®æˆé€æ˜ã€‚ å¡«å……è‰²çš„ä¸é€æ˜åº¦ fill-opacityå¦‚æœæƒ³è®©å¡«å……è‰²æœ‰ç‚¹ åŠé€æ˜ çš„æ„Ÿè§‰ï¼Œå¯ä»¥è®¾ç½® fill-opacity å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ fill å±æ€§ä¸­ä½¿ç”¨ RGBA æˆ–è€… HSLAã€‚ æœ¬ä¾‹ä½¿ç”¨ fill-opacity è®¾ç½®ï¼Œå®ƒçš„å–å€¼æ˜¯ 0 - 1ï¼Œ0 ä»£è¡¨å®Œå…¨é€æ˜ï¼Œ1 ä»£è¡¨å®Œå…¨ä¸é€æ˜ã€‚å°äº 0 çš„å€¼ä¼šè¢«æ”¹ä¸º 0ï¼Œå¤§äº 1 çš„å€¼ä¼šè¢«æ”¹ä¸º 1 ã€‚ 12345678910&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;red&quot; fill-opacity=&quot;0.2&quot; /&gt;&lt;/svg&gt; fill å±æ€§ä¸­ä½¿ç”¨ RGBA æˆ–è€… HSLA çš„æ–¹å¼ä½ è‡ªå·±åŠ¨æ‰‹è¯•è¯•çœ‹~ æè¾¹é¢œè‰² strokeå¯ä»¥é€šè¿‡ stroke å±æ€§è®¾ç½®æè¾¹çš„é¢œè‰²ï¼Œä¹‹å‰ä¹Ÿä½¿ç”¨è¿‡ã€‚å¦‚æœä¸è®¾ç½® stroke ï¼Œå›¾å½¢é»˜è®¤æ˜¯æ²¡æœ‰æè¾¹é¢œè‰²çš„ã€‚ 12345678910&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; /&gt;&lt;/svg&gt; æˆ‘å°†å¡«å……è‰²è®¾ç½®æˆé€æ˜ï¼Œæ–¹ä¾¿è§‚å¯Ÿè“è‰²è¾¹æ¡†ã€‚ æè¾¹é¢œè‰²çš„ä¸é€æ˜åº¦ stroke-opacityå’Œ fill-opacity å·®ä¸å¤šï¼Œåªä¸è¿‡ stroke-opacity æ˜¯è®¾ç½®æè¾¹çš„ä¸é€æ˜åº¦ 1234567891011&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; stroke-opacity=&quot;0.3&quot; /&gt;&lt;/svg&gt; æè¾¹å®½åº¦ stroke-widthå¦‚æœéœ€è¦è°ƒæ•´æè¾¹çš„å®½åº¦ï¼Œå¯ä»¥ä½¿ç”¨ stroke-widthï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°å€¼ 1234567891011&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;100&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; /&gt;&lt;/svg&gt; è™šçº¿æè¾¹ stroke-dasharrayè¾¹æ¡†çš„ ç‚¹çº¿ æˆ–è€… è™šçº¿ æ ·å¼ï¼Œå¯ä»¥ä½¿ç”¨ stroke-dasharray è®¾ç½®ï¼Œè¿™å’Œ Canvas é‡Œè®¾ç½®è™šçº¿çš„æ“ä½œå…¶å®æ˜¯å·®ä¸å¤šã€‚ stroke-dasharray æ¥æ”¶ä¸€ä¸²æ•°å­—ï¼Œè¿™ä¸²æ•°å­—å¯ä»¥ç”¨æ¥ä»£è¡¨ çº¿çš„é•¿åº¦å’Œç©ºéš™çš„é•¿åº¦ï¼Œæ•°å­—ä¹‹é—´ç”¨é€—å·æˆ–è€…ç©ºæ ¼åˆ†éš”ã€‚ å»ºè®®ä¼ å…¥å¶æ•°ä¸ªæ•°å­—ã€‚ä½†å¦‚æœä½ ä¼ å…¥äº†å¥‡æ•°ä¸ªæ•°å­—ï¼ŒSVG ä¼šå°†è¿™ä¸²æ•°å­—é‡å¤ä¸€éï¼Œä½¿å®ƒçš„æ•°é‡å˜æˆ å¶æ•°ä¸ª ã€‚ 123456789101112131415161718192021222324252627&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;line x1=&quot;30&quot; y1=&quot;30&quot; x2=&quot;300&quot; y2=&quot;30&quot; stroke=&quot;blue&quot; /&gt; &lt;line x1=&quot;30&quot; y1=&quot;70&quot; x2=&quot;300&quot; y2=&quot;70&quot; stroke=&quot;blue&quot; stroke-dasharray=&quot;20 10&quot; /&gt; &lt;line x1=&quot;30&quot; y1=&quot;110&quot; x2=&quot;300&quot; y2=&quot;110&quot; stroke=&quot;blue&quot; stroke-dasharray=&quot;20 10 30&quot; /&gt;&lt;/svg&gt; è™šçº¿åç§»é‡ stroke-dashoffsetè™šçº¿è¿˜å¯ä»¥é€šè¿‡ stroke-dashoffset å±æ€§è®¾ç½®åç§»é‡ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°å€¼ç±»å‹çš„å€¼ã€‚ 12345678910111213141516171819202122&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;line x1=&quot;30&quot; y1=&quot;30&quot; x2=&quot;300&quot; y2=&quot;30&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; stroke-dasharray=&quot;20 10 30&quot; /&gt; &lt;line x1=&quot;30&quot; y1=&quot;90&quot; x2=&quot;300&quot; y2=&quot;90&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; stroke-dasharray=&quot;20 10 30&quot; stroke-dashoffset=&quot;10&quot; /&gt;&lt;/svg&gt; æˆ‘åŠ ç²—äº†è™šçº¿ï¼Œæ–¹ä¾¿è§‚å¯Ÿåç§»é‡ã€‚ çº¿å¸½ stroke-linecapçº¿å¸½å°±æ˜¯çº¿çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹çš„ä½ç½®ï¼Œç”¨ stroke-linecap å±æ€§å¯ä»¥è®¾ç½®çº¿å¸½æ ·å¼ã€‚ çº¿å¸½æœ‰3ä¸ªå€¼ï¼š butt: å¹³å¤´ï¼ˆé»˜è®¤å€¼ï¼‰ round: åœ†å¤´ square: æ–¹å¤´ 12345678910111213141516171819202122232425262728293031323334&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- å¹³å¤´ --&gt; &lt;line x1=&quot;30&quot; y1=&quot;30&quot; x2=&quot;300&quot; y2=&quot;30&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; stroke-linecap=&quot;butt&quot; /&gt; &lt;!-- åœ†å¤´ --&gt; &lt;line x1=&quot;30&quot; y1=&quot;70&quot; x2=&quot;300&quot; y2=&quot;70&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; stroke-linecap=&quot;round&quot; /&gt; &lt;!-- æ–¹å¤´ --&gt; &lt;line x1=&quot;30&quot; y1=&quot;110&quot; x2=&quot;300&quot; y2=&quot;110&quot; stroke=&quot;blue&quot; stroke-width=&quot;10&quot; stroke-linecap=&quot;square&quot; /&gt;&lt;/svg&gt; å¯ä»¥çœ‹åˆ° square æ¯” butt è¦ç¨å¾®é•¿ä¸€ä¸¢ä¸¢ã€‚ æ‹è§’ stroke-linejoinæ‹è§’å°±æ˜¯æŠ˜çº¿çš„äº¤æ¥ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ stroke-linejoin è®¾ç½®ï¼Œå®ƒæ¥æ”¶ä»¥ä¸‹å±æ€§ï¼š miter: å°–è§’ï¼ˆé»˜è®¤ï¼‰ round: åœ†è§’ bevel: å¹³è§’ 12345678910111213141516171819202122232425262728&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- å°–è§’ --&gt; &lt;polyline points=&quot;30 60, 60 30, 90 60&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; stroke-width=&quot;20&quot; stroke-linejoin=&quot;miter&quot; /&gt; &lt;!-- åœ†è§’ --&gt; &lt;polyline points=&quot;30 120, 60 90, 90 120&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; stroke-width=&quot;20&quot; stroke-linejoin=&quot;round&quot; /&gt; &lt;!-- å¹³è§’ --&gt; &lt;polyline points=&quot;30 180, 60 150, 90 180&quot; fill=&quot;none&quot; stroke=&quot;blue&quot; stroke-width=&quot;20&quot; stroke-linejoin=&quot;bevel&quot; /&gt;&lt;/svg&gt; æ¶ˆé™¤é”¯é½¿ shape-renderingå¦‚æœä½ è§‰å¾— SVG åœ¨æµè§ˆå™¨æ˜¾ç¤ºå‡ºæ¥çš„å›¾åƒæœ‰ç‚¹æ¨¡ç³Šï¼Œé‚£å¯èƒ½æ˜¯å¼€å¯äº† åé”¯é½¿ åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ CSS å±æ€§å…³é—­è¯¥åŠŸèƒ½ã€‚ 1shape-rendering: crispEdges; å°†è¯¥å±æ€§è®¾ç½®åˆ°å¯¹åº”çš„ svg å…ƒç´ ä¸Šï¼Œå°±ä¼šå…³é—­åé”¯é½¿åŠŸèƒ½ï¼Œçªæ˜¾çœ‹èµ·æ¥å°±ä¼šæ¸…æ™°å¾ˆå¯¹ï¼Œä½†åœ¨æŸäº›æƒ…å†µå…³é—­äº†è¯¥åŠŸèƒ½ä¼šè®©å›¾åƒçœ‹èµ·æ¥æœ‰ç‚¹æ¯›èºçš„æ„Ÿè§‰ã€‚ å¦‚æœæƒ³å¼€å¯åé”¯é½¿åŠŸèƒ½ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼šshape-rendering: geometricPrecision; æ–‡æœ¬å…ƒç´  textSVG å¯ä»¥ä½¿ç”¨ &lt;text&gt; æ ‡ç­¾æ¸²æŸ“æ–‡æœ¬ã€‚æ–‡æœ¬æ˜¯æœ‰ â€œåŸºçº¿â€ æ¦‚å¿µçš„ï¼Œè¿™ä¸ªæ¦‚å¿µå’Œ CSS çš„ä¸€æ ·ã€‚è¿™é‡Œæ¨è AndyHu çš„æ–‡ç« ï¼Œå¯ä»¥å¿«é€Ÿææ‡‚åŸºçº¿ã€‚ã€Šå½»åº•ææ‡‚vertical-align åº•çº¿ã€åŸºçº¿ã€ä¸­çº¿çš„å«ä¹‰ã€‹ åŸºç¡€ç‰ˆå’Œ Canvas ä¸€æ ·ï¼ŒSVG çš„æ–‡æœ¬å¯¹é½æ–¹å¼æ˜¯ä»¥ç¬¬ä¸€ä¸ªå­—åŸºçº¿çš„å·¦ä¸‹è§’ä¸ºåŸºå‡†ã€‚ 123&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;text&gt;é›·çŒ´å•Š&lt;/text&gt;&lt;/svg&gt; å¯ä»¥çœ‹åˆ°ï¼Œæ–‡å­—è·‘å»å·¦ä¸Šè§’äº†ã€‚ä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚ SVG å¦‚æœæ²¡è®¾ç½®å­—å·ï¼Œå®ƒä¼šè·Ÿéšçˆ¶å…ƒç´ çš„å­—å·ï¼Œä¸€ç›´å¾€ä¸Šè·Ÿè·Ÿè·Ÿä¸Šå»ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œé»˜è®¤å­—å·æ˜¯è·Ÿéšäº†æµè§ˆå™¨çš„ï¼Œä¹Ÿå°±æ˜¯ 16px ã€‚ å¦‚æœæˆ‘ä»¬æƒ³çœ‹åˆ°æ–‡æœ¬ï¼Œå°±éœ€è¦å°†æ–‡å­—å¾€ä¸‹ç§»åŠ¨ 16pxï¼Œå› ä¸ºæœ¬æ–‡çš„å¯¹é½æ–¹å¼æ˜¯ä»¥ç¬¬ä¸€ä¸ªå­—çš„åŸºçº¿çš„å·¦ä¸‹è§’ä¸ºå‚è€ƒï¼Œé»˜è®¤çš„ä½ç½®åæ ‡æ˜¯ (0, 0) ï¼Œç°åœ¨è¦å°†yè½´åæ ‡æ”¹æˆ 16px æ‰èƒ½å®Œæ•´æ˜¾ç¤ºæ–‡æœ¬ 123&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;text y=&quot;16&quot;&gt;é›·çŒ´å•Š&lt;/text&gt;&lt;/svg&gt; è®¾ç½®å­—å· font-size 12345678&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;text y=&quot;60&quot; font-size=&quot;60&quot; &gt; é›·çŒ´å•Š &lt;/text&gt;&lt;/svg&gt; ç²—ä½“ font-weightä½¿ç”¨ font-weight å¯ä»¥å°†æ–‡æœ¬è®¾ç½®æˆç²—ä½“ã€‚ normal: é»˜è®¤ï¼ˆéç²—ä½“ï¼‰ bold: ç²—ä½“ è¿™å’Œ CSS æ˜¯ä¸€æ ·çš„ 12345678910111213141516171819&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- é»˜è®¤ --&gt; &lt;text y=&quot;60&quot; font-size=&quot;60&quot; font-weight=&quot;normal&quot; &gt; é›·çŒ´å•Š &lt;/text&gt; &lt;!-- ç²—ä½“ --&gt; &lt;text y=&quot;140&quot; font-size=&quot;60&quot; font-weight=&quot;bold&quot; &gt; é›·çŒ´å•Š &lt;/text&gt;&lt;/svg&gt; è£…é¥°çº¿ text-decorationå’Œ CSS ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ text-decoration è®¾ç½®è£…é¥°çº¿ noneï¼šé»˜è®¤ underline: ä¸‹åˆ’çº¿ overline: ä¸Šåˆ’çº¿ line-through: åˆ é™¤çº¿ 12345678910111213141516171819202122232425262728293031323334353637&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- é»˜è®¤ --&gt; &lt;text y=&quot;30&quot; font-size=&quot;30&quot; text-decoration=&quot;none&quot; &gt; é›·çŒ´å•Š &lt;/text&gt; &lt;!-- ä¸Šåˆ’çº¿ --&gt; &lt;text y=&quot;100&quot; font-size=&quot;30&quot; text-decoration=&quot;overline&quot; &gt; é›·çŒ´å•Š &lt;/text&gt; &lt;!-- åˆ é™¤çº¿ --&gt; &lt;text y=&quot;170&quot; font-size=&quot;30&quot; text-decoration=&quot;line-through&quot; &gt; é›·çŒ´å•Š &lt;/text&gt; &lt;!-- ä¸‹åˆ’çº¿ --&gt; &lt;text y=&quot;240&quot; font-size=&quot;30&quot; text-decoration=&quot;underline&quot; &gt; é›·çŒ´å•Š &lt;/text&gt;&lt;/svg&gt; æ°´å¹³å¯¹é½æ–¹å¼ text-anchorå¯ä»¥é€šè¿‡ text-anchor å±æ€§è®¾ç½®æ–‡æœ¬æ°´å¹³å¯¹é½æ–¹å¼ã€‚ å¦‚æœæœ¬å­æ˜¯ä»å·¦å‘å³ä¹¦å†™ï¼Œé‚£è¿™å‡ ä¸ªå‚æ•°çš„æ„æ€å°±æ˜¯ï¼š start: å·¦å¯¹é½ middle: å±…ä¸­å¯¹é½ end: å³å¯¹é½ å¤šè¡Œæ–‡æœ¬å¤šè¡Œæ–‡å¯ä»¥ä½¿ç”¨æœ¬ &lt;tspan&gt; æ ‡ç­¾è¾…åŠ©å®ç° 12345678&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;text fill=&quot;blue&quot;&gt; &lt;tspan x=&quot;10&quot; y=&quot;30&quot; fill=&quot;red&quot;&gt;é›·çŒ´&lt;/tspan&gt; &lt;tspan x=&quot;10&quot; y=&quot;60&quot;&gt;é²¨é±¼è¾£æ¤’&lt;/tspan&gt; &lt;tspan x=&quot;10&quot; y=&quot;90&quot;&gt;èŸ‘è‚æ¶éœ¸&lt;/tspan&gt; &lt;tspan x=&quot;10&quot; y=&quot;120&quot;&gt;èå­è±è±&lt;/tspan&gt; &lt;/text&gt;&lt;/svg&gt; &lt;tspan&gt; è¦æ”¾åœ¨ &lt;text&gt; é‡Œï¼Œè€Œä¸”ä¼šç»§æ‰¿ &lt;text&gt; è®¾ç½®çš„æ ·å¼ã€‚ å¦‚æœåœ¨ &lt;tspan&gt; é‡Œè®¾ç½®çš„æ ·å¼å’Œ &lt;text&gt; çš„æ ·å¼æœ‰å†²çªï¼Œæœ€åä¼šä½¿ç”¨ &lt;tspan&gt; çš„æ ·å¼ã€‚ æ°´å¹³å¯¹é½æ–¹å¼ 12345678910111213141516171819202122232425262728293031&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- å‚è€ƒçº¿ --&gt; &lt;path d=&quot;M 200 0 200 400&quot; stroke=&quot;red&quot;&gt;&lt;/path&gt; &lt;!-- å·¦å¯¹é½ --&gt; &lt;text x=&quot;200&quot; y=&quot;100&quot; text-anchor=&quot;start&quot; &gt; é›·çŒ´ &lt;/text&gt; &lt;!-- å±…ä¸­å¯¹é½ --&gt; &lt;text x=&quot;200&quot; y=&quot;130&quot; text-anchor=&quot;middle&quot; &gt; é›·çŒ´ &lt;/text&gt; &lt;!-- å³å¯¹é½ --&gt; &lt;text x=&quot;200&quot; y=&quot;160&quot; text-anchor=&quot;end&quot; &gt; é›·çŒ´ &lt;/text&gt;&lt;/svg&gt; å‚ç›´å¯¹é½æ–¹å¼ dominant-baselineå¯ä»¥é€šè¿‡ dominant-baseline å±æ€§è®¾ç½®æ–‡æœ¬å‚ç›´å¯¹é½æ–¹å¼ auto: é»˜è®¤çš„å¯¹é½æ–¹å¼ï¼Œä¿æŒä¸çˆ¶å…ƒç´ ç›¸åŒçš„é…ç½®ã€‚ text-after-edge: åœ¨åŸºçº¿ä¸Šæ–¹ middle: å±…ä¸­åŸºçº¿ text-before-edge: åœ¨åŸºçº¿ä¸‹æ–¹ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;!-- å‚è€ƒçº¿ --&gt; &lt;path d=&quot;M 0 200 400 200&quot; stroke=&quot;red&quot;&gt;&lt;/path&gt; &lt;!-- é»˜è®¤ --&gt; &lt;text x=&quot;20&quot; y=&quot;200&quot; dominant-baseline=&quot;auto&quot; &gt; é›·çŒ´ &lt;/text&gt; &lt;!-- åœ¨åŸºçº¿ä¸Šæ–¹ --&gt; &lt;text x=&quot;80&quot; y=&quot;200&quot; dominant-baseline=&quot;text-after-edge&quot; &gt; é›·çŒ´ &lt;/text&gt; &lt;!-- å±…ä¸­åŸºçº¿ --&gt; &lt;text x=&quot;160&quot; y=&quot;200&quot; dominant-baseline=&quot;middle&quot; &gt; é›·çŒ´ &lt;/text&gt; &lt;!-- åœ¨åŸºçº¿ä¸‹æ–¹ --&gt; &lt;text x=&quot;240&quot; y=&quot;200&quot; dominant-baseline=&quot;text-before-edge&quot; &gt; é›·çŒ´ &lt;/text&gt;&lt;/svg&gt; çºµå‘æ–‡å­— writing-modeå°† writing-mode è®¾ç½®æˆ tb å°±å¯ä»¥è®©æ–‡å­—çºµå‘æ’åˆ—ã€‚ éœ€è¦æ³¨æ„è‹±æ–‡å’Œä¸­æ–‡çš„æ–‡å­—è§’åº¦ï¼ 1234&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;text x=&quot;20&quot; y=&quot;20&quot; writing-mode=&quot;tb&quot;&gt;Hello World!&lt;/text&gt; &lt;text x=&quot;100&quot; y=&quot;20&quot; writing-mode=&quot;tb&quot;&gt;é²¨é±¼è¾£æ¤’&lt;/text&gt;&lt;/svg&gt; æœ‰äº›æ•™ç¨‹é‡Œé¢ä¼šè®² glyph-orientation-vertical å±æ€§å¯ä»¥æ—‹è½¬æ–‡å­—æ–¹å‘ï¼Œä½†ä¸æ¨èè¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºç°åœ¨çš„æµè§ˆå™¨å¯èƒ½ä¸å†æ”¯æŒå®ƒäº†ã€‚ å¯ä»¥çœ‹çœ‹è¿™ä¸ªæ–‡æ¡£çš„è¯´æ˜ï¼šã€Šglyph-orientation-verticalã€‹ è¶…é“¾æ¥å’Œ HTML ä¸€æ ·ï¼Œè¶…é“¾æ¥å¯ä»¥ä½¿ç”¨ &lt;a&gt; æ ‡ç­¾å®ç°ã€‚ åœ¨ SVG é‡Œï¼Œé“¾æ¥è¦æ”¾åœ¨ xlink:href å±æ€§é‡Œã€‚ å¦‚æœå¸Œæœ›é¼ æ ‡æ”¾åˆ°é“¾æ¥ä¸Šå‡ºç°æç¤ºä¿¡æ¯ï¼Œå¯ä»¥åœ¨ xlink:title å±æ€§é‡Œç¼–å†™æç¤ºä¿¡æ¯ã€‚ å¦‚éœ€åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥ï¼Œå¯ä»¥è®¾ç½® target=&quot;_blank&quot; ã€‚ 12345&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;a xlink:href=&quot;https://juejin.cn/post/7116784455561248775&quot; xlink:title=&quot;canvas&quot; target=&quot;_blank&quot;&gt; &lt;text x=&quot;20&quot; y=&quot;20&quot;&gt;ä¹Ÿå­¦å­¦Canvaså§&lt;/text&gt; &lt;/a&gt;&lt;/svg&gt; æ­¤æ—¶ç‚¹å‡»å›¾ç‰‡ä¸Šçš„é“¾æ¥å°±ä¼šè·³åˆ°å¯¹åº”çš„é¡µé¢ã€‚ &lt;a&gt; æ ‡ç­¾é‡Œé™¤äº†å¯ä»¥åŒ…è£¹æ–‡æœ¬å¤–ï¼Œè¿˜å¯ä»¥åŒ…è£¹å„ç§å›¾å½¢å’Œå›¾ç‰‡ç­‰å…ƒç´ ã€‚ å›¾ç‰‡ imageåœ¨ SVG ä¸­å¯ä»¥ä½¿ç”¨ &lt;image&gt; æ ‡ç­¾åŠ è½½å›¾ç‰‡ï¼ŒåŒ…æ‹¬ä½å›¾ã€‚ &lt;image&gt; æ˜¯ä½¿ç”¨ xlink:href å±æ€§è·å–å›¾ç‰‡çš„ 123&lt;svg width=&quot;400&quot; height=&quot;400&quot; style=&quot;border: 1px solid red;&quot;&gt; &lt;image xlink:href=&quot;./img.jpg&quot;&gt;&lt;/image&gt;&lt;/svg&gt; å›¾ç‰‡æ ‡ç­¾å…¶å®æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå’Œ HTML çš„ &lt;img&gt; æ ‡ç­¾ç”¨æ³•å·®ä¸å¤šã€‚ æ€»ç»“é€šè¿‡ä¸Šé¢è¿™ä¹ˆå¤šä¾‹å­åº”è¯¥å¯¹ SVG æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£äº†ã€‚SVG åœ¨å‰ç«¯ç¼–ç ä¸­ï¼Œæ„Ÿè§‰å°±åƒä¸€å †æ–°çš„æ ‡ç­¾ã€‚æˆ‘ä»¬åªè¦å½“å®ƒæ˜¯ HTML é‚£æ ·ä½¿ç”¨å°±è¡Œäº†ã€‚ æœ¬æ–‡è®°å½•çš„æ‰€æœ‰çŸ¥è¯†ç‚¹éƒ½æ˜¯ SVG åŸºç¡€ä¸­çš„åŸºç¡€ã€‚ ä¸‹ä¸€ç¯‡ä¼šä»‹ç»è¿›é˜¶çš„æ ‡ç­¾ã€‚æ¯”å¦‚å®ç°æ¸å˜ã€åˆ†ç»„ï¼Œè¿˜ä¼šä»‹ç»æ¯”è¾ƒéš¾ç†è§£çš„åæ ‡ç³»ç»Ÿã€‚ ä»£ç ä»“åº“â­é›·çŒ´ SVG æ¨èé˜…è¯»ğŸ‘ã€ŠFabric.js ä»å…¥é—¨åˆ°è†¨èƒ€ã€‹ ğŸ‘ã€Šã€Three.jsã€èµ·é£ï¼ã€‹ ğŸ‘ã€ŠCanvas ä»å…¥é—¨åˆ°åŠæœ‹å‹æ”¾å¼ƒï¼ˆå›¾è§£ç‰ˆï¼‰ã€‹ ğŸ‘ã€ŠSVG åœ¨å‰ç«¯çš„7ç§ä½¿ç”¨æ–¹æ³•ï¼Œä½ è¿˜çŸ¥é“å“ªå‡ ç§ï¼Ÿã€‹ ç‚¹èµ + å…³æ³¨ + æ”¶è— &#x3D; å­¦ä¼šäº†","tags":["SVG"],"categories":["SVG"]},{"title":"curlå®ç”¨æ•™ç¨‹","path":"/2024/04/10/curlå®ç”¨æ•™ç¨‹/","content":"curl æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œç”¨æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨\"æ ‡å‡†è¾“å‡º\"ï¼ˆstdoutï¼‰ä¸Šé¢ã€‚ å‚è€ƒ curl ç”¨æ³•æŒ‡å— åŸºç¡€ç”¨æ³•ç›´æ¥è¯·æ±‚æŒ‡å®šèµ„æº123# å¦‚ urlåŒ…å«æŸ¥è¯¢å‚æ•°ï¼Œéœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œ# å› ä¸ºå‚æ•°ä¸­åŒ…å«&amp;ç¬¦å·ï¼Œåœ¨shellä¸­è¡¨ç¤ºåå°æ‰§è¡Œcurl www.sina.com å“åº”å†…å®¹å¯¼å‡ºåˆ°æ–‡ä»¶é»˜è®¤è¾“å‡ºåˆ°stdout, æŒ‡å®š -o file åˆ™è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ 1curl -o sina.html www.sina.com å‘èµ·GETè¯·æ±‚å¹¶å¸¦å‚æ•°-G è¡¨ç¤º GETè¯·æ±‚ï¼Œé»˜è®¤ä¹Ÿæ˜¯GETè¯·æ±‚ï¼Œæ‰€ä»¥ä¸åŠ ä¹Ÿå¯ä»¥ã€‚ 12curl -G --data &quot;login=1&amp;name=sindy&quot; localhost:7001curl &quot;https://www.baidu.com/s?wd=weather&amp;rsv_spt=1&quot; å‘èµ·POSTè¯·æ±‚å¹¶å¸¦å‚æ•°-X æŒ‡å®šè¯·æ±‚æ–¹æ³•ï¼Œ-d æŒ‡å®šè¯·æ±‚å‚æ•°ï¼Œ--data-urlencode å¯¹å‚æ•°è¿›è¡ŒURLç¼–ç , -H&#x2F;--header æŒ‡å®šè¯·æ±‚å¤´ ç”¨ -d å‚æ•°ä»¥åï¼ŒHTTP è¯·æ±‚ä¼šè‡ªåŠ¨åŠ ä¸Šæ ‡å¤´ Content-Type : application/x-www-form-urlencodedã€‚å¹¶ä¸”ä¼šè‡ªåŠ¨å°†è¯·æ±‚è½¬ä¸º POST æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥çœç•¥ -X POSTã€‚ 12345678# curl -X POST --data &#x27;data&#x27; --header &#x27;header&#x27; url POSTè¯·æ±‚curl -X POST --data &#x27;&#123;&quot;name&quot;:&quot;controller&quot;&#125;&#x27; --header &#x27;Content-Type:application/json&#x27; http://127.0.0.1:7001/form# å¯ç”¨å¤šä¸ª-då‘é€å¤šä¸ªé”®å€¼å¯¹æ•°æ®curl -d &#x27;login=emma&#x27; -d &#x27;password=123&#x27; -X POST https://google.com/login -d å‚æ•°å¯ä»¥è¯»å–æœ¬åœ°æ–‡æœ¬æ–‡ä»¶çš„æ•°æ®ï¼Œå‘æœåŠ¡å™¨å‘é€ã€‚ 1curl -d &#x27;@data.txt&#x27; https://google.com/login è®¾ç½®è¯·æ±‚å¤´-H&#x2F;--header æŒ‡å®šè¯·æ±‚å¤´ï¼Œè®¾ç½®å¤šä¸ªheaderï¼Œå¯æŒ‡å®šå¤šä¸ª --header é€‰é¡¹ 1234# curl -H val url # curl --header val urlcurl --header &quot;content-type: application/json&quot; --header &quot;authorization: Bearer token&quot; url è®¾ç½® useragent-A&#x2F;--user-agent æŒ‡å®šUA, å¯¹äºå¸¦åçˆ¬è™«çš„ç½‘ç«™ï¼Œå¯ä»¥è®¾ç½®UAæ¥ä¼ªè£…æµè§ˆå™¨ã€‚ 12curl -A val urlcurl --user-agent val url æŒ‡å®š refererå¯¹äºé˜²æ­¢ç›—é“¾çš„ç½‘ç«™ï¼Œå¯ä»¥æŒ‡å®š referer æ¥ä¼ªè£…è¯·æ±‚æ¥æºã€‚ 1curl --referer val url æŒ‡å®š cookieæ¥å£éœ€è¦é‰´æƒçš„è¯ï¼Œå¯ä»¥æŒ‡å®š cookie æ¥å‘é€ç›¸å…³é‰´æƒä¿¡æ¯ã€‚ 12curl --cookie &quot;name=alice&quot; url é«˜çº§ç”¨æ³•è¿½è¸ªé‡å®šå‘ï¼Œè·å–é‡å®šå‘åçš„å†…å®¹1234567curl -L www.sina.com# ç”¨eggjsèµ·ä¸ªwebæœåŠ¡ï¼Œcontroller.home.indexä¸­ # ctx.redirect(&#x27;https://www.baidu.com&#x27;)curl http://localhost:7001 # 301 ä¸ä¼šè¿”å›ç™¾åº¦é¦–é¡µå†…å®¹curl -L http://localhost:7001 # ä¼šè¿”å›ç™¾åº¦é¦–é¡µå†…å®¹ æ˜¾ç¤ºå“åº”å¤´1234curl -i www.sina.com # è¿”å›å“åº”å¤´å’Œå“åº”ä½“# curl -I url åªæ˜¾ç¤ºå“åº”å¤´curl -I www.sina.com æ˜¾ç¤ºå®Œæ•´çš„ http é€šä¿¡è¿‡ç¨‹1234curl -v www.sina.com# curl --trace output.txt url æ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„æ•°æ®curl --trace output.txt www.baidu.com è‡ªåŠ¨urlencodeä¼ å…¥çš„æ•°æ®--data&#x2F;-d é»˜è®¤ä¸ä¼šencodeæ•°æ® 1curl -X POST --data-urlencode &quot;data&quot; url æ–‡ä»¶ä¸Šä¼ 1curl --form upload=@localfilename --form press=ok url ä¿å­˜è¿”å›çš„cookie1curl -c cookies.txt http://example.com å‘é€ cookie æ–‡ä»¶1curl -b cookies.txt http://example.com http è®¤è¯1curl --user name:password url å¤šå‚æ•°ç¤ºä¾‹123456curl -iv -d &quot;@data.json&quot; --cookie &#x27;csrfToken=REhEag2ATP5vfl2Za6aOXoCT&#x27; --header &#x27;x-csrf-token:REhEag2ATP5vfl2Za6aOXoCT&#x27; --header &#x27;content-type: application/json&#x27; -o out.txt http://localhost:7002/component/create","tags":["curl"]},{"title":"163é‚®ç®±å‘é‚®ä»¶550é”™è¯¯è§£å†³æ–¹æ³•","path":"/2024/04/01/163é‚®ç®±å‘é‚®ä»¶550é”™è¯¯è§£å†³æ–¹æ³•/","content":"åŸæ–‡åœ°å€163é‚®ç®±æ— æ³•å‘é€é‚®ä»¶å‘ç”Ÿé€€ä¿¡é—®é¢˜ 550 User has no permissionä»¥åŠ554, DT:SPMçš„è§£å†³åŠæ³•-CSDNåšå®¢ å‰è¨€â€ƒæœ€è¿‘é¡¹ç›®åœ¨åš163é‚®ç®±è½¬å‘çš„æ—¶å€™ï¼Œå‘ç°æ— æ³•é€šè¿‡163é‚®ç®±è½¬å‘é‚®ä»¶ï¼Œå¹¶ä¼šæœ‰é”™è¯¯ä»£ç çš„æç¤ºï¼Œäºæ˜¯åœ¨é¡¹ç›®é‡Œä¸€é¡¿æ“ä½œï¼Œä»Šå¤©åˆ†äº«ä¸‹è¿™æ®µç»éªŒå§ã€‚â€ƒé¦–å…ˆ163é‚®ç®±åœ¨æ— æ³•å®Œæˆå‘é€æ—¶æ˜¯ä¼šæœ‰æç¤ºçš„ï¼Œæœ¬äººåœ¨é¡¹ç›®é‡Œåˆ†åˆ«é‡åˆ°çš„æ˜¯550 User has no permissionå’Œ554, DT:SPMä¸¤ç§é”™è¯¯ä»£ç çš„æç¤ºï¼Œ163é‚®ç®±ä¹Ÿä¼šæä¾›ä¸€ä¸ªå®Œæ•´çš„é”™è¯¯ä»£ç çš„å¯¹ç…§è¡¨æ¥å‘Šè¯‰ä½ é”™è¯¯ä»£ç çš„å«ä¹‰ï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸ªç½‘å€ï¼š163é‚®ç®±é€€ä¿¡ä»£ç è¯´æ˜ ç„¶åæ¥ä¸‹æ¥è¯´ä¸€ä¸‹æˆ‘é‡åˆ°çš„ä¸¤ä¸ªé—®é¢˜çš„è§£å†³ç»è¿‡ã€‚ 1. 550 User has no permissionâ€ƒé¦–å…ˆè¿™ä¸ªé”™è¯¯ä»£ç çš„æ„æ€æ˜¯æˆ‘æ²¡æœ‰ç”¨æˆ·æƒé™ï¼Œæˆ‘ä¸€å¼€å§‹çŒœæµ‹æ˜¯é‚®ç®±è®¾ç½®çš„é—®é¢˜ï¼Œç„¶åæˆ‘å‚è€ƒäº†ä¸‹é¢é“¾æ¥é‡Œè¿™ç¯‡åšå®¢ã€‚ é‚®ç®±ä¸å¯ç”¨ 550 User has no permission è¿™ç¯‡åšå®¢è™½ç„¶åº•ä¸‹å¾ˆå¤šäººéƒ½è¯„è®ºè¯´è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯è¿™ç¯‡åšå®¢å·²ç»æ˜¯å¥½å‡ å¹´å‰çš„åšå®¢äº†ï¼Œæˆ‘æ˜¯ç”¨çš„163é‚®ç®±çš„ç‰ˆæœ¬æ ¹æœ¬æ²¡æœ‰åšå®¢ä¸­æ‰€æåˆ°çš„è®¾ç½®ï¼Œäºæ˜¯åªèƒ½è‡ªå·±æ‘¸ç´¢ã€‚æœ€ç»ˆè¿˜æ˜¯æ‘¸ç´¢å‡ºæ¥äº†ï¼Œç°åœ¨å¯ä»¥è¿›å…¥ä¸‹å›¾çš„è®¾ç½®â€ƒç„¶åå¼€å¯POP3&#x2F;SMTPæœåŠ¡ï¼Œå¼€å¯åä¼šç”Ÿæˆä¸€ä¸ªæˆæƒå¯†ç ï¼Œç”¨é‚£ä¸ªæˆæƒå¯†ç ä»£æ›¿é‚®ç®±å¯†ç è¿›è¡Œè®¾ç½®ï¼Œå°±å¯ä»¥ä¿®å¤550 User has no permissionè¿™ä¸ªé—®é¢˜äº†ã€‚psï¼šè¿™ä¸ªæˆæƒç ç”Ÿæˆåä¸€å®šè¦ä¿å­˜å¥½ï¼Œå®ƒç”Ÿæˆä¸€æ¬¡åå°±ä¸å±•ç¤ºäº†ã€‚ 2. 554, DT:SPMâ€ƒè§£å†³å®Œ550ä»¥åï¼Œæˆ‘è¿™è¾¹å¹¶æ²¡æœ‰å°±ä¸€æ­¥æå®šäº†ï¼Œè€Œæ˜¯åˆé‡åˆ°äº†ä¸€ä¸ª554çš„é—®é¢˜ï¼Œæˆ‘è¿™ä¸ª554çš„é—®é¢˜åœ¨163çš„æ–‡æ¡£é‡Œä»‹ç»æ˜¯è¿™æ ·çš„ã€‚â€ƒå¾ˆå¤´ç–¼ï¼Œé¡¹ç›®é‡Œè®¾ç½®çš„å†…å®¹æ„Ÿè§‰æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†è¿˜æ˜¯è¢«æ£€æµ‹è¯´æ˜¯åƒåœ¾é‚®ä»¶ï¼Œç„¶åæˆ‘åˆå‚è€ƒäº†ä»¥ä¸‹ä¸¤ç¯‡åšå®¢ã€‚ smtplib.SMTPDataError: (554, bâ€™DT:SPMçš„å¼‚å¸¸ pythonå‘é€é‚®ä»¶554DT:SPMå·²è§£å†³ ä»£ç ç¤ºä¾‹å¯ä»¥æˆåŠŸå‘é€é‚®ä»¶çš„ä¾‹å­: 1234567891011121314151617181920212223242526272829303132333435const nodemailer = require(&quot;nodemailer&quot;);// !!! ç”¨è¿™ä¸ªé…ç½®æ–¹å¼ä¼šæŠ¥é”™: connect ECONNREFUSED 127.0.0.1:465// Create a transporter using the Gmail SMTP configuration// const transporter = nodemailer.createTransport(&#123;// service: &quot;smtp.163.com&quot;,// port: 465,// secure: true,// auth: &#123;// user: &quot;your-email@163.com&quot;,// pass: &quot;your-password&quot;,// &#125;,// &#125;);const transporter = nodemailer.createTransport( &quot;smtps://stephenykk_pan@163.com:&#123;é‚®ç®±å¼€é€šSMTPæœåŠ¡åç”Ÿæˆçš„æˆæƒç &#125;@smtp.163.com&quot;);// Compose the emailconst mailOptions = &#123; from: &quot;stephenykk_pan@163.com&quot;, to: &quot;your-friend@163.com&quot;, subject: &quot;Temporary Password&quot;, text: &quot;Your temporary password is: 123456&quot;,&#125;;// Send the emailtransporter.sendMail(mailOptions, function (error, info) &#123; if (error) &#123; console.log(&quot;Error sending email:&quot;, error); &#125; else &#123; console.log(&quot;Email sent:&quot;, info.response); &#125;&#125;); æ€»ç»“ä¸€ä¸‹å°±æ˜¯è¯´åœ¨å‘é€çš„æ—¶å€™ä¹Ÿç»™è‡ªå·±æŠ„é€ä¸€ä»½å°±å¯ä»¥ä¸è¢«è¯†åˆ«æˆåƒåœ¾é‚®ä»¶ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥è§£å†³554, DT:SPMè¿™ä¸ªé”™è¯¯ä»£ç çš„é—®é¢˜ã€‚ ps:å…¶å®ç”¨äº†æŠ„é€çš„æ–¹æ³•ä»¥åä¹Ÿæ²¡èƒ½å¤Ÿè§£å†³554è¿™ä¸ªé—®é¢˜ï¼Œä½†æ„Ÿè§‰æ˜¯è‡ªå·±è®¾ç½®çš„é—®é¢˜ï¼Œæœ€åä¸€ç”Ÿæ°”æ¢æˆäº†QQé‚®ç®±å»å‘é€ï¼ŒåŒæ ·çš„å‘é€å†…å®¹QQé‚®ç®±å€’æ˜¯æ²¡æœ‰è¯†åˆ«æˆåƒåœ¾é‚®ä»¶ã€‚ã€‚ã€‚"},{"title":"å®ç”¨çš„Pythonç¼–ç æŠ€å·§","path":"/2024/03/29/å®ç”¨çš„Pythonç¼–ç æŠ€å·§/","content":"å®ç”¨çš„Pythonç¼–ç æŠ€å·§ åŸæ–‡åœ°å€æé«˜ä½ çš„Pythonç¼–ç æ•ˆç‡ - æ˜é‡‘ æˆ‘ç”¨Pythonç¼–ç¨‹æœ‰å‡ å¹´äº†, å¹¶ä¸”æˆ‘ä»ç„¶ç»å¸¸æƒŠè®¶äºPythonä»£ç å¯ä»¥å¦‚ä½•çš„ç®€æ´ï¼Œå¦‚ä½•çš„ DRYã€‚ æˆ‘å­¦åˆ°äº†å¾ˆå¤šå°è´´å£«å’ŒæŠ€å·§ï¼Œå¤§å¤šæ•°æ¥è‡ªäºé˜…è¯»å¼€æºé¡¹ç›®çš„æºä»£ç ï¼Œåƒ Django, Flask, Requests ç­‰ã€‚ è¿™é‡Œæˆ‘æŒ‘å‡ºäº†å‡ ä¸ªæœ‰æ—¶è¢«å¤§å®¶å¿½ç•¥çš„å‡ æ¡ï¼Œä½†æ˜¯å®ƒä»¬åœ¨æ—¥å¸¸å·¥ä½œä¸­ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ 1. å­—å…¸å’Œé›†åˆæ¨å¯¼å¼ å¤§å¤šæ•°Pythonå¼€å‘è€…çŸ¥é“ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ã€‚ä½ ä¸ç†Ÿæ‚‰è¿™ä¸€ç‚¹ï¼Ÿ ä¸€ä¸ªåˆ—è¡¨æ¨å¯¼å¼æ˜¯ä¸€ä¸ªåˆ›é€ åˆ—è¡¨çš„ç®€çŸ­æ–¹å¼:: 1234&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5]&gt;&gt;&gt; another_list = [ x + 1 for x in some_list ]&gt;&gt;&gt; another_list[2, 3, 4, 5, 6] ä»Python 3.1å¼€å§‹(ä¹Ÿåå‘åœ°ç§»æ¤åˆ°äº†Python 2.7),æˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼åˆ›å»ºé›†åˆå’Œå­—å…¸:: 12345678910&gt;&gt;&gt; # Set Comprehensions&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5, 2, 5, 1, 4, 8]&gt;&gt;&gt; even_set = &#123; x for x in some_list if x % 2 == 0 &#125;&gt;&gt;&gt; even_setset([8, 2, 4])&gt;&gt;&gt; # Dict Comprehensions&gt;&gt;&gt; d = &#123; x: x % 2 == 0 for x in range(1, 11) &#125;&gt;&gt;&gt; d&#123;1: False, 2: True, 3: False, 4: True, 5: False, 6: True, 7: False, 8: True, 9: False, 10: True&#125; ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ some_list å»ºç«‹äº†ä¸€ä¸ªå…ƒç´ ä¸é‡å¤çš„é›†åˆï¼Œä½†åªæœ‰å¶æ•°ã€‚ç¬¬äºŒä¸ªå­—å…¸çš„ä¾‹å­ä¸­å±•ç¤ºäº†ä¸€ä¸ªå­—å…¸çš„åˆ›å»ºï¼Œè¿™ä¸ªå­—å…¸çš„é”®æ˜¯1åˆ°10ï¼ˆåŒ…æ‹¬10ï¼‰ï¼Œå€¼æ˜¯å¸ƒå°”å€¼ï¼ŒæŒ‡æ˜è¯¥é”®æ˜¯ä¸æ˜¯ä¸€ä¸ªå¶æ•°ã€‚ å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯é›†åˆçš„æ–‡æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç®€å•çš„åˆ›å»ºä¸€ä¸ªé›†åˆ:: 123&gt;&gt;&gt; my_set = &#123;1, 2, 1, 2, 3, 4&#125;&gt;&gt;&gt; my_setset([1, 2, 3, 4]) è€Œæ²¡æœ‰ä½¿ç”¨åˆ°å†…å»ºçš„ set æ–¹æ³• 2.ä½¿ç”¨è®¡æ•°å™¨å¯¹è±¡è®¡æ•° å¾ˆæ˜æ˜¾ï¼Œä½†å¾ˆå®¹æ˜“é—å¿˜ã€‚è®¡æ•°æ˜¯ä¸€ä¸ªå¯»å¸¸ä¸è¿‡çš„ç¼–ç¨‹ä»»åŠ¡ï¼Œè€Œä¸”å¤§å¤šæ•°æƒ…å½¢ä¸‹è¿™ä¸æ˜¯ä¸ªéš¾äº‹ã€‚ä¸è¿‡è®¡æ•°å¯ä»¥æ›´ç®€å•ã€‚ Pythonçš„ collections åº“åŒ…å«ä¸€ä¸ª dict çš„å­ç±»ï¼Œä¸“é—¨è§£å†³è®¡æ•°ä»»åŠ¡:: 123456&gt;&gt;&gt; from collections import Counter&gt;&gt;&gt; c = Counter(&#x27;hello world&#x27;)&gt;&gt;&gt; cCounter(&#123;&#x27;l&#x27;: 3, &#x27;o&#x27;: 2, &#x27; &#x27;: 1, &#x27;e&#x27;: 1, &#x27;d&#x27;: 1, &#x27;h&#x27;: 1, &#x27;r&#x27;: 1, &#x27;w&#x27;: 1&#125;)&gt;&gt;&gt; c.most_common(2)[(&#x27;l&#x27;, 3), (&#x27;o&#x27;, 2)] 3. æ¼‚äº®åœ°æ‰“å°JSON JSONæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„åºåˆ—æ ¼å¼ï¼Œå¦‚ä»Šå¹¿æ³›åº”ç”¨åœ¨APIå’ŒwebæœåŠ¡ä¸­ï¼Œä½†æ˜¯å¾ˆéš¾ç”¨è£¸çœ¼æ¥çœ‹å¤§æ•°æ®é‡çš„JSON,å®ƒä»¬å¾ˆé•¿ï¼Œè¿˜åœ¨ä¸€è¡Œé‡Œã€‚ å¯ä»¥ç”¨å‚æ•° indent æ¥æ›´å¥½åœ°æ‰“å°JSONæ•°æ®ï¼Œè¿™åœ¨è·Ÿ REPLæˆ–æ˜¯æ—¥å¿—æ‰“äº¤é“çš„æ—¶å€™å¾ˆæœ‰ç”¨:: 1234567891011121314151617181920&gt;&gt;&gt; import json&gt;&gt;&gt; print(json.dumps(data)) # No indention&#123;&quot;status&quot;: &quot;OK&quot;, &quot;count&quot;: 2, &quot;results&quot;: [&#123;&quot;age&quot;: 27, &quot;name&quot;: &quot;Oz&quot;, &quot;lactose_intolerant&quot;: true&#125;, &#123;&quot;age&quot;: 29, &quot;name&quot;: &quot;Joe&quot;, &quot;lactose_intolerant&quot;: false&#125;]&#125;&gt;&gt;&gt; print(json.dumps(data, indent=2)) # With indention&#123; &quot;status&quot;: &quot;OK&quot;, &quot;count&quot;: 2, &quot;results&quot;: [ &#123; &quot;age&quot;: 27, &quot;name&quot;: &quot;Oz&quot;, &quot;lactose_intolerant&quot;: true &#125;, &#123; &quot;age&quot;: 29, &quot;name&quot;: &quot;Joe&quot;, &quot;lactose_intolerant&quot;: false &#125; ]&#125; å¦å¤–ï¼Œå»çœ‹çœ‹å†…å»ºæ¨¡å— pprint , å®ƒå¯ä»¥å¸®åŠ©ä½ æ¼‚äº®åœ°è¾“å‡ºå…¶å®ƒçš„ä¸œè¥¿ã€‚ 4. å¿«é€Ÿå»ºç«‹ä¸€ä¸ªwebæœåŠ¡ æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå»ºç«‹RPCæœåŠ¡ç®€å•è€Œå¿«é€Ÿçš„æ–¹æ³•ã€‚æˆ‘ä»¬éœ€è¦çš„åªæ˜¯è®©ç¨‹åºBå»è°ƒç”¨ç¨‹åºA(å¯èƒ½åœ¨å¦ä¸€ä¸ªæœºå™¨ä¸Š)çš„æ–¹æ³•ã€‚ æˆ‘ä»¬ä¸ç”¨äº†è§£å…³äºè¿™ä¸ªçš„ä»»ä½•æŠ€æœ¯ï¼Œä½†æ˜¯æˆ‘ä»¬åªæ˜¯éœ€è¦è¿™ä¹ˆä¸ªç®€å•çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå«åš XML-RPC çš„åè®®(å¯¹åº”çš„Pythonåº“å®ç° SimpleXMLRPCServer )æ¥å¤„ç†è¿™ç§äº‹ã€‚ è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•ç²—ç³™çš„æ–‡ä»¶é˜…è¯»æœåŠ¡å™¨:: 123456789101112from SimpleXMLRPCServer import SimpleXMLRPCServerdef file_reader(file_name): with open(file_name, &#x27;r&#x27;) as f: return f.read()server = SimpleXMLRPCServer((&#x27;localhost&#x27;, 8000))server.register_introspection_functions()server.register_function(file_reader)server.serve_forever() å“åº”å®ƒçš„å®¢æˆ·ç«¯:: 123import xmlrpclibproxy = xmlrpclib.ServerProxy(&#x27;http://localhost:8000/&#x27;)proxy.file_reader(&#x27;/tmp/secret.txt&#x27;) ç°åœ¨æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªè¿œç¨‹çš„æ–‡ä»¶é˜…è¯»å™¨ï¼Œé™¤äº†ä¸€ç‚¹ä»£ç ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ã€‚(å½“ç„¶ï¼Œä¸å®‰å…¨ï¼Œæ‰€ä»¥åªåœ¨â€å®¶â€ç”¨è¿™ä¸ªå§) 5. Pythonçš„å¼€æºç¤¾åŒº åˆšæˆ‘ä¸€ç›´åœ¨è¯´Pythonçš„æ ‡å‡†åº“äº†ï¼Œè¿™äº›åº“åªè¦ä½ å®‰è£…Pythonå°±ä¼šåŒ…å«åœ¨ä½ çš„Pythonä¸­ã€‚å¯¹äºå¤§å¤šæ•°çš„å…¶ä»–ä»»åŠ¡ï¼Œè¿™é‡Œæœ‰å¤§é‡çš„ç¤¾åŒºç»´æŠ¤çš„ç¬¬ä¸‰æ–¹åº“æ¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ è¿™æ˜¯ä¸€ä¸ªæˆ‘æŒ‘é€‰Pythonåº“çš„åŠæ³•: åŒ…å«ä¸€ä¸ªæ˜ç¡®çš„åè®®ï¼Œä»¥ä¾¿æˆ‘ä»¬ä½¿ç”¨ ç§¯ææ´»è·ƒçš„å¼€å‘å’Œç»´æŠ¤ å¯ä»¥ç”¨ pip æ¥å®‰è£…ï¼Œå¯ä»¥è½»æ˜“åœ°é‡å¤éƒ¨ç½² æ‹¥æœ‰ä¸€ä¸ªåˆé€‚è¦†ç›–ç‡çš„æµ‹è¯•é›† å¦‚æœä½ å‘ç°äº†ä¸€ä¸ªé€‚åˆä½ éœ€æ±‚çš„Pythonåº“ï¼Œä¸è¦å®³ç¾ï¼Œå¤§å¤šæ•°å¼€æºé¡¹ç›®æ¬¢è¿æˆ‘ä»¬è´¡çŒ®ä»£ç å’ŒååŠ©ï¼Œå³ä½¿ä½ ä¸æ˜¯ä¸€ä¸ªPythonè€å°†ã€‚å¸®åŠ©ä¹‹æ‰‹éšæ—¶å—æ¬¢è¿ï¼ 6.è¿½åŠ çš„æŠ€å·§ å¿«é€Ÿåœ¨ä¸€ä¸ªç›®å½•å»ºç«‹HTTPæœåŠ¡å™¨ :: python -m SimpleHTTPServer åœ¨ Python 3 ä¸­:: python -m http.server å‘½ä»¤è¡Œä¸Šæ¼‚äº®åœ°æ‰“å°JSON:: echo &#39;&#123;&quot;json&quot;:&quot;obj&quot;&#125;&#39; | python -mjson.tool è€Œä¸”ï¼Œå¦‚æœä½ å®‰è£…äº† Pygments æ¨¡å—ï¼Œå¯ä»¥é«˜äº®åœ°æ‰“å°JSON:: echo &#39;&#123;&quot;json&quot;:&quot;obj&quot;&#125;&#39; | python -mjson.tool | pygmentize -l json æ³¨æ„ &#123;&#125; æ˜¯ä¸€ä¸ªç©ºçš„å­—å…¸ï¼Œè€Œä¸æ˜¯ç©ºçš„é›†åˆ","tags":["Python"],"categories":["Python"]},{"title":"Hexo Stellarä¸»é¢˜æ ‡ç­¾ä½¿ç”¨å…¥é—¨","path":"/2024/03/26/Hexo-Stellarä¸»é¢˜æ ‡ç­¾å…¥é—¨/","content":"æ›´å…¨é¢çš„ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒstellarå®˜æ–¹æ–‡æ¡£ ï¼Œè¿™é‡Œåªä»‹ç»ä¸€äº›å¸¸ç”¨çš„æ ‡ç­¾ã€‚ emoji è¡¨æƒ…æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% emoji [source] name [height:1.75em] %&#125; å…¶ä¸­ source å¯çœç•¥ï¼Œé»˜è®¤sourceä¸ºemojié…ç½®åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªã€‚æ¯”å¦‚ï¼šé…ç½®å¦‚ä¸‹æ—¶ï¼Œé»˜è®¤sourceå°±æ˜¯tiebaå¯¹åº”çš„é“¾æ¥ _config.yml123456789tag_plugins: ... emoji: tieba: https://gcore.jsdelivr.net/gh/cdn-x/emoji/tieba/&#123;name&#125;.png default: https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/&#123;name&#125;.gif twemoji: https://gcore.jsdelivr.net/gh/twitter/twemoji/assets/svg/&#123;name&#125;.svg qq: https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/&#123;name&#125;.gif aru: https://gcore.jsdelivr.net/gh/cdn-x/emoji/aru-l/&#123;name&#125;.gif blobcat: https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/&#123;name&#125;.png ä»£ç ç¤ºä¾‹ï¼š 123&#123;% emoji qq çˆ±ä½  %&#125; &#123;% emoji blobcat ablobcatattentionreverse %&#125; # æŒ‡å®šsourceä¸ºblobcat&#123;% emoji æ»‘ç¨½ %&#125; # ä½¿ç”¨é»˜è®¤source, å³ emoji.tieba æ˜¾ç¤ºæ•ˆæœ: æˆ‘è§‰å¾—è´´å§çš„é™æ€è¡¨æƒ…æ›´åŠ å¥½ä¸€äº›ï¼Œä¸å®¹æ˜“åˆ†æ•£è¯»è€…çš„æ³¨æ„åŠ›ï¼Œæ‰€ä»¥æŠŠå®ƒè°ƒæ•´åˆ°ç¬¬ä¸€ä¸ªï¼Œä½œä¸ºé»˜è®¤sourceã€‚ è¿™é‡Œè¿˜æœ‰ä¸ªæ¯”è¾ƒå…³é”®çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“æ¯ä¸ªsourceä¸‹é¢æœ‰å“ªäº›è¡¨æƒ…å¯ç”¨å‘¢ï¼Ÿæˆ–è€…è¯´sourceé“¾æ¥ä¸­å¯ç”¨çš„ name å˜é‡æœ‰å“ªäº›? å¾ˆç®€å•ï¼Œåªè¦æŠŠsourceé“¾æ¥åœ°å€åˆ é™¤æ–‡ä»¶åéƒ¨åˆ†åå¦‚: https://gcore.jsdelivr.net/gh/cdn-x/emoji/tieba/ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå°±èƒ½çœ‹åˆ°æ‰€æœ‰å¯ç”¨è¡¨æƒ…äº†ã€‚ å¯¹äºæ–‡å­—ä¸ºä¸»çš„å†…å®¹æ¥è¯´ï¼Œä¸‹é¢è¿™äº›è¡¨æƒ…åº”è¯¥å¤Ÿç”¨äº†ã€‚ tiebaå¸¸ç”¨è¡¨æƒ…12345678910&#123;% emoji æ³ª %&#125;&#123;% emoji ä¹– %&#125;&#123;% emoji æ±— %&#125;&#123;% emoji é…· %&#125;&#123;% emoji çœŸæ£’ %&#125;&#123;% emoji æ»‘ç¨½ %&#125;&#123;% emoji æƒŠè®¶ %&#125;&#123;% emoji é„™è§† %&#125;&#123;% emoji ä½ æ‡‚çš„ %&#125;&#123;% emoji ä¸é«˜å…´ %&#125; ä¸Šé¢è°ˆåŠemojiçš„é…ç½®ï¼Œè¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹hexoä¸»é¢˜é…ç½®çš„ä¼˜å…ˆçº§ï¼Œæœ‰3å¤„å¯è¿›è¡Œä¸»é¢˜çš„é…ç½®ï¼Œä¼˜å…ˆçº§é«˜çš„æ’å‰é¢ï¼Œ å…·ä½“å¦‚ä¸‹ï¼š ä¸»é¢˜é…ç½®çš„ä¼˜å…ˆçº§123- é¡¹ç›®æ ¹ç›®å½•/_config.yml theme_config- é¡¹ç›®æ ¹ç›®å½•/_config.stellar.yml- é¡¹ç›®æ ¹ç›®å½•/themes/stellar/_config.yml icon å›¾æ ‡æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% icon name|link [color:colorVal] %&#125; é…ç½®é»˜è®¤é¢œè‰²: _config.yml1234tag_plugins: icon: # ç•™ç©ºæ—¶ï¼Œå›¾æ ‡å’Œæ–‡å­—é¢œè‰²ç›¸åŒ default_color: accent # theme, accent, red, orange, yellow, green, cyan, blue, purple å¯ç”¨çš„é¢œè‰²åç§°theme, accent, red, orange, yellow, green, cyan, blue, purple ä»£ç ç¤ºä¾‹: 123icons.yml ä¸­çš„å›¾æ ‡ï¼š&#123;% icon solar:planet-bold-duotone %&#125;å¤–é“¾å›¾æ ‡ï¼š&#123;% icon https://api.iconify.design/solar:link-circle-bold.svg %&#125;æŒ‡å®šé¢œè‰²ï¼š&#123;% icon ph:seal-question-fill color:red %&#125; æ˜¾ç¤ºæ•ˆæœ: themes/stellar/_data/icons.yml ä¸­çš„å›¾æ ‡ï¼šthemes/stellar/_data/icons.yml ä¸­çš„å›¾æ ‡ï¼ŒæŒ‡å®šé¢œè‰²ï¼šå¤–é“¾å›¾æ ‡ï¼š æ³¨æ„ï¼š å›¾æ ‡çš„sourceé…ç½®æ˜¯åœ¨ themes/stellar/_data/icons.yml æ–‡ä»¶ä¸­ï¼Œæƒ³çŸ¥é“æ›´å¤šçš„å›¾æ ‡åç§°ï¼Œå¯åˆ°è¯¥æ–‡ä»¶æŸ¥çœ‹ã€‚ æ›´å¤šå›¾æ ‡12&#123;% icon github:tag color:red %&#125;&#123;% icon share:link color:orange %&#125; å›¾æ ‡åœ¨ç‹¬ç«‹é¡µé¢ä¸Šæˆ–è®¸æœ‰ç”¨ï¼Œæ™®é€šçš„æ–‡ç« ä¸éœ€è¦ä»€ä¹ˆå›¾æ ‡ mark æ ‡è®°æ ‡ç­¾è¿™ä¸ªæ ‡ç­¾å¯ä»¥ç”¨æ¥æ ‡è®°æ–‡ç« ä¸­çš„é‡ç‚¹å†…å®¹ *ç±»ä¼¼é©¬å…‹ç¬”æ•ˆæœ*ï¼Œéå¸¸å®ç”¨ è¯­æ³•æ ¼å¼: 1&#123;% mark content [color:colorVal] %&#125; ä»£ç ç¤ºä¾‹: 1234567891011121314æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼š&#123;% mark é»˜è®¤ %&#125;&#123;% mark çº¢ color:red %&#125;&#123;% mark æ©™ color:orange %&#125;&#123;% mark é»„ color:yellow %&#125;&#123;% mark ç»¿ color:green %&#125;&#123;% mark é’ color:cyan %&#125;&#123;% mark è“ color:blue %&#125;&#123;% mark ç´« color:purple %&#125;&#123;% mark äº® color:light %&#125;&#123;% mark æš— color:dark %&#125;&#123;% mark è­¦å‘Š color:warning %&#125;&#123;% mark é”™è¯¯ color:error %&#125;ä¸€å…± 12 ç§é¢œè‰²ã€‚ æ˜¾ç¤ºæ•ˆæœ: æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼šé»˜è®¤ çº¢ æ©™ é»„ ç»¿ é’ è“ ç´« äº® æš— è­¦å‘Š é”™è¯¯ ä¸€å…± 12 ç§é¢œè‰²ã€‚ hashtag æ ‡ç­¾ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªè¶…é“¾æ¥ï¼Œæ¯”markdownçš„é“¾æ¥ä¼šå¥½çœ‹ä¸€äº›ã€‚ è¯­æ³•: 1&#123;% hashtag content link [color:colorVal] %&#125; ä»£ç ç¤ºä¾‹: 1234&#123;% hashtag Stellar https://xaoxuu.com/wiki/stellar/ %&#125;&#123;% hashtag Hexo https://hexo.io/ %&#125;&#123;% hashtag GitHub https://github.com/xaoxuu/ %&#125;&#123;% hashtag Gitea https://git.xaox.cc/ color:green %&#125; æ˜¾ç¤ºæ•ˆæœ: Stellar Hexo GitHub Gitea å¦‚æœæ²¡æœ‰æŒ‡å®šé¢œè‰²ï¼Œä¸”æ²¡æœ‰è®¾ç½®é»˜è®¤é¢œè‰²ï¼Œåˆ™éšæœºå–ä¸€ä¸ªé¢œè‰² image å›¾æ ‡æ ‡ç­¾å›¾ç‰‡æ ‡ç­¾æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„åº”å¯¹å„ç§å°ºå¯¸æ’å›¾çš„æ ‡ç­¾ï¼Œå¯¹äºå¤§å›¾ï¼Œå¯ä»¥æ”¾ç½®ä¸€ä¸ªã€Œä¸‹è½½ã€æŒ‰é’®ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1&#123;% image src [description] [download:bool/string] [width:px] [padding:px] [bg:hex] %&#125; å‚æ•°è¯´æ˜123456src: å›¾ç‰‡åœ°å€description: å›¾ç‰‡æè¿°download: href # ä¸‹è½½åœ°å€ï¼Œè®¾ç½®æ­¤å€¼åé¼ æ ‡æ”¾åœ¨å›¾ç‰‡ä¸Šä¼šæ˜¾ç¤ºä¸‹è½½åœ°å€ï¼Œå¦‚æœä¸‹è½½åœ°å€ä¸ºå›¾ç‰‡åœ°å€ï¼Œå¯ä»¥è®¾ç½®ä¸º truewidth: 200px # å›¾ç‰‡å®½åº¦padding: 16px # å›¾ç‰‡å››å‘¨å¡«å……å®½åº¦bg: &#x27;#ffffff&#x27; # å›¾ç‰‡åŒºåŸŸèƒŒæ™¯é¢œè‰²ï¼Œ16è¿›åˆ¶ ä»£ç ç¤ºä¾‹: èŠ±æ‹¬å·å†…çš„ä»£ç æ¢è¡Œä¹¦å†™ä¹Ÿæ˜¯å¯ä»¥çš„ 123456&#123;% image https://s.xaox.cc/xaoxuu/posts/202401131914137.jpg-hd å›¾ç‰‡ç”± xaoxuu æ‹æ‘„äºä¸€ä¸ªé˜³å…‰æ˜åªšçš„ä¸‹åˆ download:https://s.xaox.cc/xaoxuu/posts/202401131914137.jpg-hd %&#125; æ˜¾ç¤ºæ•ˆæœ: å›¾ç‰‡ç”± xaoxuu æ‹æ‘„äºä¸€ä¸ªé˜³å…‰æ˜åªšçš„ä¸‹åˆ æ”¯æŒ Fancybox æ’ä»¶ç‚¹å‡»æ”¾å¤§åœ¨ä»»æ„ image æ ‡ç­¾ä¸­å¢åŠ  fancybox:true å‚æ•°å³å¯ä¸ºç‰¹å®šå›¾ç‰‡å¼€å¯ç¼©æ”¾åŠŸèƒ½ã€‚ ä»£ç ç¤ºä¾‹: 12345&#123;% image https://www.apple.com.cn/newsroom/images/product/iphone/lifestyle/2022/Apple_Shot-on-iphone-macro-challenge_Cat_big.jpg.large_2x.jpg è¿™æ˜¯ä¸€åªå¥½å¥‡çš„çŒ« fancybox:true%&#125; æ˜¾ç¤ºæ•ˆæœ: è¿™æ˜¯ä¸€åªå¥½å¥‡çš„çŒ« å¦‚æœæ‚¨å¸Œæœ›å…¨ç«™æ‰€æœ‰çš„ image æ ‡ç­¾éƒ½å¼€å¯æ­¤åŠŸèƒ½ï¼Œå¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š _config.stellar.yml123456######## Tag Plugins ########tag_plugins: # &#123;% image %&#125; image: fancybox: true å»ºè®®å…¨å±€ç»Ÿä¸€å¼€å¯å›¾ç‰‡ç¼©æ”¾åŠŸèƒ½ã€‚ quot å¼•ç”¨æ ‡ç­¾è¯­æ³•æ ¼å¼: 123&#123;% quot title [icon:iconVal] [prefix:icon] [suffix:icon] [el:h2|h3|h4|h5|h6] %&#125;#iconVal: default , hashtag ä»£ç ç¤ºä¾‹: 1234567891011121314151617181920é€‚åˆå±…ä¸­ä¸”é†’ç›®çš„å¼•ç”¨ï¼š&#123;% quot Stellar æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¥½ç”¨çš„ä¸»é¢˜ %&#125;æ”¯æŒè‡ªå®šä¹‰å¼•å·ï¼š&#123;% quot çƒ­é—¨è¯é¢˜ icon:hashtag %&#125;&#123;% quot ç‰¹åˆ«å¼•ç”¨ icon:default %&#125;&#123;% quot è¿™æ˜¯ä¸€ä¸ª icons.yml é…ç½®çš„ç¤ºä¾‹ prefix:solar:planet-bold-duotone %&#125;&#123;% quot è¿™æ˜¯ä¸€ä¸ª url çš„ç¤ºä¾‹ prefix:https://api.iconify.design/line-md:moon-alt-to-sunny-outline-loop-transition.svg suffix:https://api.iconify.design/solar:list-heart-minimalistic-line-duotone.svg%&#125;&#123;% quot æ·»åŠ el:h3å‚æ•°ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ el:h3 %&#125; æ˜¾ç¤ºæ•ˆæœ: é»˜è®¤çš„å¼•ç”¨æ ‡é¢˜ï¼š Stellar æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¥½ç”¨çš„ä¸»é¢˜ æ”¯æŒè‡ªå®šä¹‰å¼•å·ï¼š çƒ­é—¨è¯é¢˜ ç‰¹åˆ«å¼•ç”¨ è¿™æ˜¯ä¸€ä¸ª icons.yml é…ç½®çš„ç¤ºä¾‹ è¿™æ˜¯ä¸€ä¸ª url çš„ç¤ºä¾‹ æ·»åŠ el:h3å‚æ•°ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ æ­¤å¤–ï¼Œquotæ ‡ç­¾åŠ ä¸Šå‚æ•° el:h2/h3/h4/h5/h6 å¯ä»¥ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ï¼Œè¿™ä¸ªæ¯”è¾ƒå®ç”¨ã€‚ note å¤‡æ³¨æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% note [title] content [color:color] %&#125; ä»£ç ç¤ºä¾‹: 123456&#123;% note æ”¯æŒ12ç§é¢œè‰² color å¯è®¾ç½® redã€orangeã€amberã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ color:warning%&#125; æ”¯æŒ12ç§é¢œè‰²color å¯è®¾ç½® redã€orangeã€amberã€yellowã€ greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ å¯¹æ–‡ç« çš„ç†è§£å’Œç‚¹è¯„å¯ä»¥ç”¨å¤‡æ³¨å— link é“¾æ¥å¡ç‰‡æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% link href [title] [icon:src] [desc:true/false] %&#125; å‚æ•°è¯´æ˜12345href: é“¾æ¥title: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®æ ‡é¢˜ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢æ ‡é¢˜ï¼‰icon: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®å›¾æ ‡ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢å›¾æ ‡ï¼‰desc: å¯é€‰ï¼Œæ˜¯å¦æ˜¾ç¤ºæ‘˜è¦æè¿°ï¼Œä¸ºtrueæ—¶å°†ä¼šæ˜¾ç¤ºé¡µé¢æè¿° ä»£ç ç¤ºä¾‹: 12345ä¸å¸¦æ‘˜è¦çš„æ ·å¼ï¼š&#123;% link https://xaoxuu.com/blog/20221029/ %&#125;å¸¦æ‘˜è¦çš„æ ·å¼ï¼š&#123;% link https://xaoxuu.com/blog/20221029/ desc:true %&#125; æ˜¾ç¤ºæ•ˆæœ: ä¸å¸¦æ‘˜è¦çš„æ ·å¼ï¼š https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ å¸¦æ‘˜è¦çš„æ ·å¼ï¼š https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ ç›¸å…³é…ç½®: _config.stellar.yml1234567######## Tag Plugins ########services: # &#123;% link %&#125; siteinfo: # è®¾ç½® api å¯ä»¥è‡ªåŠ¨æå–ç½‘é¡µæ ‡é¢˜ã€å›¾æ ‡ï¼ŒæœåŠ¡éƒ¨ç½²æ–¹æ³•ï¼šhttps://github.com/xaoxuu/site-info-api/ # æ¥å£æµ‹è¯•é€šè¿‡åï¼ŒæŠŠæŒ‰é’®çš„ href éƒ¨åˆ†æ›¿æ¢æˆ &#123;href&#125; ä¹‹åå¡«å†™åˆ°ä¸‹æ–¹ï¼Œä¾‹å¦‚ï¼šhttps://api.vlts.cc/site_info/v1?url=&#123;href&#125; api: ... ä¸€èˆ¬ç”¨hashtagæ ‡ç­¾å¼•å…¥å¤–éƒ¨é“¾æ¥å³å¯ï¼Œå¦‚æœè¦çªå‡ºæŸä¸ªé“¾æ¥ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨linkæ ‡ç­¾ã€‚ button æŒ‰é’®æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% button text url [icon:key/src] [color:color] [size:xs] %&#125; å‚æ•°è¯´æ˜12345678 # å¿…å¡«text: æ¢ç´¢ # æ˜¾ç¤ºæ–‡å­—url: # è·³è½¬é“¾æ¥# å¯é€‰å‚æ•°color: orange # theme, accent, red, orange, yellow, green, cyan, blue, purpleicon: solar:planet-bold-duotone # æ˜¾ç¤ºå›¾æ ‡ï¼Œæ”¯æŒ icon.yml ä¸­çš„æ–‡ä»¶åå’Œå¤–é“¾å›¾æ ‡size: xs # æŒ‰é’®å°ºå¯¸ï¼Œç›®å‰åªæœ‰ä¸¤ç§å°ºå¯¸ï¼šé»˜è®¤æ˜¯æ™®é€šå¤§å°ï¼Œ xs æ˜¯æœ€å°å· ä»£ç ç¤ºä¾‹: 12&#123;% button æ¢ç´¢ https://github.com/xaoxuu/hexo-theme-stellar/ icon:solar:planet-bold-duotone %&#125; æ˜¾ç¤ºæ•ˆæœ: æ¢ç´¢ button å’Œ hashtag , link æ ‡ç­¾ä¸€æ ·ï¼Œéƒ½å¯ä»¥å¼•å…¥å¤–éƒ¨é“¾æ¥ã€‚ copy å¤åˆ¶è¡Œæ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% copy content [prefix:str] %&#125; ä»£ç ç¤ºä¾‹: 1234567&#123;% copy curl -s https://sh.xaox.cc/install | sh %&#125;&#123;% copy curl -s https://sh.xaox.cc/install | sh prefix:$ %&#125;# github é“¾æ¥, æ ¹æ®gitå‚æ•°ç›¸åº”è½¬æ¢&#123;% copy git:https xaoxuu.com/hexo-theme-stellar %&#125;&#123;% copy git:ssh xaoxuu.com/hexo-theme-stellar %&#125;&#123;% copy git:gh xaoxuu.com/hexo-theme-stellar %&#125; $ github é“¾æ¥, æ ¹æ®gitå‚æ•°ç›¸åº”è½¬æ¢ radio å•é€‰æ¡†æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% radio title [check:bool] [color:colorVal]&#125; å‚æ•°è¯´æ˜12checked: true/falsecolor: red/orange/yellow/green/cyan/blue/purple ä»£ç ç¤ºä¾‹: 123&#123;% radio æ²¡æœ‰å‹¾é€‰çš„å•é€‰æ¡† %&#125;&#123;% radio checked:true å·²å‹¾é€‰çš„å•é€‰æ¡† %&#125;&#123;% radio checked:true å·²å‹¾é€‰çš„å•é€‰æ¡† color:yellow %&#125; æ˜¾ç¤ºæ•ˆæœ: æ²¡æœ‰å‹¾é€‰çš„å•é€‰æ¡† å·²å‹¾é€‰çš„å•é€‰æ¡† å·²å‹¾é€‰çš„å•é€‰æ¡† checkbox å¤šé€‰æ¡†æ ‡ç­¾è¯­æ³•æ ¼å¼: 1&#123;% checkbox title [check:bool] [color:colorVal] [symbol:plus/minus/times] %&#125; å‚æ•°è¯´æ˜1234checked: true/falsecolor: red/orange/yellow/green/cyan/blue/purplesymbol: plus/minus/times ä»£ç ç¤ºä¾‹: 123456&#123;% checkbox æ™®é€šçš„æ²¡æœ‰å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox checked:true æ™®é€šçš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:plus color:green checked:true æ˜¾ç¤ºä¸ºåŠ å·çš„ç»¿è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:minus color:yellow checked:true æ˜¾ç¤ºä¸ºå‡å·çš„é»„è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125;&#123;% checkbox symbol:times color:red checked:true æ˜¾ç¤ºä¸ºä¹˜å·çš„çº¢è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† %&#125; æ˜¾ç¤ºæ•ˆæœ: æ™®é€šçš„æ²¡æœ‰å‹¾é€‰çš„å¤é€‰æ¡† æ™®é€šçš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºåŠ å·çš„ç»¿è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºå‡å·çš„é»„è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºä¹˜å·çš„çº¢è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† radio å’Œ checkbox ä¸€èˆ¬éƒ½ä¸éœ€è¦ç”¨åˆ° audio éŸ³é¢‘æ ‡ç­¾ å¯ä»¥åµŒå…¥ç½‘æ˜“éŸ³ä¹ï¼Œè¿™ä¸ªå¾ˆæƒŠè‰³~ è¯­æ³•æ ¼å¼: 1&#123;% audio src [type:2/0] [netease:id] [autoplay:1/0] %&#125; å‚æ•°è¯´æ˜1234type: 2/0 # æ­Œæ›²/æ­Œå• # ä¸è®¾ç½®é»˜è®¤ä¸º2æ­Œæ›²æ¨¡å¼netease: xxx # æ­Œæ›²/æ­Œå• id ï¼Œå…·ä½“ id åœ¨ç½‘æ˜“äº‘ç½‘é¡µç‰ˆçš„ç½‘å€é“¾æ¥ä¸­å¯»æ‰¾ autoplay: 1/0 # è‡ªåŠ¨æ’­æ”¾/æ‰‹åŠ¨æ’­æ”¾ # ä¸è®¾ç½®é»˜è®¤0æ‰‹åŠ¨æ’­æ”¾ ä»£ç ç¤ºä¾‹: 123456&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;&#123;% audio netease:1856385686 %&#125;&#123;% audio netease:1856385686 type:2 autoplay:0 %&#125; æ˜¾ç¤ºæ•ˆæœ: Your browser does not support the audio tag. video è§†é¢‘æ ‡ç­¾ ç«Ÿç„¶å¯ä»¥æ’å…¥Bç«™è§†é¢‘ï¼Œå¤§èµï¼ ä»£ç ç¤ºä¾‹: 1234567891011&#123;% video bilibili:BV1GP4y1d729 %&#125;&#123;% video bilibili:BV1GP4y1d729 width:100% autoplay:0 %&#125;&#123;% grid c:2 %&#125;&lt;!-- cell --&gt;&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov %&#125;&lt;!-- cell --&gt;&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov width:100% %&#125;&#123;% endgrid %&#125; å‚æ•°è¯´æ˜12width: 500px # é¡»å¸¦å•ä½ 80% 20em 100mm...autoplay: 1/0 # è‡ªåŠ¨æ’­æ”¾/æ‰‹åŠ¨æ’­æ”¾ # ä¸è®¾ç½®é»˜è®¤ä¸º0æ‰‹åŠ¨æ’­æ”¾ æ˜¾ç¤ºæ•ˆæœ: Your browser does not support the video tag. Your browser does not support the video tag. æ–‡æœ¬ä¿®é¥°æ ‡ç­¾é›†ç¤ºä¾‹ä»£ç ï¼š 12345678- è¿™æ˜¯ &#123;% psw å¯†ç  %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% u ä¸‹åˆ’çº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% emp ç€é‡å· %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% wavy æ³¢æµªçº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% del åˆ é™¤çº¿ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% sup ä¸Šè§’æ ‡ color:red %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% sub ä¸‹è§’æ ‡ %&#125; æ ‡ç­¾- è¿™æ˜¯ &#123;% kbd é”®ç›˜æ ·å¼ %&#125; æ ‡ç­¾ï¼Œè¯•ä¸€è¯•ï¼š&#123;% kbd âŒ˜ %&#125; + &#123;% kbd D %&#125; æ˜¾ç¤ºæ•ˆæœ: è¿™æ˜¯ å¯†ç  æ ‡ç­¾ è¿™æ˜¯ ä¸‹åˆ’çº¿ æ ‡ç­¾ è¿™æ˜¯ ç€é‡å· æ ‡ç­¾ è¿™æ˜¯ æ³¢æµªçº¿ æ ‡ç­¾ è¿™æ˜¯ åˆ é™¤çº¿ æ ‡ç­¾ è¿™æ˜¯ ä¸Šè§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ ä¸‹è§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ é”®ç›˜æ ·å¼ æ ‡ç­¾ï¼Œè¯•ä¸€è¯•ï¼šâŒ˜ + D çªå‡ºæ–‡ç« éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ wavy å’Œ u æ ‡ç­¾ï¼Œä½†æ˜¯æˆ‘è§‰å¾— mark æ ‡ç­¾çªå‡ºå’Œæ ‡è®°æ•ˆæœæ›´å¥½ã€‚ æ˜¾ç¤ºå¿«æ·æŒ‰é’®ä¹‹ç±»çš„ï¼Œç”¨ kbd æ ‡ç­¾ä¼šæ›´åŠ å½¢è±¡ï¼Œå…¶ä»–çš„ä¿®é¥°æ ‡ç­¾æ„Ÿè§‰ç”¨æˆ·ä¸å¤§ã€‚ folding æŠ˜å å®¹å™¨æ ‡ç­¾è¯­æ³•æ ¼å¼: 123&#123;% folding title [codeblock:bool] [open:bool] [color:color] %&#125; content&#123;% endfolding %&#125; å‚æ•°è¯´æ˜123codeblock: true/falseopen: true/falsecolor: red/orange/yellow/green/cyan/blue/purple/light/dark ä»£ç ç¤ºä¾‹: 12345&#123;% folding é»˜è®¤æŠ˜å çš„ä»£ç æ¡† open:false color:green %&#125;func test() &#123; print(&quot;hello world&quot;)&#125;&#123;% endfolding %&#125; æ˜¾ç¤ºæ•ˆæœ: é»˜è®¤æŠ˜å çš„ä»£ç æ¡†func test() { print(â€œhello worldâ€)} box ç›’å­å®¹å™¨æ ‡ç­¾note æ ‡ç­¾å°±æ˜¯ä½¿ç”¨ box å®¹å™¨å®ç°çš„ï¼Œå®ƒä»¬æ ·å¼æ˜¯ç›¸åŒçš„ï¼š è¯­æ³•æ ¼å¼: 1234&#123;% box [title] [color:color] [child:codeblock/tabs] %&#125;...&#123;% endbox %&#125; ä»£ç ç¤ºä¾‹: 123456789101112131415161718192021&#123;% grid %&#125;&lt;!-- cell --&gt;**æ¨èçš„å†™æ³•**&#123;% box child:codeblock color:green %&#125;&#x27;&#x27;&#x27;swiftfunc test() &#123; // ...&#125;&#x27;&#x27;&#x27;&#123;% endbox %&#125;&lt;!-- cell --&gt;**ä¸æ¨èçš„å†™æ³•**&#123;% box child:codeblock color:red %&#125;&#x27;&#x27;&#x27;swiftfunc test() -&gt; () &#123; // ...&#125;&#x27;&#x27;&#x27;&#123;% endbox %&#125;&#123;% endgrid %&#125; æ˜¾ç¤ºæ•ˆæœï¼š æ¨èçš„å†™æ³•123func test() &#123; // ...&#125; ä¸æ¨èçš„å†™æ³•123func test() -&gt; () &#123; // ...&#125; box æ˜¯å®¹å™¨ï¼Œç›¸å¯¹ note æ ‡ç­¾æ¥è¯´ï¼Œå®ƒæ›´çµæ´»ï¼Œå¯ä»¥æ”¾ç½®ä»»ä½•å†…å®¹ã€‚ æ€»ç»“ stellar ä¸»é¢˜çš„æ ‡ç­¾ç¡®å®éå¸¸ä¸°å¯Œï¼Œè¿˜æœ‰å¾ˆå¤šé«˜çº§çš„æ ‡ç­¾ï¼Œæ²¡æœ‰å†è¿™é‡Œåˆ—ä¸¾ï¼Œå¯ä»¥çœ‹å‡ºä½œè€…çš„å®¡ç¾èƒ½åŠ›å’Œå¼€å‘ä¸»é¢˜æŠ•å…¥çš„å¤§é‡ç²¾åŠ›ï¼›å†™ä½œåšå®¢å…¶å®æ˜¯ç›¸å¯¹ç®€å•çš„éœ€æ±‚ï¼Œæ²¡æƒ³åˆ°ä½œè€…èƒ½ä»ä¸­æå–å‡ºè¿™ä¹ˆå¤šå®ç”¨çš„åŠŸèƒ½ï¼Œä»å„æ–¹é¢æ¥è¯´éƒ½å¾ˆå€¼å¾—å­¦ä¹ ã€‚ ä¹‹æ‰€ä»¥èŠ±æ—¶é—´å»è¿‡ä¸€éæ ‡ç­¾çš„ç”¨æ³•ï¼Œå› ä¸ºè¿™èƒ½å¤§å¤§å¢å¼ºæ–‡ç« çš„å±‚æ¬¡ç»“æ„å’Œé˜…è¯»ä½“éªŒã€‚ é¢˜å¤–è¯hexoä¸»é¢˜ç³ç…æ»¡ç›®ï¼Œå¯¹ç§»åŠ¨ç«¯éå¸¸å‹å¥½æ˜¯æˆ‘å–œæ¬¢stellarä¸»é¢˜çš„ä¸»è¦åŸå› ","tags":["Hexo","stellar"],"categories":["Hexo"]},{"title":"å¦‚ä½•è§£å†³TS2322æŠ¥é”™","path":"/2024/03/13/å¦‚ä½•è§£å†³TS2322æŠ¥é”™/","content":"åŸæ–‡åœ°å€å¦‚ä½•è§£å†³ TS2322: â€œcould be instantiated with a different subtype of constraintâ€ - æ˜é‡‘ å¦‚ä½•è§£å†³ TS2322 æŠ¥é”™: â€œcould be instantiated with a different subtype of constraintâ€ é‡åˆ°é—®é¢˜æœ€è¿‘ä½¿ç”¨ ts å†™ä¸ªå·¥å…·ç±»å‡½æ•°æ—¶, é‡åˆ°äº† ts æŠ¥é”™: 123456789101112function renameKeys&lt;T extends &#123; [key: string]: unknown &#125;&gt;( keysMap: &#123; [key: string]: string &#125;, obj: T): T &#123; return Object.keys(obj).reduce( (acc, key) =&gt; (&#123; ...acc, ...&#123; [keysMap[key] || key]: obj[key] &#125;, &#125;), &#123;&#125; );&#125; é—®é¢˜å‡ºåœ¨å‡½æ•°è¿”å›çš„æ³›å‹ T. éšåæˆ‘å°†æ³›å‹ T æ”¹ä¸º &#123; [key: string]: unknown &#125; , æŠ¥é”™æ¶ˆå¤±äº†. 123456789101112function renameKeys&lt;T extends &#123; [key: string]: unknown &#125;&gt;( keysMap: &#123; [key: string]: string &#125;, obj: T): &#123; [key: string]: unknown &#125; &#123; return Object.keys(obj).reduce( (acc, key) =&gt; (&#123; ...acc, ...&#123; [keysMap[key] || key]: obj[key] &#125;, &#125;), &#123;&#125; );&#125; è¿™å°±å¾ˆå¥‡æ€ª, &#123; [key: string]: unknown &#125; æœ¬èº«å°±ä¸º T çš„çº¦æŸ, ç”¨ &#123; [key: string]: unknown &#125; å’Œç”¨ T æœ‰ä»€ä¹ˆåŒºåˆ«å—? åœ¨æˆ‘ä¸€é¡¿ Google ä¹‹å, åœ¨ä¸€ç¯‡æ–‡ç« ä¸­æ˜ç™½äº†å…¶ä¸­é“ç†. ç†è§£ TS æŠ¥é”™ä¿¡æ¯ä¸‹é¢æˆ‘å°†åˆ†è§£é”™è¯¯æ¶ˆæ¯çš„æ¯å¥è¯: 12Type &#x27;&#123;&#125;&#x27; is not assignable to type &#x27;T&#x27;. &#x27;&#123;&#125;&#x27; is assignable to the constraint of type &#x27;T&#x27;, but &#x27;T&#x27; could be instantiated with a different subtype of constraint &#x27;&#123; [key: string]: unknown; &#125;&#x27; Type &#39;&#123;&#125;&#39; ä»€ä¹ˆæ„æ€?è¿™ä¸ªç±»å‹å¯ä»¥åˆ†é…ä»»ä½•å€¼ï¼Œé™¤äº† null æˆ– undefinedã€‚ä¾‹å¦‚: 1234567type A = &#123;&#125;;const a0: A = undefined; // errorconst a1: A = null; // errorconst a2: A = 2; // okconst a3: A = &quot;hello world&quot;; //okconst a4: A = &#123; foo: &quot;bar&quot; &#125;; //ok// and so on... is not assignable ä»€ä¹ˆæ„æ€?åˆ†é…æ˜¯å®ä¾‹ä¸ç±»å‹ç›¸åŒ¹é…ã€‚å¦‚æœä½ çš„å®ä¾‹ä¸åŒ¹é…ç±»å‹ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚: 12345// type string is not assignable to type numberconst a: number = &quot;hello world&quot;; //error// type number is assinable to type numberconst b: number = 2; // ok a different subtype ä»€ä¹ˆæ„æ€? A æ˜¯ S çš„å­ç±»å‹: ç±»å‹ A åœ¨ç±»å‹ S çš„åŸºç¡€ä¸Šå¢åŠ äº†é¢å¤–å±æ€§. A å’Œ B æ˜¯ S çš„ä¸åŒå­ç±»å‹: ç±»å‹ A ä¸ç±»å‹ B åˆ†åˆ«åœ¨ç±»å‹ S çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸åŒçš„é¢å¤–å±æ€§. ä¾‹å¦‚: ä¸‹é¢ä»£ç çš„æƒ…å†µæ˜¯ A å’Œ D æ˜¯ç›¸åŒçš„ç±»å‹ B æ˜¯ A çš„å­ç±»å‹ E ä¸æ˜¯ A çš„å­ç±»å‹ B å’Œ C æ˜¯ A çš„ä¸åŒå­ç±»å‹ 12345type A = &#123; readonly 0: &quot;0&quot; &#125;;type B = &#123; readonly 0: &quot;0&quot;; readonly foo: &quot;foo&quot; &#125;;type C = &#123; readonly 0: &quot;0&quot;; readonly bar: &quot;bar&quot; &#125;;type D = &#123; readonly 0: &quot;0&quot; &#125;;type E = &#123; readonly 1: &quot;1&quot;; readonly bar: &quot;bar&quot; &#125;; 12345type A = number;type B = 2;type C = 7;type D = number;type E = `hello world`; 12345type A = boolean;type B = true;type C = false;type D = boolean;type E = number; å½“ä½ åœ¨ ts ä¸­ä½¿ç”¨ type å…³é”®å­—æ—¶, ä¾‹å¦‚: type A = &#123; foo: &#39;Bar&#39; &#125;, é‚£ä¹ˆ A æŒ‡å‘çš„æ˜¯è¯¥å€¼çš„ç»“æ„. constraint of typeÂ &#39;T&#39; ä»€ä¹ˆæ„æ€?ç±»å‹çº¦æŸä»…ä»…æ˜¯ä½ æ”¾åœ¨ extends å…³é”®å­—å³ä¾§çš„å†…å®¹ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œç±»å‹çº¦æŸæ˜¯â€™Bâ€™ã€‚ 1const func = &lt;A extends B&gt;(a: A) =&gt; `hello!`; æ‰€ä»¥, Type â€˜Bâ€™ is theÂ constraint of type â€˜Aâ€™. ç±»å‹çº¦æŸ extendsä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘å°†å±•ç¤ºä¸‰ç§æƒ…å†µã€‚åœ¨æ¯ç§æƒ…å†µä¸‹å”¯ä¸€ä¼šå˜åŒ–çš„æ˜¯ç±»å‹çº¦æŸï¼Œå…¶ä»–ä»€ä¹ˆéƒ½ä¸ä¼šæ”¹å˜ã€‚ æˆ‘æƒ³è®©ä½ æ³¨æ„çš„æ˜¯ï¼Œç±»å‹çº¦æŸä¸ä¼šé™åˆ¶å…¶å­ç±»å‹ã€‚çœ‹ä»¥ä¸‹ç¤ºä¾‹: Given: 123456type Foo = &#123; readonly 0: &quot;0&quot; &#125;;type SubType = &#123; readonly 0: &quot;0&quot;; readonly a: &quot;a&quot; &#125;;type DiffSubType = &#123; readonly 0: &quot;0&quot;; readonly b: &quot;b&quot; &#125;;const foo: Foo = &#123; 0: &quot;0&quot; &#125;;const foo_SubType: SubType = &#123; 0: &quot;0&quot;, a: &quot;a&quot; &#125;;const foo_DiffSubType: DiffSubType = &#123; 0: &quot;0&quot;, b: &quot;b&quot; &#125;; CASE 1: æ— ç±»å‹çº¦æŸ 123456789101112const func = &lt;A&gt;(a: A) =&gt; `hello!`;// call examplesconst c0 = func(undefined); // okconst c1 = func(null); // okconst c2 = func(() =&gt; undefined); // okconst c3 = func(10); // okconst c4 = func(`hi`); // okconst c5 = func(&#123;&#125;); //okconst c6 = func(foo); // okconst c7 = func(foo_SubType); //okconst c8 = func(foo_DiffSubType); //ok CASE 2: ä¸€èˆ¬çš„ç±»å‹çº¦æŸ åœ¨ Typescript ä¸­ï¼Œç±»å‹çº¦æŸä¸ä¼šé™åˆ¶å…¶å­ç±»å‹. 123456789101112const func = &lt;A extends Foo&gt;(a: A) =&gt; `hello!`;// call examplesconst c0 = func(undefined); // errorconst c1 = func(null); // errorconst c2 = func(() =&gt; undefined); // errorconst c3 = func(10); // errorconst c4 = func(`hi`); // errorconst c5 = func(&#123;&#125;); // errorconst c6 = func(foo); // okconst c7 = func(foo_SubType); // ok &lt;-- Allowedconst c8 = func(foo_DiffSubType); // ok &lt;-- Allowed CASE 3: æ›´å…·ä½“çš„çº¦æŸ 123456789101112const func = &lt;A extends SubType&gt;(a: A) =&gt; `hello!`;// call examplesconst c0 = func(undefined); // errorconst c1 = func(null); // errorconst c2 = func(() =&gt; undefined); // errorconst c3 = func(10); // errorconst c4 = func(`hi`); // errorconst c5 = func(&#123;&#125;); // errorconst c6 = func(foo); // error &lt;-- Restricted nowconst c7 = func(foo_SubType); // ok &lt;-- Still allowedconst c8 = func(foo_DiffSubType); // error &lt;-- NO MORE ALLOWED ! æ€»ç»“ç¤ºä¾‹ä»¥ä¸‹å‡½æ•°: 1const func = &lt;A extends Foo&gt;(a: A = foo_SubType) =&gt; `hello!`; //error! äº§ç”Ÿå¦‚ä¸‹é”™è¯¯ä¿¡æ¯: 12Type &#x27;SubType&#x27; is not assignable to type &#x27;A&#x27;. &#x27;SubType&#x27; is assignable to the constraint of type &#x27;A&#x27;, but &#x27;A&#x27; could be instantiated with a different subtype of constraint &#x27;Foo&#x27;.ts(2322) å› ä¸º Typescript æ˜¯ä»å‡½æ•°è°ƒç”¨ä¸­æ¨æ–­å‡º Aï¼Œå¹¶ä¸”åœ¨è¯­è¨€ä¸­å¹¶æ²¡æœ‰é™åˆ¶ä½ ç”¨ä¸åŒçš„ â€˜Fooâ€™ å­ç±»å‹æ¥è°ƒç”¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ‰€æœ‰å‡½æ•°è°ƒç”¨éƒ½è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„: 123const c0 = func(foo); // ok! type &#x27;Foo&#x27; will be infered and assigned to &#x27;A&#x27;const c1 = func(foo_SubType); // ok! type &#x27;SubType&#x27; will be inferedconst c2 = func(foo_DiffSubType); // ok! type &#x27;DiffSubType&#x27; will be infered å› æ­¤ï¼Œå°†å…·ä½“ç±»å‹èµ‹å€¼ç»™æ³›å‹ç±»å‹å½¢å‚æ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºåœ¨ TS ä¸­ï¼Œç±»å‹å½¢å‚æ€»æ˜¯å¯ä»¥å®ä¾‹åŒ–ä¸ºä»»æ„ä¸åŒçš„å­ç±»å‹ã€‚ ç»“è®º: æ°¸è¿œä¸è¦å°†å…·ä½“ç±»å‹èµ‹ç»™æ³›å‹ç±»å‹å‚æ•°ï¼Œå°†å…¶è§†ä¸ºåªè¯»ç±»å‹! ç›¸å, è¿™æ ·åš: 1const func = &lt;A extends Foo&gt;(a: A) =&gt; `hello!`; //ok! ç»“è®º æ³›å‹æ˜¯å‡½æ•°è¿è¡Œæ—¶æ¨æ–­å‡ºçš„ç±»å‹; ä¸è¦ç»™æ³›å‹ç±»å‹çš„å½¢å‚è®¾ç½®é»˜è®¤å€¼; è‹¥éè®¾ç½®é»˜è®¤å€¼ä¸å¯, åªèƒ½æ–­è¨€æ³›å‹ ğŸ˜ å‚è€ƒ How to fix TS2322: â€œcould be instantiated with a different subtype of constraint â€˜objectâ€™â€? Issue a custom error message when trying to assign constraint type to generic type parameter","tags":["Typescript"],"categories":["Typescript"]},{"title":"ååˆ†é’Ÿå­¦ä¼šWebSocket","path":"/2024/03/12/ååˆ†é’Ÿå­¦ä¼šWebSocket/","content":"åŸæ–‡åœ°å€ååˆ†é’Ÿå­¦ä¼š WebSocket - æ˜é‡‘ WebSocket ç®€ä»‹WebSocket æ˜¯ä¸€ç§åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®ç°åŒå‘é€šä¿¡çš„ç½‘ç»œåè®®ã€‚å®ƒé€šè¿‡åœ¨å•ä¸ª TCP è¿æ¥ä¸Šæä¾›å…¨åŒå·¥é€šä¿¡åŠŸèƒ½ï¼Œä½¿å¾—æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ã€‚ WebSocket ä¸ HTTP çš„åŒºåˆ«ä¸ä¼ ç»Ÿçš„ HTTP åè®®ç›¸æ¯”ï¼ŒWebSocket å…·æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—çš„åŒºåˆ«ï¼š åŒå‘é€šä¿¡ï¼šWebSocket æ”¯æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„å®æ—¶åŒå‘é€šä¿¡ï¼Œè€Œ HTTP åè®®æ˜¯å•å‘è¯·æ±‚-å“åº”æ¨¡å¼ã€‚ ä½å»¶è¿Ÿï¼šç”±äº WebSocket ä½¿ç”¨é•¿è¿æ¥ï¼Œé¿å…äº† HTTP çš„è¿æ¥å»ºç«‹å’Œæ–­å¼€è¿‡ç¨‹ï¼Œå¯ä»¥é™ä½é€šä¿¡å»¶è¿Ÿã€‚ æ›´å°‘çš„æ•°æ®ä¼ è¾“ï¼šWebSocket å¤´éƒ¨ä¿¡æ¯ç›¸å¯¹è¾ƒå°ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“çš„å¼€é”€ã€‚ è·¨åŸŸæ”¯æŒï¼šWebSocket å¯ä»¥è½»æ¾è·¨åŸŸï¼Œè€Œ HTTP éœ€è¦é€šè¿‡ CORS ç­‰æœºåˆ¶æ¥å®ç°ã€‚ WebSocket çš„å·¥ä½œåŸç†WebSocket çš„æ¡æ‰‹è¿‡ç¨‹å’Œ HTTP æœ‰æ‰€ä¸åŒã€‚å®¢æˆ·ç«¯é€šè¿‡å‘é€ç‰¹å®šçš„ HTTP è¯·æ±‚è¿›è¡Œæ¡æ‰‹ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™ä¼šå»ºç«‹ WebSocket è¿æ¥ã€‚ å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¯ä»¥é€šè¿‡ WebSocket å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨æ–‡æœ¬ã€äºŒè¿›åˆ¶æ•°æ®ç­‰è¿›è¡Œé€šä¿¡ã€‚ WebSocket çš„åº”ç”¨åœºæ™¯WebSocket çš„å®æ—¶åŒå‘é€šä¿¡ç‰¹æ€§ä½¿å¾—å®ƒåœ¨è®¸å¤šåº”ç”¨åœºæ™¯ä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œä¾‹å¦‚ï¼š å³æ—¶èŠå¤©ï¼šWebSocket å¯ä»¥å®ç°å®æ—¶çš„èŠå¤©åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼Œå®ç°å¿«é€Ÿã€ä½å»¶è¿Ÿçš„èŠå¤©ä½“éªŒã€‚ å®æ—¶æ•°æ®æ›´æ–°ï¼šå¯¹äºéœ€è¦å®æ—¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚è‚¡ç¥¨è¡Œæƒ…ã€å®æ—¶ç›‘æ§ç­‰ï¼ŒWebSocket å¯ä»¥å°†æ•°æ®å®æ—¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œç¡®ä¿æ•°æ®çš„åŠæ—¶æ›´æ–°ã€‚ åœ¨çº¿æ¸¸æˆï¼šåœ¨çº¿æ¸¸æˆéœ€è¦å®æ—¶çš„åŒå‘é€šä¿¡ï¼ŒWebSocket å¯ä»¥æä¾›ç¨³å®šçš„é€šä¿¡é€šé“ï¼Œæ”¯æŒå®æ—¶äº¤äº’å’Œå¤šäººæ¸¸æˆã€‚ WebSocket çš„ä½¿ç”¨ä»¥ä¸‹æ˜¯ä½¿ç”¨ JavaScript ä¸ WebSocket å»ºç«‹è¿æ¥çš„ç¤ºä¾‹ä»£ç ï¼š 1var Socket = new WebSocket(&quot;url, [protocol]&quot;); ä»¥ä¸Šä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°url, æŒ‡å®šè¿æ¥çš„ URLã€‚ç¬¬äºŒä¸ªå‚æ•°protocolæ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šäº†å¯æ¥å—çš„å­åè®®ã€‚ WebSocket å±æ€§ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„å±æ€§ã€‚ å±æ€§ æè¿° Socket.readyState åªè¯»å±æ€§ readyState è¡¨ç¤ºè¿æ¥çŠ¶æ€ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹å€¼ï¼š0-è¡¨ç¤ºè¿æ¥å°šæœªå»ºç«‹ã€‚1-è¡¨ç¤ºè¿æ¥å·²å»ºç«‹ï¼Œå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚2-è¡¨ç¤ºè¿æ¥æ­£åœ¨è¿›è¡Œå…³é—­ã€‚3-è¡¨ç¤ºè¿æ¥å·²ç»å…³é—­æˆ–è€…è¿æ¥ä¸èƒ½æ‰“å¼€ã€‚ Socket.bufferedAmount åªè¯»å±æ€§ bufferedAmount å·²è¢« send()æ”¾å…¥æ­£åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ä¼ è¾“ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å‘å‡ºçš„ UTF-8 æ–‡æœ¬å­—èŠ‚æ•°ã€‚ 0-è¡¨ç¤ºè¿æ¥å°šæœªå»ºç«‹ã€‚ 1-è¡¨ç¤ºè¿æ¥å·²å»ºç«‹ï¼Œå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚ 2-è¡¨ç¤ºè¿æ¥æ­£åœ¨è¿›è¡Œå…³é—­ã€‚ 3-è¡¨ç¤ºè¿æ¥å·²ç»å…³é—­æˆ–è€…è¿æ¥ä¸èƒ½æ‰“å¼€ã€‚ WebSocket äº‹ä»¶ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³äº‹ä»¶ã€‚ äº‹ä»¶ äº‹ä»¶å¤„ç†ç¨‹åº æè¿° open Socket.onopen è¿æ¥å»ºç«‹æ—¶è§¦å‘ message Socket.onmessage å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘ error Socket.onerror é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ close Socket.onclose è¿æ¥å…³é—­æ—¶è§¦å‘ ä¸‹é¢æ˜¯ç›¸å…³ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920Socket.onopen = function () &#123; //è¿æ¥å»ºç«‹æ—¶è§¦å‘ console.log(&quot;WebSocketè¿æ¥å·²å»ºç«‹&quot;);&#125;;Socket.onmessage = function (event) &#123; //å®¢æˆ·ç«¯æ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘ var message = event.data; console.log(&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š&quot; + message);&#125;;Socket.onerror = function () &#123; //é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ console.log(&quot;WebSocketè¿æ¥å‘ç”Ÿäº†é”™è¯¯&quot;);&#125;;Socket.onclose = function () &#123; //è¿æ¥å…³é—­æ—¶è§¦å‘ console.log(&quot;WebSocketè¿æ¥å·²å…³é—­&quot;);&#125;; WebSocket æ–¹æ³•ä»¥ä¸‹æ˜¯ WebSocket å¯¹è±¡çš„ç›¸å…³æ–¹æ³•ã€‚ æ–¹æ³• æè¿° Socket.send() ä½¿ç”¨è¿æ¥å‘é€æ•°æ® Socket.close() å…³é—­è¿æ¥ 1234//å‘é€ä¸€æ¡æ¶ˆæ¯Socket.send(&quot;ä½ å¥½&quot;);//å…³é—­WebSocketè¿æ¥Socket.close(); WebSocket é™¤äº†å‘é€å’Œæ¥æ”¶æ–‡æœ¬æ¶ˆæ¯å¤–ï¼Œè¿˜æ”¯æŒå‘é€å’Œæ¥æ”¶äºŒè¿›åˆ¶æ•°æ®ã€‚å¯¹äºå‘é€äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ send() æ–¹æ³•ä¼ é€’ä¸€ä¸ª ArrayBuffer æˆ– Blob å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š 1234const buffer = new ArrayBuffer(4);const view = new DataView(buffer);view.setUint32(0, 1234);socket.send(buffer); åœ¨æ¥æ”¶äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡ event.data è·å–åˆ° ArrayBuffer å¯¹è±¡ï¼Œç„¶åè¿›è¡Œå¤„ç†ã€‚ WebSocket çš„å¿ƒè·³æœºåˆ¶WebSocket çš„å¿ƒè·³æœºåˆ¶æ˜¯ä¸€ç§ç”¨äºä¿æŒ WebSocket è¿æ¥çš„ç¨³å®šæ€§å’Œæ´»è·ƒæ€§çš„æ–¹æ³•ã€‚å¿ƒè·³æœºåˆ¶çš„ç›®çš„æ˜¯å®šæœŸå‘é€å°çš„æ¢æµ‹æ¶ˆæ¯ï¼Œä»¥ç¡®ä¿è¿æ¥ä»ç„¶æœ‰æ•ˆï¼Œå¦‚æœè¿æ¥æ–­å¼€æˆ–å‡ºç°é—®é¢˜ï¼Œå¯ä»¥åŠæ—¶å‘ç°å¹¶é‡‡å–æªæ–½ã€‚ ä¸‹é¢æ˜¯ WebSocket å¿ƒè·³æœºåˆ¶çš„è¯¦ç»†æ­¥éª¤å’Œç›¸å…³ä»£ç ç¤ºä¾‹ï¼š å®šä¹‰å¿ƒè·³é—´éš”ï¼šä¸ºäº†å®šæœŸå‘é€å¿ƒè·³æ¶ˆæ¯ï¼Œä½ éœ€è¦å®šä¹‰ä¸€ä¸ªå¿ƒè·³é—´éš”ï¼Œé€šå¸¸ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†å¿ƒè·³é—´éš”è®¾ç½®ä¸º 30 ç§’ã€‚ 1const heartbeatInterval = 30000; // 30ç§’ å®šä¹‰å¿ƒè·³æ¶ˆæ¯ï¼šä½ éœ€è¦å®šä¹‰ç”¨äºå‘é€å¿ƒè·³çš„æ¶ˆæ¯å†…å®¹ã€‚è¿™é€šå¸¸æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼Œå¦‚â€heartbeatâ€ï¼Œä½†å¯ä»¥æ ¹æ®åº”ç”¨çš„éœ€æ±‚è‡ªå®šä¹‰ã€‚ 1const heartbeatMessage = &quot;heartbeat&quot;; è®¾ç½®å¿ƒè·³å®šæ—¶å™¨ï¼šä¸€æ—¦ WebSocket è¿æ¥æ‰“å¼€ï¼Œä½ å¯ä»¥ä½¿ç”¨setIntervalå‡½æ•°è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä»¥ä¾¿æ¯éš”ä¸€æ®µæ—¶é—´å‘é€å¿ƒè·³æ¶ˆæ¯ã€‚ 123456789let heartbeat;socket.addEventListener(&quot;open&quot;, () =&gt; &#123; console.log(&quot;WebSocketè¿æ¥å·²æ‰“å¼€&quot;); heartbeat = setInterval(() =&gt; &#123; socket.send(heartbeatMessage); &#125;, heartbeatInterval);&#125;); å¤„ç†å¿ƒè·³æ¶ˆæ¯ï¼šå½“ä½ æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯æ—¶ï¼Œä½ éœ€è¦æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯å¿ƒè·³æ¶ˆæ¯ã€‚è¿™å¯ä»¥é€šè¿‡æ¯”è¾ƒæ¥æ”¶åˆ°çš„æ¶ˆæ¯å†…å®¹å’Œå¿ƒè·³æ¶ˆæ¯çš„å†…å®¹æ¥å®ç°ã€‚ 1234567891011socket.addEventListener(&quot;message&quot;, (event) =&gt; &#123; const message = event.data; if (message === heartbeatMessage) &#123; console.log(&quot;æ¥æ”¶åˆ°å¿ƒè·³æ¶ˆæ¯&quot;); // åœ¨è¿™é‡Œå¯ä»¥æ‰§è¡Œä¸€äº›å¤„ç†å¿ƒè·³æ¶ˆæ¯çš„æ“ä½œ &#125; else &#123; console.log(&quot;æ¥æ”¶åˆ°å…¶ä»–æ¶ˆæ¯ï¼š&quot;, message); // å¤„ç†å…¶ä»–ç±»å‹çš„æ¶ˆæ¯ &#125;&#125;); æ¸…é™¤å¿ƒè·³å®šæ—¶å™¨ï¼šå½“ WebSocket è¿æ¥å…³é—­æ—¶ï¼Œä½ åº”è¯¥æ¸…é™¤ä¹‹å‰è®¾ç½®çš„å¿ƒè·³å®šæ—¶å™¨ï¼Œä»¥é˜²æ­¢ç»§ç»­å‘é€å¿ƒè·³æ¶ˆæ¯ã€‚ 12345socket.addEventListener(&quot;close&quot;, () =&gt; &#123; console.log(&quot;WebSocketè¿æ¥å·²å…³é—­&quot;); clearInterval(heartbeat);&#125;); é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å¯ä»¥å®ç° WebSocket çš„å¿ƒè·³æœºåˆ¶ï¼Œç¡®ä¿è¿æ¥çš„æŒç»­ç¨³å®šï¼Œä»¥é€‚åº”é•¿æ—¶é—´çš„é€šä¿¡éœ€æ±‚ã€‚å¦‚æœè¿æ¥æ–­å¼€æˆ–å‡ºç°é—®é¢˜ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ è¿›ä¸€æ­¥çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚ WebSocket çš„å®‰å…¨æ€§å’Œè·¨åŸŸé—®é¢˜å¦‚ä½•å¤„ç†ï¼ŸWebSocket æ”¯æŒé€šè¿‡ wss:// å‰ç¼€å»ºç«‹åŠ å¯†çš„å®‰å…¨è¿æ¥ï¼Œä½¿ç”¨ TLS&#x2F;SSL åŠ å¯†é€šä¿¡ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§ã€‚åœ¨ä½¿ç”¨åŠ å¯†è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦é…ç½®ç›¸åº”çš„è¯ä¹¦ã€‚ å¯¹äºè·¨åŸŸé—®é¢˜ï¼ŒWebSocket éµå¾ªåŒæºç­–ç•¥ï¼Œåªèƒ½ä¸åŒæºçš„æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚å¦‚æœéœ€è¦ä¸ä¸åŒåŸŸçš„æœåŠ¡å™¨é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨ CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰æ¥è¿›è¡Œè·¨åŸŸè®¿é—®æ§åˆ¶ã€‚ æœ‰å“ªäº›å¥½ç”¨çš„å®¢æˆ·ç«¯ WebSocket ç¬¬ä¸‰æ–¹åº“ Socket.io-clientï¼šSocket.io æ˜¯ä¸€ä¸ªæµè¡Œçš„å®æ—¶é€šä¿¡åº“ï¼Œå®ƒæä¾›äº†å®¢æˆ·ç«¯ JavaScript åº“ï¼Œå¯ç”¨äºåœ¨æµè§ˆå™¨ä¸­ä¸ Socket.io æœåŠ¡å™¨å»ºç«‹ WebSocket è¿æ¥ã€‚å®ƒæ”¯æŒè‡ªåŠ¨é‡è¿ã€äº‹ä»¶å¤„ç†ç­‰åŠŸèƒ½ï¼Œç”¨äºæ„å»ºå®æ—¶åº”ç”¨éå¸¸æ–¹ä¾¿ã€‚ ReconnectingWebSocketï¼šReconnectingWebSocket æ˜¯ä¸€ä¸ªå¸¦æœ‰è‡ªåŠ¨é‡è¿åŠŸèƒ½çš„ WebSocket å®¢æˆ·ç«¯åº“ï¼Œå¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç½‘ç»œè¿æ¥æ–­å¼€å’Œé‡æ–°è¿æ¥çš„æƒ…å†µï¼Œé€‚åˆç”¨äºæµè§ˆå™¨ç«¯çš„ WebSocket å¼€å‘ã€‚ SockJS-clientï¼šSockJS æä¾›äº†ä¸€ä¸ªæµè§ˆå™¨ç«¯çš„ JavaScript å®¢æˆ·ç«¯åº“ï¼Œç”¨äºä¸ SockJS æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚å®ƒå¯ä»¥åœ¨ä¸æ”¯æŒ WebSocket çš„æµè§ˆå™¨ä¸Šè‡ªåŠ¨é™çº§åˆ°å…¶ä»–ä¼ è¾“æ–¹å¼ï¼Œå…·æœ‰è‰¯å¥½çš„å…¼å®¹æ€§ã€‚ RxJS WebSocketSubjectï¼šRxJS æ˜¯ä¸€ä¸ªæµå¼ç¼–ç¨‹åº“ï¼Œå®ƒæä¾›äº† WebSocketSubject ç±»ï¼Œå¯ä»¥å°† WebSocket è½¬æ¢ä¸ºå¯è§‚å¯Ÿå¯¹è±¡ï¼Œæ–¹ä¾¿è¿›è¡Œå“åº”å¼ç¼–ç¨‹ã€‚ autobahn.jsï¼šautobahn.js æ˜¯ä¸€ä¸ªç”¨äºå®ç° WebSocket å’Œ WAMPï¼ˆWeb Application Messaging Protocolï¼‰çš„å®¢æˆ·ç«¯åº“ï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨å®ƒæ¥ä¸ WAMP è·¯ç”±è¿›è¡Œé€šä¿¡ã€‚ è¿™äº›åº“éƒ½æä¾›äº†è‰¯å¥½çš„æ¥å£å°è£…å’ŒåŠŸèƒ½ç‰¹æ€§ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©é€‚åˆçš„åº“æ¥è¿›è¡Œæµè§ˆå™¨ç«¯çš„ WebSocket å¼€å‘ã€‚ æ€»ç»“WebSocket åè®®æ˜¯ä¸€ç§åŸºäº TCP çš„åº”ç”¨å±‚åè®®ï¼Œå®ƒæä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡ŒåŒå‘é€šä¿¡çš„èƒ½åŠ›ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ HTTP åè®®ï¼Œå®ƒå…·æœ‰æ›´ä½çš„å»¶è¿Ÿå’Œæ›´é«˜çš„å®æ—¶æ€§ã€‚ WebSocket åè®®é€šè¿‡å»ºç«‹ä¸€æ¡æŒä¹…åŒ–çš„è¿æ¥æ¥å®ç°åŒå‘é€šä¿¡ï¼Œä»è€Œé¿å…äº† HTTP åè®®ä¸­é¢‘ç¹å»ºç«‹å’Œæ–­å¼€è¿æ¥çš„è¿‡ç¨‹ï¼Œå‡å°‘äº†ç½‘ç»œå¼€é”€å’ŒæœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚å®¢æˆ·ç«¯å¯ä»¥å‘é€æ¶ˆæ¯ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥å‘é€æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ï¼Œå®ç°äº†çœŸæ­£çš„åŒå‘é€šä¿¡ã€‚ åœ¨ä½¿ç”¨ WebSocket åè®®æ—¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¼šè¿›è¡Œä¸€æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œä»¥å»ºç«‹èµ· WebSocket è¿æ¥ã€‚æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šå‘é€ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œè¯·æ±‚å¤´ä¸­åŒ…å« Upgrade å’Œ Connection å­—æ®µï¼Œå‘Šè¯‰æœåŠ¡å™¨å®ƒå¸Œæœ›å‡çº§åˆ° WebSocket è¿æ¥ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åä¼šè¿”å›ä¸€ä¸ª HTTP å“åº”ï¼Œå“åº”å¤´ä¸­åŒ…å« Upgrade å’Œ Connection å­—æ®µï¼Œä»¥åŠä¸€ä¸ª Sec-WebSocket-Accept å­—æ®µï¼Œç”¨äºéªŒè¯è¯·æ±‚çš„åˆæ³•æ€§ã€‚æ¡æ‰‹æˆåŠŸåï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ WebSocket åè®®è¿›è¡Œé€šä¿¡äº†ã€‚ WebSocket åè®®æ”¯æŒäºŒè¿›åˆ¶æ•°æ®å’Œæ–‡æœ¬æ•°æ®çš„ä¼ è¾“ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œé€‰æ‹©ã€‚åŒæ—¶ï¼ŒWebSocket è¿˜æä¾›äº†å¿ƒè·³æœºåˆ¶ã€è‡ªåŠ¨é‡è¿ç­‰åŠŸèƒ½ï¼Œå¯ä»¥æé«˜è¿æ¥çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ æ€»ä¹‹ï¼ŒWebSocket åè®®åœ¨å®æ—¶é€šä¿¡ã€æ¸¸æˆã€åœ¨çº¿èŠå¤©ç­‰åœºæ™¯ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼Œå®ƒä¸º Web åº”ç”¨æä¾›äº†æ›´åŠ é«˜æ•ˆã€å¯é çš„åŒå‘é€šä¿¡æ–¹å¼ã€‚","tags":["Websocket"],"categories":["Websocket"]},{"title":"Nextjsé¡¹ç›®æœ€ä½³å®è·µ","path":"/2024/03/12/Nextjsé¡¹ç›®æœ€ä½³å®è·µ/","content":"åŸæ–‡åœ°å€Next.js é¡¹ç›®æœ€ä½³å®è·µ - æ˜é‡‘ ä»€ä¹ˆæ˜¯ Next.js â€œ Next.js é€šè¿‡æä¾›æ‰€æœ‰ç”Ÿäº§ç¯å¢ƒéœ€è¦çš„åŠŸèƒ½æ¥ç»™ä½ æœ€ä½³çš„å¼€å‘ä½“éªŒï¼šæ„å»ºæ—¶é¢„æ¸²æŸ“ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ŒTypeScript æ”¯æŒï¼Œæ™ºèƒ½æ‰“åŒ…ï¼Œè·¯ç”±é¢„åŠ è½½ï¼Œé›¶é…ç½®ç­‰ç­‰ â€ æ­£å¦‚ä¸Šæ–‡çš„ä»‹ç»ï¼ŒNext.js æ˜¯ä¸€ä¸ªéå¸¸å…¨é¢çš„ç°ä»£å…¨æ ˆåº”ç”¨æ„å»ºæ–¹æ¡ˆã€‚å®ƒåŒ…å«äº†éå¸¸ä¼˜é›…çš„ TypeScript å’Œ React æ”¯æŒï¼ŒåŒæ—¶æä¾›äº†ç°ä»£åº”ç”¨å¸¸è§çš„éœ€æ±‚è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šè·¯ç”±ï¼ŒAPIï¼ŒPostCSS å·¥å…·å’Œä»£ç åˆ†å‰²ç­‰ã€‚ ä¸æ­¤åŒæ—¶å®ƒä¹Ÿæ”¯æŒé™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆç”¨äºå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ‰˜ç®¡çš„é«˜æ€§èƒ½é™æ€ HTML é¡µé¢ï¼‰æˆ–è€…æ˜¯é€šè¿‡ Vercel &#x2F; AWS ç­‰éƒ¨ç½² Node.js æœåŠ¡æ¥è¿›è¡Œæ•°æ®æŒ‰éœ€åŠ è½½çš„æœåŠ¡ç«¯æ¸²æŸ“é¡µé¢ Next.js å·²è¿…é€Ÿæˆä¸º Web å¼€å‘é¢†åŸŸæœ€æŠ¢æ‰‹çš„æŠ€èƒ½ä¹‹ä¸€ã€‚æœ¬æ•™ç¨‹æ—¨åœ¨å……å½“ Next.js æ–‡æ¡£ çš„ â€œ å®ç”¨ â€ å»¶ä¼¸ï¼Œå¹¶å¸®åŠ©ä½ ä½¿ç”¨å¤§é‡æœ€ä½³å®è·µæ¥å¼€å‘é¡¹ç›®ï¼Œè¿™å°†æœ‰åˆ©äºä½ åœ¨ä»Šåå¯¹é¡¹ç›®å®æ–½è¿›ä¸€æ­¥çš„æ‰©å±•ã€‚ ä»‹ç»æœ¬æ•™ç¨‹ä¸æ˜¯ä¸ºäº†æ›¿ä»£å®˜æ–¹æ–‡æ¡£ï¼Œå› ä¸ºå®˜æ–¹æ–‡æ¡£å·²ç»å†™å¾—éå¸¸ç®€å•æ˜“æ‡‚äº†ã€‚æˆ‘å¼ºçƒˆæ¨èä½ åœ¨å­¦ä¹ æœ¬æ–‡ä¹‹å‰å…ˆå¤§è‡´è¿‡ä¸€ä¸‹ è¿™ä¸€ç«  çš„å†…å®¹ï¼Œè¿™æ ·ä½ å¯¹æ–‡ä¸­çš„æœ¯è¯­å’Œå·¥å…·ä¼šæ¯”è¾ƒç†Ÿæ‚‰ï¼Œä»–ä»¬æä¾›çš„ä¸€äº›ç»„ä»¶ä¸æ™®é€š HTML ç»„ä»¶ç›¸ä¼¼ï¼Œä½†é€šå¸¸æ˜¯â€œæ›´å¼ºå¤§â€çš„ç‰ˆæœ¬ã€‚ æˆ‘æ‰¿è®¤å…¶ä¸­è®¸å¤šçš„æ˜¯ä¸¥æ ¼çš„å¹¶ä¸”å¸¦æœ‰ä¸»è§‚è‰²å½©çš„ï¼Œå¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªå¯¹ä½ æ²¡æœ‰å¸å¼•åŠ›ï¼Œé‚£ä¹ˆåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥ç®€å•åœ°è·³è¿‡è¿™äº›éƒ¨åˆ†å¹¶ä¸”åº”è¯¥ä»ç„¶èƒ½å¤Ÿå®Œæˆæœ¬æ•™ç¨‹è€Œä¸ä¼šé‡åˆ°å¤ªå¤šéº»çƒ¦ ç°åœ¨ï¼Œå¦‚æœä½ å·²ç»å‡†å¤‡å¥½äº†ï¼Œé‚£å°±å¼€å§‹å­¦ä¹ å§ ï¼ é¡¹ç›®åˆ›å»ºæˆ‘ä»¬å°†ä½¿ç”¨ TypeScript æ¨¡ç‰ˆæ¥åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Next.js åº”ç”¨ 1234567npx create-next-app@latest --typescript nextjs-fullstack-app-template-zncd nextjs-fullstack-app-template-zn// ESLInt : YES// `src/` directory : YES// `app/` directory : NO é¦–å…ˆæˆ‘ä»¬è¯•è¯•è¿™ä¸ªé¡¹ç›®èƒ½ä¸èƒ½æ­£å¸¸è¿è¡Œã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¼šä½¿ç”¨ yarn ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ NPM æˆ–å…¶ä»–çš„å·¥å…· 1yarn dev ä½ å¯ä»¥æ‰“å¼€ http://localhost:3000/ çœ‹åˆ°è¿™ä¸ª demo å·²ç»æˆåŠŸè¿è¡Œ ä¹Ÿæ¨èä½ è¿è¡Œ 1yarn build æ¥ç¡®ä¿ä½ çš„é¡¹ç›®èƒ½å¤ŸæˆåŠŸæ‰“åŒ…ã€‚æ¨èï¼ˆéå¿…éœ€ï¼‰å…³é—­å¼€å‘æœåŠ¡å™¨æ¥è¿è¡Œ Next.js çš„æ„å»ºå‘½ä»¤ã€‚å¤§å¤šæ•°æ—¶å€™æ²¡æœ‰é—®é¢˜ï¼Œä½†å¶å°”æ„å»ºä¼šä½¿ä½ çš„å¼€å‘æœåŠ¡å™¨å¤„äºéœ€è¦é‡æ–°å¯åŠ¨çš„å¥‡æ€ªçŠ¶æ€ã€‚ æ„å»ºæˆåŠŸä¹‹åä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œçœ‹åˆ°è¿™äº›ç»¿è‰²å’Œç™½è‰²æ–‡å­—çš„æŠ¥å‘Šï¼Œæ„å»ºè¿‡ç¨‹æ˜¯é«˜æ•ˆçš„ï¼Œæˆ‘ä»¬å°†åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å°½é‡ä¿æŒè¿™æ ·çš„çŠ¶æ€ã€‚ å¼•æ“é”å®šæˆ‘ä»¬åœ¨æœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„ v16 çš„ Node.jsã€‚ä½ å¯ä»¥é€šè¿‡ node --version æ£€æŸ¥ç‰ˆæœ¬ã€‚æ‰“å¼€ package.json engines å­—æ®µæ˜¯ä½ æŒ‡å®šæ‰€ä½¿ç”¨å·¥å…·çš„ç‰¹å®šç‰ˆæœ¬çš„åœ°æ–¹ã€‚ 1234567891011121314151617181920212223242526&#123; &quot;name&quot;: &quot;nextjs-fullstack-app-template-zn&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;private&quot;: true, &quot;author&quot;: &quot;YOUR_NAME&quot;, &quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;next dev&quot;, &quot;build&quot;: &quot;next build&quot;, &quot;start&quot;: &quot;next start&quot;, &quot;lint&quot;: &quot;next lint&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;@next/font&quot;: &quot;13.1.6&quot;, &quot;@types/node&quot;: &quot;18.11.18&quot;, &quot;@types/react&quot;: &quot;18.0.27&quot;, &quot;@types/react-dom&quot;: &quot;18.0.10&quot;, &quot;next&quot;: &quot;13.1.6&quot;, &quot;react&quot;: &quot;18.2.0&quot;, &quot;react-dom&quot;: &quot;18.2.0&quot;, &quot;typescript&quot;: &quot;4.9.4&quot; &#125;, &quot;engines&quot;: &#123; &quot;node&quot;: &quot;&gt;=16.0.0&quot;, &quot;yarn&quot;: &quot;&gt;=1.22.0&quot; &#125;&#125; Git é…ç½®è¿™å°†æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æäº¤åˆ°è¿œç¨‹ä»“åº“çš„å¥½æ—¶æœºï¼Œä»¥ç¡®ä¿æ›´æ”¹å¾—åˆ°å¤‡ä»½ï¼Œå¹¶éµå¾ªæœ€ä½³å®è·µå°†ç›¸å…³æ›´æ”¹åˆ†ç»„åœ¨ä¸€ä¸ªæäº¤ä¸­ï¼Œç„¶åå†åšæ–°çš„ä¿®æ”¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„ Next.js é¡¹ç›®å·²ç»åˆå§‹åŒ–äº†ä¸€ä¸ª repoã€‚ ä½ å¯ä»¥ä½¿ç”¨ git status æ£€æŸ¥ä½ æ‰€åœ¨çš„åˆ†æ”¯ã€‚ å®ƒåº”è¯¥ä¼šæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„æ–‡æ¡ˆ 12345678910111213$ git statusOn branch mainChanges not staged for commit: (use &quot;git add &lt;file&gt;...&quot; to update what will be committed) (use &quot;git restore &lt;file&gt;...&quot; to discard changes in working directory) modified: package.jsonUntracked files: (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed) .npmrc .vscode/no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) è¿™å‘Šè¯‰æˆ‘ä»¬æˆ‘ä»¬åœ¨ main åˆ†æ”¯ä¸Šï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰æš‚å­˜æˆ–åšå‡ºä»»ä½•æäº¤ è®©æˆ‘ä»¬æäº¤ç›®å‰çš„å˜æ›´ 123git add .git commit -am &quot;feat: project init&quot; ç¬¬ä¸€ä¸ªå‘½ä»¤å°†åœ¨é¡¹ç›®ç›®å½•ä¸­æ·»åŠ å¹¶æš‚å­˜æ‰€æœ‰åœ¨ .gitignore ä¸­æœªè¢«å¿½ç•¥çš„æ–‡ä»¶ã€‚ ç¬¬äºŒä¸ªå°†ä½¿ç”¨æˆ‘ä»¬åœ¨ -m æ ‡å¿—ä¹‹åå†™çš„æ¶ˆæ¯æ¥æäº¤å½“å‰é¡¹ç›®çš„çŠ¶æ€ è·³è½¬åˆ°ä½ å–œæ¬¢çš„ git æ‰˜ç®¡æœåŠ¡æä¾›å•†ï¼ˆ æ¯”å¦‚ Githubï¼‰å¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“æ¥å­˜æ”¾ä½ çš„é¡¹ç›®ã€‚ ç°åœ¨ä½ å·²å‡†å¤‡å¥½æ·»åŠ ä»“åº“çš„è¿œç¨‹æºå¹¶è¿›è¡Œæ¨é€ã€‚ Github ä¼šåœ¨ä½ åˆ›å»ºçš„æ—¶å€™ç»™ä½ å‡†ç¡®çš„è¯´æ˜ã€‚ ä½ çš„è¯­æ³•å¯èƒ½ä¸æˆ‘çš„ç•¥æœ‰ä¸åŒï¼Œå…·ä½“å–å†³äºä½¿ç”¨çš„æ˜¯ HTTPS è¿˜æ˜¯ SSHã€‚ 123git remote add origin git@github.com:&#123;YOUR_GITHUB_USERNAME&#125;/&#123;YOUR_REPOSITORY_NAME&#125;.gitgit push -u origin &#123;YOUR_BRANCH_NAME&#125; è¯·æ³¨æ„ï¼Œä»è¿™ä¸€ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Conventional Commits æ ‡å‡†ï¼Œç‰¹åˆ«æ˜¯ æ­¤å¤„æè¿° çš„ Angular çº¦å®š åŸå› ä¸è¯¥é¡¹ç›®ä¸­çš„è®¸å¤šå…¶ä»–åŠŸèƒ½ä¸€æ ·ï¼Œåªæ˜¯ä¸ºæ‰€æœ‰å¼€å‘äººå‘˜è®¾ç½®ä¸€ä¸ªä¸€è‡´çš„æ ‡å‡†ï¼Œä»¥ä¾¿åœ¨ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®æ—¶æœ€å¤§ç¨‹åº¦åœ°å‡å°‘åŸ¹è®­æ—¶é—´ã€‚æˆ‘ä¸ªäººä¸å¤ªå…³å¿ƒé€‰æ‹©ä»€ä¹ˆæ ‡å‡†ï¼Œåªè¦æ¯ä¸ªäººéƒ½åŒæ„éµå¾ªå®ƒï¼Œæ‰æ˜¯æœ€é‡è¦çš„ã€‚ ä¸€è‡´æ€§å°±æ˜¯ä¸€åˆ‡ ï¼ï¼ï¼ ä»£ç æ ¼å¼åŒ–å’Œè´¨é‡å·¥å…·ä¸ºäº†è®¾å®šä¸€ä¸ªæ ‡å‡†ï¼Œä¾›é¡¹ç›®çš„æ‰€æœ‰è´¡çŒ®è€…ä½¿ç”¨ï¼Œä»¥ä¿æŒä»£ç é£æ ¼ä¸€è‡´å¹¶éµå¾ªåŸºæœ¬çš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ªå·¥å…·ï¼š eslint - ä»£ç è§„èŒƒçš„æœ€ä½³å®è·µ prettier - è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç æ–‡ä»¶ ESLintæˆ‘ä»¬ä» ESLint å¼€å§‹ï¼Œå®ƒéå¸¸ç®€å•å› ä¸ºåœ¨æˆ‘ä»¬åˆ›å»º Next.js é¡¹ç›®çš„æ—¶å€™å·²ç»è‡ªåŠ¨å®‰è£…å¥½å¹¶ä¸”æœ‰äº†é»˜è®¤é…ç½®ã€‚ æˆ‘ä»¬ä»…éœ€è¦æ·»åŠ å°‘éƒ¨åˆ†é¢å¤–çš„é…ç½®å°±å¯ä»¥è®©å®ƒæ¯”é»˜è®¤é…ç½®æ›´åŠ ä¸¥æ ¼ã€‚å¦‚æœä½ ä¸åŒæ„å…¶ä¸­çš„ä»»ä½•ä¸€æ¡è§„åˆ™é…ç½®ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸ç®€å•çš„æ‰‹åŠ¨å…³é—­è¿™äº›è§„åˆ™ã€‚æˆ‘ä»¬å°†æ‰€æœ‰çš„ ESLint é…ç½®éƒ½å†™åœ¨ .eslintrc.json æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å·²ç»å­˜åœ¨äºæˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ã€‚ .eslintrc.json 123456789101112&#123; &quot;extends&quot;: [&quot;next&quot;, &quot;next/core-web-vitals&quot;, &quot;eslint:recommended&quot;], &quot;globals&quot;: &#123; &quot;React&quot;: &quot;readonly&quot; &#125;, &quot;rules&quot;: &#123; &quot;no-unused-vars&quot;: [ 1, &#123; &quot;args&quot;: &quot;after-used&quot;, &quot;argsIgnorePattern&quot;: &quot;^_&quot; &#125; ] &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„é»˜è®¤å€¼ï¼Œæˆ‘ä»¬å£°æ˜ React å°†å§‹ç»ˆè¢«å®šä¹‰ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ä¸“é—¨å¯¼å…¥å®ƒï¼Œæˆ‘è¿˜æ·»åŠ äº†ä¸ªäººè‡ªå®šä¹‰è§„åˆ™ï¼Œå®ƒå…è®¸ä½ ä¸ºå˜é‡æ·»åŠ å‰ç¼€ï¼ˆå¸¦ä¸‹åˆ’çº¿ _ï¼‰ å¦‚æœä½ å·²å£°æ˜å®ƒä»¬ä½†æœªåœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ æˆ‘å‘ç°å½“ä½ æ­£åœ¨å¤„ç†ä¸€é¡¹åŠŸèƒ½å¹¶æƒ³å‡†å¤‡ä¸€äº›å˜é‡ä»¥å¤‡åé¢ä½¿ç”¨ä½†åˆå°šæœªè¾¾åˆ°å®ç°å®ƒä»¬çš„åœ°æ­¥æ—¶ï¼Œè¿™ç§æƒ…å†µç»å¸¸å‡ºç° ä½ å¯ä»¥æµ‹è¯•ä¸€ä¸‹ä½ çš„é…ç½®é€šè¿‡è¿è¡Œï¼š 1yarn lint ä½ ä¼šå¾—åˆ°ç±»å‹çš„æç¤º 12âœ” No ESLint warnings or errorsâœ¨ Done in 3.48s. å¦‚æœä½ é‡åˆ°ä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆ ESLint éå¸¸æ“…é•¿æ¸…æ¥šåœ°è§£é‡Šå®ƒä»¬æ˜¯ä»€ä¹ˆã€‚å¦‚æœé‡åˆ°ä½ ä¸å–œæ¬¢çš„è§„åˆ™ï¼Œä½ å¯ä»¥ç®€å•çš„å°†å®ƒä» 1ï¼ˆå‘Šè­¦ï¼‰è®¾ç½®æˆ 0ï¼ˆå¿½ç•¥ï¼‰ æ¥å…³é—­å®ƒ 123&quot;rules&quot;: &#123; &quot;no-unused-vars&quot;: 0, &#125; è®©æˆ‘ä»¬åœ¨è¿™æ—¶å€™è¿›è¡Œä¸€æ¬¡æäº¤ï¼Œå¸¦ä¸Šä¿¡æ¯ build: configure eslint Prettierprettier ä¼šä¸ºæˆ‘ä»¬å¤„ç†æ–‡ä»¶çš„è‡ªåŠ¨æ ¼å¼åŒ–ã€‚è®©æˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°é¡¹ç›®ä¸­ å®ƒåªéœ€è¦åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ åˆ° devDependency 1yarn add -D prettier åŒæ—¶æˆ‘ä¹Ÿæ¨èä½ å®‰è£… Prettier VS Code æ’ä»¶ ï¼Œè¿™æ ·ä½ ä¸ç”¨ä¾èµ–å‘½ä»¤è¡Œå·¥å…·å°±å¯ä»¥åœ¨ VS Code ä¸­è¿›è¡Œæ–‡ä»¶æ ¼å¼åŒ–ã€‚åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£…å’Œé…ç½®å®ƒæ„å‘³ç€ VSCode å°†ä½¿ç”¨ä½ é¡¹ç›®çš„è®¾ç½®ï¼Œå› æ­¤ä»ç„¶æœ‰å¿…è¦åœ¨æ­¤å¤„æ·»åŠ å®ƒã€‚ æˆ‘ä»¬å°†åœ¨æ ¹ç›®å½•æ·»åŠ ä¸¤ä¸ªæ–‡ä»¶ï¼š .prettierrc 123456&#123; &quot;trailingComma&quot;: &quot;es5&quot;, &quot;tabWidth&quot;: 2, &quot;semi&quot;: true, &quot;singleQuote&quot;: true&#125; è¿™äº›é…ç½®å®Œå…¨ç”±ä½ è‡ªè¡Œå†³å®šä»€ä¹ˆæœ€é€‚åˆä½ çš„å›¢é˜Ÿå’Œé¡¹ç›® .prettierignore 1234.yarn.nextdistnode_modules åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æˆ‘åˆ—äº†ä¸€äº›ç›®å½•ï¼Œæˆ‘ä¸å¸Œæœ› prettier åœ¨è¿™äº›ç›®å½•ä¸­æµªè´¹ä»»ä½•èµ„æºå»è¿›è¡Œæ ¼å¼åŒ–ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼ *.html è¿™æ ·çš„æ–¹å¼å»å¿½ç•¥ä½ é€‰æ‹©çš„æ–‡ä»¶ç±»ä¼¼ ç°åœ¨æˆ‘ä»¬åœ¨ package.json æ·»åŠ æ–°çš„ script ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œ Prettierï¼š package.json 123456... &quot;scripts: &#123; ... &quot;prettier&quot;: &quot;prettier --write .&quot; &#125; ä½ å¯ä»¥è¿è¡Œ 1yarn prettier è‡ªåŠ¨æ ¼å¼åŒ–ã€ä¿®å¤å’Œä¿å­˜é¡¹ç›®ä¸­ä½ æœªå¿½ç•¥çš„æ‰€æœ‰æ–‡ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘çš„æ ¼å¼åŒ–ç¨‹åºæ›´æ–°äº†å¤§çº¦ 5 ä¸ªæ–‡ä»¶ã€‚ ä½ å¯ä»¥åœ¨ VS Code å·¦ä¾§çš„æºä»£ç ç®¡ç†é€‰é¡¹å¡ä¸­çš„å·²æ›´æ”¹æ–‡ä»¶åˆ—è¡¨ä¸­çœ‹åˆ°å®ƒä»¬ã€‚ è®©æˆ‘ä»¬åœ¨è¿™æ—¶å€™è¿›è¡Œä¸€æ¬¡æäº¤ï¼Œå¸¦ä¸Šä¿¡æ¯ build: implement prettier Git Hooksåœ¨æˆ‘ä»¬å¼€å§‹è¿›è¡Œç»„ä»¶å¼€å‘ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€èŠ‚æ˜¯å…³äºé…ç½®çš„ã€‚ è¯·è®°ä½ï¼Œå¦‚æœä½ è¦é•¿æœŸæ„å»ºè¯¥é¡¹ç›®ï¼Œä½ å°†å¸Œæœ›è¯¥é¡¹ç›®å°½å¯èƒ½åšå¦‚ç£çŸ³ï¼Œå°¤å…¶æ˜¯ä¸å…¶ä»–å¼€å‘äººå‘˜å›¢é˜Ÿåˆä½œæ—¶ã€‚ èŠ±æ—¶é—´åœ¨ä¸€å¼€å§‹å°±æŠŠå®ƒåšå¥½æ˜¯å€¼å¾—çš„ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå«åš Husky çš„å·¥å…· Husky æ˜¯ä¸€ä¸ªç”¨äºåœ¨ git è¿›ç¨‹çš„ä¸åŒé˜¶æ®µè¿è¡Œè„šæœ¬çš„å·¥å…·ï¼Œä¾‹å¦‚ addã€commitã€push ç­‰ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè®¾ç½®æŸäº›æ¡ä»¶ï¼Œå¹¶ä¸”åªæœ‰åœ¨æˆ‘ä»¬çš„ä»£ç æ»¡è¶³è¿™äº›æ¡ä»¶æ—¶æ‰å…è®¸æäº¤å’Œæ¨é€ä¹‹ç±»çš„äº‹æƒ…æˆåŠŸï¼Œå‡è®¾è¿™è¡¨æ˜æˆ‘ä»¬çš„é¡¹ç›®è´¨é‡æ˜¯å¯ä»¥æ¥å—çš„ã€‚ å®‰è£… Husky 123yarn add -D huskynpx husky install ç¬¬äºŒä¸ªå‘½ä»¤å°†åœ¨ä½ çš„é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª .husky ç›®å½•ã€‚è¿™å°±æ˜¯ä½ çš„ hooks å­˜æ”¾çš„åœ°æ–¹ã€‚ç¡®ä¿æ­¤ç›®å½•åŒ…å«åœ¨ä½ çš„ä»£ç ä»“åº“ä¸­ï¼Œå› ä¸ºå®ƒä¹Ÿé€‚ç”¨äºå…¶ä»–å¼€å‘äººå‘˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½ è‡ªå·±ã€‚ åœ¨ package.json æ–‡ä»¶ä¸­æ·»åŠ  script package.json 123456... &quot;scripts: &#123; ... &quot;prepare&quot;: &quot;husky install&quot; &#125; è¿™å°†ç¡®ä¿åœ¨å…¶ä»–å¼€å‘äººå‘˜è¿è¡Œè¯¥é¡¹ç›®æ—¶è‡ªåŠ¨å®‰è£… Husky åˆ›å»ºä¸€ä¸ª hook 1npx husky add .husky/pre-commit &quot;yarn lint&quot; ä¸Šé¢è¯´ä¸ºäº†è®©æˆ‘ä»¬çš„æäº¤æˆåŠŸï¼Œyarn lint å¿…é¡»é¦–å…ˆè¿è¡Œå¹¶æˆåŠŸã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€ æˆåŠŸ â€æ„å‘³ç€æ²¡æœ‰é”™è¯¯ã€‚ å®ƒå°†å…è®¸ä½ æœ‰å‘Šè­¦ï¼ˆè¯·è®°ä½ï¼Œåœ¨ ESLint é…ç½®ä¸­ï¼Œè®¾ç½® 1 æ˜¯è­¦å‘Šï¼Œè®¾ç½® 2 æ˜¯é”™è¯¯ï¼‰ è®©æˆ‘ä»¬åœ¨è¿™æ—¶å€™è¿›è¡Œä¸€æ¬¡æäº¤ï¼Œå¸¦ä¸Šä¿¡æ¯ ci: implement husky ã€‚å¦‚æœæ‰€æœ‰è®¾ç½®éƒ½å®Œæˆï¼Œåœ¨ä½ è¿›è¡Œæäº¤ä¹‹å‰å°±ä¼šè¿è¡Œ lint script è®©æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ª 1npx husky add .husky/pre-push &quot;yarn build&quot; ä»¥ä¸Šç¡®ä¿æˆ‘ä»¬åªæœ‰åœ¨ä»£ç æ„å»ºæˆåŠŸçš„æ—¶å€™æ‰å¯ä»¥å°†ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚ è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªç›¸å½“åˆç†çš„æ¡ä»¶ï¼Œä¸æ˜¯å—ï¼Ÿ é€šè¿‡æäº¤æ­¤æ›´æ”¹å¹¶å°è¯•æ¨é€æ¥éšæ„æµ‹è¯•å®ƒã€‚ æœ€åï¼Œæˆ‘ä»¬å°†å†æ·»åŠ ä¸€ä¸ªå·¥å…·ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨éµå¾ªæ‰€æœ‰æäº¤æ¶ˆæ¯çš„æ ‡å‡†çº¦å®šï¼Œè®©æˆ‘ä»¬ç¡®ä¿å›¢é˜Ÿä¸­çš„æ¯ä¸ªäººéƒ½éµå¾ªå®ƒä»¬ï¼ˆåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±ï¼ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„æäº¤æ¶ˆæ¯æ·»åŠ ä¸€ä¸ª linterï¼š 1yarn add -D @commitlint/config-conventional @commitlint/cli è¦é…ç½®å®ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ç»„æ ‡å‡†é»˜è®¤å€¼ï¼Œä½†æˆ‘å–œæ¬¢å°†è¯¥åˆ—è¡¨æ˜¾å¼åŒ…å«åœ¨ commitlint.config.js æ–‡ä»¶ä¸­ï¼Œå› ä¸ºæˆ‘æœ‰æ—¶ä¼šå¿˜è®°å¯ç”¨çš„å‰ç¼€ï¼š commitlint.config.js 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// build: å½±å“æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–é¡¹çš„æ›´æ”¹ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šgulpã€broccoliã€npmï¼‰// ci: æ›´æ”¹æˆ‘ä»¬çš„ CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬ï¼ˆç¤ºä¾‹èŒƒå›´ï¼šTravisã€Circleã€BrowserStackã€SauceLabsï¼‰// docs: æ–‡æ¡£ä¿®æ”¹// feat: ä¸€ä¸ªæ–°çš„åŠŸèƒ½// fix: ä¸€ä¸ª bug ä¿®å¤// perf: æå‡æ€§èƒ½çš„ä»£ç ä¿®æ”¹// refactor: æ—¢ä¸ä¿®å¤é”™è¯¯ä¹Ÿä¸æ·»åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹// style: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼ã€ç¼ºå°‘åˆ†å·ç­‰ï¼‰// test: æ·»åŠ ç¼ºå¤±çš„æµ‹è¯•æˆ–æ›´æ­£ç°æœ‰æµ‹è¯•module.exports = &#123; extends: [&quot;@commitlint/config-conventional&quot;], rules: &#123; &quot;body-leading-blank&quot;: [1, &quot;always&quot;], &quot;body-max-line-length&quot;: [2, &quot;always&quot;, 100], &quot;footer-leading-blank&quot;: [1, &quot;always&quot;], &quot;footer-max-line-length&quot;: [2, &quot;always&quot;, 100], &quot;header-max-length&quot;: [2, &quot;always&quot;, 100], &quot;scope-case&quot;: [2, &quot;always&quot;, &quot;lower-case&quot;], &quot;subject-case&quot;: [ 2, &quot;never&quot;, [&quot;sentence-case&quot;, &quot;start-case&quot;, &quot;pascal-case&quot;, &quot;upper-case&quot;], ], &quot;subject-empty&quot;: [2, &quot;never&quot;], &quot;subject-full-stop&quot;: [2, &quot;never&quot;, &quot;.&quot;], &quot;type-case&quot;: [2, &quot;always&quot;, &quot;lower-case&quot;], &quot;type-empty&quot;: [2, &quot;never&quot;], &quot;type-enum&quot;: [ 2, &quot;always&quot;, [ &quot;build&quot;, &quot;chore&quot;, &quot;ci&quot;, &quot;docs&quot;, &quot;feat&quot;, &quot;fix&quot;, &quot;perf&quot;, &quot;refactor&quot;, &quot;revert&quot;, &quot;style&quot;, &quot;test&quot;, &quot;translation&quot;, &quot;security&quot;, &quot;changeset&quot;, ], ], &#125;,&#125;; ç„¶åä½¿ç”¨ Husky å¯ç”¨ commitlintï¼š 12345npx husky add .husky/commit-msg &#x27;npx --no -- commitlint --edit &quot;$1&quot;&#x27;## æœ‰çš„æ—¶å€™ä¸Šè¿°çš„å‘½ä»¤ä¼šåœ¨æŸäº›å‘½ä»¤è¡Œç¯å¢ƒå¤±æ•ˆï¼Œä¹Ÿå¯ä»¥è¯•è¯•ä¸‹é¢çš„å‘½ä»¤npx husky add .husky/commit-msg \\&quot;npx --no -- commitlint --edit &#x27;$1&#x27;\\&quot;## æˆ–è€…npx husky add .husky/commit-msg &quot;npx --no -- commitlint --edit $1&quot; æˆ‘ç°åœ¨è¦ä½¿ç”¨æ¶ˆæ¯ ci: implement commitlint åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ ä½ å¯ä»¥åœ¨ä¸‹é¢çš„å±å¹•æˆªå›¾ä¸­çœ‹åˆ°æ­¤è®¾ç½®çš„æœ€ç»ˆç»“æœï¼Œå¸Œæœ›ä½ çš„ç»“æœä¸æ­¤ç±»ä¼¼ï¼š å¦‚æœæäº¤ä¿¡æ¯æ ¼å¼ä¸æ­£ç¡®çš„è¯ï¼Œåˆ™ä¼šæŠ¥é”™ VS Code é…ç½®ç°åœ¨æˆ‘ä»¬å·²ç»å®ç°äº† ESLint å’Œ Prettierï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€äº›ä¾¿åˆ©çš„ VS Code åŠŸèƒ½è®©å®ƒä»¬è‡ªåŠ¨è¿è¡Œã€‚ åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º .vscode çš„ç›®å½•å’Œä¸€ä¸ªåä¸º settings.json çš„æ–‡ä»¶ã€‚ è¿™å°†æ˜¯ä¸€ä¸ªè¦†ç›–å·²å®‰è£… VS ä»£ç é»˜è®¤è®¾ç½®çš„å€¼åˆ—è¡¨ã€‚ æˆ‘ä»¬æƒ³è¦å°†å®ƒä»¬æ”¾åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„åŸå› æ˜¯æˆ‘ä»¬å¯ä»¥è®¾ç½®ä»…é€‚ç”¨äºè¯¥é¡¹ç›®çš„ç‰¹å®šè®¾ç½®ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å®ƒä»¬åŒ…å«åœ¨ä»£ç ä»“åº“ä¸­æ¥ä¸æˆ‘ä»¬å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜å…±äº«å®ƒä»¬ã€‚ åœ¨ settings.json ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä»¥ä¸‹å€¼ .vscode/settings.json 12345678&#123; &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;, &quot;editor.formatOnSave&quot;: true, &quot;editor.codeActionsOnSave&quot;: &#123; &quot;source.fixAll&quot;: true, &quot;source.organizeImports&quot;: true &#125;&#125; ä»¥ä¸Šå°†å‘Šè¯‰ VS Code ä½¿ç”¨ä½ çš„ Prettier æ‰©å±•ä½œä¸ºé»˜è®¤æ ¼å¼åŒ–ç¨‹åºï¼ˆå¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥æ‰‹åŠ¨è¦†ç›–å¦ä¸€ä¸ªï¼‰å¹¶åœ¨æ¯æ¬¡ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä½ çš„æ–‡ä»¶å¹¶ç»„ç»‡ä½ çš„å¯¼å…¥è¯­å¥ éå¸¸æ–¹ä¾¿çš„ä¸œè¥¿ï¼Œä½ ä¸å†éœ€è¦è€ƒè™‘çš„å¦ä¸€ä»¶äº‹ï¼Œå› æ­¤å¯ä»¥ä¸“æ³¨äºé‡è¦çš„äº‹æƒ…ï¼Œä¾‹å¦‚è§£å†³ä¸šåŠ¡é—®é¢˜ è®©æˆ‘ä»¬åœ¨è¿™æ—¶å€™è¿›è¡Œä¸€æ¬¡æäº¤ï¼Œå¸¦ä¸Šä¿¡æ¯ build: implement vscode project settings è°ƒè¯•è®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæ–¹ä¾¿çš„ç¯å¢ƒæ¥è°ƒè¯•æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œä»¥é˜²æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ã€‚ åœ¨ .vscode ç›®å½•ä¸‹åˆ›å»º launch.json æ–‡ä»¶ launch.json 1234567891011121314151617181920212223242526272829&#123; &quot;version&quot;: &quot;0.1.0&quot;, &quot;configurations&quot;: [ &#123; &quot;name&quot;: &quot;Next.js: debug server-side&quot;, &quot;type&quot;: &quot;node-terminal&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;command&quot;: &quot;npm run dev&quot; &#125;, &#123; &quot;name&quot;: &quot;Next.js: debug client-side&quot;, &quot;type&quot;: &quot;pwa-chrome&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;url&quot;: &quot;&lt;http://localhost:3000&gt;&quot; &#125;, &#123; &quot;name&quot;: &quot;Next.js: debug full stack&quot;, &quot;type&quot;: &quot;node-terminal&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;command&quot;: &quot;npm run dev&quot;, &quot;console&quot;: &quot;integratedTerminal&quot;, &quot;serverReadyAction&quot;: &#123; &quot;pattern&quot;: &quot;started server on .+, url: (https?://.+)&quot;, &quot;uriFormat&quot;: &quot;%s&quot;, &quot;action&quot;: &quot;debugWithChrome&quot; &#125; &#125; ]&#125; ä½¿ç”¨è¯¥è„šæœ¬ä½ å¯ä»¥é€‰æ‹©ä¸‰ç§è°ƒè¯•æ–¹å¼ã€‚å•å‡» VS Code å·¦ä¾§çš„å° â€œé”™è¯¯å’Œæ’­æ”¾å›¾æ ‡â€ æˆ–æŒ‰ Ctrl + Shift + D è®¿é—®è°ƒè¯•èœå•ã€‚ä½ å¯ä»¥é€‰æ‹©è¦è¿è¡Œçš„è„šæœ¬å¹¶ä½¿ç”¨å¯åŠ¨&#x2F;åœæ­¢æŒ‰é’®å¯åŠ¨ &#x2F; åœæ­¢å®ƒ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ–è€…å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ VS Codeï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­è®¾ç½®ä¸€äº›æœ‰ç”¨çš„è°ƒè¯•è„šæœ¬ é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®‰è£… cross-env ï¼Œ å¦‚æœä½ æœ‰åŒäº‹åœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆWindowsã€Linuxã€Mac ç­‰ï¼‰ä¸Šå·¥ä½œï¼Œåˆ™æœ‰å¿…è¦è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ 1yarn add -D cross-env å®‰è£…å®Œè¿™ä¸ªåŒ…ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°ä¸‹ package.json æ–‡ä»¶ä¸­çš„ dev è„šæœ¬ 1234567&#123; ... &quot;scripts&quot;: &#123; ... &quot;dev&quot;: &quot;cross-env NODE_OPTIONS=&#x27;--inspect&#x27; next dev&quot;, &#125;,&#125; è¿™å°†å…è®¸ä½ åœ¨å¼€å‘æ¨¡å¼ä¸‹å·¥ä½œæ—¶åœ¨æµè§ˆå™¨ä¸­è®°å½•æœåŠ¡å™¨æ•°æ®ï¼Œä»è€Œæ›´å®¹æ˜“è°ƒè¯•é—®é¢˜ã€‚ åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ build: add debugging configuration ç›®å½•ç»“æ„æœ¬èŠ‚ç°åœ¨å°†ä»‹ç»åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­è®¾ç½®æ–‡ä»¶å¤¹ç»“æ„ã€‚è¿™æ˜¯è®¸å¤šäººéƒ½ä¼šæœ‰éå¸¸å¼ºçƒˆæ„è§çš„è¯é¢˜ä¹‹ä¸€ï¼Œå¹¶ä¸”æœ‰å……åˆ†çš„ç†ç”±ï¼ä»é•¿è¿œæ¥çœ‹ï¼Œç›®å½•ç»“æ„ç¡®å®å¯ä»¥åœ¨é¡¹ç›®å¤±æ§æ—¶æˆå°±æˆ–ç ´åé¡¹ç›®ï¼Œå°¤å…¶æ˜¯å½“å›¢é˜Ÿæˆå‘˜ä¸å¾—ä¸èŠ±è´¹ä¸å¿…è¦çš„æ—¶é—´æ¥çŒœæµ‹å°†ä¸œè¥¿æ”¾åœ¨å“ªé‡Œï¼ˆæˆ–æ‰¾åˆ°ä¸œè¥¿ï¼‰æ—¶ã€‚ æˆ‘ä¸ªäººå–œæ¬¢é‡‡ç”¨ç›¸å½“ç®€å•çš„æ–¹æ³•ï¼ŒåŸºæœ¬ä¸Šä»¥ç±»çš„ model &#x2F; view å°†äº‹ç‰©åˆ†å¼€ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸‰ä¸ªä¸»è¦æ–‡ä»¶å¤¹ PS: åŸæ–‡æ²¡æœ‰ src ç›®å½•ï¼Œæˆ‘ä¸ªäººå–œæ¬¢ç”¨ src ç›®å½•ï¼Œæ‰€ä»¥åŠ äº† src æ ¹ç›®å½• 123/components/lib/pages components - ç»„æˆåº”ç”¨ç¨‹åºçš„å„ä¸ª UI ç»„ä»¶å°†ä½äºæ­¤å¤„ lib - ä¸šåŠ¡ &#x2F; åº”ç”¨ç¨‹åº&#x2F; é¢†åŸŸ é€»è¾‘å°†å­˜åœ¨äºæ­¤ pages - é¡¹ç›®çš„å®é™… è·¯ç”±&#x2F; é¡µé¢ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šæœ‰å…¶ä»–ç›®å½•æ¥æ”¯æŒè¯¥é¡¹ç›®ï¼Œä½†æ„æˆæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„å‡ ä¹æ‰€æœ‰å†…å®¹çš„æ ¸å¿ƒéƒ½å°†ä½äºè¿™ä¸‰ä¸ªç›®å½•ä¸­ åœ¨ components ä¸­ï¼Œæˆ‘ä»¬å°†æœ‰å­ç›®å½•ï¼Œè¿™äº›å­ç›®å½•å°†ç›¸ä¼¼ç±»å‹çš„ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ã€‚ä½ å¯ä»¥ä½¿ç”¨ä½ å–œæ¬¢çš„ä»»ä½•æ–¹æ³•æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ æˆ‘è¿‡å»ç»å¸¸ä½¿ç”¨ MUI åº“ï¼Œæ‰€ä»¥æˆ‘å€¾å‘äºéµå¾ªä»–ä»¬åœ¨æ–‡æ¡£ä¸­ç”¨äºç»„ä»¶çš„ç›¸åŒç»„ç»‡ ä¾‹å¦‚è¾“å…¥æ¡†ã€å¯¼èˆªã€å·¥å…·æ–¹æ³•ã€å¸ƒå±€ç­‰ã€‚ ä½ ä¸éœ€è¦æå‰åˆ›å»ºè¿™äº›ç›®å½•å¹¶å°†å®ƒä»¬ç•™ç©ºã€‚æˆ‘ä¼šåœ¨æ„å»ºç»„ä»¶æ—¶éšæ‰‹åˆ›å»ºå®ƒä»¬ æœ¬èŠ‚æ—¨åœ¨è§£é‡Šæˆ‘å°†å¦‚ä½•è®¾ç½®è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥é€‰æ‹©è®¸å¤šå…¶ä»–æ–¹å¼æ¥ç»„ç»‡ä½ çš„é¡¹ç›®ï¼Œæˆ‘é¼“åŠ±ä½ é€‰æ‹©æœ€é€‚åˆä½ å’Œå›¢é˜Ÿçš„æ–¹å¼ã€‚ è¿™é‡Œæˆ‘å†ä½¿ç”¨ feat: create directory structure åˆ›å»ºä¸€ä¸ªæäº¤ æ·»åŠ  Storybookæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ä¸€ç§å¾ˆæ£’çš„ç°ä»£å·¥å…·å«åš Storybook Storybook ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç¯å¢ƒæ¥å±•ç¤ºå’Œæµ‹è¯•æˆ‘ä»¬åœ¨æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨å®ƒä»¬çš„åº”ç”¨ç¨‹åºä¹‹å¤–æ„å»ºçš„ React ç»„ä»¶ã€‚å®ƒæ˜¯å°†å¼€å‘äººå‘˜ä¸è®¾è®¡äººå‘˜è”ç³»èµ·æ¥å¹¶èƒ½å¤Ÿæ ¹æ®è®¾è®¡è¦æ±‚éªŒè¯æˆ‘ä»¬å¼€å‘çš„ç»„ä»¶çš„å¤–è§‚å’ŒåŠŸèƒ½çš„å¥½å·¥å…· è¯·æ³¨æ„ï¼ŒStorybook æ˜¯ä¸€ç§å¯è§†åŒ–æµ‹è¯•å·¥å…·ï¼Œç¨åæˆ‘ä»¬å°†å¼•å…¥å…¶ä»–å·¥å…·æ¥è¿›è¡ŒåŠŸèƒ½å•å…ƒæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯• å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Storybook çš„æœ€ä½³æ–¹å¼æ˜¯å®‰è£…å¹¶è¯•ç”¨å®ƒï¼ 1npx sb init --builder webpack5 æˆ‘ä»¬å°†ä½¿ç”¨ webpack5 ç‰ˆæœ¬æ¥ä¸æœ€æ–°ç‰ˆæœ¬çš„ webpack ä¿æŒåŒæ­¥ï¼ˆæˆ‘ä¸ç¡®å®šä¸ºä»€ä¹ˆå®ƒä»ç„¶ä¸æ˜¯é»˜è®¤ç‰ˆæœ¬ã€‚ä¹Ÿè®¸åœ¨ä½ ä½¿ç”¨æœ¬æ•™ç¨‹æ—¶å·²ç»æ˜¯äº†ï¼‰ã€‚ å½“ Storybook å®‰è£…æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ£€æµ‹æœ‰å…³é¡¹ç›®çš„å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚å®ƒæ˜¯ä¸€ä¸ª React åº”ç”¨ç¨‹åºï¼Œä»¥åŠæ­£åœ¨ä½¿ç”¨çš„å…¶ä»–å·¥å…·ã€‚ å®ƒåº”è¯¥å…¼å®¹å¥½æ‰€æœ‰é…ç½®æœ¬èº«ã€‚ å¦‚æœä½ æ”¶åˆ°æœ‰å…³ eslintPlugin çš„æç¤ºï¼Œä½ å¯ä»¥é€‰æ‹©â€œæ˜¯â€ã€‚ ä¸è¿‡ï¼Œæˆ‘ä»¬å°†æ‰‹åŠ¨é…ç½®å®ƒï¼Œæ‰€ä»¥å¦‚æœä½ æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯è¯´å®ƒæ²¡æœ‰è‡ªåŠ¨é…ç½®ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚ æ‰“å¼€ eslintrc.json æ–‡ä»¶å¹¶æ›´æ–°å®ƒ 123456789101112131415161718192021222324252627&#123; &quot;extends&quot;: [ &quot;plugin:storybook/recommended&quot;, // æ–°åŠ å…¥ &quot;next&quot;, &quot;next/core-web-vitals&quot;, &quot;eslint:recommended&quot; ], &quot;globals&quot;: &#123; &quot;React&quot;: &quot;readonly&quot; &#125;, // æ–°åŠ å…¥ &quot;overrides&quot;: [ &#123; &quot;files&quot;: [&quot;*.stories.@(ts|tsx|js|jsx|mjs|cjs)&quot;], &quot;rules&quot;: &#123; // example of overriding a rule &quot;storybook/hierarchy-separator&quot;: &quot;error&quot; &#125; &#125; ], &quot;rules&quot;: &#123; &quot;no-unused-vars&quot;: [ 1, &#123; &quot;args&quot;: &quot;after-used&quot;, &quot;argsIgnorePattern&quot;: &quot;^_&quot; &#125; ] &#125;&#125; æˆ‘æ·»åŠ äº† // æ–°åŠ å…¥ æ¥æ ‡è®° Storybook ç‰¹å®šçš„ä¸¤ä¸ªæ–°éƒ¨åˆ†å’Œè¡Œã€‚ æˆ‘ä»¬æ³¨æ„åˆ°ï¼ŒStorybook ä¹Ÿå·²å°† &#x2F;stories ç›®å½•æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šç¤ºä¾‹ã€‚å¦‚æœä½ æ˜¯ Storybook çš„æ–°æ‰‹ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ é€šè¯»å®ƒä»¬å¹¶å°†å®ƒä»¬ç•™åœ¨é‚£é‡Œï¼Œç›´åˆ°ä½ èƒ½å¤Ÿè„±ç¦»æ¨¡æ¿è‡ªå¦‚åœ°åˆ›å»ºè‡ªå·±çš„ç¤ºä¾‹ã€‚ åœ¨æˆ‘ä»¬è¿è¡Œå®ƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ webpack5ã€‚ å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° package.json æ–‡ä»¶ä¸­ï¼š 123456&#123; ... &quot;resolutions&quot;: &#123; &quot;webpack&quot;: &quot;^5&quot; &#125;&#125; ç„¶åè¿è¡Œ 1yarn install ç¡®ä¿ webpack5 å·²ç»è¢«å®‰è£… æ¥ä¸‹æ¥æ›´æ–° .storybook/main.js æ–‡ä»¶ 1234567891011121314module.exports = &#123; stories: [&quot;../**/*.stories.mdx&quot;, &quot;../**/*.stories.@(js|jsx|ts|tsx)&quot;], /** æš´éœ² public ç›®å½•ç»™åˆ° stotrybookï¼Œä½œä¸ºé™æ€èµ„æºç›®å½• */ staticDirs: [&quot;../public&quot;], addons: [ &quot;@storybook/addon-links&quot;, &quot;@storybook/addon-essentials&quot;, &quot;@storybook/addon-interactions&quot;, ], framework: &quot;@storybook/react&quot;, core: &#123; builder: &quot;@storybook/builder-webpack5&quot;, &#125;,&#125;; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ›´æ”¹äº† stories æ–‡ä»¶çš„æ¨¡å¼ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åœ¨æˆ‘ä»¬çš„ç»„ä»¶ï¼ˆæˆ–å…¶ä»–ï¼‰ç›®å½•ä¸­é€‰å–ä»»ä½• .stories æ–‡ä»¶ã€‚ æˆ‘ä»¬æš´éœ²äº† Next.js çš„ â€œpublicâ€ ç›®å½•ä½œä¸º Storybook çš„é™æ€èµ„æºç›®å½•ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ Storybook ä¸­æµ‹è¯•ç±»ä¼¼å›¾ç‰‡ï¼Œè§†é¢‘ç­‰èµ„æºäº† æœ€åï¼Œåœ¨æˆ‘ä»¬è¿è¡Œ Storybook æœ¬èº«ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åœ¨ .storybook/preview.js ä¸­æ·»åŠ ä¸€äº›æœ‰ç”¨çš„å€¼ã€‚ è¿™æ˜¯æˆ‘ä»¬æ§åˆ¶ stories æ¸²æŸ“æ–¹å¼é»˜è®¤å€¼çš„æ–‡ä»¶ã€‚ storybook/preview.js 123456789101112131415161718192021222324252627282930313233343536373839404142434445import &quot;../styles/globals.css&quot;;import * as NextImage from &quot;next/image&quot;;const BREAKPOINTS_INT = &#123; xs: 375, sm: 600, md: 900, lg: 1200, xl: 1536,&#125;;const customViewports = Object.fromEntries( Object.entries(BREAKPOINTS_INT).map(([key, val], idx) =&gt; &#123; console.log(val); return [ key, &#123; name: key, styles: &#123; width: `$&#123;val&#125;px`, height: `$&#123;(idx + 5) * 10&#125;vh`, &#125;, &#125;, ]; &#125;));// å…è®¸ Storybook å¤„ç† Next çš„ &lt;Image&gt; ç»„ä»¶const OriginalNextImage = NextImage.default;Object.defineProperty(NextImage, &quot;default&quot;, &#123; configurable: true, value: (props) =&gt; &lt;OriginalNextImage &#123;...props&#125; unoptimized /&gt;,&#125;);export const parameters = &#123; actions: &#123; argTypesRegex: &quot;^on[A-Z].*&quot; &#125;, controls: &#123; matchers: &#123; color: /(background|color)$/i, date: /Date$/, &#125;, &#125;, viewport: &#123; viewports: customViewports &#125;,&#125;; ä¸Šé¢æœ‰å‡ ä¸ªå±äºä¸ªäººå–œå¥½ï¼Œå¤§å®¶å¯ä»¥éšæ„é…ç½®ã€‚è¯·åŠ¡å¿…è®¾ç½®é»˜è®¤æ–­ç‚¹ä»¥åŒ¹é…åº”ç”¨ä¸­å¯¹ä½ é‡è¦çš„ä»»ä½•å†…å®¹ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªå¤„ç†æ–¹æ³•ï¼Œä»¥ä¾¿ Storybook å¯ä»¥å¤„ç† Next çš„ ç»„ä»¶è€Œä¸ä¼šå´©æºƒã€‚ ç°åœ¨æˆ‘ä»¬å‡†å¤‡æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œè¿è¡Œ 1yarn storybook å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œå°†åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä¸€æ¡æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š ç„¶åä½ å¯ä»¥é€šè¿‡ http://localhost:6006 è®¿é—®åˆ° å¦‚æœä½ ä»¥å‰ä»æœªä½¿ç”¨è¿‡è¿™äº›ç¤ºä¾‹ï¼Œæˆ‘å¸Œæœ›ä½ å°è¯•å¹¶ç†Ÿæ‚‰è¿™äº›ç¤ºä¾‹ã€‚ åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘å†åˆ›å»ºä¸€ä¸ªæäº¤ build: implement storybook åˆ›å»ºä¸€ä¸ªç»„ä»¶æ¨¡ç‰ˆæ˜¯æ—¶å€™å°†æˆ‘ä»¬å·²ç»å®Œæˆçš„æ‰€æœ‰é…ç½®æ”¾åœ¨ä¸€èµ·ï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬ä¸ºè‡ªå·±è®¾å®šçš„æ ‡å‡†æ¥åˆ›å»ºå’Œå®ç°æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶äº† æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„å¡ç‰‡ã€‚åˆ›å»ºå¦‚ä¸‹çš„ç›®å½• /src/components/template/base åœ¨è¿™ä¸ªç›®å½•ä¸­åˆ›å»º BaseTemplate.tsx ã€‚è¿™å°†éµå¾ªæ–‡ä»¶åçš„æ ‡å‡†æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸æŒ‡å‘å®ƒçš„ç›®å½•ç›¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œè¿™å…è®¸æˆ‘ä»¬åœ¨å¡ç‰‡ç›®å½•ä¸­æ‹¥æœ‰å…¶ä»–ç±»å‹çš„å¡ç‰‡ï¼Œå¦‚ PhotoCard æˆ– TextCard ç­‰ã€‚ BaseTemplate.tsx 1234567export interface IBaseTemplate &#123;&#125;const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = () =&gt; &#123; return &lt;div&gt;Hello world!&lt;/div&gt;;&#125;;export default BaseTemplate; æˆ‘ä»¬çš„æ¯ä¸€ä¸ªç»„ä»¶éƒ½å°†éµå¾ªè¿™ä¸ªç¡®åˆ‡çš„ç»“æ„ã€‚å³ä½¿å®ƒä¸ä½¿ç”¨ propsï¼Œå®ƒä»ç„¶ä¼šä¸ºç»„ä»¶å¯¼å‡ºä¸€ä¸ªç©ºçš„ props æ¥å£ã€‚è¿™æ ·åšçš„åŸå› æ˜¯å®ƒå°†å…è®¸æˆ‘ä»¬åœ¨è®¸å¤šç»„ä»¶å’Œæ–‡ä»¶ä¸­å¤åˆ¶è¿™ä¸ªç²¾ç¡®çš„ç»“æ„ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„æ¨¡å¼äº¤æ¢ç»„ä»¶ï¼Œå¹¶ä¸”åªæŸ¥æ‰¾&#x2F;æ›¿æ¢ç»„ä»¶çš„åç§°ã€‚ å½“ä½ å¼€å§‹ä½¿ç”¨ stories å’Œ mock props æ—¶ï¼Œå°±ä¼šæ˜ç™½ä¸ºæ‰€æœ‰ç»„ä»¶æ–‡ä»¶ç»´æŠ¤ä¸€è‡´çš„å‘½åæ–¹æ¡ˆå’Œç•Œé¢æ˜¯å¤šä¹ˆæ–¹ä¾¿å’Œå¼ºå¤§ã€‚ è¿™å…¶ä¸­å°±éµå¾ªäº†æˆ‘ä»¬ä¹‹å‰æåŠåˆ°çš„ ä¸€è‡´æ€§å°±æ˜¯ä¸€åˆ‡ æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä¸ºç»„ä»¶åˆ›å»ºæ ·å¼æ–‡ä»¶ã€‚æˆ‘ä¸ªäººæ›´å–œæ¬¢å°†æ ·å¼æ–‡ä»¶å­˜æ”¾åœ¨å„ä¸ªç»„ä»¶çš„æ–‡ä»¶å¤¹ä¸­ BaseTemplate.module.css 12.component &#123;&#125; ä½œä¸ºé¡¶çº§æ ·å¼ï¼Œå°†åœ¨ä½ çš„ç»„ä»¶ç›®å½•ä¸­æ”¾ç½®æ ‡å‡†ç©ºæ¨¡æ¿ã€‚ä½ å¯ä»¥åƒå¦‚ä¸‹ä¸€æ ·æ›´æ–° BaseTemplate æ–‡ä»¶ BaseTemplate.tsx 123456789import styles from &quot;./BaseTemplate.module.css&quot;;export interface IBaseTemplate &#123;&#125;const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = () =&gt; &#123; return &lt;div className=&#123;styles.container&#125;&gt;Hello world!&lt;/div&gt;;&#125;;export default BaseTemplate; ç°åœ¨ï¼Œæˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªå¹²å‡€çš„æ ·å¼æ¨¡ç‰ˆ ç°åœ¨è®©æˆ‘ä»¬ä¸ºç»„ä»¶æ·»åŠ ä¸€ä¸ªå®éªŒæ€§è´¨çš„ prop BaseTemplate.tsx 1234567891011import styles from &quot;./BaseTemplate.module.css&quot;;export interface IBaseTemplate &#123; sampleTextProp: string;&#125;const BaseTemplate: React.FC&lt;IBaseTemplate&gt; = (&#123; sampleTextProp &#125;) =&gt; &#123; return &lt;div className=&#123;styles.container&#125;&gt;&#123;sampleTextProp&#125;&lt;/div&gt;;&#125;;export default BaseTemplate; å¯¹äºæ¯ä¸€ä¸ªæˆ‘ä»¬åˆ›å»ºçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿçš„æ–¹ä¾¿çš„åœ¨ä¸åŒç¯å¢ƒï¼ˆæ¯”å¦‚åœ¨ storybookï¼Œæˆ–è€…åœ¨ app å†…ï¼Œæˆ–è€…åœ¨æˆ‘ä»¬ç¼–å†™çš„å•å…ƒæµ‹è¯•ä¸­ï¼‰ä¸­å»æµ‹è¯•å®ƒã€‚å¿«é€Ÿè®¿é—®æ•°æ®æ¥æ¸²æŸ“ç»„ä»¶å°†ä¼šå¾ˆæ–¹ä¾¿ã€‚ è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥å­˜å‚¨è¿™ä¸ªç»„ä»¶çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œè¿™äº›æ¨¡æ‹Ÿæ•°æ®æ˜¯ç»™åç»­æµ‹è¯•ä½¿ç”¨çš„ã€‚ BaseTemplate.mocks.ts 123456789import &#123; IBaseTemplate &#125; from &quot;./BaseTemplate&quot;;const base: IBaseTemplate = &#123; sampleTextProp: &quot;Hello world!&quot;,&#125;;export const mockBaseTemplateProps = &#123; base,&#125;; è¿™ä¸ªç»“æ„çœ‹èµ·æ¥æœ‰ç‚¹ç‚¹å¤æ‚ï¼Œä½†å¾ˆå¿«æˆ‘ä»¬å°†çœ‹åˆ°å®ƒçš„ä¼˜ç‚¹ã€‚æˆ‘ä½¿ç”¨ååˆ†è§åçŸ¥æ„çš„ä¸€è‡´å‘½åæ¨¡å¼ï¼Œæ‰€ä»¥è¿™ä¸ªæ¨¡æ¿å¾ˆå®¹æ˜“å¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ åˆ›å»ºçš„æ¯ä¸ªæ–°ç»„ä»¶ã€‚ ç°åœ¨æˆ‘ä»¬ä¸ºè¿™ä¸ªç»„ä»¶åˆ›å»ºä¸€ä¸ª story BaseTemplate.stories.tsx 12345678910111213141516171819import &#123; ComponentStory, ComponentMeta &#125; from &quot;@storybook/react&quot;;import BaseTemplate, &#123; IBaseTemplate &#125; from &quot;./BaseTemplate&quot;;import &#123; mockBaseTemplateProps &#125; from &quot;./BaseTemplate.mocks&quot;;export default &#123; title: &quot;templates/BaseTemplate&quot;, component: BaseTemplate, argTypes: &#123;&#125;,&#125; as ComponentMeta&lt;typeof BaseTemplate&gt;;const Template: ComponentStory&lt;typeof BaseTemplate&gt; = (args) =&gt; ( &lt;BaseTemplate &#123;...args&#125; /&gt;);export const Base = Template.bind(&#123;&#125;);Base.args = &#123; ...mockBaseTemplateProps.base,&#125; as IBaseTemplate; æˆ‘ä¸ä¼šå‘Šè¯‰ä½ æ¯ä¸€ä¸ª story æ–‡ä»¶çš„å…·ä½“ç»†èŠ‚ï¼Œå¯¹ä½ æ¥è¯´ï¼Œåšå¥½çš„å­¦ä¹ èµ„æºæ˜¯ Storybook çš„å®˜æ–¹æ–‡æ¡£ã€‚ è¿™é‡Œç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªå®¹æ˜“å¤åˆ¶ç²˜è´´çš„ä¸€è‡´æ€§çš„ç»„ä»¶æ¨¡ç‰ˆï¼Œä»¥ä¾›ç»„ä»¶è¿›è¡Œå¼€å‘å’Œæµ‹è¯• ç°åœ¨æµ‹è¯•ä¸€ä¸‹ 1yarn storybook å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸‹é¢çš„ç•Œé¢ï¼ˆå¦‚æœæœ‰é—®é¢˜ï¼Œæˆ‘å»ºè®®ä½ å†é‡æ–°æ£€æŸ¥ä¸€ä¸‹ä¹‹å‰çš„é…ç½®æ­£ä¸æ­£ç¡®ï¼‰ ç°åœ¨æˆ‘ä»¬å¼€å§‹åˆ›å»ºæ›´å¤šæ–‡ä»¶ï¼Œæœ€å¥½å…»æˆåœ¨æäº¤ä¹‹å‰è¿è¡Œ yarn lint çš„ä¹ æƒ¯ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡éƒ½æ˜¯å¹²å‡€çš„å¹¶å‡†å¤‡å°±ç»ªã€‚æˆ‘åœ¨è¿™é‡Œå†åˆ›å»ºä¸€ä¸ªæäº¤ build: create BaseTemplate component ä½¿ç”¨ç»„ä»¶æ¨¡ç‰ˆæ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†ç»„ä»¶æ¨¡ç‰ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªçœŸå®çš„ç»„ä»¶ åˆ›å»º components/cards ç›®å½•ã€‚ç„¶åå°† templates ç›®å½•ä¸‹çš„ base æ–‡ä»¶å¤¹æ‹·è´åˆ° cards ä¸‹é¢ï¼Œç„¶åå†å°† base é‡å‘½åä¸º cat ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª CatCard ã€‚é‡å‘½åæ¯ä¸ªæ–‡ä»¶ä»¥åŒ¹é…ã€‚ å®Œæˆååº”è¯¥æ˜¯è¿™æ ·çš„ï¼š ç„¶ååœ¨ components/cards/cat ç›®å½•ä¸‹ï¼Œå…¨å±€å°† BaseTemplate æ›¿æ¢ä¸º CatCard ï¼Œå¦‚ä¸‹ ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å§‹å·¥ä½œï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¹²å‡€çš„é¢„ç”Ÿæˆçš„æ¨¡ç‰ˆï¼Œå…¶ä¸­å·²ç»ä¸ºæˆ‘ä»¬çš„ Card ç»„ä»¶åŒ…å«äº† story æ–‡ä»¶å’Œæ¨¡æ‹Ÿæ•°æ®æ–‡ä»¶ã€‚ç›¸å½“çš„æ–¹ä¾¿ï¼è®©æˆ‘ä»¬å¼€å§‹å¼€å‘ Card ç»„ä»¶å§ï¼š CatCard.tsx 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import Image from &quot;next/image&quot;;import styles from &quot;./CatCard.module.css&quot;;export interface ICatCard &#123; tag: string; title: string; body: string; author: string; time: string;&#125;const CatCard: React.FC&lt;ICatCard&gt; = (&#123; tag, title, body, author, time &#125;) =&gt; &#123; return ( &lt;div className=&#123;styles.container&#125;&gt; &lt;div className=&#123;styles.card&#125;&gt; &lt;div className=&#123;styles.card__header&#125;&gt; &lt;Image src=&quot;/time-cat.jpg&quot; alt=&quot;card__image&quot; className=&#123;styles.card__image&#125; width=&quot;600&quot; height=&quot;400&quot; /&gt; &lt;/div&gt; &lt;div className=&#123;styles.card__body&#125;&gt; &lt;span className=&#123;`$&#123;styles.tag&#125; $&#123;styles[&quot;tag-blue&quot;]&#125;`&#125;&gt; &#123;tag&#125; &lt;/span&gt; &lt;h4&gt;&#123;title&#125;&lt;/h4&gt; &lt;p&gt;&#123;body&#125;&lt;/p&gt; &lt;/div&gt; &lt;div className=&#123;styles.card__footer&#125;&gt; &lt;div className=&#123;styles.user&#125;&gt; &lt;Image src=&quot;&lt;https://i.pravatar.cc/40?img=3&gt;&quot; alt=&quot;user__image&quot; className=&#123;styles.user__image&#125; width=&quot;40&quot; height=&quot;40&quot; /&gt; &lt;div className=&#123;styles.user__info&#125;&gt; &lt;h5&gt;&#123;author&#125;&lt;/h5&gt; &lt;small&gt;&#123;time&#125;&lt;/small&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; );&#125;;export default CatCard; è®¾ç½®æ ·å¼ CatCard.module.css 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273@import url(&quot;&lt;https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap&gt;&quot;);.container &#123; margin: 1rem;&#125;.container * &#123; box-sizing: border-box; padding: 0; margin: 0;&#125;.card__image &#123; max-width: 100%; display: block; object-fit: cover;&#125;.card &#123; font-family: &quot;Quicksand&quot;, sans-serif; display: flex; flex-direction: column; width: clamp(20rem, calc(20rem + 2vw), 22rem); overflow: hidden; box-shadow: 0 0.1rem 1rem rgba(0, 0, 0, 0.1); border-radius: 1em; background: #ece9e6; background: linear-gradient(to right, #ffffff, #ece9e6);&#125;.card__body &#123; padding: 1rem; display: flex; flex-direction: column; gap: 0.5rem;&#125;.tag &#123; align-self: flex-start; padding: 0.25em 0.75em; border-radius: 1em; font-size: 0.75rem;&#125;.tag-blue &#123; background: #56ccf2; background: linear-gradient(to bottom, #2f80ed, #56ccf2); color: #fafafa;&#125;.card__body h4 &#123; font-size: 1.5rem; text-transform: capitalize;&#125;.card__footer &#123; display: flex; padding: 1rem; margin-top: auto;&#125;.user &#123; display: flex; gap: 0.5rem;&#125;.user__image &#123; border-radius: 50%;&#125;.user__info &gt; small &#123; color: #666;&#125; è®¾ç½®æ¨¡æ‹Ÿæ•°æ® CatCard.mocks.ts 12345678910111213import &#123; ICatCard &#125; from &quot;./CatCard&quot;;const base: ICatCard = &#123; tag: &quot;Felines&quot;, title: `What&#x27;s new in Cats`, body: &quot;Lorem ipsum dolor sit amet consectetur adipisicing elit. Sequi perferendis molestiae non nemo doloribus. Doloremque, nihil! At ea atque quidem!&quot;, author: &quot;Alex&quot;, time: &quot;2h ago&quot;,&#125;;export const mockCatCardProps = &#123; base,&#125;; æ³¨æ„è¿™é‡Œä»é¡¹ç›®çš„ public ç›®å½•ç”¨äº†ä¸€å¼  ğŸ± çš„ç…§ç‰‡(&#x2F;time-cat.jpg)ï¼Œä½ å¯ä»¥ä»é¡¹ç›®çš„ä»“åº“ä¸­æ‰¾åˆ°å®ƒ CatCard.stories çš„ä¿®æ”¹å°±æ˜¯éœ€è¦å°† story çš„ title ä» templates/CatCard æ”¹ä¸º cards/CatCard æˆ‘ä»¬éœ€è¦æ›´æ–° next.config.jsï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰æ˜ç¡®å£°æ˜å…è®¸çš„åŸŸï¼ˆå¯¹äºå¤´åƒï¼‰ã€‚ åªéœ€å°†é…ç½®æ–‡ä»¶æ›´æ–°ä¸ºå¦‚ä¸‹æ‰€ç¤º next.config.js 123456789/** @type &#123;import(&#x27;next&#x27;).NextConfig&#125; */const nextConfig = &#123; reactStrictMode: true, images: &#123; domains: [&quot;i.pravatar.cc&quot;], &#125;,&#125;;module.exports = nextConfig; æˆ–è€…ï¼Œä½ å¯ä»¥å°†å¤´åƒå›¾åƒæ”¾åœ¨ public ç›®å½•ä¸­ï¼Œä½†ä¸ºäº†å­¦ä¹ ä½¿ç”¨å¤–éƒ¨åŸŸçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°†ä¿ç•™æ­¤è®¾ç½®ã€‚ ç°åœ¨è¿è¡Œ Storybookï¼Œå¦‚æœä½ è¶³å¤Ÿå¹¸è¿ï¼Œä½ å°†ä¼šçœ‹åˆ° è¿™ä¸ªç»„ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ”¾ç½®åœ¨å®é™…é¡¹ç›®ä¸­çš„ä»»ä½•ä½ç½®ã€‚åœ¨çŸ­æœŸå†…æµ‹è¯•æ—¶ä½¿ç”¨ mock propï¼Œå¹¶åœ¨å‡†å¤‡å¥½åæ›´æ¢ä¸ºçœŸå® prop pages/index.tsx 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253import type &#123; NextPage &#125; from &quot;next&quot;;import Head from &quot;next/head&quot;;import Image from &quot;next/image&quot;;import CatCard from &quot;../components/cards/cat/CatCard&quot;;import &#123; mockCatCardProps &#125; from &quot;../components/cards/cat/CatCard.mocks&quot;;const Home: NextPage = () =&gt; &#123; return ( &lt;div&gt; &lt;Head&gt; &lt;title&gt;Create Next App&lt;/title&gt; &lt;meta name=&quot;description&quot; content=&quot;Generated by create next app&quot; /&gt; &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot; /&gt; &lt;/Head&gt; &lt;main&gt; &lt;h1&gt; Welcome to &lt;a href=&quot;&lt;https://nextjs.org&gt;&quot;&gt;Next.js!&lt;/a&gt; &lt;/h1&gt; &lt;div style=&#123;&#123; display: &quot;flex&quot; &#125;&#125;&gt; &lt;CatCard &#123;...mockCatCardProps.base&#125; /&gt; &lt;CatCard &#123;...mockCatCardProps.base&#125; /&gt; &lt;CatCard &#123;...mockCatCardProps.base&#125; /&gt; &lt;CatCard &#123;...mockCatCardProps.base&#125; /&gt; &lt;/div&gt; &lt;/main&gt; &lt;footer&gt; &lt;a href=&quot;&lt;https://vercel.com?utm_source=create-next-app&amp;utm_medium=default-template&amp;utm_campaign=create-next-app&gt;&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; &gt; Powered by&#123;&quot; &quot;&#125; &lt;span&gt; &lt;Image src=&quot;/vercel.svg&quot; alt=&quot;Vercel Logo&quot; width=&#123;72&#125; height=&#123;16&#125; /&gt; &lt;/span&gt; &lt;/a&gt; &lt;/footer&gt; &lt;/div&gt; );&#125;;export default Home; è¿è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ç•Œé¢æ ·å¼ 1yarn dev æ·»åŠ è‡ªå®šä¹‰æ–‡æ¡£è™½ç„¶åœ¨è¿™ä¸ªé˜¶æ®µæ²¡æœ‰å¿…è¦ï¼Œä½†ä½ å¯èƒ½å¸Œæœ›å¯¹åº”ç”¨çš„ &lt;head&gt; ä¸­çš„å†…å®¹è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚åœ¨pagesç›®å½•ä¸­åˆ›å»ºè‡ªå®šä¹‰ _document.tsx pages/_document.tsx 123456789101112131415161718192021222324252627import Document, &#123; Head, Html, Main, NextScript &#125; from &quot;next/document&quot;;class MyDocument extends Document &#123; render() &#123; return ( &lt;Html&gt; &lt;Head&gt; &lt;link rel=&quot;preconnect&quot; href=&quot;&lt;https://fonts.googleapis.com&gt;&quot; /&gt; &lt;link rel=&quot;preconnect&quot; href=&quot;&lt;https://fonts.gstatic.com&gt;&quot; /&gt; &lt;link href=&quot;&lt;https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap&gt;&quot; rel=&quot;stylesheet&quot; /&gt; &lt;/Head&gt; &lt;body&gt; &lt;Main /&gt; &lt;NextScript /&gt; &lt;/body&gt; &lt;/Html&gt; ); &#125;&#125;export default MyDocument; è¯·æ³¨æ„ï¼Œæˆ‘å·²ç»ç§»é™¤äº† components/cards/cat/CatCard.module.css ä¸­çš„ @import å­—ä½“ï¼Œå¹¶ä¸”æŠŠ google å­—ä½“æ”¾åœ¨è¿™é‡Œè¿›è¡Œé¢„åŠ è½½ æ‚¨éœ€è¦åœ¨ &lt;head&gt; å…ƒç´ ä¸­æ‰§è¡Œæˆ–è‡ªå®šä¹‰çš„ä»»ä½•å…¶ä»–æ“ä½œç°åœ¨éƒ½å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­å®Œæˆã€‚ è¯·æ³¨æ„ï¼Œæ­¤ &lt;Head&gt; ä¸ä» next/head å¯¼å…¥çš„ä¸åŒã€‚ å®ƒä»¬å°†ä¸€èµ·å·¥ä½œï¼Œè€Œè¿™ä¸ªä»…ç”¨äºä½ å¸Œæœ›åœ¨æ¯ä¸ªé¡µé¢ä¸ŠåŠ è½½çš„æ•°æ®ã€‚ æ›´å¤šçš„å…³äºè‡ªå®šä¹‰ _document ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ–‡æ¡£ æ·»åŠ  LayoutsLayouts æ˜¯ Next.js ä¸­çš„é‡è¦æ¦‚å¿µã€‚ä»–ä»¬ååŠ©æˆ‘ä»¬ç®¡ç†é¡µé¢é—´çš„çŠ¶æ€ã€‚å¯¹äºæœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸å®˜æ–¹ç¤ºä¾‹ ä¸­æä¾›çš„ç›¸åŒçš„åŸºæœ¬æ¨¡æ¿ï¼Œå¹¶ç®€å•åœ°å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ä»¥é€‚åˆæˆ‘ä»¬çš„é¡¹ç›®ã€‚ åœ¨ components ä¸­åˆ›å»ºæ–°çš„ç›®å½• layouts ã€‚æˆ‘ä»¬å°†å¤åˆ¶ä¸¤æ¬¡ templates/case ç›®å½•ã€‚ä¸€ä¸ªå«åš primary ï¼Œå¦ä¸€ä¸ªå«åš sidebar ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­å¯¹ BaseTemplate è¿›è¡ŒåŒºåˆ†å¤§å°å†™çš„æŸ¥æ‰¾&#x2F;æ›¿æ¢ï¼Œå¹¶åˆ†åˆ«æ›¿æ¢ä¸º PrimaryLayout å’Œ SidebarLayoutã€‚ å¦‚æœä½ åœ¨è¿™ä¸€æ­¥æœ‰é‡åˆ°å›°éš¾ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒè¿™ä¸ªä»“åº“çš„ç»“æ„ æ›´æ–° PrimaryLayout.tsx å’Œ PrimaryLayout.module.css æ–‡ä»¶ï¼š components/layouts/primary/PrimaryLayout.tsx 1234567891011121314151617import Head from &quot;next/head&quot;;import styles from &quot;./PrimaryLayout.module.css&quot;;export interface IPrimaryLayout extends React.ComponentPropsWithoutRef&lt;&quot;div&quot;&gt; &#123;&#125;const PrimaryLayout: React.FC&lt;IPrimaryLayout&gt; = (&#123; children &#125;) =&gt; &#123; return ( &lt;&gt; &lt;Head&gt; &lt;title&gt;Primary Layout Example&lt;/title&gt; &lt;/Head&gt; &lt;main className=&#123;styles.main&#125;&gt;&#123;children&#125;&lt;/main&gt; &lt;/&gt; );&#125;;export default PrimaryLayout; components/layouts/primary/PrimaryLayout.module.css 123456789.main &#123; display: flex; height: calc(100vh - 64px); background-color: white;&#125;.main &gt; section &#123; padding: 32px;&#125; ç„¶åæ˜¯ sidebar components/layouts/sidebar/SidebarLayout.tsx 1234567891011121314151617import Link from &quot;next/link&quot;;import styles from &quot;./SidebarLayout.module.css&quot;;export interface ISidebarLayout &#123;&#125;const SidebarLayout: React.FC&lt;ISidebarLayout&gt; = () =&gt; &#123; return ( &lt;nav className=&#123;styles.nav&#125;&gt; &lt;input className=&#123;styles.input&#125; placeholder=&quot;Search...&quot; /&gt; &lt;Link href=&quot;/&quot;&gt;Home&lt;/Link&gt; &lt;Link href=&quot;/about&quot;&gt;About&lt;/Link&gt; &lt;Link href=&quot;/contact&quot;&gt;Contact&lt;/Link&gt; &lt;/nav&gt; );&#125;;export default SidebarLayout; components/layouts/sidebar/SidebarLayout.module.css 123456789101112131415161718192021222324252627282930313233343536373839.nav &#123; height: 100%; display: flex; flex-direction: column; width: 250px; background-color: #fafafa; padding: 32px; border-right: 1px solid #eaeaea;&#125;.nav &gt; a &#123; margin: 8px 0; text-decoration: none; background: white; border-radius: 4px; font-size: 14px; padding: 12px 16px; text-transform: uppercase; font-weight: 600; letter-spacing: 0.025em; color: #333; border: 1px solid #eaeaea; transition: all 0.125s ease;&#125;.nav &gt; a:hover &#123; background-color: #eaeaea;&#125;.input &#123; margin: 32px 0; text-decoration: none; background: white; border-radius: 4px; border: 1px solid #eaeaea; font-size: 14px; padding: 8px 16px; height: 28px;&#125; ç°åœ¨è¿™äº›æ–‡ä»¶éƒ½åˆ›å»ºå¥½äº†ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»–ä»¬ã€‚æˆ‘ä»¬å°†æ›´æ–°æˆ‘ä»¬çš„ä¸»é¡µå¹¶åˆ›å»ºå¦ä¸€ä¸ªåä¸º about.tsx çš„é¡µé¢æ¥å±•ç¤ºå¦‚ä½•ä½¿ç”¨å…±äº« layouts å¹¶åœ¨é¡µé¢ä¹‹é—´ä¿æŒç»„ä»¶çŠ¶æ€ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªç±»å‹æ¥æ‰©å±•é»˜è®¤çš„ NextPage æ¥å£ï¼Œå› ä¸ºå‡ºäºæŸç§åŸå› å®ƒä¸åŒ…å«å¼€ç®±å³ç”¨çš„ getLayout å‡½æ•°ã€‚ åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹æ–‡ä»¶ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬å¤„ç†æ­¤é—®é¢˜æä¾›æ–¹æ¡ˆ pages/page.d.ts 1234567import &#123; NextPage &#125; from &quot;next&quot;;import &#123; ComponentType, ReactElement, ReactNode &#125; from &quot;react&quot;;export type NextPageWithLayout&lt;P = &#123;&#125;&gt; = NextPage&lt;P&gt; &amp; &#123; getLayout?: (_page: ReactElement) =&gt; ReactNode; layout?: ComponentType;&#125;; å½“ä½ éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ layouts çš„é¡µé¢ï¼Œä½ å¯ä»¥ä½¿ç”¨ NextPageWithLayout æ¥å£æ¥æ›¿ä»£ NextPage æ¥å£ ç°åœ¨è®©æˆ‘ä»¬æ›´æ–°ä¸»é¡µ pages/index.tsx 1234567891011121314151617181920212223242526import CatCard from &quot;../components/cards/cat/CatCard&quot;;import &#123; mockCatCardProps &#125; from &quot;../components/cards/cat/CatCard.mocks&quot;;import PrimaryLayout from &quot;../components/layouts/primary/PrimaryLayout&quot;;import SidebarLayout from &quot;../components/layouts/sidebar/SidebarLayout&quot;;import &#123; NextPageWithLayout &#125; from &quot;./page&quot;;const Home: NextPageWithLayout = () =&gt; &#123; return ( &lt;section&gt; &lt;h1&gt; Welcome to &lt;a href=&quot;&lt;https://nextjs.org&gt;&quot;&gt;Next.js!&lt;/a&gt; &lt;/h1&gt; &lt;CatCard &#123;...mockCatCardProps.base&#125; /&gt; &lt;/section&gt; );&#125;;export default Home;Home.getLayout = (page) =&gt; &#123; return ( &lt;PrimaryLayout&gt; &lt;SidebarLayout /&gt; &#123;page&#125; &lt;/PrimaryLayout&gt; );&#125;; å¹¶ä¸”åœ¨ pages ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ about é¡µé¢ pages/about.tsx 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import PrimaryLayout from &quot;../components/layouts/primary/PrimaryLayout&quot;;import SidebarLayout from &quot;../components/layouts/sidebar/SidebarLayout&quot;;import &#123; NextPageWithLayout &#125; from &quot;./page&quot;;const About: NextPageWithLayout = () =&gt; &#123; return ( &lt;section&gt; &lt;h2&gt;Layout Example (About)&lt;/h2&gt; &lt;p&gt; This example adds a property &lt;code&gt;getLayout&lt;/code&gt; to your page, allowing you to return a React component for the layout. This allows you to define the layout on a per-page basis. Since we&amp;apos;re returning a function, we can have complex nested layouts if desired. &lt;/p&gt; &lt;p&gt; When navigating between pages, we want to persist page state (input values, scroll position, etc.) for a Single-Page Application (SPA) experience. &lt;/p&gt; &lt;p&gt; This layout pattern will allow for state persistence because the React component tree is persisted between page transitions. To preserve state, we need to prevent the React component tree from being discarded between page transitions. &lt;/p&gt; &lt;h3&gt;Try It Out&lt;/h3&gt; &lt;p&gt; To visualize this, try tying in the search input in the&#123;&quot; &quot;&#125; &lt;code&gt;Sidebar&lt;/code&gt; and then changing routes. You&amp;apos;ll notice the input state is persisted. &lt;/p&gt; &lt;/section&gt; );&#125;;export default About;About.getLayout = (page) =&gt; &#123; return ( &lt;PrimaryLayout&gt; &lt;SidebarLayout /&gt; &#123;page&#125; &lt;/PrimaryLayout&gt; );&#125;; æ›´æ–° _app.tsx pages/_app.tsx 12345678910111213141516import type &#123; AppProps &#125; from &quot;next/app&quot;;import &quot;./globals.css&quot;;import &#123; NextPageWithLayout &#125; from &quot;./page&quot;;interface AppPropsWithLayout extends AppProps &#123; Component: NextPageWithLayout;&#125;function MyApp(&#123; Component, pageProps &#125;: AppPropsWithLayout) &#123; // å¦‚æœè¿™ä¸ª layout æ˜¯å¯ç”¨çš„ï¼Œåˆ™åœ¨é¡µé¢ä¸­ä½¿ç”¨ const getLayout = Component.getLayout || ((page) =&gt; page); return getLayout(&lt;Component &#123;...pageProps&#125; /&gt;);&#125;export default MyApp; æœ€åæˆ‘æ›´æ–°äº† PrimaryLayout.mocks.ts æ–‡ä»¶ï¼Œä¸º IPrimaryLayout æ·»åŠ äº† children: &#39;&#123;&#123;component&#125;&#125;â€™ ç”¨äºåœ¨ Storybook ä¸­å±•ç¤º åŒæ—¶æˆ‘æ›´æ–° layout çš„ story title ä» templates/...å˜æˆ layouts/... æœ€åä½ å¯ä»¥ä¿å­˜æµ‹è¯•ä¸€ä¸‹ 1yarn dev åœ¨ä¾§è¾¹æ ï¼ˆ Home å’Œ about ï¼‰çš„æŒ‰é’®å•å‡»å¯ä»¥è¿›è¡Œé¡µé¢åˆ‡æ¢ã€‚ è¯·æ³¨æ„ï¼Œæ‰€ä½¿ç”¨çš„å¸ƒå±€å°†æŒç»­å­˜åœ¨è€Œæ— éœ€é‡æ–°åŠ è½½ï¼ˆæ­£å¦‚æˆ‘ä»¬çš„æ„å›¾ï¼‰ï¼Œå¹¶ä¸”ç”¨æˆ·å°†è·å¾—è¶…å¿«é€Ÿçš„ä½“éªŒã€‚ åœ¨ Storybook è¿™è¾¹ï¼Œæˆ‘ä»¬å¯ä»¥ç‹¬ç«‹äºåº”ç”¨é¢„è§ˆå’Œæµ‹è¯•æˆ‘ä»¬çš„ layout ç»„ä»¶ã€‚è¿™ä¸ª PrimaryLayout ç»„ä»¶åœ¨æ²¡æœ‰è‡ªç»„ä»¶çš„æƒ…å†µä¸‹æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œè€Œä¾§è¾¹æ åˆ™å¯ä»¥å®Œç¾çš„æ˜¾ç¤ºã€‚ éƒ¨ç½²æœ€åä¸€æ­¥å°†è®²è§£å¦‚ä½•éƒ¨ç½²ä¸€ä¸ª Next.js åº”ç”¨ æˆ‘ä»¬å°†ä½¿ç”¨ Vercelï¼Œå› ä¸ºå®ƒæ˜¯ Next.js åº”ç”¨ç¨‹åºæœ€ç®€å•ã€æœ€ç›´æ¥çš„éƒ¨ç½²è§£å†³æ–¹æ¡ˆã€‚ è¯·æ³¨æ„ï¼ŒVercel ç»å¯¹ä¸æ˜¯å”¯ä¸€çš„é€‰æ‹©ï¼Œå…¶ä»–ä¸»è¦æœåŠ¡ï¼ˆå¦‚ AWSã€Netlify ç­‰ï¼‰ä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨ã€‚ å‡è®¾ä½ ä½¿ç”¨çš„ä¸æ˜¯ é™æ€ç«™ç‚¹ç”Ÿæˆ æ¨¡å¼ï¼Œé‚£ä¹ˆå®é™…ä¸Šä½ ä»…ä»…éœ€è¦æ‰¾ä¸ªæœåŠ¡æ¥è¿è¡Œ next start å‘½ä»¤å°±è¡Œäº† ä½œä¸ºä¸€ä¸ªæ™®é€šç”¨æˆ·åœ¨ Vercel ä¸Šè¿›è¡Œéƒ¨ç½²æ˜¯å®Œå…¨å…è´¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä»åˆ›å»ºè´¦å·å¼€å§‹ ç™»å½•åï¼Œå•å‡» + New Project å¹¶æˆäºˆ Vercel è®¿é—®ä½ çš„ Github ä»“åº“çš„æƒé™ã€‚ ä½ å¯ä»¥æˆäºˆå…¨å±€è®¿é—®æƒé™ï¼Œä¹Ÿå¯ä»¥ä»…é€‰æ‹©è¦éƒ¨ç½²çš„ä»“åº“ã€‚æˆ‘å°†é€‰æ‹© nextjs-fullstack-app-template-zn è¿™ä¸ªä»“åº“ã€‚ é€‰æ‹©å®ƒåï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œé…ç½®ã€‚ åœ¨ Build and Output Settings éƒ¨åˆ†ï¼Œç¡®ä¿å°†é»˜è®¤çš„ NPM å‘½ä»¤æ›¿æ¢ä¸º yarn å‘½ä»¤ï¼ˆé™¤éä½ ä½¿ç”¨çš„æ˜¯ NPMï¼‰ã€‚ æˆ‘ä»¬è¿˜æ²¡æœ‰ä½¿ç”¨ä»»ä½•ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ä¸éœ€è¦æ·»åŠ  ä¸€æ—¦å®Œæˆï¼Œåªéœ€å•å‡» Deploy å³å¯ï¼ å°±è¿™ä¹ˆç®€å•ã€‚ ç°åœ¨ä¸ä»…éƒ¨ç½²äº†ç«™ç‚¹ï¼Œè€Œä¸”æ¯æ¬¡æäº¤åˆ°ä¸»åˆ†æ”¯æ—¶ï¼Œå®ƒéƒ½ä¼šç»§ç»­è‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚ å¦‚æœä½ ä¸æƒ³è¦è¿™ç§è¡Œä¸ºï¼Œé‚£ä¹ˆåœ¨ Vercel ä»ªè¡¨æ¿ä¸­è¿›è¡Œé…ç½®ä¹Ÿå¾ˆå®¹æ˜“ã€‚ å¥½æ¶ˆæ¯æ˜¯ï¼Œä½ å·²ç»é…ç½®äº† yarn build å‘½ä»¤ä»¥ç¡®ä¿åœ¨æ¨é€ä»£ç ä¹‹å‰æ„å»ºæœ‰æ•ˆçš„ç”Ÿäº§ç‰ˆæœ¬ï¼Œå› æ­¤å¯ä»¥è‡ªä¿¡åœ°æ¨é€ä»£ç ï¼Œå¹¶å‡è®¾éƒ¨ç½²ä¼šæˆåŠŸã€‚ å”¯ä¸€éœ€è¦è®°ä½çš„æ˜¯ä¸¤ä¸ªç¯å¢ƒä¹‹é—´çš„å·®å¼‚ã€‚ å¦‚æœä½ çš„è„šæœ¬ä¸åŒï¼ˆä½¿ç”¨ NPM è€Œä¸æ˜¯ yarn æˆ–åä¹‹äº¦ç„¶ï¼‰ï¼Œæˆ–è€…æ›´å¸¸è§çš„æƒ…å†µæ˜¯ç¼ºå°‘ç¯å¢ƒå˜é‡ï¼Œä½ çš„æ„å»ºä»ç„¶æœ‰å¯èƒ½åœ¨æœ¬åœ°æˆåŠŸä½†åœ¨ Vercel ä¸Šå¤±è´¥ã€‚ æˆ‘ä»¬å°†åœ¨ä»¥åçš„æ•™ç¨‹ä¸­æ·»åŠ  env å€¼ï¼Œå› æ­¤ä½ éœ€è¦ç¡®ä¿åœ¨æœ¬åœ°å’Œç”Ÿäº§ç¯å¢ƒä¸­éƒ½é…ç½®äº†è¿™äº›å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æœºå¯†ï¼Œæ°¸è¿œä¸åº”æäº¤ç»™å…¬å…±ä»“åº“ã€‚ ä¸‹ä¸€æ­¥æˆ‘å¸Œæœ›ä½ æ‰¾åˆ°äº†æœ¬æ•™ç¨‹å¹¶å­¦åˆ°äº†ä¸€äº›çŸ¥è¯†ï¼Œä¸ºä½ å’Œä½ çš„å›¢é˜Ÿè®¾ç½®å¯é ä¸”å¯æ‰©å±•çš„ Next.js é¡¹ç›®ã€‚ è¿™æ˜¯å…³äºåˆ›å»ºç”Ÿäº§é«˜è´¨é‡ Next.js åº”ç”¨ç¨‹åºçš„ç³»åˆ—æ•™ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ ä¸‹é¢æ˜¯æˆ‘å¯¹æœªæ¥æ•™ç¨‹çš„ä¸€äº›æƒ³æ³•ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½ç•™ä¸‹ä¸€äº›åé¦ˆï¼Œå‘Šè¯‰æˆ‘å“ªäº›æ˜¯ä½ è®¤ä¸ºæœ€æœ‰ç”¨çš„ï¼ˆå¦‚æœä½ æ²¡æœ‰åœ¨ä¸‹é¢çœ‹åˆ°å®ƒä»¬ï¼Œåˆ™å¯ä»¥ç•™ä¸‹å…¶ä»–åé¦ˆï¼‰ å¦‚ä½•ä½¿ç”¨ API è·¯ç”±å’Œ Tailwind CSS æ„å»ºå…¨æ ˆ Next.js åº”ç”¨ç¨‹åº å¦‚ä½•ä½¿ç”¨ Recoil å°†å…¨å±€çŠ¶æ€ç®¡ç†å™¨æ·»åŠ åˆ° Next.js åº”ç”¨ç¨‹åº å¦‚ä½•ä½¿ç”¨ jest å’Œ playwright åœ¨ Next.js åº”ç”¨ç¨‹åºä¸­å®æ–½å•å…ƒæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯• å¦‚ä½•ä½¿ç”¨ Github actions å’Œ Vercel åˆ›å»º CI&#x2F;CD æµæ°´çº¿ å¦‚ä½•ä½¿ç”¨ NextAuth å’Œ i18next åœ¨ Next.js åº”ç”¨ç¨‹åºä¸­å®ç° SSO èº«ä»½éªŒè¯å’Œå›½é™…åŒ– å¦‚ä½•ä½¿ç”¨ Prisma å’Œ Supabase å°†æ•°æ®åº“è¿æ¥åˆ° Next.js åº”ç”¨ç¨‹åº å¦‚ä½•ä½¿ç”¨ Next.js å’Œ Nx åœ¨ monorepo ä¸­ç®¡ç†å¤šä¸ªåº”ç”¨ç¨‹åº å…¶ä»– ä»£ç ä»“åº“åœ°å€ åŸæ–‡åœ°å€ é¡µé¢åœ°å€","tags":["Nextjs","SSR"],"categories":["React","Nextjs"]},{"title":"æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨NextJs","path":"/2024/03/12/æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨NextJs/","content":"åŸæ–‡åœ°å€æ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨ NextJsï¼ˆv9.5ï¼‰ - æ˜é‡‘ å‰è¨€Next.js ä¹‹å‰ç”¨è¿‡ä¸€æ¬¡ï¼Œè¿™æ¬¡æ˜¯é‡æ–°åšä¸ªå°å›é¡¾ï¼Œç°åœ¨æœ€æ–°ç‰ˆæœ¬å·²ç»åˆ°äº† 9.5.3ï¼Œæœ‰äº› API ä¹ŸåŒä»¥å‰æœ‰ç‚¹ä¸åŒäº†ï¼Œç½‘ä¸Šå¤§éƒ¨åˆ†æ•™ç¨‹ä¹Ÿéƒ½æ˜¯æ—§ç‰ˆæœ¬ v7 çš„æ¯”è¾ƒå¤šï¼Œæ•…æ‰“ç®—å†™ä¸‹ç®€å•çš„æ•™ç¨‹ï¼Œç»å¯¹è¯¦ç»†çš„å¸¦ä½ å…¥ä¸ªå°é—¨ã€‚ åº“ç‰ˆæœ¬æœ¬æ–‡æ¡ˆä¾‹ç”¨çš„å…³é”®åº“ç‰ˆæœ¬å¦‚ä¸‹ï¼š 12&quot;next&quot;: &quot;^9.5.2&quot;,&quot;react&quot;: &quot;^16.13.1&quot;, node ç‰ˆæœ¬ä¸º 12.18.1ï¼ˆnode ç‰ˆæœ¬ &gt;&#x3D; 10.13 å³å¯ï¼‰ åˆå§‹åŒ– Next.js é¡¹ç›® æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ å¦‚learn-nextjs-exampleï¼Œå…ˆè¿›è¡Œåˆå§‹åŒ– 1npm i -y å®‰è£…æ‰€éœ€è¦çš„ä¾èµ–åŒ… 1npm i react react-dom next --save æ·»åŠ  script å‘½ä»¤ ä¸ºäº†æ˜¯å¼€å‘è¾“å…¥ npm å‘½ä»¤æ›´å¿«æ·ï¼Œæ‰€ä»¥æŠŠå¸¸ç”¨çš„å‘½ä»¤ä½œä¸ºå¿«æ·å‘½ä»¤è®¾ç½® 12345&quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;next&quot;, &quot;build&quot;: &quot;next build&quot;, &quot;start&quot;: &quot;next start&quot;&#125;, åˆ›å»º pages æ–‡ä»¶å¤¹ï¼Œè¿è¡Œç¬¬ä¸€ä¸ªé¡µé¢ pages æ–‡ä»¶å¤¹æ˜¯æ”¾ç½®é¡µé¢çš„ï¼Œè¿™é‡Œè¾¹çš„æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆç›¸åº”è·¯ç”±ã€‚ æ¯”å¦‚åˆ›å»º pages/about.jsï¼Œé‚£ä¹ˆè®¿é—®è¯¥é¡µé¢åœ°å€å°±æ˜¯ http://localhost:3000/aboutï¼› æ¯”å¦‚åˆ›å»º pages/about/about.jsï¼Œé‚£ä¹ˆè®¿é—®åœ°å€ä¸ºhttp://localhost:3000/about/aboutã€‚ ç°åœ¨æˆ‘ä»¬åˆ›å»º pages/index.jsï¼Œindex.js å°±æ˜¯é»˜è®¤ä»£è¡¨æ ¹è·¯å¾„äº† 12345const Home = () =&gt; &#123; return &lt;div&gt;Hello Next.js!&lt;/div&gt;&#125;export default Home æ­¤æ—¶è¿è¡Œ 1npm rum dev æ‰“å¼€http://localhost:3000/ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢æˆåŠŸè¿è¡Œäº†ï¼Œä¹Ÿå¯ä»¥çŸ¥é“ Next.js å†…ç½® Reactï¼Œå› æ­¤ä¸ç”¨æˆ‘ä»¬å†å¼•å…¥ import React from &#39;react&#39;ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ React çš„è¯­æ³•ï¼Œå½“ç„¶ä½ å†™äº†ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œä¸è¿‡æ²¡å¿…è¦ã€‚ è·¯ç”±è·³è½¬é¡µé¢è·³è½¬æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯åˆ©ç”¨æ ‡ç­¾Linkï¼Œä¸€ç§æ˜¯ç¼–ç¨‹å¼è·¯ç”±è·³è½¬router.push(&#39;/&#39;)ã€‚è·¯ç”±è·³è½¬æ–¹å¼è¿˜æ˜¯è·Ÿ React å¾ˆåƒçš„ï¼Œåªä¸è¿‡ç”¨çš„æ˜¯ next çš„åŒ… Link å…ˆåˆ›å»ºä¸¤ä¸ªé¡µé¢ pages/about.js 12345const About = () =&gt; &#123; return &lt;div&gt;About Page&lt;/div&gt;&#125;export default About pages/news.js 12345const News = () =&gt; &#123; return &lt;div&gt;News Page&lt;/div&gt;&#125;export default News åœ¨é¦–é¡µpages/index.jsç¼–å†™è·¯ç”±è·³è½¬é“¾æ¥ 1234567891011121314151617181920import Link from &#x27;next/link&#x27;const Home = () =&gt; &#123; return ( &lt;div&gt; &lt;div&gt;Hello Next.js!&lt;/div&gt; &lt;div&gt; &lt;Link href=&#x27;/about&#x27;&gt; &lt;a&gt;å…³äº&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; &lt;div&gt; &lt;Link href=&#x27;/news&#x27;&gt; &lt;a&gt;æ–°é—»&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default Home åœ¨è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ a æ ‡ç­¾ä¸ç”¨æ·»åŠ  href å…ƒç´ ï¼Œæ·»åŠ äº†ä¹Ÿä¸èµ·ä½œç”¨ã€‚ å¦‚æœLinké‡Œé¢æ¢æˆå…¶ä»–æ ‡ç­¾å¦‚spanï¼Œä¹Ÿä¾ç„¶èƒ½æˆåŠŸè·³è½¬åˆ°å¯¹åº”é¡µé¢ï¼Œå¯ä»¥çŸ¥é“Linkæ˜¯ç»™é‡Œé¢çš„å…ƒç´ æ·»åŠ äº†ç‚¹å‡»ç»‘å®šäº‹ä»¶ï¼Œè€Œä¸æ˜¯åªä¼šç»™ a æ ‡ç­¾æ·»åŠ  href è€Œå·²ã€‚ æ­¤æ—¶ DOM ç»“æ„ï¼š è¿˜æœ‰è¦æ³¨æ„çš„æ˜¯ï¼šLink é‡Œé¢åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œè¦ä¸ç„¶å®ƒä¸çŸ¥è¦ç»‘å®šè°ä¼šæŠ¥é”™ã€‚ ç¼–ç¨‹å¼è·¯ç”±è·³è½¬è¿™é‡Œä¸»è¦ç”¨useRouteré’©å­è¿›è¡Œè·³è½¬ ä¿®æ”¹pages/index.jsï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªè·¯ç”± 1234567891011121314151617181920212223import Link from &#x27;next/link&#x27;import &#123; useRouter &#125; from &#x27;next/router&#x27;const Home = () =&gt; &#123; const router = useRouter() const gotoAbout = () =&gt; &#123; router.push(&#x27;/news&#x27;) &#125; return ( &lt;div&gt; &lt;div&gt;Hello Next.js!&lt;/div&gt; &lt;div&gt; &lt;Link href=&#x27;/about&#x27;&gt; &lt;a&gt;å…³äº&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; &lt;div&gt; &lt;button onClick=&#123;gotoAbout&#125;&gt;æ–°é—»&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default Home è·¯ç”±ä¼ å‚query å½¢å¼ä¼ å‚åœ¨ Next.js ä¸­åªèƒ½é€šè¿‡ queryï¼ˆ?name&#x3D;jackylinï¼‰æ¥ä¼ é€’å‚æ•°ï¼Œä¸èƒ½é€šè¿‡(path:name)çš„å½¢å¼ä¼ é€’å‚æ•°ã€‚ ä¿®æ”¹pages/index.js 1234567891011121314151617181920212223import Link from &#x27;next/link&#x27;import &#123; useRouter &#125; from &#x27;next/router&#x27;const Home = () =&gt; &#123; const router = useRouter() const gotoAbout = () =&gt; &#123; router.push(&#x27;/news&#x27;) &#125; return ( &lt;div&gt; &lt;div&gt;Hello Next.js!&lt;/div&gt; &lt;div&gt; &lt;Link href=&#x27;/about?name=jackylin&#x27;&gt; &lt;a&gt;å…³äº&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; &lt;div&gt; &lt;button onClick=&#123;gotoAbout&#125;&gt;æ–°é—»&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default Home ä¹Ÿå¯ä»¥å˜æ¢æˆè¿™ç§æ–¹å¼ä¼  1&lt;Link href=&#123;&#123; pathname: &#x27;/about&#x27;, query: &#123; name: &#x27;jackylin&#x27; &#125; &#125;&#125;&gt; ä¼ é€’äº†å‚æ•°nameåï¼Œæ¥ä¸‹æ¥æ˜¯æ¥æ”¶å‚æ•°ã€‚ æ‰“å¼€pages/about.jsæ·»åŠ ä»£ç  123456789101112import &#123; withRouter &#125; from &#x27;next/router&#x27;const About = (&#123; router &#125;) =&gt; &#123; return ( &lt;div&gt; &lt;div&gt;About Page&lt;/div&gt; &lt;div&gt;æ¥æ”¶åˆ°å‚æ•°ä¸ºï¼š&#123;router.query.name&#125;&lt;/div&gt; &lt;/div&gt; )&#125;export default withRouter(About) ç‚¹å‡»å…³äºï¼Œè·³è½¬åˆ° about é¡µé¢ï¼Œé¡µé¢å†…å®¹ä¸ºï¼š 12About Pageæ¥æ”¶åˆ°å‚æ•°ä¸ºï¼šjackylin åŒæ—¶ä¹Ÿå¯çœ‹åˆ°åœ°å€æ å¸¦æœ‰å‚æ•°ï¼šhttp://localhost:3000/about?name=jackylin ç¼–ç¨‹å¼è·¯ç”±è·³è½¬ä¼ é€’å‚æ•°ä¿®æ”¹pages/index.jsä¸­çš„ gotoAboutæ–¹æ³• 12345678const gotoAbout = () =&gt; &#123; router.push(&#123; pathname: &#x27;/news&#x27;, query: &#123; info: &#x27;å­¦ä¹ Next.js&#x27;, &#125;, &#125;)&#125; pages/news.js 123456789101112import &#123; withRouter &#125; from &#x27;next/router&#x27;const News = (&#123; router &#125;) =&gt; &#123; return ( &lt;div&gt; &lt;div&gt;News Page&lt;/div&gt; &lt;div&gt;æ¥æ”¶åˆ°å‚æ•°ä¸ºï¼š&#123;router.query.info&#125;&lt;/div&gt; &lt;/div&gt; )&#125;export default withRouter(News) è·¯ç”±å˜åŒ–çš„é’©å­è¿™é‡Œå°±ä¸ä¸€ä¸ªä¸ªç»†ç»†å±•å¼€äº†ï¼Œç›´æ¥ä»£ç è¯´è¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172import &#123; useEffect &#125; from &#x27;react&#x27;import Link from &#x27;next/link&#x27;import &#123; useRouter &#125; from &#x27;next/router&#x27;const Home = () =&gt; &#123; const router = useRouter() const gotoAbout = () =&gt; &#123; router.push(&#123; pathname: &#x27;/news&#x27;, query: &#123; info: &#x27;å­¦ä¹ Next.js&#x27;, &#125;, &#125;) &#125; useEffect(() =&gt; &#123; const handleRouteChangeStart = url =&gt; &#123; console.log(&#x27;routeChangeStart è·¯ç”±å¼€å§‹å˜åŒ–ï¼Œurl:&#x27;, url) &#125; const handleRouteChangeComplete = url =&gt; &#123; console.log(&#x27;routeChangeComplete è·¯ç”±ç»“æŸå˜åŒ–ï¼Œurl:&#x27;, url) &#125; const handleBeforeHistoryChange = url =&gt; &#123; console.log(&#x27;beforeHistoryChange åœ¨æ”¹å˜æµè§ˆå™¨ historyä¹‹å‰è§¦å‘ï¼Œurl:&#x27;, url) &#125; const handleRouteChangeError = (err, url) =&gt; &#123; console.log(`routeChangeError è·³è½¬å‘ç”Ÿé”™è¯¯: $&#123;err&#125;, url:$&#123;url&#125;`) &#125; const handleHashChangeStart = url =&gt; &#123; console.log(&#x27;hashChangeStart hashè·¯ç”±æ¨¡å¼è·³è½¬å¼€å§‹æ—¶æ‰§è¡Œï¼Œurl:&#x27;, url) &#125; const handleHashChangeComplete = url =&gt; &#123; console.log(&#x27;hashChangeComplete hashè·¯ç”±æ¨¡å¼è·³è½¬å®Œæˆæ—¶ï¼Œurl:&#x27;, url) &#125; router.events.on(&#x27;routeChangeStart&#x27;, handleRouteChangeStart) router.events.on(&#x27;routeChangeComplete&#x27;, handleRouteChangeComplete) router.events.on(&#x27;beforeHistoryChange&#x27;, handleBeforeHistoryChange) router.events.on(&#x27;routeChangeError&#x27;, handleRouteChangeError) router.events.on(&#x27;hashChangeStart&#x27;, handleHashChangeStart) router.events.on(&#x27;hashChangeComplete&#x27;, handleHashChangeComplete) return () =&gt; &#123; router.events.off(&#x27;routeChangeStart&#x27;, handleRouteChangeStart) router.events.off(&#x27;routeChangeComplete&#x27;, handleRouteChangeComplete) router.events.off(&#x27;beforeHistoryChange&#x27;, handleBeforeHistoryChange) router.events.off(&#x27;routeChangeError&#x27;, handleRouteChangeError) router.events.off(&#x27;hashChangeStart&#x27;, handleHashChangeStart) router.events.off(&#x27;hashChangeComplete&#x27;, handleHashChangeComplete) &#125; &#125;, []) return ( &lt;div&gt; &lt;div&gt;Hello Next.js!&lt;/div&gt; &lt;div&gt; &lt;Link href=&#x27;/about?name=jackylin&#x27;&gt; &lt;a&gt;å…³äº&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; &lt;div&gt; &lt;button onClick=&#123;gotoAbout&#125;&gt;æ–°é—»&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; )&#125;export default Home style-jsx ç¼–å†™é¡µé¢ CSS æ ·å¼æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå¤´éƒ¨ç»„ä»¶å†å¼•å…¥pages/index.jsï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºcomponents/header.js 123456789const Header = () =&gt; &#123; return ( &lt;div&gt; &lt;div className=&#x27;header-bar&#x27;&gt;Header&lt;/div&gt; &lt;/div&gt; )&#125;export default Header pages/index.jså¼•å…¥ Header ç»„ä»¶ 123456789import Header from &#x27;../components/header&#x27;const Home = () =&gt; &#123; return ( &lt;div&gt; &lt;Header /&gt; &lt;/div&gt; )&#125; æ¥ç€ç»™ Header å†™æ ·å¼ï¼ŒNext.js å†…ç½®æ”¯æŒ style jsx è¯­æ³•ï¼Œè¿™æ˜¯å…¶ä¸­ä¸€ç§ CSS-in-JS çš„è§£å†³æ–¹æ¡ˆ 1234567891011121314151617181920const Header = () =&gt; &#123; return ( &lt;div&gt; &lt;div className=&#x27;header-bar&#x27;&gt;Header&lt;/div&gt; &lt;style jsx&gt; &#123;` .header-bar &#123; width: 100%; height: 50px; line-height: 50px; background: lightblue; text-align: center; &#125; `&#125; &lt;/style&gt; &lt;/div&gt; )&#125;export default Header è¿è¡Œæ ·å¼ç”Ÿæ•ˆ æŸ¥çœ‹ DOM ç»“æ„ï¼Œä¼šå‘ç° Next.js ä¼šè‡ªåŠ¨åŠ å…¥ä¸€ä¸ªéšæœºç±»åï¼ˆjsx-xxxxxxxï¼‰ï¼Œè¿™æ ·å°±èƒ½é˜²æ­¢ CSS çš„å…¨å±€æ±¡æŸ“ã€‚ æ·»åŠ å…¨å±€ CSS æ–‡ä»¶æ–°å»ºæ–‡ä»¶å¤¹ publicï¼Œç”¨äºæ”¾ç½®é™æ€æ–‡ä»¶å¦‚å›¾ç‰‡å’Œ css æ–‡ä»¶ç­‰ï¼Œæ³¨æ„åªæœ‰åä¸ºpublicçš„ç›®å½•èƒ½å¤Ÿå­˜æ”¾é™æ€èµ„æºå¹¶å¯¹å¤–æä¾›è®¿é—®ã€‚æ–°å»ºæ–‡ä»¶public/static/styles/common.css 12345body &#123; margin: 0; padding: 0; font-size: 16px;&#125; è‡ªå®šä¹‰ App Next.js ä½¿ç”¨Appç»„ä»¶æ¥åˆå§‹åŒ–é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥è¦†ç›–Appç»„ä»¶æ¥æ§åˆ¶é¡µé¢çš„åˆå§‹åŒ–ã€‚è¯¥Appä½œç”¨ä¸€èˆ¬å¦‚ä¸‹ï¼š åœ¨é¡µé¢åˆ‡æ¢ä¹‹é—´ä¿æŒå¸ƒå±€çš„æŒä¹…åŒ– åˆ‡æ¢é¡µé¢æ—¶ä¿æŒçŠ¶æ€ ä½¿ç”¨ componentDidCatch è‡ªå®šä¹‰é”™è¯¯å¤„ç† å‘é¡µé¢æ³¨å…¥é¢å¤–çš„æ•°æ® æ·»åŠ å…¨å±€ CSS æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ·»åŠ å…¨å±€ CSS æ ·å¼ï¼Œæ‰€ä»¥éœ€è¦è¦†ç›–åŸæ¥é»˜è®¤çš„Appï¼Œé¦–å…ˆè¦åˆ›å»ºpages/_app.js 123456789import &#x27;../public/static/styles/common.css&#x27;/** * Component æŒ‡å½“å‰é¡µé¢ï¼Œæ¯æ¬¡è·¯ç”±åˆ‡æ¢æ—¶ï¼ŒComponent éƒ½ä¼šæ›´æ–° * pageProps æ˜¯å¸¦æœ‰åˆå§‹å±æ€§çš„å¯¹è±¡ï¼Œè¯¥åˆå§‹å±æ€§ç”±æˆ‘ä»¬çš„æŸä¸ªæ•°æ®è·å–æ–¹æ³•é¢„å…ˆåŠ è½½åˆ°ä½ çš„é¡µé¢ä¸­ï¼Œå¦åˆ™å®ƒå°†æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ */export default function MyApp(&#123; Component, pageProps &#125;) &#123; return &lt;Component &#123;...pageProps&#125; /&gt;&#125; é‡å¯æœåŠ¡ï¼Œè¿è¡Œï¼Œå…¨å±€æ ·å¼æ·»åŠ æˆåŠŸã€‚ é›†æˆ style-componentså¦‚æœæƒ³è¦é¡¹ç›®æ”¯æŒ style-components çš„è¯ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»é…ç½®ã€‚æˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰ Document çš„æ–¹å¼æ¥æ”¹å†™ä»£ç ï¼Œå³æ˜¯æŒ‡_document.jsæ–‡ä»¶ï¼Œå®ƒåªæœ‰åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ï¼Œä¸»è¦ç”¨æ¥ä¿®æ”¹æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„æ–‡æ¡£å†…å®¹ï¼Œä¸€èˆ¬ç”¨æ¥é…åˆç¬¬ä¸‰æ–¹ css-in-js æ–¹æ¡ˆä½¿ç”¨ã€‚ å®‰è£…æ‰€éœ€åº“ 1npm i styled-components --save ç¼–è¯‘ styled-components 1npm i babel-plugin-styled-components --save-dev æ–°å»ºæ–‡ä»¶.babelrc 1234&#123; &quot;presets&quot;: [&quot;next/babel&quot;], &quot;plugins&quot;: [[&quot;styled-components&quot;, &#123; &quot;ssr&quot;: true &#125;]]&#125; æ–°å»º _document.jsï¼Œæ”¹å†™è¦†ç›–å®ƒåŸæ¥çš„å†™æ³•ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œè¦ä¸€å®šè¦ç»§æ‰¿ Documentï¼Œæ‰æ¥æ”¹å†™ 12345678910111213141516171819202122232425262728import Document from &#x27;next/document&#x27;import &#123; ServerStyleSheet &#125; from &#x27;styled-components&#x27;export default class MyDocument extends Document &#123; static async getInitialProps(ctx) &#123; const sheet = new ServerStyleSheet() const originalRenderPage = ctx.renderPage try &#123; ctx.renderPage = () =&gt; originalRenderPage(&#123; enhanceApp: App =&gt; props =&gt; sheet.collectStyles(&lt;App &#123;...props&#125; /&gt;), &#125;) const initialProps = await Document.getInitialProps(ctx) return &#123; ...initialProps, styles: ( &lt;&gt; &#123;initialProps.styles&#125; &#123;sheet.getStyleElement()&#125; &lt;/&gt; ), &#125; &#125; finally &#123; sheet.seal() &#125; &#125;&#125; è¿™å…¶ä¸­è¯¦ç»†é…ç½®æ„æ€å¯ä»¥å»å®˜æ–¹æ–‡æ¡£æ‰¾ç‚¹çº¿ç´¢äº†è§£ï¼šNext.js æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ styled-components çš„æ–¹å¼æ·»åŠ æ ·å¼ï¼Œæ‰“å¼€pages/about.js 1234567891011121314151617import &#123; withRouter &#125; from &#x27;next/router&#x27;import styled from &#x27;styled-components&#x27;const Title = styled.h1` color: green;`const About = (&#123; router &#125;) =&gt; &#123; return ( &lt;div&gt; &lt;Title&gt;About Page&lt;/Title&gt; &lt;div&gt;æ¥æ”¶åˆ°å‚æ•°ä¸ºï¼š&#123;router.query.name&#125;&lt;/div&gt; &lt;/div&gt; )&#125;export default withRouter(About) è¿è¡Œï¼Œå¦‚ä¸‹å›¾ï¼š è·å–æ•°æ®çš„æ–¹å¼å››ä¸ª api éƒ½åªèƒ½åœ¨ pages æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶ä¸­ä½¿ç”¨ getStaticPropså½“é¡µé¢å†…å®¹å–å†³äºå¤–éƒ¨æ•°æ® Next.js æ¨èæˆ‘ä»¬å°½å¯èƒ½ä½¿ç”¨é™æ€ç”Ÿæˆçš„æ–¹å¼ï¼Œå› ä¸ºæ‰€æœ‰é¡µé¢éƒ½å¯ä»¥åªæ„å»ºä¸€æ¬¡å¹¶æ‰˜ç®¡åˆ° CDN ä¸Šï¼Œè¿™æ¯”è®©æœåŠ¡å™¨æ ¹æ®æ¯ä¸ªé¡µé¢è¯·æ±‚æ¥æ¸²æŸ“é¡µé¢å¿«å¾—å¤šã€‚ æ¯”å¦‚ä¸‹åˆ—ä¸€äº›ç±»å‹çš„é¡µé¢ï¼š è¥é”€é¡µé¢ ä¸ªäººåšå®¢ äº§å“åˆ—è¡¨ é™æ€æ–‡æ¡£ å¦‚æœä¸€ä¸ªé¡µé¢ä½¿ç”¨äº† é™æ€ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œåœ¨æ„å»ºæ—¶å°†ç”Ÿæˆæ­¤é¡µé¢å¯¹åº”çš„ HTML æ–‡ä»¶ ã€‚HTML æ–‡ä»¶å°†åœ¨æ¯ä¸ªé¡µé¢è¯·æ±‚æ—¶è¢«é‡ç”¨ï¼Œè¿˜å¯ä»¥è¢« CDN ç¼“å­˜ã€‚è¿™ä¸ªè·Ÿ hexoï¼ŒGatsby ç±»ä¼¼çš„ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶è¿˜æœ‰ json æ–‡ä»¶ã€‚ å…³äº Gatsbyï¼Œå®ƒæ˜¯åŸºäº React çš„ä¸Šå±‚æ¡†æ¶ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘è¿™ç¯‡åšå®¢äº†è§£ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨ Gatsby Next.js ä¼šå°½å¯èƒ½åœ°è‡ªåŠ¨ä¼˜åŒ–åº”ç”¨å¹¶è¾“å‡ºé™æ€ HTMLï¼Œå¦‚æœä½ åœ¨ä½ çš„é¡µé¢ç»„ä»¶æ·»åŠ äº†getInitialPropsæ–¹æ³•æ‰ä¼šç¦ç”¨è‡ªåŠ¨é™æ€ä¼˜åŒ–ï¼ŒgetInitialPropsæ–¹æ³•ä¸‹é¢ä¼šè¯´åˆ°ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹ 1npm run build æ‰“åŒ…é»˜è®¤æ˜¯ SSG æ¨¡å¼ï¼š â— (SSG) automatically generated as static HTML + JSON (uses getStaticProps) ä¼šå‘ç°.next/server/pages/ä¸‹å¤šå‡ºäº†å‡ ä¸ª HTML æ–‡ä»¶ï¼Œè¿™äº›å°±æ˜¯é™æ€æ„å»ºå‡ºçš„ HTML æ–‡ä»¶ã€‚ æ–°å»ºæ–‡ä»¶pages/blog.js 12345678910111213141516171819const Blog = (&#123; posts &#125;) =&gt; &#123; return &lt;div&gt;title: &#123;posts.title&#125;&lt;/div&gt;&#125;// æ­¤å‡½æ•°åœ¨æ„å»ºæ—¶è¢«è°ƒç”¨export async function getStaticProps() &#123; // è°ƒç”¨å¤–éƒ¨ API è·å–å†…å®¹ const res = await fetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;) const posts = await res.json() // åœ¨æ„å»ºæ—¶å°†æ¥æ”¶åˆ° `posts` å‚æ•° return &#123; props: &#123; posts, &#125;, &#125;&#125;export default Blog è¿›å…¥http://localhost:3000/blogï¼Œå‘ç°é¡µé¢èƒ½æ­£å¸¸è·å–åˆ°è¯·æ±‚ç»“æœï¼š 1title: delectus aut autem getStaticPathså½“é¡µé¢çš„è·¯å¾„å–å†³äºå¤–éƒ¨æ•°æ® è¿™ç§æ–¹å¼å’Œä¸Šé¢å°±æœ‰äº›ä¸åŒäº†ï¼Œä¸Šé¢http://localhost:3000/blogè®¿é—®è·¯å¾„æ—¶æˆ‘ä»¬å·²ç»å†™äº†ä¸€ä¸ª js é¡µé¢æ–‡ä»¶ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦æ ¹æ®è·å–çš„æ•°æ®åŠ¨æ€ç”Ÿæˆå¤šç¯‡æ–‡ç« è·¯å¾„çš„è¯ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°è¿™ä¸ª APIï¼Œé€šå¸¸ç”¨è¿™ä¸ª API ä¼šåŒæ—¶é…åˆgetStaticPropsä¸€èµ·ç”¨ã€‚ æ–°å»ºæ–‡ä»¶pages/posts/[id].jsï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œæ–‡ä»¶åå°±æ˜¯[id].js ç”¨idæ ‡è¯†å•ç¯‡åšæ–‡ï¼Œæ¯”å¦‚ä½ è®¿é—®http://localhost:3000/posts/1å°±å±•ç¤ºidä¸º 1 çš„æ–‡ç« ã€‚ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233const Post = (&#123; post &#125;) =&gt; &#123; return ( &lt;div&gt; &lt;div&gt;æ–‡ç« id: &#123;post.id&#125;&lt;/div&gt; &lt;div&gt;åšå®¢æ ‡é¢˜: &#123;post.title&#125;&lt;/div&gt; &lt;/div&gt; )&#125;// æ„å»ºè·¯ç”±export async function getStaticPaths() &#123; // è°ƒç”¨å¤–éƒ¨ API è·å–åšæ–‡åˆ—è¡¨ const res = await fetch(&#x27;https://jsonplaceholder.typicode.com/todos&#x27;) const posts = await res.json() // æ ¹æ®åšæ–‡åˆ—è¡¨ç”Ÿæˆæ‰€æœ‰éœ€è¦é¢„æ¸²æŸ“çš„è·¯å¾„ const paths = posts.map(post =&gt; `/posts/$&#123;post.id&#125;`) // fallbackä¸ºfalseï¼Œè¡¨ç¤ºä»»ä½•ä¸åœ¨ getStaticPaths çš„è·¯å¾„çš„ç»“æœå°†æ˜¯ 404 é¡µé¢ã€‚ return &#123; paths, fallback: false &#125;&#125;// è·å–å•ä¸ªé¡µé¢åšæ–‡æ•°æ®export async function getStaticProps(&#123; params &#125;) &#123; // å¦‚æœè·¯ç”±æ˜¯ /posts/1ï¼Œé‚£ä¹ˆ params.id å°±æ˜¯ 1 const res = await fetch(`https://jsonplaceholder.typicode.com/todos/$&#123;params.id&#125;`) const post = await res.json() // é€šè¿‡ props å‚æ•°å‘é¡µé¢ä¼ é€’åšæ–‡çš„æ•°æ® return &#123; props: &#123; post &#125; &#125;&#125;export default Post æ‹‰å–ä¸‹æ¥çš„æ•°æ®å…¨éƒ¨æœ‰ 200 æ¡ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ¨æ€æ„å»ºäº† 200 ä¸ªè·¯ç”±ï¼Œç°åœ¨æˆ‘ä»¬è®¿é—®ç¬¬ 50 ç¯‡åšæ–‡çš„è¯ï¼Œç›´æ¥è¾“å…¥http://localhost:3000/posts/50 é¡µé¢æ˜¾ç¤ºï¼š 12æ–‡ç« id: 50åšæ–‡æ ‡é¢˜: cupiditate necessitatibus ullam aut quis dolor voluptate æ¥ä¸‹æ¥è®©æˆ‘ä»¬å†æ¬¡æ‰“åŒ…ï¼Œæ‰§è¡Œnpm run buildï¼ˆå¦‚æœæ‰“åŒ…å‘ç”Ÿé”™è¯¯å¾ˆå¯èƒ½æ˜¯ç½‘ç»œå·®å’Œè¯·æ±‚é“¾æ¥æœ‰å…³ï¼Œå› ä¸ºè¦è¯·æ±‚å¾ˆå¤šé¡µé¢ï¼Œå¦‚æœæ˜¯ç½‘ç»œé—®é¢˜å¤šè¯•å‡ æ¬¡å°±è¡Œï¼‰ï¼Œä½ ä¼šå‘ç°è¿™æ¬¡æ‰“åŒ…æ—¶é—´å˜é•¿äº†ï¼Œå› ä¸ºè¦æ„å»ºçš„é™æ€é¡µé¢å¤šäº†ï¼Œæˆ‘ä»¬è¯·æ±‚è¿”å›æ¥çš„æ•°æ®æœ‰ 200 æ¡ï¼Œæ‰€ä»¥åº”è¯¥ç”Ÿæˆ 200 ä¸ªé™æ€ HTML æ–‡ä»¶å’Œç›¸åº”çš„ json æ•°æ®æ–‡ä»¶ã€‚ æˆ‘ä»¬æ¥çœ‹ 1.json æ–‡ä»¶ï¼Œå°±æ˜¯è¯·æ±‚åçš„æ•°æ® 1&#123;&quot;pageProps&quot;:&#123;&quot;post&quot;:&#123;&quot;userId&quot;:1,&quot;id&quot;:1,&quot;title&quot;:&quot;delectus aut autem&quot;,&quot;completed&quot;:false&#125;&#125;,&quot;__N_SSG&quot;:true&#125; getServerSidePropsæ¯æ¬¡é¡µé¢è¯·æ±‚æ—¶é‡æ–°ç”Ÿæˆé¡µé¢çš„ HTML å¦‚æœæ— æ³•åœ¨ç”¨æˆ·è¯·æ±‚ä¹‹å‰é¢„æ¸²æŸ“é¡µé¢ï¼Œé‚£ä¸Šé¢çš„â€é™æ€ç”Ÿæˆâ€å°±ä¸å¤ªé€‚ç”¨äº†ï¼Œæˆ–è€…æ˜¯é¡µé¢æ•°æ®éœ€è¦é¢‘ç¹çš„æ›´æ–°ï¼Œå¹¶ä¸”é¡µé¢å†…å®¹ä¼šéšç€æ¯ä¸ªè¯·æ±‚è€Œå˜åŒ–ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š å°†â€œé™æ€ç”Ÿæˆâ€ä¸ å®¢æˆ·ç«¯æ¸²æŸ“ ä¸€èµ·ä½¿ç”¨ï¼šä½ å¯ä»¥è·³è¿‡é¡µé¢æŸäº›éƒ¨åˆ†çš„é¢„æ¸²æŸ“ï¼Œç„¶åä½¿ç”¨å®¢æˆ·ç«¯ JavaScript æ¥å¡«å……å®ƒä»¬ ä½¿ç”¨ æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼š Next.js é’ˆå¯¹æ¯ä¸ªé¡µé¢çš„è¯·æ±‚è¿›è¡Œé¢„æ¸²æŸ“ã€‚ç”±äº CDN æ— æ³•ç¼“å­˜è¯¥é¡µé¢ï¼Œå› æ­¤é€Ÿåº¦ä¼šè¾ƒæ…¢ï¼Œä½†æ˜¯é¢„æ¸²æŸ“çš„é¡µé¢å°†å§‹ç»ˆæ˜¯æœ€æ–°çš„ã€‚ ç”±äºæœåŠ¡å™¨ç«¯æ¸²æŸ“ä¼šå¯¼è‡´æ€§èƒ½æ¯”â€œé™æ€ç”Ÿæˆâ€æ…¢ï¼Œå› æ­¤ä»…åœ¨ç»å¯¹å¿…è¦æ—¶æ‰ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚ æ–°å»ºæ–‡ä»¶pages/server-blog.js 1234567891011121314151617181920const Blog = (&#123; posts &#125;) =&gt; &#123; return &lt;div&gt;title: &#123;posts.title&#125;&lt;/div&gt;&#125;// åœ¨æ¯æ¬¡é¡µé¢è¯·æ±‚æ—¶éƒ½ä¼šè¿è¡Œï¼Œè€Œåœ¨æ„å»ºæ—¶ä¸è¿è¡Œã€‚// è¦è®¾ç½®æŸä¸ªé¡µé¢ä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå°±éœ€è¦å¯¼å‡º getServerSideProps å‡½æ•°export async function getServerSideProps() &#123; // è°ƒç”¨å¤–éƒ¨ API è·å–å†…å®¹ const res = await fetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;) const posts = await res.json() // åœ¨æ„å»ºæ—¶å°†æ¥æ”¶åˆ° `posts` å‚æ•° return &#123; props: &#123; posts, &#125;, &#125;&#125;export default Blog è¿è¡Œnpm run buildï¼Œå‘ç°è¿™æ¬¡å¹¶æ²¡æœ‰ç”Ÿæˆå¯¹åº”çš„ html æ–‡ä»¶â€”â€”server-blog.htmlï¼Œå› ä¸ºæˆ‘ä»¬æŒ‡å®šäº†æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¯·æ±‚æ„å»ºæ—¶ä¸ä¼šæ‰§è¡Œï¼Œä¸æ˜¯é™æ€ç”Ÿæˆã€‚ getInitialPropsgetInitialProps æ˜¯åœ¨æ¸²æŸ“é¡µé¢ä¹‹å‰å°±ä¼šè¿è¡Œçš„ APIã€‚ å¦‚æœè¯¥è·¯å¾„ä¸‹åŒ…å«è¯¥è¯·æ±‚ï¼Œåˆ™æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œå¹¶å°†æ‰€éœ€çš„æ•°æ®ä½œä¸º props ä¼ é€’ç»™é¡µé¢ã€‚å½“ç¬¬ä¸€æ¬¡è®¿é—®ç›´æ¥é¡µé¢ï¼ŒgetInitialProps å°±åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼ŒåŠ è½½å®Œæ¯•åé¡µé¢ç»™å®¢æˆ·ç«¯æ‰˜ç®¡ï¼Œä½¿ç”¨å®¢æˆ·ç«¯çš„è·¯ç”±è·³è½¬ï¼Œä¹‹åé¡µé¢çš„ getInitialProps å°±åœ¨å®¢æˆ·ç«¯æ‰§è¡Œäº†ã€‚ æ¨èï¼š getStaticProps æˆ– getServerSidePropsã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Next.js 9.3 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨ getStaticProps æˆ– getServerSideProps æ¥æ›¿ä»£ getInitialPropsã€‚è¿™äº›æ–°çš„è·å–æ•°æ®çš„æ–¹æ³•ä½¿ä½ å¯ä»¥åœ¨é™æ€ç”Ÿæˆï¼ˆstatic generationï¼‰å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆserver-side renderingï¼‰ä¹‹é—´è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚ æ–°å»ºæ–‡ä»¶pages/initial-blog.js 123456789101112131415161718192021import Link from &#x27;next/link&#x27;const InitialBlog = (&#123; post &#125;) =&gt; &#123; return ( &lt;div&gt; &lt;h1&gt;getInitialProps Demo Page&lt;/h1&gt; &lt;div&gt;è·å–åˆ°çš„title: &#123;post.title&#125;&lt;/div&gt; &lt;Link href=&#x27;/&#x27;&gt; &lt;a&gt;è¿”å›é¦–é¡µ&lt;/a&gt; &lt;/Link&gt; &lt;/div&gt; )&#125;InitialBlog.getInitialProps = async ctx =&gt; &#123; const res = await fetch(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;) const post = await res.json() return &#123; post &#125;&#125;export default InitialBlog å†ä¿®æ”¹pages/index.jsä»£ç ï¼Œå¢åŠ ä¸€ä¸ªLinkæ ‡ç­¾å¯ä»¥è·³è½¬å›è¯¥é¡µé¢ 12345&lt;div&gt; &lt;Link href=&#x27;/initial-blog&#x27;&gt; &lt;a&gt;è¿›å…¥Initial Blog&lt;/a&gt; &lt;/Link&gt;&lt;/div&gt; æ¥ç€ç›´æ¥åœ°å€æ è¾“å…¥http://localhost:3000/initial-blogï¼Œåœ¨æ¸²æŸ“è¯¥é¡µé¢å†…å®¹å‰ï¼Œå…ˆä¼šæ‰§è¡ŒgetInitialPropsæ–¹æ³•ï¼Œæ‰§è¡Œå®Œçš„ç»“æœå†ä¼ åˆ°é¡µé¢ç»„ä»¶ï¼Œå¼€å§‹æ¸²æŸ“é¡µé¢ã€‚ç”±äºæˆ‘ä»¬æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®é¡µé¢ï¼Œé¦–å±åˆ™ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ã€‚ é¡µé¢å†…å®¹æ˜¾ç¤ºä¸ºï¼š 12getInitialProps Demo Pageè·å–åˆ°çš„title: delectus aut autem æ‰“å¼€æµè§ˆå™¨çš„ Network é¢æ¿ï¼Œæ‰¾åˆ° Name å€¼ä¸ºinitial-blogçš„è¯·æ±‚ï¼Œä¼šçœ‹åˆ°è¯·æ±‚å“åº”å†…å®¹çš„æ­£æ˜¯è¯¥é¡µé¢çš„ HTMLã€‚ ç‚¹å‡»è¿”å›é¦–é¡µï¼Œå†ä»é¦–é¡µç‚¹å‡»è¿›å…¥Initial Blogï¼Œé‡æ–°è¿›å…¥è¯¥é¡µé¢ï¼Œæ³¨æ„çš„æ˜¯æ­¤æ—¶å·²ç»ä¸æ˜¯æˆ‘ä»¬æµè§ˆå™¨é€šè¿‡åœ°å€æ è®¿é—®è¯¥é¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡å‰ç«¯è·¯ç”±è¿›å…¥è¯¥é¡µé¢ã€‚ æŸ¥çœ‹ Network é¢æ¿çš„è¯·æ±‚ï¼Œä¼šçœ‹åˆ°æ­¤æ—¶è¿”å›çš„æ˜¯getInitialPropsè¯·æ±‚å›æ¥çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ HTML é¡µé¢å†…å®¹ï¼Œç”±æ­¤å¯çŸ¥æ­¤æ—¶é¡µé¢å·²ç»äº¤ç”±å®¢æˆ·ç«¯æ¸²æŸ“ã€‚è¿™å°±æ˜¯æ‰€è°“ SSR æ¸²æŸ“ï¼Œé¦–å±äº¤ç»™æœåŠ¡ç«¯æ¸²æŸ“è¿”å›ï¼Œè¿”å›åé¡µé¢è·³è½¬å°±æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“äº†ã€‚ è‡ªå®šä¹‰ Headä¹‹æ‰€ä»¥ä¼šé€‰æ‹© Next.jsï¼Œç›¸ä¿¡ä¸€ä¸ªéå¸¸é‡è¦çš„åŸå› å°±æ˜¯æœ‰åˆ©ç”¨ SEOï¼Œé‚£ä¹ˆåˆ©äºçˆ¬è™«æ£€ç´¢çš„æ–¹å¼ï¼Œä¸€ç§å°±æ˜¯åœ¨é¡µé¢å†™å¥½ TDKï¼ˆtitleã€descriptionã€keywordï¼‰ï¼ŒNext.js å¯ä»¥è‡ªå®šä¹‰Headæ ‡ç­¾ ä¿®æ”¹components/header.jsï¼Œåœ¨æœ€å¤–å±‚ div æ ¹å…ƒç´ é‡Œå†…æ·»åŠ ä»£ç  1234&lt;Head&gt; &lt;title&gt;Next.js æ•™ç¨‹ -- JackyLin&lt;/title&gt; &lt;meta name=&#x27;viewport&#x27; content=&#x27;initial-scale=1.0, width=device-width&#x27; /&gt;&lt;/Head&gt; æ‰“å¼€http://localhost:3000/ï¼Œå°±ä¼šçœ‹åˆ°é¡µé¢çš„å¤´éƒ¨æ ‡ç­¾ title å·²ç»è¢«æˆ‘ä»¬æ”¹äº†ã€‚ LazyLoding å®ç°æ¨¡å—&#x2F;ç»„ä»¶æ‡’åŠ è½½æ‡’åŠ è½½æ˜¯æŒ‡éœ€è¦ç”¨åˆ°æˆ–è¯¥åŠ è½½åˆ°æŸä¸ªç»„ä»¶&#x2F;æ¨¡å—çš„æ—¶å€™ï¼Œæ‰åŠ è½½é‚£ä¸ªç»„ä»¶&#x2F;æ¨¡å—çš„ js æ–‡ä»¶ï¼Œä¹Ÿå«å¼‚æ­¥åŠ è½½ã€‚ å¦‚æœé¡µé¢æ–‡ä»¶å†…å®¹å¤šè¿‡å¤§ï¼Œé‚£ä¹ˆå¯èƒ½å‡ºç°é¦–æ¬¡æ‰“å¼€é€Ÿåº¦æ…¢ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œä¼˜åŒ–äº†ï¼Œæ‡’åŠ è½½å°±æ˜¯å…¶ä¸­ä¸€ç§æ–¹å¼ã€‚ æ‡’åŠ è½½æ¨¡å—å…ˆå®‰è£…ä¸€ä¸ªå¤„ç†æ—¥æœŸæ—¶é—´çš„åº“ 1npm i moment --save æ–°å»ºpages/time.js 1234567891011121314151617import &#123; useState &#125; from &#x27;react&#x27;import moment from &#x27;moment&#x27;const Time = () =&gt; &#123; const getTime = () =&gt; &#123; setNowTime(moment().format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)) &#125; const [nowTime, setNowTime] = useState(&#x27;&#x27;) return ( &lt;div&gt; &lt;button onClick=&#123;getTime&#125;&gt;è·å–å½“å‰æ—¶é—´&lt;/button&gt; &lt;div&gt;å½“å‰æ—¶é—´ï¼š&#123;nowTime&#125;&lt;/div&gt; &lt;/div&gt; )&#125;export default Time å‡è®¾æˆ‘ä»¬è¿™ä¸ªé¡µé¢å†…å®¹å¾ˆå¤šï¼Œç„¶åä½ è¿›å…¥è¯¥é¡µé¢å¯èƒ½ä¸éœ€è¦ç‚¹å‡»è·å–æ—¶é—´ï¼Œä½†momentæ¨¡å—ä¾ç„¶åŠ è½½äº†ï¼Œè¿™å°±æœ‰ç‚¹èµ„æºæµªè´¹ã€‚ äºæ˜¯ï¼Œæˆ‘ä»¬æƒ³å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œå†æ¥åŠ è½½momentæ¨¡å—ï¼Œå³æ˜¯å®ç°å¼‚æ­¥åŠ è½½ï¼Œè€Œä¸æ˜¯é¡µé¢ä¸€è¿›å…¥å°±åŠ è½½ã€‚ æ­¤æ—¶ç‚¹å‡»æŒ‰é’®è·å–æ—¶é—´ï¼Œå¯çœ‹åˆ° Network é¢æ¿çœ‹åˆ°momentçš„ä»£ç è¢«æ‰“åŒ…æˆäº†ä¸€ä¸ª1.jsæ–‡ä»¶ï¼Œè¿™æ ·å°±å®ç°äº†æ‡’åŠ è½½äº†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘äº†ä¸»è¦ JavaScript åŒ…çš„å¤§å°,å¸¦æ¥äº†æ›´å¿«çš„åŠ è½½é€Ÿåº¦ã€‚ 1234567891011121314151617181920import &#123; useState &#125; from &#x27;react&#x27;const Time = () =&gt; &#123; const getTime = async () =&gt; &#123; const moment = await import(&#x27;moment&#x27;) setNowTime(moment.default().format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)) // æ³¨æ„è¿™é‡Œä½¿ç”¨ defaultï¼Œä¸èƒ½ç›´æ¥ç”¨ moment() &#125; const getTime = () =&gt; &#123; setNowTime(moment().format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)) &#125; const [nowTime, setNowTime] = useState(&#x27;&#x27;) return ( &lt;div&gt; &lt;button onClick=&#123;getTime&#125;&gt;è·å–å½“å‰æ—¶é—´&lt;/button&gt; &lt;div&gt;å½“å‰æ—¶é—´ï¼š&#123;nowTime&#125;&lt;/div&gt; &lt;/div&gt; )&#125;export default Time æ‡’åŠ è½½ç»„ä»¶æ‡’åŠ è½½ç»„ä»¶éœ€è¦å¼•å…¥ next/dynamicæ¨¡å— æ–°å»ºç»„ä»¶components/content.js 12345const Content = () =&gt; &#123; return &lt;div&gt;content&lt;/div&gt;&#125;export default Content å¼•å…¥pages/time.js 12345678910111213141516171819202122import &#123; useState &#125; from &#x27;react&#x27;import dynamic from &#x27;next/dynamic&#x27;// æ‡’åŠ è½½è‡ªå®šä¹‰ç»„ä»¶const Content = dynamic(() =&gt; import(&#x27;../components/content&#x27;))const Time = () =&gt; &#123; const getTime = async () =&gt; &#123; const moment = await import(&#x27;moment&#x27;) setNowTime(moment.default().format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)) // æ³¨æ„è¿™é‡Œä½¿ç”¨ defaultï¼Œä¸èƒ½ç›´æ¥ç”¨ moment() &#125; const [nowTime, setNowTime] = useState(&#x27;&#x27;) return ( &lt;div&gt; &lt;button onClick=&#123;getTime&#125;&gt;è·å–å½“å‰æ—¶é—´&lt;/button&gt; &lt;div&gt;å½“å‰æ—¶é—´ï¼š&#123;nowTime&#125;&lt;/div&gt; &lt;Content /&gt; &lt;/div&gt; )&#125;export default Time è§‚å¯Ÿ Network å¯ä»¥çœ‹åˆ° Content ç»„ä»¶è¢«æ–°å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ª js æ–‡ä»¶ æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œ 1npm run build æ‰“åŒ…å®Œæˆåï¼Œè¿è¡ŒæœåŠ¡å™¨ 1npm run start ç„¶åæŸ¥çœ‹é¡µé¢ï¼Œæ‰“åŒ…æˆåŠŸï¼ æœ¬æ•™ç¨‹çš„ä»£ç åœ°å€ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å…¥é—¨ NextJS ä»£ç  å‚è€ƒï¼š Server side rendering Styled-Components with NextJS psï¼š ä¸ªäººæŠ€æœ¯åšæ–‡ Github ä»“åº“ï¼Œè§‰å¾—ä¸é”™çš„è¯æ¬¢è¿ starï¼Œç»™æˆ‘ä¸€ç‚¹é¼“åŠ±ç»§ç»­å†™ä½œå§~","tags":["Nextjs","SSR"],"categories":["React","Nextjs"]},{"title":"Nunjucksæ¨¡ç‰ˆå¼•æ“å…¥é—¨","path":"/2024/03/12/Nunjucksæ¨¡ç‰ˆå¼•æ“å…¥é—¨/","content":"åŸæ–‡åœ°å€nunjucks æ¨¡ç‰ˆå¼•æ“å…¥é—¨ - æ˜é‡‘ 1.nunjucksNunjucks æ˜¯ Mozilla å¼€å‘çš„ä¸€ä¸ªçº¯ JavaScript ç¼–å†™çš„æ¨¡æ¿å¼•æ“ï¼Œæ—¢å¯ä»¥ç”¨åœ¨ Node ç¯å¢ƒä¸‹ï¼Œåˆå¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨ç«¯ 2.å®‰è£…1npm install nunjucks 3. ä½¿ç”¨3.1 æ¸²æŸ“å­—ç¬¦ä¸²123456let nunjucks = require(&#x27;nunjucks&#x27;)// autoescape è‡ªåŠ¨è½¬ç§»éæ³•å­—ç¬¦nunjucks.configure(&#123;autoescape:true&#125;)let ret = nunjucks.renderString(&#x27;hello &#123;&#123;username&#125;&#125;&#x27;,&#123;username:&#x27;blued&#x27;&#125;)console.log(ret) // hello blued 3.2 æ¸²æŸ“æ¨¡ç‰ˆæ–‡ä»¶æ–°å»º view ç›®å½•ï¼Œæ–°å»º user.html æ–‡ä»¶ 1234567891011121314&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; hello &#123;&#123;name&#125;&#125; &lt;div&gt;&lt;/body&gt;&lt;/html&gt; js 123456789101112const nunjucks = require(&#x27;nunjucks&#x27;)const path = require(&#x27;path&#x27;)// å¦‚ä½•æ¸²æŸ“æ¨¡ç‰ˆæ–‡ä»¶let data = &#123;name:&#x27;blued&#x27;&#125;// é…ç½®æ¨¡ç‰ˆæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•nunjucks.configure(path.resolve(__dirname,&#x27;view&#x27;),&#123; autoescape:true&#125;)let result = nunjucks.render(&#x27;user.html&#x27;,data)console.log(result) è¾“å‡ºç»“æœå¦‚ä¸‹ 1234567891011121314&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; hello blued &lt;div&gt;&lt;/body&gt;&lt;/html&gt; 3.3 express12345678910111213141516// 3.nunjucks.js// å¦‚ä½•åœ¨express ä¸­ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“let express = require(&#x27;express&#x27;)const nunjucks = require(&#x27;nunjucks&#x27;)const path = require(&#x27;path&#x27;)let app = express()nunjucks.configure(path.resolve(__dirname,&#x27;view&#x27;),&#123; autoescape:true, express:app//è¿™ä¸ªå‚æ•°å…¶å®æ˜¯åœ¨å‘appé‡Œæ³¨å…¥æ¸²æŸ“æ¨¡ç‰ˆçš„æ–¹æ³•&#125;)app.get(&#x27;/&#x27;,function(req,res)&#123; // render æ–¹æ³•æ˜¯expresså†…ç½®çš„res.render(&#x27;user.html&#x27;,&#123;name:&#x27;blued&#x27;&#125;)&#125;)app.listen(8010) node nunjucks.js è¿è¡Œ è®¿é—® http://localhost:8010/ 4. è¯­æ³•4.1 å˜é‡å˜é‡ä¼šä»æ¨¡ç‰ˆä¸Šä¸‹æ–‡è·å–ï¼Œå¦‚æœä½ æƒ³æ˜¾ç¤ºä¸€ä¸ªå˜é‡å¯ä»¥: 1&#123;&#123;username&#125;&#125; 4.2 è¿‡æ»¤å™¨è¿‡æ»¤å™¨æ˜¯ä¸€äº›å¯ä»¥æ‰§è¡Œå˜é‡çš„å‡½æ•°ï¼Œé€šè¿‡ç®¡é“æ“ä½œç¬¦ï¼ˆ|ï¼‰è°ƒç”¨ï¼Œå¹¶å¯æ¥å—å‚æ•°ã€‚ 12345678910let nunjucks = require(&#x27;nunjucks&#x27;)nunjucks.configure(&#123;autoescape:true&#125;)// ä½¿ç”¨è¿‡æ»¤å™¨let ret = nunjucks.renderString(&quot;&#123;&#123;username|join(&#x27;-&#x27;)&#125;&#125;&quot;,&#123;username:[&#x27;blued&#x27;,&#x27;city&#x27;]&#125;)console.log(ret) //blued-citylet ret2 = nunjucks.renderString(&quot;&#123;&#123;username|replace(&#x27;city&#x27;,&#x27;there&#x27;)|capitalize&#125;&#125;&quot;,&#123;username:&#x27;blued city&#x27;&#125;)console.log(ret2)// Blued there 4.3 ifif ä¸ºåˆ†æ”¯è¯­å¥ï¼Œä¸ javascript ä¸­çš„ if ç±»ä¼¼ã€‚ 12345678910111213141516let nunjucks = require(&#x27;nunjucks&#x27;)nunjucks.configure(&#123;autoescape:true&#125;)// ä½¿ç”¨åˆ¤æ–­let ret = nunjucks.renderString(`&#123;% if score &gt;90 %&#125;ä¼˜ç§€&#123;% elseif score &gt;80%&#125;è‰¯å¥½&#123;% elseif score &gt;60%&#125;åŠæ ¼&#123;% else %&#125;ä¸åŠæ ¼&#123;% endif %&#125;`,&#123;score:70&#125;)console.log(ret) // åŠæ ¼ 4.4 forfor å¯ä»¥éå†æ•°ç»„ (arrays) å’Œå¯¹è±¡ (dictionaries)ã€‚ 12345678910111213141516171819let nunjucks = require(&#x27;nunjucks&#x27;)nunjucks.configure(&#123;autoescape:true&#125;)// ä½¿ç”¨åˆ¤æ–­ loop.indexä¸ºç´¢å¼•let ret = nunjucks.renderString(` &lt;ul&gt; &#123;% for user in users %&#125; &lt;li&gt;&#123;&#123;loop.index&#125;&#125; &#123;&#123;user.id&#125;&#125;:&#123;&#123;user.name&#125;&#125;&lt;/li&gt; &#123;% endfor %&#125; &lt;/ul&gt;`,&#123;users:[ &#123;id:1,name:&#x27;blued1&#x27;&#125;, &#123;id:2,name:&#x27;blued2&#x27;&#125;, &#123;id:3,name:&#x27;blued3&#x27;&#125;, &#123;id:4,name:&#x27;blued4&#x27;&#125;, &#123;id:5,name:&#x27;blued5&#x27;&#125;]&#125;)console.log(ret) è¾“å‡ºç»“æœï¼š 12345678910111213&lt;ul&gt; &lt;li&gt;1 1:blued1&lt;/li&gt; &lt;li&gt;2 2:blued2&lt;/li&gt; &lt;li&gt;3 3:blued3&lt;/li&gt; &lt;li&gt;4 4:blued4&lt;/li&gt; &lt;li&gt;5 5:blued5&lt;/li&gt; &lt;/ul&gt; loop.index: å½“å‰å¾ªç¯æ•° (1 indexed) loop.index0: å½“å‰å¾ªç¯æ•° (0 indexed) loop.revindex: å½“å‰å¾ªç¯æ•°ï¼Œä»åå¾€å‰ (1 indexed) loop.revindex0: å½“å‰å¾ªç¯æ•°ï¼Œä»åå¾€å‰ (0 based) loop.first: æ˜¯å¦ç¬¬ä¸€ä¸ª loop.last: æ˜¯å¦æœ€åä¸€ä¸ª loop.length: æ€»æ•° ä½¿ç”¨ä¸€ä¸‹çœ‹çœ‹æ•ˆæœ 1234567891011121314151617181920212223242526let nunjucks = require(&#x27;nunjucks&#x27;)nunjucks.configure(&#123;autoescape:true&#125;)// ä½¿ç”¨åˆ¤æ–­let ret = nunjucks.renderString(` &lt;ul&gt; &#123;% for user in users %&#125; &lt;li&gt; loop.index--&#123;&#123;loop.index&#125;&#125; loop.index0--&#123;&#123;loop.index0&#125;&#125; loop.revindex--&#123;&#123;loop.revindex&#125;&#125; loop.revindex0--&#123;&#123;loop.revindex0&#125;&#125; loop.first--&#123;&#123;loop.first&#125;&#125; loop.last --&#123;&#123;loop.last&#125;&#125; loop.length --&#123;&#123;loop.length&#125;&#125; &#123;&#123;user.id&#125;&#125;:&#123;&#123;user.name&#125;&#125; &lt;/li&gt; &#123;% endfor %&#125; &lt;/ul&gt;`,&#123;users:[ &#123;id:1,name:&#x27;blued1&#x27;&#125;, &#123;id:2,name:&#x27;blued2&#x27;&#125;, &#123;id:3,name:&#x27;blued3&#x27;&#125;]&#125;)console.log(ret) è¾“å‡ºç»“æœ: 123456789101112131415161718192021222324252627282930313233343536373839&lt;ul&gt; &lt;li&gt; loop.index--1 loop.index0--0 loop.revindex--3 loop.revindex0--2 loop.first--true loop.last --false loop.length --3 1:blued1 &lt;/li&gt; &lt;li&gt; loop.index--2 loop.index0--1 loop.revindex--2 loop.revindex0--1 loop.first--false loop.last --false loop.length --3 2:blued2 &lt;/li&gt; &lt;li&gt; loop.index--3 loop.index0--2 loop.revindex--1 loop.revindex0--0 loop.first--false loop.last --true loop.length --3 3:blued3 &lt;/li&gt;&lt;/ul&gt; 4.5 æ¨¡ç‰ˆç»§æ‰¿ æ¨¡ç‰ˆç»§æ‰¿å¯ä»¥è¾¾åˆ°æ¨¡ç‰ˆå¤ç”¨çš„æ•ˆæœï¼Œå½“å†™ä¸€ä¸ªæ¨¡ç‰ˆçš„æ—¶å€™å¯ä»¥å®šä¹‰â€blocksâ€,å­æ¨¡ç‰ˆå¯ä»¥è¦†ç›–ä»– æ”¯æŒå¤šå±‚ç»§æ‰¿ æ–°å»ºä¸€ä¸ª layout.html ä½œä¸ºä¸€ä¸ªæ¨¡ç‰ˆ(ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹è¿™é‡Œåªä¿ç•™äº† body å†…å®¹) 1234567&lt;body&gt; &lt;h1&gt;æˆ‘æ˜¯å¤´&lt;/h1&gt; &#123;% block content%&#125; æˆ‘æ˜¯layoutæ¨¡æ¿çš„å†…å®¹name= &#123;&#123;name&#125;&#125; &#123;% endblock%&#125; &lt;h1&gt;æˆ‘æ˜¯å°¾&lt;/h1&gt;&lt;/body&gt; nunjucks.js 123456789101112const nunjucks = require(&#x27;nunjucks&#x27;)const path = require(&#x27;path&#x27;)// å¦‚ä½•æ¸²æŸ“æ¨¡ç‰ˆæ–‡ä»¶let data = &#123;name:&#x27;blued&#x27;&#125;// é…ç½®æ¨¡ç‰ˆæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•nunjucks.configure(path.resolve(__dirname,&#x27;view&#x27;),&#123; autoescape:true&#125;)let result = nunjucks.render(&#x27;layout.html&#x27;,data)console.log(result) è¾“å‡ºç»“æœ: 1234567&lt;body&gt; &lt;h1&gt;æˆ‘æ˜¯å¤´&lt;/h1&gt; æˆ‘æ˜¯layoutæ¨¡æ¿çš„å†…å®¹name= blued &lt;h1&gt;æˆ‘æ˜¯å°¾&lt;/h1&gt;&lt;/body&gt; æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•ç»§æ‰¿çš„ æ–°å»ºä¸€ä¸ª login.html æ–‡ä»¶ 1234567&#123;% extends &quot;layout.html&quot; %&#125;&#123;% block content%&#125; &lt;form action=&quot;&quot;&gt; ç”¨æˆ·å &lt;input type=&quot;teÃ¥xt&quot;&gt; &lt;/form&gt;&#123;% endblock%&#125; ä½¿ç”¨extendså…³é”®å­—ï¼Œæ³¨æ„æ¨¡ç‰ˆåç§°ä¸€å®šè¦ä¸ºå­—ç¬¦ä¸²åƒè¿™æ ·&quot;layout.html&quot;,å¦åˆ™ä¼šæŠ¥é”™å“¦ã€‚ æ¥ä¸‹æ¥ä¿®æ”¹ js æ–‡ä»¶ï¼Œæ¸²æŸ“â€™login.htmlâ€™ 12let result = nunjucks.render(&#x27;login.html&#x27;,data)console.log(result) è¾“å‡ºç»“æœï¼š 123456789&lt;body&gt; &lt;h1&gt;æˆ‘æ˜¯å¤´&lt;/h1&gt; &lt;form action=&quot;&quot;&gt; ç”¨æˆ·å &lt;input type=&quot;teÃ¥xt&quot;&gt; &lt;/form&gt; &lt;h1&gt;æˆ‘æ˜¯å°¾&lt;/h1&gt;&lt;/body&gt; æ˜¯ä¸æ˜¯å¾ˆç®€å•å°±å®ç°äº†ç»§æ‰¿å‘¢ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªé¡µé¢å¤´å°¾éƒ½ä¸€æ ·ï¼Œåªæœ‰å†…å®¹ä¸ä¸€æ ·å°±èƒ½æ´¾ä¸Šç”¨åœºäº†å‘¢ï¼ 4.6 åŒ…å«includeå…³é”®å­—å¯ä»¥å¼•å…¥å…¶ä»–çš„æ¨¡ç‰ˆï¼Œå¯ä»¥åœ¨å¤šæ¨¡ç‰ˆä¹‹é—´å…±äº«ä¸€äº›å°æ¨¡ç‰ˆï¼Œå¦‚æœæŸä¸ªæ¨¡ç‰ˆå·²ä½¿ç”¨äº†ç»§æ‰¿é‚£ä¹ˆincludeå°†ä¼šéå¸¸æœ‰ç”¨ã€‚ 12345678910111213//nunjucks.jsconst nunjucks = require(&#x27;nunjucks&#x27;)const path = require(&#x27;path&#x27;)// æ¨¡ç‰ˆçš„åŒ…å«let data = &#123;users:[&#123;id:1,name:&#x27;z1&#x27;&#125;,&#123;id:2,name:&#x27;z2&#x27;&#125;]&#125;// é…ç½®æ¨¡ç‰ˆæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•nunjucks.configure(path.resolve(__dirname,&#x27;view&#x27;),&#123; autoescape:true&#125;)let result = nunjucks.render(&#x27;users.html&#x27;,data)console.log(result) users.html 12345678&#123;% extends &quot;layout.html&quot;%&#125;&#123;% block content %&#125;&lt;ul style=&#x27;border:1px solid red&#x27;&gt; &#123;% for user in users %&#125; &#123;% include &quot;item.html&quot; %&#125; &#123;% endfor%&#125;&lt;/ul&gt;&#123;% endblock %&#125; item.html 1&lt;li&gt;åæ¬¡ï¼š&#123;&#123;loop.index&#125;&#125;:&#123;&#123;user.id&#125;&#125;:&#123;&#123;user.name&#125;&#125;&lt;/li&gt; è¾“å‡ºç»“æœï¼š 12345678910111213&lt;body&gt; &lt;h1&gt;æˆ‘æ˜¯å¤´&lt;/h1&gt;&lt;ul style=&#x27;border:1px solid red&#x27;&gt; &lt;li&gt;åæ¬¡ï¼š1:1:z1&lt;/li&gt; &lt;li&gt;åæ¬¡ï¼š2:2:z2&lt;/li&gt;&lt;/ul&gt; &lt;h1&gt;æˆ‘æ˜¯å°¾&lt;/h1&gt;&lt;/body&gt; å‚è€ƒèµ„æ–™ getting-started nunjucks","tags":["æ¨¡ç‰ˆå¼•æ“","nunjucks"]},{"title":"EJSæ¨¡æ¿å¼•æ“ä½¿ç”¨æŒ‡å—","path":"/2024/03/12/EJSæ¨¡æ¿å¼•æ“ä½¿ç”¨æŒ‡å—/","content":"åŸæ–‡åœ°å€EJSï¼šé«˜æ•ˆçš„åµŒå…¥å¼ JavaScript æ¨¡æ¿å¼•æ“ - æ˜é‡‘ EJSï¼ˆEmbedded JavaScript Templatesï¼‰æ˜¯ä¸€ç§ç®€å•è€Œçµæ´»çš„æ¨¡æ¿å¼•æ“ï¼Œç”¨äºå°†æ•°æ®åŠ¨æ€æ¸²æŸ“åˆ°ç½‘é¡µä¸Šã€‚æœ¬æ–‡å°†ä»ä»‹ç»EJSçš„èƒŒæ™¯å’Œèµ·æºå¼€å§‹ï¼Œè¯¦ç»†ä»‹ç»EJSçš„ç‰¹æ€§å’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å®‰è£…é…ç½®ã€åŸºæœ¬è¯­æ³•å’Œæ ‡ç­¾ã€æ•°æ®ç»‘å®šå’Œé€»è¾‘æ§åˆ¶ã€æ¨¡æ¿çš„ç»§æ‰¿å’ŒåŒ…å«ç­‰æ–¹é¢ã€‚ç„¶åï¼Œé‡ç‚¹è§£æEJSçš„æ ¸å¿ƒç‰¹æ€§ï¼ŒåŒ…æ‹¬åµŒå…¥JavaScriptä»£ç ã€æ”¯æŒå˜é‡ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨å’Œå‡½æ•°ã€æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ã€æ¨¡æ¿çš„å¤ç”¨å’Œç»„åˆã€‚æ¥ç€ï¼Œç»™å‡ºäº†EJSçš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¦‚ç¼“å­˜ç¼–è¯‘åçš„æ¨¡æ¿ã€å‡å°‘åµŒå¥—å’Œé‡å¤æ¸²æŸ“ã€åˆç†ä½¿ç”¨å˜é‡ä»¥åŠå¼‚æ­¥åŠ è½½å’Œæ¸²æŸ“ç­‰ã€‚æœ€åï¼Œé€šè¿‡æ¡ˆä¾‹åˆ†æï¼Œå±•ç¤ºäº†å®æˆ˜ä¸­å¦‚ä½•ä½¿ç”¨EJSæ„å»ºé™æ€ç½‘é¡µã€åŠ¨æ€ç½‘é¡µä»¥åŠä¸åç«¯æ•°æ®äº¤äº’ã€‚ è¯¦ç»†å­¦ä¹ è¯·å‚è€ƒä¸­æ–‡æ–‡æ¡£ï¼šejs.bootcss.com ä¸€ã€ä»€ä¹ˆæ˜¯EJS1.1 EJSçš„èƒŒæ™¯å’Œèµ·æºEJSæ˜¯ä¸€ç§æ¨¡æ¿å¼•æ“ï¼Œæœ€æ—©ç”±TJ Holowaychukåœ¨2010å¹´åˆ›å»ºã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ç§ç®€æ´ã€æ˜“ç”¨çš„æ–¹å¼æ¥ç”ŸæˆåŠ¨æ€ç½‘é¡µã€‚EJSçš„è®¾è®¡å—åˆ°äº†Ruby on Railsä¸­ERBæ¨¡æ¿å¼•æ“çš„å¯å‘ï¼Œå¹¶å€Ÿé‰´äº†å…¶ä»–æ¨¡æ¿å¼•æ“çš„ä¸€äº›ç‰¹æ€§ã€‚ EJS çš„å«ä¹‰ä½ çŸ¥é“å—ï¼Ÿ â€œEâ€ ä»£è¡¨ä»€ä¹ˆï¼Ÿå¯ä»¥è¡¨ç¤º â€œå¯åµŒå…¥ï¼ˆEmbeddedï¼‰â€ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œé«˜æ•ˆï¼ˆEffectiveï¼‰â€ã€â€œä¼˜é›…ï¼ˆElegantï¼‰â€æˆ–è€…æ˜¯â€œç®€å•ï¼ˆEasyï¼‰â€ã€‚EJS æ˜¯ä¸€å¥—ç®€å•çš„æ¨¡æ¿è¯­è¨€ï¼Œå¸®ä½ åˆ©ç”¨æ™®é€šçš„ JavaScript ä»£ç ç”Ÿæˆ HTML é¡µé¢ã€‚EJS æ²¡æœ‰å¦‚ä½•ç»„ç»‡å†…å®¹çš„æ•™æ¡ï¼›ä¹Ÿæ²¡æœ‰å†é€ ä¸€å¥—è¿­ä»£å’Œæ§åˆ¶æµè¯­æ³•ï¼›æœ‰çš„åªæ˜¯æ™®é€šçš„ JavaScript ä»£ç è€Œå·²ã€‚ 1.2 EJSçš„åŸºæœ¬æ¦‚å¿µå’Œè®¾è®¡æ€æƒ³EJSä½¿ç”¨åµŒå…¥å¼JavaScriptä»£ç æ¥åŠ¨æ€ç”ŸæˆHTMLã€‚å®ƒé‡‡ç”¨äº†æ¨¡æ¿æ ‡è®°ï¼ˆ&lt;% %&gt;ï¼‰æ¥æ‰§è¡ŒJavaScriptä»£ç ï¼Œä»¥åŠæ’å€¼æ ‡è®°ï¼ˆ&lt;%&#x3D; %&gt;)æ¥è¾“å‡ºå˜é‡çš„å€¼ã€‚EJSçš„è®¾è®¡æ€æƒ³æ˜¯å°½å¯èƒ½ä¿æŒç®€å•å’Œçµæ´»ï¼Œè®©å¼€å‘è€…å¯ä»¥è‡ªç”±åœ°ç»„ç»‡å’Œæ§åˆ¶æ¨¡æ¿çš„ç»“æ„å’Œé€»è¾‘ã€‚ äºŒã€å¼€å§‹ä½¿ç”¨EJS2.1 å®‰è£…å’Œé…ç½®EJSè¦ä½¿ç”¨EJSï¼Œé¦–å…ˆéœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…EJSåŒ…ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„é…ç½®ã€‚ä»¥ä¸‹æ˜¯å®‰è£…å’Œé…ç½®EJSçš„ç¤ºä¾‹ä»£ç ï¼š 12345678// ä½¿ç”¨npmå®‰è£…EJSåŒ…npm install ejs// åœ¨Node.jsä¸­é€šè¿‡requireå¼•å…¥EJSconst ejs = require(&#x27;ejs&#x27;);// é…ç½®EJSæ¨¡æ¿å¼•æ“app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;); 2.2 EJSçš„åŸºæœ¬è¯­æ³•å’Œæ ‡ç­¾EJSä½¿ç”¨å°–æ‹¬å·åŠ ç™¾åˆ†å·çš„æ ‡è®°æ¥æ‰§è¡ŒJavaScriptä»£ç å’Œæ’å€¼ã€‚ä»¥ä¸‹æ˜¯EJSçš„åŸºæœ¬è¯­æ³•å’Œæ ‡ç­¾ç¤ºä¾‹ï¼š 123456&lt;% // æ‰§è¡ŒJavaScriptä»£ç  %&gt;&lt;%= // è¾“å‡ºå˜é‡çš„å€¼ %&gt;&lt;%- // è¾“å‡ºåŸå§‹HTMLä»£ç  %&gt;&lt;%# // æ³¨é‡Š %&gt;&lt;%_ // åˆ é™¤å‰å¯¼ç©ºæ ¼ %&gt;&lt;% __line // æ·»åŠ è¡Œå·æ³¨é‡Š %&gt; 2.3 æ•°æ®ç»‘å®šå’Œé€»è¾‘æ§åˆ¶EJSæ”¯æŒå°†æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸­ï¼Œä½¿å¾—é¡µé¢å†…å®¹èƒ½å¤ŸåŠ¨æ€ç”Ÿæˆã€‚åŒæ—¶ï¼ŒEJSè¿˜æä¾›äº†æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ç­‰æ§åˆ¶ç»“æ„ï¼Œä»¥ä¾¿æ ¹æ®ä¸åŒçš„æƒ…å†µæ¥å±•ç¤ºä¸åŒçš„å†…å®¹ã€‚ä»¥ä¸‹æ˜¯æ•°æ®ç»‘å®šå’Œé€»è¾‘æ§åˆ¶çš„ç¤ºä¾‹ä»£ç ï¼š 12345678910111213&lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt; // è¾“å‡ºå˜é‡titleçš„å€¼&lt;% if (isAdmin) &#123; %&gt; // æ¡ä»¶åˆ¤æ–­ &lt;p&gt;Welcome, admin!&lt;/p&gt;&lt;% &#125; else &#123; %&gt; &lt;p&gt;Welcome, guest!&lt;/p&gt;&lt;% &#125; %&gt;&lt;ul&gt;&lt;% for (let i = 0; i &lt; items.length; i++) &#123; %&gt; // å¾ªç¯ &lt;li&gt;&lt;%= items[i] %&gt;&lt;/li&gt;&lt;% &#125; %&gt;&lt;/ul&gt; 2.4 æ¨¡æ¿çš„ç»§æ‰¿å’ŒåŒ…å«åœ¨EJSä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿çš„ç»§æ‰¿å’ŒåŒ…å«åŠŸèƒ½æ¥é‡ç”¨å’Œç»„åˆæ¨¡æ¿ã€‚æ¨¡æ¿ç»§æ‰¿å…è®¸åˆ›å»ºä¸€ä¸ªåŸºç¡€æ¨¡æ¿ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šå®šä¹‰å­æ¨¡æ¿ï¼Œä»è€Œå®ç°æ¨¡æ¿çš„å±‚æ¬¡åŒ–ç®¡ç†ã€‚æ¨¡æ¿åŒ…å«å…è®¸å°†å¤šä¸ªæ¨¡æ¿ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥ä¾¿æ„å»ºæ›´å¤æ‚çš„é¡µé¢ã€‚ä»¥ä¸‹æ˜¯æ¨¡æ¿çš„ç»§æ‰¿å’ŒåŒ…å«çš„ç¤ºä¾‹ä»£ç ï¼š base.ejsï¼ˆåŸºç¡€æ¨¡æ¿ï¼‰ï¼š 123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;%- body %&gt;&lt;/body&gt;&lt;/html&gt; index.ejsï¼ˆå­æ¨¡æ¿ï¼‰ï¼š 12345678910&lt;% extends(&#x27;base&#x27;) %&gt;&lt;% block(&#x27;title&#x27;) %&gt; &lt;%- title %&gt;&lt;% endblock %&gt;&lt;% block(&#x27;body&#x27;) %&gt; &lt;h1&gt;&lt;%= heading %&gt;&lt;/h1&gt; &lt;p&gt;&lt;%= content %&gt;&lt;/p&gt;&lt;% endblock %&gt; ä¸‰ã€EJSçš„æ ¸å¿ƒç‰¹æ€§è¯¦è§£3.1 åµŒå…¥JavaScriptä»£ç åœ¨EJSä¸­ï¼Œå¯ä»¥ä½¿ç”¨&lt;% %&gt;æ ‡è®°åµŒå…¥JavaScriptä»£ç ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ‰§è¡Œå„ç§é€»è¾‘æ“ä½œï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ã€‚ 3.2 æ”¯æŒå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡EJSæ”¯æŒå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ã€‚å±€éƒ¨å˜é‡åœ¨æ¨¡æ¿å†…éƒ¨å®šä¹‰ï¼Œå¹¶åªåœ¨å½“å‰ä½œç”¨åŸŸå¯è§ã€‚å…¨å±€å˜é‡åˆ™å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«å’Œè®¿é—®ã€‚ 3.3 è‡ªå®šä¹‰è¿‡æ»¤å™¨å’Œå‡½æ•°EJSå…è®¸å¼€å‘è€…å®šä¹‰è‡ªå·±çš„è¿‡æ»¤å™¨å’Œå‡½æ•°ï¼Œä»¥ä¾¿å¯¹æ•°æ®è¿›è¡Œå¤„ç†å’Œè½¬æ¢ã€‚é€šè¿‡è‡ªå®šä¹‰è¿‡æ»¤å™¨å’Œå‡½æ•°ï¼Œå¯ä»¥å®ç°æ›´çµæ´»å’Œé«˜åº¦å®šåˆ¶åŒ–çš„æ¨¡æ¿åŠŸèƒ½ã€‚ 3.4 æ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯EJSæ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯ç­‰æ§åˆ¶ç»“æ„ï¼Œä»¥ä¾¿æ ¹æ®ä¸åŒçš„æ¡ä»¶æ¥å±•ç¤ºä¸åŒçš„å†…å®¹ã€‚æ¡ä»¶åˆ¤æ–­å¯ä»¥ä½¿ç”¨ifè¯­å¥ã€switchè¯­å¥ç­‰ï¼Œå¾ªç¯å¯ä»¥ä½¿ç”¨forå¾ªç¯ã€whileå¾ªç¯ç­‰ã€‚ 3.5 æ”¯æŒæ¨¡æ¿çš„å¤ç”¨å’Œç»„åˆEJSæ”¯æŒæ¨¡æ¿çš„å¤ç”¨å’Œç»„åˆï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿ç»§æ‰¿å’ŒåŒ…å«åŠŸèƒ½æ¥é‡ç”¨å’Œç»„åˆæ¨¡æ¿ã€‚æ¨¡æ¿ç»§æ‰¿å…è®¸åˆ›å»ºä¸€ä¸ªåŸºç¡€æ¨¡æ¿ï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šå®šä¹‰å­æ¨¡æ¿ï¼Œä»è€Œå®ç°æ¨¡æ¿çš„å±‚æ¬¡åŒ–ç®¡ç†ã€‚æ¨¡æ¿åŒ…å«å…è®¸å°†å¤šä¸ªæ¨¡æ¿ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥ä¾¿æ„å»ºæ›´å¤æ‚çš„é¡µé¢ã€‚ å››ã€EJSæ€§èƒ½ä¼˜åŒ–æŠ€å·§4.1 ç¼“å­˜ç¼–è¯‘åçš„æ¨¡æ¿ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥å°†ç¼–è¯‘åçš„æ¨¡æ¿ç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤ç¼–è¯‘ã€‚è¿™æ ·ï¼Œåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„ç¼–è¯‘ç»“æœï¼Œå‡å°‘äº†ç¼–è¯‘çš„å¼€é”€ã€‚ 4.2 å‡å°‘åµŒå¥—å’Œé‡å¤æ¸²æŸ“è¿‡å¤šçš„åµŒå¥—å’Œé‡å¤çš„æ¸²æŸ“æ“ä½œä¼šå¢åŠ æ¨¡æ¿çš„å¤æ‚åº¦å’Œæ¸²æŸ“çš„æ—¶é—´ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œåº”å°½é‡å‡å°‘æ¨¡æ¿çš„åµŒå¥—å’Œé‡å¤æ¸²æŸ“ã€‚ 4.3 åˆç†ä½¿ç”¨å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡å¯ä»¥æé«˜è®¿é—®å˜é‡çš„æ•ˆç‡ã€‚è€Œè¿‡å¤šçš„å…¨å±€å˜é‡å¯èƒ½ä¼šå¯¼è‡´å‘½åå†²çªå’Œæ€§èƒ½ä¸‹é™ï¼Œå› æ­¤åº”è¯¥åˆç†ä½¿ç”¨å…¨å±€å˜é‡ã€‚ 4.4 å¼‚æ­¥åŠ è½½å’Œæ¸²æŸ“å¯¹äºå¤§å‹é¡µé¢æˆ–éœ€è¦ä»åç«¯åŠ è½½æ•°æ®çš„é¡µé¢ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¼‚æ­¥åŠ è½½å’Œæ¸²æŸ“æŠ€æœ¯ã€‚è¿™æ ·å¯ä»¥æé«˜é¡µé¢çš„å“åº”é€Ÿåº¦ï¼Œå¹¶å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„å¹¶è¡ŒåŠ è½½èƒ½åŠ›ã€‚ 4.5 å…¶ä»–æ€§èƒ½ä¼˜åŒ–å»ºè®®é™¤äº†ä»¥ä¸Šå‡ ç‚¹ï¼Œè¿˜å¯ä»¥é€šè¿‡å‹ç¼©HTMLã€CSSå’ŒJavaScriptä»£ç ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“å¤§å°ï¼›ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æºçš„åŠ è½½ï¼›ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œæ•°æ®å¤„ç†ç­‰æ–¹å¼æ¥æé«˜é¡µé¢çš„æ€§èƒ½ã€‚ äº”ã€æ¡ˆä¾‹åˆ†æï¼šå®æˆ˜ä¸­ä½¿ç”¨EJS5.1 ä½¿ç”¨EJSæ„å»ºé™æ€ç½‘é¡µEJSå¯ä»¥ç”¨äºæ„å»ºé™æ€çš„ç½‘é¡µï¼Œåªéœ€å°†æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸­ï¼Œç„¶åå°†æ¸²æŸ“åçš„HTMLä¿å­˜åˆ°æ–‡ä»¶ä¸­å³å¯ã€‚ 1234567891011const ejs = require(&#x27;ejs&#x27;);const fs = require(&#x27;fs&#x27;);const template = fs.readFileSync(&#x27;template.ejs&#x27;, &#x27;utf8&#x27;);const data = &#123; title: &#x27;My Website&#x27;, content: &#x27;Welcome to my website!&#x27;&#125;;const html = ejs.render(template, data);fs.writeFileSync(&#x27;index.html&#x27;, html, &#x27;utf8&#x27;); 5.2 ä½¿ç”¨EJSæ„å»ºåŠ¨æ€ç½‘é¡µEJSä¹Ÿå¯ä»¥ç”¨äºæ„å»ºåŠ¨æ€çš„ç½‘é¡µï¼Œåªéœ€å°†æ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸­ï¼Œç„¶åå°†æ¸²æŸ“åçš„HTMLå‘é€ç»™å®¢æˆ·ç«¯å³å¯ã€‚ 1234567891011121314151617const express = require(&#x27;express&#x27;);const ejs = require(&#x27;ejs&#x27;);const app = express();app.set(&#x27;view engine&#x27;, &#x27;ejs&#x27;);app.get(&#x27;/&#x27;, (req, res) =&gt; &#123; const data = &#123; title: &#x27;Home&#x27;, content: &#x27;Welcome to my website!&#x27; &#125;; res.render(&#x27;index&#x27;, data);&#125;);app.listen(3000, () =&gt; &#123; console.log(&#x27;Server is running on port 3000&#x27;);&#125;); 5.3 ä½¿ç”¨EJSä¸åç«¯æ•°æ®äº¤äº’EJSå¯ä»¥ä¸åç«¯æ•°æ®è¿›è¡Œäº¤äº’ï¼Œé€šè¿‡æ¨¡æ¿ä¸­çš„å˜é‡å’Œè¡¨è¾¾å¼æ¥æ˜¾ç¤ºå’Œå¤„ç†åç«¯ä¼ é€’çš„æ•°æ®ã€‚ 123456789// åç«¯ Node.js ä»£ç ï¼ˆç¤ºä¾‹ä½¿ç”¨Expressæ¡†æ¶ï¼‰app.get(&#x27;/users&#x27;, (req, res) =&gt; &#123; const users = [ &#123; name: &#x27;Alice&#x27;, age: 25 &#125;, &#123; name: &#x27;Bob&#x27;, age: 30 &#125;, &#123; name: &#x27;Charlie&#x27;, age: 35 &#125; ]; res.render(&#x27;users&#x27;, &#123; users &#125;);&#125;); 123456&lt;!-- å‰ç«¯EJSæ¨¡æ¿ä»£ç  --&gt;&lt;ul&gt;&lt;% users.forEach(user =&gt; &#123; %&gt; &lt;li&gt;&lt;%= user.name %&gt; (age &lt;%= user.age %&gt;)&lt;/li&gt;&lt;% &#125;) %&gt;&lt;/ul&gt; é€šè¿‡å®‰è£…å’Œé…ç½®EJSï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„åŸºæœ¬è¯­æ³•å’Œæ ‡ç­¾æ¥å®ç°æ•°æ®ç»‘å®šå’Œé€»è¾‘æ§åˆ¶ï¼ŒåŒæ—¶è¿˜èƒ½åˆ©ç”¨å…¶æ ¸å¿ƒç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§æ¥æ„å»ºçµæ´»ã€é«˜æ•ˆçš„ç½‘é¡µåº”ç”¨ã€‚é€šè¿‡æ¡ˆä¾‹åˆ†æï¼Œå±•ç¤ºäº†EJSåœ¨å®æˆ˜ä¸­çš„åº”ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬æ„å»ºé™æ€ç½‘é¡µã€åŠ¨æ€ç½‘é¡µä»¥åŠä¸åç«¯æ•°æ®äº¤äº’ã€‚ å…­ã€EJSçš„å±€é™æ€§å’Œå…¶ä»–æ¨¡æ¿å¼•æ“çš„æ¯”è¾ƒ6.1 EJSçš„å±€é™æ€§è™½ç„¶EJSæ˜¯ä¸€ç§ç®€å•è€Œçµæ´»çš„æ¨¡æ¿å¼•æ“ï¼Œä½†å®ƒä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„EJSå±€é™æ€§ï¼š å­¦ä¹ æ›²çº¿ï¼šå¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œå­¦ä¹ ä½¿ç”¨EJSå¯èƒ½éœ€è¦ä¸€å®šçš„æ—¶é—´å’Œç»éªŒç§¯ç´¯ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸ç†Ÿæ‚‰JavaScriptè¯­æ³•å’Œæ¨¡æ¿å¼•æ“æ¦‚å¿µçš„å¼€å‘è€…ã€‚ æ€§èƒ½ï¼šç›¸å¯¹äºå…¶ä»–ä¸€äº›é«˜æ€§èƒ½çš„æ¨¡æ¿å¼•æ“ï¼ŒEJSçš„æ€§èƒ½å¯èƒ½ç¨ä½ã€‚ç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡æ•°æ®æ¸²æŸ“å’Œå¤æ‚é€»è¾‘å¤„ç†æ–¹é¢ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€‚ å®‰å…¨æ€§ï¼šç”±äºEJSå…è®¸æ‰§è¡ŒåµŒå…¥çš„JavaScriptä»£ç ï¼Œå› æ­¤éœ€è¦ç‰¹åˆ«æ³¨æ„è¾“å…¥çš„æ•°æ®çš„å®‰å…¨æ€§ï¼Œä»¥é¿å…æ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œå¦‚XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ç­‰é—®é¢˜ã€‚ 6.2 å…¶ä»–æ¨¡æ¿å¼•æ“çš„æ¯”è¾ƒé™¤äº†EJSï¼Œè¿˜æœ‰å…¶ä»–è®¸å¤šæµè¡Œçš„æ¨¡æ¿å¼•æ“å¯ä¾›é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸EJSç›¸æ¯”çš„å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œäº†ç®€è¦æ¯”è¾ƒï¼š Handlebarsï¼šHandlebarsæ˜¯ä¸€ç§åŸºäºMustacheæ¨¡æ¿è¯­æ³•çš„æ¨¡æ¿å¼•æ“ï¼Œè¯­æ³•ç®€æ´æ˜“æ‡‚ã€‚ç›¸æ¯”EJSï¼ŒHandlebarsæ›´å¼ºè°ƒæ¨¡æ¿çš„å¯è¯»æ€§å’Œæ˜“ç»´æŠ¤æ€§ã€‚ Jade&#x2F;Pugï¼šJadeï¼ˆç°ç§°ä¸ºPugï¼‰æ˜¯ä¸€ç§ä½¿ç”¨ç¼©è¿›å’Œæ— é—­åˆæ ‡ç­¾çš„æ¨¡æ¿å¼•æ“ï¼Œå…·æœ‰ç®€æ´çš„è¯­æ³•å’Œå¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›ã€‚ç›¸å¯¹äºEJSï¼ŒJade&#x2F;Pugçš„æ¨¡æ¿æ–‡ä»¶é€šå¸¸æ›´åŠ ç²¾ç®€å’Œä¼˜é›…ã€‚ Nunjucksï¼šNunjucksæ˜¯ä¸€ç§åŸºäºJinja2æ¨¡æ¿å¼•æ“çš„JavaScriptæ¨¡æ¿å¼•æ“ï¼Œå…·æœ‰çµæ´»å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡æ¿ç»§æ‰¿ã€å®ç­‰é«˜çº§ç‰¹æ€§ã€‚ React&#x2F;Vueï¼šReactå’ŒVueæ˜¯åŸºäºç»„ä»¶åŒ–å¼€å‘çš„å‰ç«¯æ¡†æ¶ï¼Œå®ƒä»¬æä¾›äº†è‡ªå·±çš„æ¨¡æ¿è¯­æ³•å’Œæ¸²æŸ“æœºåˆ¶ï¼Œå…·æœ‰æ›´é«˜çš„æ€§èƒ½å’Œæ›´å¥½çš„äº¤äº’ä½“éªŒã€‚ è¿™äº›æ¨¡æ¿å¼•æ“å„æœ‰ç‰¹ç‚¹ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯å’Œéœ€æ±‚ã€‚é€‰æ‹©åˆé€‚çš„æ¨¡æ¿å¼•æ“éœ€è¦æ ¹æ®é¡¹ç›®è¦æ±‚ã€å¼€å‘ç»éªŒå’Œä¸ªäººåå¥½è¿›è¡Œæƒè¡¡ã€‚ ä¸ƒã€å°ç»“ä¸€ä¸‹æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†EJSæ¨¡æ¿å¼•æ“çš„èƒŒæ™¯ã€ç‰¹æ€§å’Œä½¿ç”¨æ–¹æ³•ã€‚æˆ‘ä»¬äº†è§£äº†EJSçš„èµ·æºå’Œè®¾è®¡æ€æƒ³ï¼Œå­¦ä¹ äº†EJSçš„åŸºæœ¬è¯­æ³•å’Œæ ‡ç­¾ï¼Œå¹¶æ·±å…¥æ¢è®¨äº†å…¶æ ¸å¿ƒç‰¹æ€§ï¼Œå¦‚åµŒå…¥JavaScriptä»£ç ã€å˜é‡ç»‘å®šã€æ¡ä»¶åˆ¤æ–­å’Œæ¨¡æ¿ç»§æ‰¿ç­‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†EJSçš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œä»¥å¸®åŠ©æé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦å’Œæ¸²æŸ“æ•ˆç‡ã€‚æœ€åï¼Œé€šè¿‡å®æˆ˜æ¡ˆä¾‹çš„åˆ†æï¼Œå±•ç¤ºäº†EJSåœ¨é™æ€ç½‘é¡µã€åŠ¨æ€ç½‘é¡µå’Œåç«¯æ•°æ®äº¤äº’ä¸­çš„åº”ç”¨ã€‚ ä½¿ç”¨EJSå¯ä»¥æ–¹ä¾¿åœ°æ„å»ºå…·æœ‰åŠ¨æ€å†…å®¹çš„ç½‘é¡µï¼Œçµæ´»å¤„ç†æ•°æ®å’Œé€»è¾‘æ“ä½œï¼Œå¹¶ä¸åç«¯è¿›è¡Œäº¤äº’ã€‚ç„¶è€Œï¼Œå¼€å‘è€…åœ¨é€‰æ‹©æ¨¡æ¿å¼•æ“æ—¶éœ€è¦ç»¼åˆè€ƒè™‘ä¸åŒçš„å› ç´ ï¼Œå¦‚å­¦ä¹ æ›²çº¿ã€æ€§èƒ½è¦æ±‚å’Œé¡¹ç›®éœ€æ±‚ã€‚ å¸Œæœ›æœ¬æ–‡å¯¹æ‚¨ç†è§£å’Œä½¿ç”¨EJSæ¨¡æ¿å¼•æ“æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœä½ ä»¥åæœ‰æœºä¼šä½¿ç”¨å®ƒï¼Œæ¬¢è¿å…±åŒå­¦ä¹ è¿›æ­¥æ·±åº¦æŒ–æ˜ã€‚","tags":["æ¨¡æ¿å¼•æ“","ejs"]},{"title":"Nginxé…ç½®å…¥é—¨æ•™ç¨‹","path":"/2024/03/08/Nginxé…ç½®å…¥é—¨æ•™ç¨‹/","content":"nginx å…¥é—¨æ•™ç¨‹nginx é…ç½®è¯¦è§£nginx é‡å†™è§„åˆ™é…ç½®Nginx æ­£å‘ä»£ç†å’Œåå‘ä»£ç†è¯¦è§£ - ç®€ä¹¦æ€»ç»“ nginx ä¸­çš„ location é…ç½®Nginx çš„ location åŒ¹é…è§„åˆ™ Nginx ç®€ä»‹äº§ç”ŸèƒŒæ™¯åœ¨äº’è”ç½‘äº§ä¸šè¿œæ²¡æœ‰ç°åœ¨è¿™ä¹ˆçº¢ç«çš„æ—¶å€™ï¼Œæ¯ä¸ªç½‘ç«™æˆ–è€…åº”ç”¨æ‰€éœ€è¦æ”¯æŒçš„å¹¶å‘é‡ä¸éœ€è¦å¤ªå¤§ï¼Œæ‰€ä»¥æœ€å¼€å§‹çš„æœåŠ¡å™¨æ˜¯ Apacheï¼Œå®ƒå¯¹é«˜å¹¶å‘å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œå› ä¸ºå¹¶å‘é‡ä¸Šä¸‡ä¹‹åï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿå¯¹å…¶è¿›è¡Œè¿›ç¨‹æˆ–çº¿ç¨‹é—´çš„åˆ‡æ¢ä¹Ÿä¼šæ¶ˆè€—å¤§é‡çš„ CPU èµ„æºï¼Œå¯¼è‡´ Http è¯·æ±‚çš„å¹³å‡å“åº”é€Ÿåº¦é™ä½ã€‚ ä½†æ˜¯ç°åœ¨çš„äº’è”ç½‘æµé‡å·²ç»è¿œè¿œä¸æ˜¯å½“æ—¶æ‰€èƒ½æƒ³è±¡çš„ï¼Œæ‰€ä»¥è¿«åˆ‡éœ€è¦ä¸€ç§é«˜æ€§èƒ½çš„ï¼Œç¨³å®šçš„ Web æœåŠ¡å™¨ã€‚äºæ˜¯ Nginx è¯ç”Ÿäº†ã€‚ ä¸»è¦ä¼˜ç‚¹ å¼€æºå…è´¹ äº‹ä»¶é©±åŠ¨Nginx ä½¿ç”¨åŸºäºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œä½¿å¾—å…¶å¯ä»¥æ”¯æŒæ•°ä»¥ç™¾ä¸‡çº§åˆ«çš„ TCP è¿æ¥ è·¨å¹³å°Nginx æ˜¯ä¸€ä¸ªè·¨å¹³å°æœåŠ¡å™¨ï¼Œå¯ä»¥è¿è¡Œåœ¨ Linxuï¼ŒWindowsï¼ŒMacOS ç­‰ä¸»æµçš„æ“ä½œç³»ç»Ÿä¸­ é«˜æ€§èƒ½å¹¶ä¸”ç¨³å®š åº”ç”¨åœºæ™¯ web æœåŠ¡å™¨ åå‘ä»£ç† è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ é‚®ä»¶ä»£ç†æœåŠ¡å™¨ Nginx çš„é…ç½® é…ç½®ç¤ºä¾‹ 123456789101112131415161718192021222324user nobody nobody;worker_processes 2;err_log logs/error.log notice;pid logs/nginx.pid;events &#123; use epoll; worker_connections 1000; # æ¯ä¸ªnginxè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°&#125;http &#123; include mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 60; # é•¿è¿æ¥çš„è¶…æ—¶æ—¶é—´ server &#123; listen 88; server_name localhost; location / &#123; root /usr/var/html; &#125; &#125;&#125; é…ç½®ä¿¡æ¯åˆ†ä¸º4ä¸ªå±‚çº§ ï¼ˆå…¨å±€ &#x2F; http &#x2F; server &#x2F; locationï¼‰ å…¨å±€è®¾ç½®ï¼šè®¾ç½®ä¸€äº›å½±å“ Nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œæ¯”å¦‚å·¥ä½œè¿›ç¨‹æ•°ã€è¿è¡Œçš„èº«ä»½ç­‰ï¼› events å—ï¼šè®¾ç½®å½±å“ Nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œæ¯”å¦‚è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œæ˜¯å¦å¼€å¯å¯¹å¤š work process çš„æ”¯æŒç­‰ http å—ï¼šå¯ä»¥åµŒå¥—å¤šä¸ª server å—ï¼Œé…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ï¼› server å—ï¼šé…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ª http ä¸­å¯ä»¥æœ‰å¤šä¸ª server location å—ï¼šé…ç½®è¯·æ±‚çš„è·¯ç”±ï¼Œä»¥åŠå„ç§é¡µé¢çš„å¤„ç†æƒ…å†µ å…¶ä»–å¸¸è§é…ç½®ï¼š upstreamï¼šé…ç½®è´Ÿè½½å‡è¡¡ï¼Œè®¾ç½®ä¸€ç³»åˆ—çš„åç«¯æœåŠ¡å™¨ location å—URL åœ°å€åŒ¹é…æ˜¯è¿›è¡Œ Nginx é…ç½®ä¸­æœ€çµæ´»çš„éƒ¨åˆ†ã€‚ location æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œä¹Ÿæ”¯æŒæ¡ä»¶åˆ¤æ–­åŒ¹é…ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ location æŒ‡ä»¤å®ç° Nginx å¯¹åŠ¨ã€é™æ€ç½‘é¡µè¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚ä½¿ç”¨ location URL åŒ¹é…é…ç½®è¿˜å¯ä»¥å®ç°åå‘ä»£ç†ï¼Œç”¨äºå®ç° PHP åŠ¨æ€è§£ææˆ–è€…è´Ÿè½½è´Ÿè½½å‡è¡¡ã€‚ alias ä¸ root çš„åŒºåˆ« root é…ç½®æ ¹ç›®å½•ï¼Œåœ¨æ ¹ç›®å½•ä¸­æŸ¥æ‰¾ $document_uri å¯¹åº”çš„æ–‡ä»¶ $request_filename = $document_root + $document_uri alias é…ç½®åˆ«åç›®å½•ï¼Œåœ¨åˆ«åç›®å½•ä¸­æŸ¥æ‰¾ $document_uri - åŒ¹é…è·¯å¾„ å¯¹åº”çš„æ–‡ä»¶ 12345678910111213141516location /blogs &#123; root /home/jie; autoindex on;&#125;# å®šä½æ–‡ä»¶æ—¶ï¼Œ rootValue ä½œä¸ºå‰ç¼€æ·»åŠ åˆ° $document_uri å‰é¢# curl localhost/blogs/a.html -&gt; /home/jie/blogs/a.html# curl localhost/blogshi/a.html ä¹Ÿä¼šåŒ¹é…åˆ° -&gt; /home/jie/blogshi/a.htmllocation /comics &#123; alias /home/pan/manhua; autoindex on;&#125;# å®šä½æ–‡ä»¶æ—¶ï¼ŒaliasValue æ›¿æ¢ $document_uri ä¸­ä¸ locationValue åŒ¹é…çš„éƒ¨åˆ†# aliasValue æ›¿ä»£ /comics# curl localhost/comics/hi.html -&gt; /home/pan/manhua/hi.html location é…ç½®ç¤ºä¾‹å¤šæ¡ location é…ç½®å½“å‰ $document_uri æ—¶ï¼Œä¼šé‡‡ç”¨æƒé‡æœ€é«˜çš„åŒ¹é… ï¼ˆ_ç²¾ç¡®åŒ¹é… &gt; å¼€å§‹ä½ç½®æ­£åˆ™åŒ¹é… &gt; æ™®é€šæ­£åˆ™åŒ¹é… &gt; æ™®é€šåŒ¹é… &gt; æœ€é•¿å­—ç¬¦ä¸²åŒ¹é…_ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344# æ™®é€šåŒ¹é…ï¼šæ™®é€š locationï¼Œæ— ä»»ä½•å‰ç¼€ç¬¦å·# $document_uri å¼€å§‹ä½ç½®åŒ¹é…location /blogs &#123; root /home/jie; # ä¼šåœ¨rootä¸‹æŸ¥æ‰¾blogsç›®å½•ï¼Œæ‰€ä»¥è¦å…ˆæ–°å»ºblogsæ–‡ä»¶å¤¹ autoindex on;&#125;# curl localhost/blogs æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨# curl localhost/lastyear/blogs å³ä½¿rootä¸‹æœ‰å¯¹åº”ç›®å½•ä¹Ÿä¸ä¼šåŒ¹é…åˆ° `location /blogs`åªåŒ¹é…urlä»¥`/blogs`å¼€å¤´çš„æƒ…å†µ# ç²¾ç¡®åŒ¹é…ï¼šå¸¦ = å·å‰ç¼€ç¬¦å·çš„ä¸¥æ ¼åŒ¹é…location = /comics &#123; alias /home/pan/manhua; autoindex on;&#125;# æ­£åˆ™åŒ¹é…location ~ ^.+\\.txt$ &#123; root /home/pan; # æ³¨æ„ æŒ‡ä»¤éƒ½éœ€è¦åˆ†å·ç»“å°¾&#125;# curl localhost/docs/hello.txt ä¼šæŸ¥æ‰¾ /home/pan/docs/hello.txt# curl localhost/documents/a.jpg -&gt; ä¼šåŒ¹é… configuration E# ä»¥ /documents/ å¼€å¤´è¿™ä¸ªä¸“æŒ‡åº¦æ¯”è¾ƒä½ï¼Œæ‰€ä»¥ä¼šç»§ç»­æŸ¥æ‰¾ æ­£åˆ™åŒ¹é… è§„åˆ™location /documents/ &#123; # matches any query beginning with /documents/ and continues searching, # so regular expressions will be checked. This will be matched only if # regular expressions don&#x27;t find a match. [ configuration C ]&#125;# å¼€å§‹ä½ç½®æ­£åˆ™åŒ¹é…location ^~ /images/ &#123; # matches any query beginning with /images/ and halts searching, # so regular expressions will not be checked. [ configuration D ]&#125;# ä¸åŒºåˆ†å¤§å°å†™æ­£åˆ™åŒ¹é…location ~* \\.(gif|jpg|jpeg)$ &#123; # matches any request ending in gif, jpg, or jpeg. However, all # requests to the /images/ directory will be handled by # Configuration D. [ configuration E ]&#125; location åŒ¹é…ä¼˜å…ˆçº§ï¼šlocation [=|~|~*|^~] /uri/ &#123; â€¦ &#125; = ç²¾ç¡®åŒ¹é… ^~ å¼€å§‹ä½ç½®æ­£åˆ™åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ ~ æ­£åˆ™åŒ¹é…ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ ~* ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… !~ å’Œ !~* æ­£åˆ™ä¸åŒ¹é…(åŒºåˆ†&#x2F;ä¸åŒºåˆ† å¤§å°å†™) ä¸ç”¨åœ¨ location åé¢ / é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°ã€‚ é¦–å…ˆåŒ¹é… =ï¼Œå…¶æ¬¡åŒ¹é… ^~ , å…¶æ¬¡æ˜¯æŒ‰æ–‡ä»¶ä¸­é¡ºåºçš„æ­£åˆ™åŒ¹é…ï¼Œæœ€åæ˜¯äº¤ç»™ / é€šç”¨åŒ¹é…ã€‚å½“æœ‰åŒ¹é…æˆåŠŸæ—¶å€™ï¼Œåœæ­¢åŒ¹é…ï¼ŒæŒ‰å½“å‰åŒ¹é…è§„åˆ™å¤„ç†è¯·æ±‚ã€‚ 12345678910111213141516171819202122232425262728293031323334# http://localhost/ å°†åŒ¹é…è§„åˆ™Alocation = / &#123; # è§„åˆ™A&#125;# http://localhost/login å°†åŒ¹é…è§„åˆ™Blocation = /login &#123; # è§„åˆ™B&#125;# http://localhost/static/a.html å°†åŒ¹é…è§„åˆ™Clocation ^~ /static/ &#123; # è§„åˆ™C&#125;location ~ \\.(gif|jpg|png|js|css)$ &#123; # è§„åˆ™D&#125;# http://localhost/a.PNG åˆ™åŒ¹é…è§„åˆ™Elocation ~* \\.png$ &#123; # è§„åˆ™E&#125;# http://localhost/a.XHTML ä¸ç¡®å®šæ˜¯å¦æœ‰æ•ˆ?location !~ \\.xhtml$ &#123; # è§„åˆ™F&#125;location !~* \\.xhtml$ &#123; # è§„åˆ™G&#125;# http://localhost/category/id/1111location / &#123; # è§„åˆ™H proxy_pass http://tomcat:8080/&#125; rewrite é‡å†™è¯·æ±‚é‡å†™è¯·æ±‚ uri çš„ç®€å•ä¾‹å­ 123456789server &#123; listen 80; server_name comic.bilibili.com; index index.html index.php; root html; if ($http_host !~ &quot;^comic\\.bilibili\\.com$&quot;) &#123; rewrite ^(.*) http://comic.bilibili.com$1 redirect; &#125;&#125; é‡å†™è¯·æ±‚é˜²ç›—é“¾ 123456location ~* \\.(gif|jpg|swf)$ &#123; valid_referers none blocked comic.bilibili.com *.comic.bilibili.com; if ($invalid_referer) &#123; rewrite ^/ http://$host/logo.png; &#125;&#125; last åŸºæœ¬ä¸Šéƒ½ç”¨è¿™ä¸ª Flagã€‚ break ä¸­æ­¢ Rewirteï¼Œä¸å†ç»§ç»­åŒ¹é… permanent è¿”å›æ°¸ä¹…é‡å®šå‘çš„ HTTP çŠ¶æ€ 301 redirect è¿”å›ä¸´æ—¶é‡å®šå‘çš„ HTTP çŠ¶æ€ 302 last å’Œ break å…³é”®å­—çš„åŒºåˆ« last å’Œ break å½“å‡ºç°åœ¨ location ä¹‹å¤–æ—¶ï¼Œä¸¤è€…çš„ä½œç”¨æ˜¯ä¸€è‡´çš„æ²¡æœ‰ä»»ä½•å·®å¼‚ last å’Œ break å½“å‡ºç°åœ¨ location å†…éƒ¨æ—¶ï¼š last ä½¿ç”¨äº† last æŒ‡ä»¤ï¼Œrewrite åä¼šè·³å‡º location ä½œç”¨åŸŸï¼Œç”¨ rewrite çš„ç»“æœé‡æ–°å¼€å§‹å†èµ°ä¸€æ¬¡åˆšæ‰çš„è¡Œä¸º break ä½¿ç”¨äº† break æŒ‡ä»¤ï¼Œrewrite åä¸ä¼šè·³å‡º location ä½œç”¨åŸŸï¼Œå®ƒçš„ç”Ÿå‘½ä¹Ÿåœ¨è¿™ä¸ª location ä¸­ç»ˆç»“ permanent å’Œ redirect å…³é”®å­—çš„åŒºåˆ« permanent æ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¯·æ±‚æ—¥å¿—ä¸­çš„çŠ¶æ€ç ä¸º 301 redirect ä¸´æ—¶é‡å®šå‘ï¼Œè¯·æ±‚æ—¥å¿—ä¸­çš„çŠ¶æ€ç ä¸º 302 åˆ¤æ–­è¡¨è¾¾å¼ -f å’Œ !-f ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶ -d å’Œ !-d ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›®å½• -e å’Œ !-e ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–ç›®å½• -x å’Œ !-x ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ æ ¹æ®æ–‡ä»¶ç±»å‹è®¾ç½®è¿‡æœŸæ—¶é—´ 123456location ~* \\.(js|css|jpg|jpeg|gif|png|swf)$ &#123; if (-f $request_filename) &#123; expires 1h; break; &#125;&#125; ç¦æ­¢è®¿é—®æŸäº›æ–‡ä»¶ç±»å‹ 1234location ~* \\.(txt|doc)$&#123; root /data/www/wwwroot/linuxtone/test; deny all;&#125; å…¨å±€å˜é‡ $args $content_length $content_type $document_root $document_uri $host $query $http_origin $http_user_agent $http_cookie $limit_rate $request_body_file $request_method $request_uri $request_filename $remote_addr $remote_port $remote_user å¸¸ç”¨çš„å…¨å±€å˜é‡ 12345678# ä¾‹ï¼šhttp://localhost:88/test1/test2/test.php$hostï¼šlocalhost$server_portï¼š88$request_uriï¼šhttp://localhost:88/test1/test2/test.php$document_uriï¼š/test1/test2/test.php$document_rootï¼šD: ginx/html$request_filenameï¼šD: ginx/html/test1/test2/test.php è´Ÿè½½å‡è¡¡è´Ÿè½½å‡è¡¡çš„ 5 ç§ç­–ç•¥ è´Ÿè½½å‡è¡¡çš„5ç§ç­–ç•¥nginx çš„ upstream ç›®å‰æ”¯æŒçš„ 5 ç§æ–¹å¼çš„åˆ†é… æ™®é€šè½®è¯¢æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨ down æ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚ 1234upstream backserver &#123; server 192.168.0.14; server 192.168.0.15;&#125; åŠ æƒè½®è¯¢æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweight å’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ 12345upstream backserver &#123; server 192.168.0.14 weight=10; server 192.168.0.15 weight=10;&#125; IP HASHIP ç»‘å®š ip_hash, æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® ip çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³ session çš„é—®é¢˜ã€‚ 12345upstream backserver &#123; server 192.168.0.14:88; server 192.168.0.15:80; ip_hash;&#125; å…¬å¹³è½®è¯¢å…¬å¹³è½®è¯¢(fair)æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚ 12345upstream backserver &#123; server 192.168.0.14:88; server 192.168.0.15:80; fair;&#125; URL HASHæŒ‰è®¿é—® url çš„ hash ç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ª url å®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚ 123456upstream backserver &#123; server squid1:3128; server squid2:3128; hash $request_uri; hash_method crc32;&#125; è´Ÿè´£å‡è¡¡ç¤ºä¾‹123456789101112131415161718192021222324252627# åœ¨éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„serverä¸­å¢åŠ events &#123; # todo&#125;http &#123; upstream backserver&#123; ip_hash; server 127.0.0.1:9090 down; # (down è¡¨ç¤ºå½“å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½) server 127.0.0.1:8080 weight=2; # (weight é»˜è®¤ä¸º1.weightè¶Šå¤§ï¼Œè´Ÿè½½çš„æƒé‡å°±è¶Šå¤§) server 127.0.0.1:6060; server 127.0.0.1:7070 backup; # (å…¶å®ƒæ‰€æœ‰çš„ébackupæœºå™¨downæˆ–è€…å¿™çš„æ—¶å€™ï¼Œè¯·æ±‚backupæœºå™¨) &#125; server &#123; listen 88; server_name localhost; proxy_pass http://backserver/; location / &#123; root html; autoindex on; &#125; &#125;&#125; åå‘ä»£ç†åœ¨ nginx ä¸­é…ç½® proxy_pass ä»£ç†è½¬å‘æ—¶ï¼š proxyPassValue æ˜¯è·¯å¾„$document_uri - locationValue è¿½åŠ åˆ°è·¯å¾„åé¢ï¼Œå¾—åˆ°æœ€ç»ˆè½¬å‘çš„ç›®æ ‡è·¯å¾„ proxyPassValue æ˜¯åŸŸå$document_uri è¿½åŠ åˆ°åŸŸååé¢ï¼Œå¾—åˆ°æœ€ç»ˆè½¬å‘çš„ç›®æ ‡è·¯å¾„ å‡è®¾ä¸‹é¢å››ç§æƒ…å†µåˆ†åˆ«ç”¨ http://192.168.1.1/proxy/test.html è¿›è¡Œè®¿é—®ã€‚ è½¬å‘åˆ°åŸŸåç¬¬1ç§ï¼ˆç›¸å¯¹äºç¬¬2ç§ï¼Œæœ€åå°‘ä¸€ä¸ª &#x2F; ï¼‰ 123location /proxy/ &#123; proxy_pass http://127.0.0.1; # è½¬å‘ç›®æ ‡æ˜¯åŸŸå&#125; ä»£ç†åˆ° URLï¼šhttp://127.0.0.1/proxy/test.html è½¬å‘åˆ°è·¯å¾„ç¬¬2ç§ï¼š 123location /proxy/ &#123; proxy_pass http://127.0.0.1/; # è½¬å‘ç›®æ ‡æ˜¯è·¯å¾„&#125; ä»£ç†åˆ° URLï¼šhttp://127.0.0.1/test.html ç¬¬3ç§ï¼š 123location /proxy/ &#123; proxy_pass http://127.0.0.1/aaa/; # è½¬å‘ç›®æ ‡æ˜¯è·¯å¾„&#125; ä»£ç†åˆ° URLï¼šhttp://127.0.0.1/aaa/test.html ç¬¬4ç§ï¼ˆç›¸å¯¹äºç¬¬ä¸‰ç§ï¼Œæœ€åå°‘ä¸€ä¸ª &#x2F; ï¼‰ 123location /proxy/ &#123; proxy_pass http://127.0.0.1/aaa; # è½¬å‘ç›®æ ‡æ˜¯è·¯å¾„&#125; ä»£ç†åˆ° URLï¼šhttp://127.0.0.1/aaatest.html","tags":["Nginx"],"categories":["Nginx"]},{"title":"Gridå¸ƒå±€è¯¦è§£","path":"/2024/03/07/Gridå¸ƒå±€è¯¦è§£/","content":"åŸæ–‡åœ°å€æœ€å¼ºå¤§çš„ CSS å¸ƒå±€ â€”â€” Grid å¸ƒå±€ - æ˜é‡‘ Grid å¸ƒå±€æ˜¯ä»€ä¹ˆï¼ŸGrid å¸ƒå±€å³ç½‘æ ¼å¸ƒå±€ï¼Œæ˜¯ä¸€ç§æ–°çš„ CSS å¸ƒå±€æ¨¡å‹ï¼Œæ¯”è¾ƒæ“…é•¿å°†ä¸€ä¸ªé¡µé¢åˆ’åˆ†ä¸ºå‡ ä¸ªä¸»è¦åŒºåŸŸï¼Œä»¥åŠå®šä¹‰è¿™äº›åŒºåŸŸçš„å¤§å°ã€ä½ç½®ã€å±‚æ¬¡ç­‰å…³ç³»ã€‚å·ç§°æ˜¯æœ€å¼ºå¤§çš„çš„ CSS å¸ƒå±€æ–¹æ¡ˆï¼Œæ˜¯ç›®å‰å”¯ä¸€ä¸€ç§ CSS äºŒç»´å¸ƒå±€ã€‚åˆ©ç”¨ Grid å¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°ç±»ä¼¼ä¸‹å›¾å¸ƒå±€ï¼Œæ¼”ç¤ºåœ°å€ Grid å¸ƒå±€å’Œ flex å¸ƒå±€è®²åˆ°å¸ƒå±€ï¼Œæˆ‘ä»¬å°±ä¼šæƒ³åˆ° flex å¸ƒå±€ï¼Œç”šè‡³æœ‰äººè®¤ä¸ºç«Ÿç„¶æœ‰ flex å¸ƒå±€äº†ï¼Œä¼¼ä¹æ²¡æœ‰å¿…è¦å»äº†è§£ Grid å¸ƒå±€ã€‚ä½† flex å¸ƒå±€å’Œ Grid å¸ƒå±€æœ‰å®è´¨çš„åŒºåˆ«ï¼Œé‚£å°±æ˜¯ flex å¸ƒå±€æ˜¯ä¸€ç»´å¸ƒå±€ï¼ŒGrid å¸ƒå±€æ˜¯äºŒç»´å¸ƒå±€ã€‚flex å¸ƒå±€ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªç»´åº¦ä¸Šçš„å…ƒç´ å¸ƒå±€ï¼Œä¸€è¡Œæˆ–è€…ä¸€åˆ—ã€‚Grid å¸ƒå±€æ˜¯å°†å®¹å™¨åˆ’åˆ†æˆäº†â€œè¡Œâ€å’Œâ€œåˆ—â€ï¼Œäº§ç”Ÿäº†ä¸€ä¸ªä¸ªçš„ç½‘æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç½‘æ ¼å…ƒç´ æ”¾åœ¨ä¸è¿™äº›è¡Œå’Œåˆ—ç›¸å…³çš„ä½ç½®ä¸Šï¼Œä»è€Œè¾¾åˆ°æˆ‘ä»¬å¸ƒå±€çš„ç›®çš„ã€‚ Grid å¸ƒå±€è¿œæ¯” flex å¸ƒå±€å¼ºå¤§ï¼ flex å¸ƒå±€ç¤ºä¾‹: Grid å¸ƒå±€ç¤ºä¾‹ï¼š Grid çš„ä¸€äº›åŸºç¡€æ¦‚å¿µæˆ‘ä»¬ä½¿ç”¨ Grid å®ç°ä¸€ä¸ªå°ä¾‹å­ï¼Œæ¼”ç¤º Grid çš„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œæ¼”ç¤ºåœ°å€ 12345678&lt;div class=&quot;wrapper&quot;&gt; &lt;div class=&quot;one item&quot;&gt;One&lt;/div&gt; &lt;div class=&quot;two item&quot;&gt;Two&lt;/div&gt; &lt;div class=&quot;three item&quot;&gt;Three&lt;/div&gt; &lt;div class=&quot;four item&quot;&gt;Four&lt;/div&gt; &lt;div class=&quot;five item&quot;&gt;Five&lt;/div&gt; &lt;div class=&quot;six item&quot;&gt;Six&lt;/div&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334.wrapper &#123; margin: 60px; /* å£°æ˜ä¸€ä¸ªå®¹å™¨ */ display: grid; /* å£°æ˜åˆ—çš„å®½åº¦ */ grid-template-columns: repeat(3, 200px); /* å£°æ˜è¡Œé—´è·å’Œåˆ—é—´è· */ grid-gap: 20px; /* å£°æ˜è¡Œçš„é«˜åº¦ */ grid-template-rows: 100px 200px;&#125;.one &#123; background: #19caad;&#125;.two &#123; background: #8cc7b5;&#125;.three &#123; background: #d1ba74;&#125;.four &#123; background: #bee7e9;&#125;.five &#123; background: #e6ceac;&#125;.six &#123; background: #ecad9e;&#125;.item &#123; text-align: center; font-size: 200%; color: #fff;&#125; å®¹å™¨å’Œé¡¹ç›®ï¼šæˆ‘ä»¬é€šè¿‡åœ¨å…ƒç´ ä¸Šå£°æ˜ displayï¼šgrid æˆ– displayï¼šinline-grid æ¥åˆ›å»ºä¸€ä¸ªç½‘æ ¼å®¹å™¨ã€‚ä¸€æ—¦æˆ‘ä»¬è¿™æ ·åšï¼Œè¿™ä¸ªå…ƒç´ çš„æ‰€æœ‰ç›´ç³»å­å…ƒç´ å°†æˆä¸ºç½‘æ ¼é¡¹ç›®ã€‚æ¯”å¦‚ä¸Šé¢ .wrapper æ‰€åœ¨çš„å…ƒç´ ä¸ºä¸€ä¸ªç½‘æ ¼å®¹å™¨ï¼Œå…¶ç›´ç³»å­å…ƒç´ å°†æˆä¸ºç½‘æ ¼é¡¹ç›®ã€‚ ç½‘æ ¼è½¨é“ï¼šgrid-template-columns å’Œ grid-template-rows å±æ€§æ¥å®šä¹‰ç½‘æ ¼ä¸­çš„è¡Œå’Œåˆ—ã€‚å®¹å™¨å†…éƒ¨çš„æ°´å¹³åŒºåŸŸç§°ä¸ºè¡Œï¼Œå‚ç›´åŒºåŸŸç§°ä¸ºåˆ—ã€‚ä¸Šå›¾ä¸­ Oneã€Twoã€Three ç»„æˆäº†ä¸€è¡Œï¼ŒOneã€Four åˆ™æ˜¯ä¸€åˆ— ç½‘æ ¼å•å…ƒï¼šä¸€ä¸ªç½‘æ ¼å•å…ƒæ˜¯åœ¨ä¸€ä¸ªç½‘æ ¼å…ƒç´ ä¸­æœ€å°çš„å•ä½ï¼Œ ä»æ¦‚å¿µä¸Šæ¥è®²å…¶å®å®ƒå’Œè¡¨æ ¼çš„ä¸€ä¸ªå•å…ƒæ ¼å¾ˆåƒã€‚ä¸Šå›¾ä¸­ Oneã€Twoã€Threeã€Fourâ€¦éƒ½æ˜¯ä¸€ä¸ªä¸ªçš„ç½‘æ ¼å•å…ƒ ç½‘æ ¼çº¿ï¼šåˆ’åˆ†ç½‘æ ¼çš„çº¿ï¼Œç§°ä¸ºâ€ç½‘æ ¼çº¿â€ã€‚åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å®šä¹‰ç½‘æ ¼æ—¶ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ˜¯ç½‘æ ¼è½¨é“ï¼Œè€Œä¸æ˜¯ç½‘æ ¼çº¿ã€‚Grid ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºç¼–å·çš„ç½‘æ ¼çº¿æ¥è®©æˆ‘ä»¬æ¥å®šä½æ¯ä¸€ä¸ªç½‘æ ¼å…ƒç´ ã€‚m åˆ—æœ‰ m + 1 æ ¹å‚ç›´çš„ç½‘æ ¼çº¿ï¼Œn è¡Œæœ‰ n + 1 è·Ÿæ°´å¹³ç½‘æ ¼çº¿ã€‚æ¯”å¦‚ä¸Šå›¾ç¤ºä¾‹ä¸­å°±æœ‰ 4 æ ¹å‚ç›´ç½‘æ ¼çº¿ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ˜¯ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œ1ï¼Œ2ï¼Œ3 è¿›è¡Œç¼–å·æ’åºã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Šï¼ŒæŒ‰ç…§ -1ï¼Œ-2ï¼Œ-3â€¦é¡ºåºè¿›è¡Œç¼–å·æ’åº å®¹å™¨å±æ€§ä»‹ç»Grid å¸ƒå±€ç›¸å…³çš„å±æ€§ä»¥åŠå€¼ä¼—å¤šï¼Œéœ€è¦è®°å¿†çš„ä¸å°‘ï¼Œå»ºè®®å¯ä»¥è·Ÿ demo ä¸€èµ·ç»“åˆèµ·æ¥ï¼Œè¾¹æ•²ä»£ç è¾¹ç†è§£ï¼Œå†åˆ©ç”¨ä¸€äº›ç©ºé—²æ—¶é—´è®°å¿†ä¸€ä¸‹ã€‚ç¬”è€…ä¼šåœ¨ä»‹ç»æ¯ä¸ªå±æ€§çš„æ—¶å€™ï¼Œåšä¸ªå° demo æ¼”ç¤ºï¼Œå»ºè®®å¤§å®¶å¯ä»¥è‡ªå·±ä¿®æ”¹çœ‹çœ‹æ•ˆæœåŠ æ·±è®°å¿† Grid å¸ƒå±€å±æ€§å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ç±»æ˜¯å®¹å™¨å±æ€§ï¼Œä¸€ç±»æ˜¯é¡¹ç›®å±æ€§ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹å®¹å™¨å±æ€§ display å±æ€§display å±æ€§æ¼”ç¤º æˆ‘ä»¬é€šè¿‡åœ¨å…ƒç´ ä¸Šå£°æ˜ displayï¼šgrid æˆ– displayï¼šinline-grid æ¥åˆ›å»ºä¸€ä¸ªç½‘æ ¼å®¹å™¨ã€‚å£°æ˜ displayï¼šgrid åˆ™è¯¥å®¹å™¨æ˜¯ä¸€ä¸ªå—çº§å…ƒç´ ï¼Œè®¾ç½®æˆ display: inline-grid åˆ™å®¹å™¨å…ƒç´ ä¸ºè¡Œå†…å…ƒç´  123.wrapper &#123; display: grid;&#125; 123.wrapper-1 &#123; display: inline-grid;&#125; grid-template-columns å±æ€§å’Œ grid-template-rows å±æ€§grid-template-columns å’Œ grid-template-rows å±æ€§æ¼”ç¤ºåœ°å€ grid-template-columns å±æ€§è®¾ç½®åˆ—å®½ï¼Œgrid-template-rows å±æ€§è®¾ç½®è¡Œé«˜ï¼Œè¿™ä¸¤ä¸ªå±æ€§åœ¨ Grid å¸ƒå±€ä¸­å°¤ä¸ºé‡è¦ï¼Œå®ƒä»¬çš„å€¼æ˜¯æœ‰å¤šç§å¤šæ ·çš„ï¼Œè€Œä¸”å®ƒä»¬çš„è®¾ç½®æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œä¸‹é¢é’ˆå¯¹ grid-template-columns å±æ€§è¿›è¡Œè®²è§£ å›ºå®šçš„åˆ—å®½å’Œè¡Œé«˜ 12345678.wrapper &#123; display: grid; /* å£°æ˜äº†ä¸‰åˆ—ï¼Œå®½åº¦åˆ†åˆ«ä¸º 200px 100px 200px */ grid-template-columns: 200px 100px 200px; grid-gap: 5px; /* å£°æ˜äº†ä¸¤è¡Œï¼Œè¡Œé«˜åˆ†åˆ«ä¸º 50px 50px */ grid-template-rows: 50px 50px;&#125; ä»¥ä¸Šè¡¨ç¤ºå›ºå®šåˆ—å®½ä¸º 200px 100px 200pxï¼Œè¡Œé«˜ä¸º 50px 50px repeat() å‡½æ•°ï¼šå¯ä»¥ç®€åŒ–é‡å¤çš„å€¼ã€‚è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é‡å¤çš„æ¬¡æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€è¦é‡å¤çš„å€¼ã€‚æ¯”å¦‚ä¸Šé¢è¡Œé«˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå»å®ç°ï¼Œå®é™…æ•ˆæœæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ 1234567.wrapper-1 &#123; display: grid; grid-template-columns: 200px 100px 200px; grid-gap: 5px; /* 2è¡Œï¼Œè€Œä¸”è¡Œé«˜éƒ½ä¸º 50px */ grid-template-rows: repeat(2, 50px);&#125; auto-fill å…³é”®å­—ï¼šè¡¨ç¤ºè‡ªåŠ¨å¡«å……ï¼Œè®©ä¸€è¡Œï¼ˆæˆ–è€…ä¸€åˆ—ï¼‰ä¸­å°½å¯èƒ½çš„å®¹çº³æ›´å¤šçš„å•å…ƒæ ¼ã€‚grid-template-columns: repeat(auto-fill, 200px) è¡¨ç¤ºåˆ—å®½æ˜¯ 200 pxï¼Œä½†åˆ—çš„æ•°é‡æ˜¯ä¸å›ºå®šçš„ï¼Œåªè¦æµè§ˆå™¨èƒ½å¤Ÿå®¹çº³å¾—ä¸‹ï¼Œå°±å¯ä»¥æ”¾ç½®å…ƒç´ ï¼Œä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456.wrapper-2 &#123; display: grid; grid-template-columns: repeat(auto-fill, 200px); grid-gap: 5px; grid-auto-rows: 50px;&#125; fr å…³é”®å­—ï¼šGrid å¸ƒå±€è¿˜å¼•å…¥äº†ä¸€ä¸ªå¦å¤–çš„é•¿åº¦å•ä½æ¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçµæ´»çš„ç½‘æ ¼è½¨é“ã€‚fr å•ä½ä»£è¡¨ç½‘æ ¼å®¹å™¨ä¸­å¯ç”¨ç©ºé—´çš„ä¸€ç­‰ä»½ã€‚grid-template-columns: 200px 1fr 2fr è¡¨ç¤ºç¬¬ä¸€ä¸ªåˆ—å®½è®¾ç½®ä¸º 200pxï¼Œåé¢å‰©ä½™çš„å®½åº¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå®½åº¦åˆ†åˆ«ä¸ºå‰©ä½™å®½åº¦çš„ 1&#x2F;3 å’Œ 2&#x2F;3ã€‚ä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456.wrapper-3 &#123; display: grid; grid-template-columns: 200px 1fr 2fr; grid-gap: 5px; grid-auto-rows: 50px;&#125; minmax() å‡½æ•°ï¼šæˆ‘ä»¬æœ‰æ—¶å€™æƒ³ç»™ç½‘æ ¼å…ƒç´ ä¸€ä¸ªæœ€å°å’Œæœ€å¤§çš„å°ºå¯¸ï¼Œminmax() å‡½æ•°äº§ç”Ÿä¸€ä¸ªé•¿åº¦èŒƒå›´ï¼Œè¡¨ç¤ºé•¿åº¦å°±åœ¨è¿™ä¸ªèŒƒå›´ä¹‹ä¸­éƒ½å¯ä»¥åº”ç”¨åˆ°ç½‘æ ¼é¡¹ç›®ä¸­ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºæœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚grid-template-columns: 1fr 1fr minmax(300px, 2fr) çš„æ„æ€æ˜¯ï¼Œç¬¬ä¸‰ä¸ªåˆ—å®½æœ€å°‘ä¹Ÿæ˜¯è¦ 300pxï¼Œä½†æ˜¯æœ€å¤§ä¸èƒ½å¤§äºç¬¬ä¸€ç¬¬äºŒåˆ—å®½çš„ä¸¤å€ã€‚ä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹ï¼š 123456.wrapper-4 &#123; display: grid; grid-template-columns: 1fr 1fr minmax(300px, 2fr); grid-gap: 5px; grid-auto-rows: 50px;&#125; auto å…³é”®å­—ï¼šç”±æµè§ˆå™¨å†³å®šé•¿åº¦ã€‚é€šè¿‡ auto å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“å®ç°ä¸‰åˆ—æˆ–è€…ä¸¤åˆ—å¸ƒå±€ã€‚grid-template-columns: 100px auto 100px è¡¨ç¤ºç¬¬ä¸€ç¬¬ä¸‰åˆ—ä¸º 100pxï¼Œä¸­é—´ç”±æµè§ˆå™¨å†³å®šé•¿åº¦ï¼Œä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹ï¼š 123456.wrapper-5 &#123; display: grid; grid-template-columns: 100px auto 100px; grid-gap: 5px; grid-auto-rows: 50px;&#125; grid-row-gap å±æ€§ã€grid-column-gap å±æ€§ä»¥åŠ grid-gap å±æ€§grid-row-gap å±æ€§ã€grid-column-gap å±æ€§ä»¥åŠ grid-gap å±æ€§æ¼”ç¤ºåœ°å€ grid-row-gap å±æ€§ã€grid-column-gap å±æ€§åˆ†åˆ«è®¾ç½®è¡Œé—´è·å’Œåˆ—é—´è·ã€‚ grid-gap å±æ€§æ˜¯ä¸¤è€…çš„ç®€å†™å½¢å¼ã€‚ grid-row-gap: 10px è¡¨ç¤ºè¡Œé—´è·æ˜¯ 10pxï¼Œgrid-column-gap: 20px è¡¨ç¤ºåˆ—é—´è·æ˜¯ 20pxã€‚grid-gap: 10px 20px å®ç°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ 123456.wrapper &#123; display: grid; grid-template-columns: 200px 100px 100px; grid-gap: 10px 20px; grid-auto-rows: 50px;&#125; 1234567.wrapper-1 &#123; display: grid; grid-template-columns: 200px 100px 100px; grid-auto-rows: 50px; grid-row-gap: 10px; grid-column-gap: 20px;&#125; ä»¥ä¸Šä¸¤ç§å†™æ³•æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ grid-template-areas å±æ€§grid-area ä»¥åŠ grid-template-areas æ¼”ç¤ºåœ°å€ grid-template-areas å±æ€§ç”¨äºå®šä¹‰åŒºåŸŸï¼Œä¸€ä¸ªåŒºåŸŸç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªå•å…ƒæ ¼ç»„æˆ ä¸€èˆ¬è¿™ä¸ªå±æ€§è·Ÿç½‘æ ¼å…ƒç´ çš„ grid-area ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸€èµ·ä»‹ç»ã€‚ grid-area å±æ€§æŒ‡å®šé¡¹ç›®æ”¾åœ¨å“ªä¸€ä¸ªåŒºåŸŸ 12345678910.wrapper &#123; display: grid; grid-gap: 10px; grid-template-columns: 120px 120px 120px; grid-template-areas: &quot;. header header&quot; &quot;sidebar content content&quot;; background-color: #fff; color: #444;&#125; ä¸Šé¢ä»£ç è¡¨ç¤ºåˆ’åˆ†å‡º 6 ä¸ªå•å…ƒæ ¼ï¼Œå…¶ä¸­å€¼å¾—æ³¨æ„çš„æ˜¯ . ç¬¦å·ä»£è¡¨ç©ºçš„å•å…ƒæ ¼ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ç”¨åˆ°è¯¥å•å…ƒæ ¼ã€‚ 1234567891011.sidebar &#123; grid-area: sidebar;&#125;.content &#123; grid-area: content;&#125;.header &#123; grid-area: header;&#125; ä»¥ä¸Šä»£ç è¡¨ç¤ºå°†ç±» .sidebar .content .headeræ‰€åœ¨çš„å…ƒç´ æ”¾åœ¨ä¸Šé¢ grid-template-areas ä¸­å®šä¹‰çš„ sidebar content header åŒºåŸŸä¸­ grid-auto-flow å±æ€§grid-auto-flow å±æ€§æ¼”ç¤ºåœ°å€ grid-auto-flow å±æ€§æ§åˆ¶ç€è‡ªåŠ¨å¸ƒå±€ç®—æ³•æ€æ ·è¿ä½œï¼Œç²¾ç¡®æŒ‡å®šåœ¨ç½‘æ ¼ä¸­è¢«è‡ªåŠ¨å¸ƒå±€çš„å…ƒç´ æ€æ ·æ’åˆ—ã€‚é»˜è®¤çš„æ”¾ç½®é¡ºåºæ˜¯â€å…ˆè¡Œååˆ—â€ï¼Œå³å…ˆå¡«æ»¡ç¬¬ä¸€è¡Œï¼Œå†å¼€å§‹æ”¾å…¥ç¬¬äºŒè¡Œï¼Œå³ä¸‹å›¾è‹±æ–‡æ•°å­—çš„é¡ºåº one,two,threeâ€¦ã€‚è¿™ä¸ªé¡ºåºç”± grid-auto-flow å±æ€§å†³å®šï¼Œé»˜è®¤å€¼æ˜¯ rowã€‚ 1234567.wrapper &#123; display: grid; grid-template-columns: 100px 200px 100px; grid-auto-flow: row; grid-gap: 5px; grid-auto-rows: 50px;&#125; ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ç¬¬äº”ä¸ªé¡¹ç›®å’Œç¬¬å…­ä¸ªé¡¹ç›®ä¹‹é—´æœ‰ä¸ªç©ºç™½ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œè¿™ä¸ªæ˜¯ç”±äºç¬¬å…­å—çš„é•¿åº¦å¤§äºäº†ç©ºç™½å¤„çš„é•¿åº¦ï¼Œè¢«æŒ¤åˆ°äº†ä¸‹ä¸€è¡Œå¯¼è‡´çš„ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è®©ä¸‹é¢é•¿åº¦åˆé€‚çš„å¡«æ»¡è¿™ä¸ªç©ºç™½ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è®¾ç½® grid-auto-flow: row denseï¼Œè¡¨ç¤ºå°½å¯èƒ½å¡«æ»¡è¡¨æ ¼ã€‚ä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567.wrapper-2 &#123; display: grid; grid-template-columns: 100px 200px 100px; grid-auto-flow: row dense; grid-gap: 5px; grid-auto-rows: 50px;&#125; å¯ä»¥è®¾ç½® grid-auto-flow: columnï¼Œè¡¨ç¤ºå…ˆåˆ—åè¡Œï¼Œä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1234567.wrapper-1 &#123; display: grid; grid-auto-columns: 100px; grid-auto-flow: column; grid-gap: 5px; grid-template-rows: 50px 50px;&#125; justify-items å±æ€§ã€align-items å±æ€§ä»¥åŠ place-items å±æ€§justify-items å±æ€§ã€align-items å±æ€§æ¼”ç¤ºåœ°å€ justify-items å±æ€§è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰ï¼Œalign-items å±æ€§è®¾ç½®å•å…ƒæ ¼çš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰ ä¸‹é¢ä»¥ justify-items å±æ€§ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œalign-items å±æ€§åŒç†ï¼Œåªæ˜¯æ–¹å‘ä¸ºå‚ç›´æ–¹å‘ã€‚å®ƒä»¬éƒ½æœ‰å¦‚ä¸‹å±æ€§ï¼š 1234.container &#123; justify-items: start | end | center | stretch; align-items: start | end | center | stretch;&#125; å…¶ä»£ç å®ç°ä»¥åŠæ•ˆæœå¦‚ä¸‹ï¼š 12345678910111213141516171819.wrapper,.wrapper-1,.wrapper-2,.wrapper-3 &#123; display: grid; grid-template-columns: 100px 200px 100px; grid-gap: 5px; grid-auto-rows: 50px; justify-items: start;&#125;.wrapper-1 &#123; justify-items: end;&#125;.wrapper-2 &#123; justify-items: center;&#125;.wrapper-3 &#123; justify-items: stretch;&#125; startï¼šå¯¹é½å•å…ƒæ ¼çš„èµ·å§‹è¾¹ç¼˜ endï¼šå¯¹é½å•å…ƒæ ¼çš„ç»“æŸè¾¹ç¼˜ centerï¼šå•å…ƒæ ¼å†…éƒ¨å±…ä¸­ stretchï¼šæ‹‰ä¼¸ï¼Œå æ»¡å•å…ƒæ ¼çš„æ•´ä¸ªå®½åº¦ï¼ˆé»˜è®¤å€¼ï¼‰ justify-content å±æ€§ã€align-content å±æ€§ä»¥åŠ place-content å±æ€§justify-content å±æ€§ã€align-content å±æ€§æ¼”ç¤ºåœ°å€ justify-content å±æ€§æ˜¯æ•´ä¸ªå†…å®¹åŒºåŸŸåœ¨å®¹å™¨é‡Œé¢çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰ï¼Œalign-content å±æ€§æ˜¯æ•´ä¸ªå†…å®¹åŒºåŸŸçš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰ã€‚å®ƒä»¬éƒ½æœ‰å¦‚ä¸‹çš„å±æ€§å€¼ã€‚ 123456.container &#123; justify-content: start | end | center | stretch | space-around | space-between | space-evenly; align-content: start | end | center | stretch | space-around | space-between | space-evenly;&#125; ä¸‹é¢ä»¥ justify-content å±æ€§ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œalign-content å±æ€§åŒç†ï¼Œåªæ˜¯æ–¹å‘ä¸ºå‚ç›´æ–¹å‘ start - å¯¹é½å®¹å™¨çš„èµ·å§‹è¾¹æ¡† end - å¯¹é½å®¹å™¨çš„ç»“æŸè¾¹æ¡† center - å®¹å™¨å†…éƒ¨å±…ä¸­ 12345678910111213141516171819.wrapper,.wrapper-1,.wrapper-2,.wrapper-3,.wrapper-4,.wrapper-5,.wrapper-6 &#123; display: grid; grid-template-columns: 100px 200px 100px; grid-gap: 5px; grid-auto-rows: 50px; justify-content: start;&#125;.wrapper-1 &#123; justify-content: end;&#125;.wrapper-2 &#123; justify-content: center;&#125; space-around - æ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸å®¹å™¨è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ space-between - é¡¹ç›®ä¸é¡¹ç›®çš„é—´éš”ç›¸ç­‰ï¼Œé¡¹ç›®ä¸å®¹å™¨è¾¹æ¡†ä¹‹é—´æ²¡æœ‰é—´éš” space-evenly - é¡¹ç›®ä¸é¡¹ç›®çš„é—´éš”ç›¸ç­‰ï¼Œé¡¹ç›®ä¸å®¹å™¨è¾¹æ¡†ä¹‹é—´ä¹Ÿæ˜¯åŒæ ·é•¿åº¦çš„é—´éš” stretch - é¡¹ç›®å¤§å°æ²¡æœ‰æŒ‡å®šæ—¶ï¼Œæ‹‰ä¼¸å æ®æ•´ä¸ªç½‘æ ¼å®¹å™¨ 123456789101112.wrapper-3 &#123; justify-content: space-around;&#125;.wrapper-4 &#123; justify-content: space-between;&#125;.wrapper-5 &#123; justify-content: space-evenly;&#125;.wrapper-6 &#123; justify-content: stretch;&#125; grid-auto-columns å±æ€§å’Œ grid-auto-rows å±æ€§grid-auto-columns å±æ€§å’Œ grid-auto-rows å±æ€§æ¼”ç¤ºåœ°å€ åœ¨è®² grid-auto-columns å±æ€§å’Œ grid-auto-rows å±æ€§ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹éšå¼å’Œæ˜¾ç¤ºç½‘æ ¼çš„æ¦‚å¿µ éšå¼å’Œæ˜¾ç¤ºç½‘æ ¼ï¼šæ˜¾å¼ç½‘æ ¼åŒ…å«äº†ä½ åœ¨ grid-template-columns å’Œ grid-template-rows å±æ€§ä¸­å®šä¹‰çš„è¡Œå’Œåˆ—ã€‚å¦‚æœä½ åœ¨ç½‘æ ¼å®šä¹‰ä¹‹å¤–åˆæ”¾äº†ä¸€äº›ä¸œè¥¿ï¼Œæˆ–è€…å› ä¸ºå†…å®¹çš„æ•°é‡è€Œéœ€è¦çš„æ›´å¤šç½‘æ ¼è½¨é“çš„æ—¶å€™ï¼Œç½‘æ ¼å°†ä¼šåœ¨éšå¼ç½‘æ ¼ä¸­åˆ›å»ºè¡Œå’Œåˆ— å‡å¦‚æœ‰å¤šä½™çš„ç½‘æ ¼ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„éšå¼ç½‘æ ¼ï¼‰ï¼Œé‚£ä¹ˆå®ƒçš„è¡Œé«˜å’Œåˆ—å®½å¯ä»¥æ ¹æ® grid-auto-columns å±æ€§å’Œ grid-auto-rows å±æ€§è®¾ç½®ã€‚å®ƒä»¬çš„å†™æ³•å’Œ grid-template-columns å’Œ grid-template-rows å®Œå…¨ç›¸åŒã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸¤ä¸ªå±æ€§ï¼Œæµè§ˆå™¨å®Œå…¨æ ¹æ®å•å…ƒæ ¼å†…å®¹çš„å¤§å°ï¼Œå†³å®šæ–°å¢ç½‘æ ¼çš„åˆ—å®½å’Œè¡Œé«˜ 12345678.wrapper &#123; display: grid; grid-template-columns: 200px 100px; /* åªè®¾ç½®äº†ä¸¤è¡Œï¼Œä½†å®é™…çš„æ•°é‡ä¼šè¶…å‡ºä¸¤è¡Œï¼Œè¶…å‡ºçš„è¡Œé«˜ä¼šä»¥ grid-auto-rows ç®— */ grid-template-rows: 100px 100px; grid-gap: 10px 20px; grid-auto-rows: 50px;&#125; grid-template-columns å±æ€§å’Œ grid-template-rows å±æ€§åªæ˜¯æŒ‡å®šäº†ä¸¤è¡Œä¸¤åˆ—ï¼Œä½†å®é™…æœ‰ä¹ä¸ªå…ƒç´ ï¼Œå°±ä¼šäº§ç”Ÿéšå¼ç½‘æ ¼ã€‚é€šè¿‡ grid-auto-rows å¯ä»¥æŒ‡å®šéšå¼ç½‘æ ¼çš„è¡Œé«˜ä¸º 50px é¡¹ç›®å±æ€§ä»‹ç»grid-column-start å±æ€§ã€grid-column-end å±æ€§ã€grid-row-start å±æ€§ä»¥åŠ grid-row-end å±æ€§æ¼”ç¤ºåœ°å€ å¯ä»¥æŒ‡å®šç½‘æ ¼é¡¹ç›®æ‰€åœ¨çš„å››ä¸ªè¾¹æ¡†ï¼Œåˆ†åˆ«å®šä½åœ¨å“ªæ ¹ç½‘æ ¼çº¿ï¼Œä»è€ŒæŒ‡å®šé¡¹ç›®çš„ä½ç½® grid-column-start å±æ€§ï¼šå·¦è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿ grid-column-end å±æ€§ï¼šå³è¾¹æ¡†æ‰€åœ¨çš„å‚ç›´ç½‘æ ¼çº¿ grid-row-start å±æ€§ï¼šä¸Šè¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿ grid-row-end å±æ€§ï¼šä¸‹è¾¹æ¡†æ‰€åœ¨çš„æ°´å¹³ç½‘æ ¼çº¿ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546.wrapper &#123; display: grid; grid-template-columns: repeat(3, 1fr); grid-gap: 20px; grid-auto-rows: minmax(100px, auto);&#125;.one &#123; grid-column-start: 1; grid-column-end: 2; background: #19caad;&#125;.two &#123; grid-column-start: 2; grid-column-end: 4; grid-row-start: 1; grid-row-end: 2; /* å¦‚æœæœ‰é‡å ï¼Œå°±ä½¿ç”¨ z-index */ z-index: 1; background: #8cc7b5;&#125;.three &#123; grid-column-start: 3; grid-column-end: 4; grid-row-start: 1; grid-row-end: 4; background: #d1ba74;&#125;.four &#123; grid-column-start: 1; grid-column-end: 2; grid-row-start: 2; grid-row-end: 5; background: #bee7e9;&#125;.five &#123; grid-column-start: 2; grid-column-end: 2; grid-row-start: 2; grid-row-end: 5; background: #e6ceac;&#125;.six &#123; grid-column: 3; grid-row: 4; background: #ecad9e;&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œç±» .two æ‰€åœ¨çš„ç½‘æ ¼é¡¹ç›®ï¼Œå‚ç›´ç½‘æ ¼çº¿æ˜¯ä» 2 åˆ° 4ï¼Œæ°´å¹³ç½‘æ ¼çº¿æ˜¯ä» 1 åˆ° 2ã€‚å…¶ä¸­å®ƒè·Ÿ .three ï¼ˆå‚ç›´ç½‘æ ¼çº¿æ˜¯ä» 3 åˆ° 4ï¼Œæ°´å¹³ç½‘æ ¼çº¿æ˜¯ä» 1 åˆ° 4ï¼‰ æ˜¯æœ‰å†²çªçš„ã€‚å¯ä»¥è®¾ç½® z-index å»å†³å®šå®ƒä»¬çš„å±‚çº§å…³ç³» grid-area å±æ€§grid-area å±æ€§æŒ‡å®šé¡¹ç›®æ”¾åœ¨å“ªä¸€ä¸ªåŒºåŸŸï¼Œåœ¨ä¸Šé¢ä»‹ç» grid-template-areas çš„æ—¶å€™æœ‰æåˆ°è¿‡ï¼Œè¿™é‡Œä¸å†å…·ä½“å±•å¼€ï¼Œå…·ä½“çš„ä½¿ç”¨å¯ä»¥å‚è€ƒæ¼”ç¤ºåœ°å€ï¼š grid-area ä»¥åŠ grid-template-areas å±æ€§æ¼”ç¤ºåœ°å€ justify-self å±æ€§ã€align-self å±æ€§ä»¥åŠ place-self å±æ€§justify-self å±æ€§&#x2F; align-self å±æ€§&#x2F; place-self å±æ€§æ¼”ç¤ºåœ°å€ justify-self å±æ€§è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„æ°´å¹³ä½ç½®ï¼ˆå·¦ä¸­å³ï¼‰ï¼Œè·Ÿ justify-items å±æ€§çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ï¼Œä½†åªä½œç”¨äºå•ä¸ªé¡¹ç›® align-self å±æ€§è®¾ç½®å•å…ƒæ ¼å†…å®¹çš„å‚ç›´ä½ç½®ï¼ˆä¸Šä¸­ä¸‹ï¼‰ï¼Œè·Ÿ align-items å±æ€§çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ï¼Œä¹Ÿæ˜¯åªä½œç”¨äºå•ä¸ªé¡¹ç›® ä¸¤è€…å¾ˆç›¸åƒï¼Œè¿™é‡Œåªæ‹¿ justify-self å±æ€§æ¼”ç¤ºï¼Œalign-self å±æ€§åŒç†ï¼Œåªæ˜¯ä½œç”¨äºå‚ç›´æ–¹å‘ 1234.item &#123; justify-self: start | end | center | stretch; align-self: start | end | center | stretch;&#125; 123456789101112.item &#123; justify-self: start;&#125;.item-1 &#123; justify-self: end;&#125;.item-2 &#123; justify-self: center;&#125;.item-3 &#123; justify-self: stretch;&#125; startï¼šå¯¹é½å•å…ƒæ ¼çš„èµ·å§‹è¾¹ç¼˜ endï¼šå¯¹é½å•å…ƒæ ¼çš„ç»“æŸè¾¹ç¼˜ centerï¼šå•å…ƒæ ¼å†…éƒ¨å±…ä¸­ stretchï¼šæ‹‰ä¼¸ï¼Œå æ»¡å•å…ƒæ ¼çš„æ•´ä¸ªå®½åº¦ï¼ˆé»˜è®¤å€¼ï¼‰ Grid å®æˆ˜â€”â€”å®ç°å“åº”å¼å¸ƒå±€ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¯ä»¥çœ‹å‡ºï¼ŒGrid æ˜¯éå¸¸å¼ºå¤§çš„ã€‚ä¸€äº›å¸¸è§çš„ CSS å¸ƒå±€ï¼Œå¦‚å±…ä¸­ï¼Œä¸¤åˆ—å¸ƒå±€ï¼Œä¸‰åˆ—å¸ƒå±€ç­‰ç­‰æ˜¯å¾ˆå®¹æ˜“å®ç°çš„ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ Grid å¸ƒå±€æ˜¯å¦‚ä½•å®ç°å“åº”å¼å¸ƒå±€çš„ fr å®ç°ç­‰åˆ†å“åº”å¼fr å®ç°ç­‰åˆ†å“åº”å¼ fr ç­‰åˆ†å•ä½ï¼Œå¯ä»¥å°†å®¹å™¨çš„å¯ç”¨ç©ºé—´åˆ†æˆæƒ³è¦çš„å¤šä¸ªç­‰åˆ†ç©ºé—´ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè½»æ˜“å®ç°ä¸€ä¸ªç­‰åˆ†å“åº”å¼ã€‚grid-template-columns: 1fr 1fr 1fr è¡¨ç¤ºå®¹å™¨åˆ†ä¸ºä¸‰ç­‰åˆ† 1234567.wrapper &#123; margin: 50px; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-gap: 10px 20px; grid-auto-rows: 50px;&#125; repeat + auto-fitâ€”â€”å›ºå®šåˆ—å®½ï¼Œæ”¹å˜åˆ—æ•°é‡ç­‰åˆ†å¸ƒå±€å¹¶ä¸åªæœ‰ Grid å¸ƒå±€æ‰æœ‰ï¼Œåƒ flex å¸ƒå±€ä¹Ÿèƒ½è½»æ¾å®ç°ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ›´é«˜çº§çš„å“åº”å¼ ä¸Šé¢ä¾‹å­çš„å§‹ç»ˆéƒ½æ˜¯ä¸‰åˆ—çš„ï¼Œä½†æ˜¯éœ€æ±‚å¾€å¾€å¸Œæœ›æˆ‘ä»¬çš„ç½‘æ ¼èƒ½å¤Ÿå›ºå®šåˆ—å®½ï¼Œå¹¶æ ¹æ®å®¹å™¨çš„å®½åº¦æ¥æ”¹å˜åˆ—çš„æ•°é‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ°ä¸Šé¢æåˆ° repeat() å‡½æ•°ä»¥åŠ auto-fit å…³é”®å­—ã€‚grid-template-columns: repeat(auto-fit, 200px) è¡¨ç¤ºå›ºå®šåˆ—å®½ä¸º 200pxï¼Œæ•°é‡æ˜¯è‡ªé€‚åº”çš„ï¼Œåªè¦å®¹çº³å¾—ä¸‹ï¼Œå°±ä¼šå¾€ä¸Šæ’åˆ—ï¼Œä»£ç ä»¥åŠæ•ˆæœå®ç°å¦‚ä¸‹ï¼š æ¼”ç¤ºåœ°å€ 1234567.wrapper &#123; margin: 50px; display: grid; grid-template-columns: repeat(auto-fit, 200px); grid-gap: 10px 20px; grid-auto-rows: 50px;&#125; repeat+auto-fit+minmax å»æ‰å³ä¾§ç©ºç™½ä¸Šé¢çœ‹åˆ°çš„æ•ˆæœä¸­ï¼Œå³ä¾§é€šå¸¸ä¼šç•™ä¸‹ç©ºç™½ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚å¦‚æœåˆ—çš„å®½åº¦ä¹Ÿèƒ½åœ¨æŸä¸ªèŒƒå›´å†…è‡ªé€‚åº”å°±å¥½äº†ã€‚minmax() å‡½æ•°å°±å¸®åŠ©æˆ‘ä»¬åšåˆ°äº†è¿™ç‚¹ã€‚å°† grid-template-columns: repeat(auto-fit, 200px) æ”¹æˆ grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) è¡¨ç¤ºåˆ—å®½è‡³å°‘ 200pxï¼Œå¦‚æœè¿˜æœ‰ç©ºä½™åˆ™ä¸€èµ·ç­‰åˆ†ã€‚ä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š æ¼”ç¤ºåœ°å€ 1234567.wrapper &#123; margin: 50px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); grid-gap: 10px 20px; grid-auto-rows: 50px;&#125; repeat+auto-fit+minmax-span-dense è§£å†³ç©ºç¼ºé—®é¢˜ä¼¼ä¹ä¸€åˆ‡è¿›è¡Œå¾—å¾ˆé¡ºåˆ©ï¼Œä½†æ˜¯æŸå¤© UI æ¥è¯´ï¼Œæ¯ä¸ªç½‘æ ¼å…ƒç´ çš„é•¿åº¦å¯èƒ½ä¸ç›¸åŒï¼Œè¿™ä¹Ÿç®€å•ï¼Œé€šè¿‡ span å…³é”®å­—è¿›è¡Œè®¾ç½®ç½‘æ ¼é¡¹ç›®çš„è·¨åº¦ï¼Œgrid-column-start: span 3ï¼Œè¡¨ç¤ºè¿™ä¸ªç½‘æ ¼é¡¹ç›®è·¨åº¦ä¸º 3ã€‚å…·ä½“çš„ä»£ç ä¸æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š 123.item-3 &#123; grid-column-start: span 3;&#125; æ¼”ç¤ºåœ°å€ ä¸å¯¹ï¼Œæ€ä¹ˆå³ä¾§åˆæœ‰ç©ºç™½äº†ï¼ŸåŸæ¥æ˜¯æœ‰ä¸€äº›é•¿åº¦å¤ªé•¿äº†ï¼Œæ”¾ä¸ä¸‹ï¼Œè¿™ä¸ªæ—¶å€™å°±åˆ°æˆ‘ä»¬çš„ dense å…³é”®å­—å‡ºåœºäº†ã€‚grid-auto-flow: row dense è¡¨ç¤ºå°½å¯èƒ½å¡«å……ï¼Œè€Œä¸ç•™ç©ºç™½ï¼Œä»£ç ä»¥åŠæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112.wrapper,.wrapper-1 &#123; margin: 50px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); grid-gap: 10px 20px; grid-auto-rows: 50px;&#125;.wrapper-1 &#123; grid-auto-flow: row dense;&#125; Grid å¸ƒå±€å…¼å®¹æ€§æœ€åï¼ŒèŠèŠ Grid å¸ƒå±€å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨ caniuse ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„ç»“æœå¦‚ä¸‹ï¼Œæ€»ä½“å…¼å®¹æ€§è¿˜ä¸é”™ï¼Œä½†åœ¨ IE 10 ä»¥ä¸‹ä¸æ”¯æŒã€‚ä¸ªäººå»ºè®®åœ¨å…¬å¸çš„å†…éƒ¨ç³»ç»Ÿè¿ç”¨èµ·æ¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½† TOC çš„è¯ï¼Œå¯èƒ½ç›®å‰è¿˜æ˜¯ä¸å¤ªåˆé€‚ å‚è€ƒå¸¸è§çš„ Grid å¸ƒå±€ç”¨ä¾‹ CSS Grid ç½‘æ ¼å¸ƒå±€æ•™ç¨‹ Grid å¸ƒå±€è‰æ¡ˆ ä¸€è¡Œ CSS ä»£ç å®ç°å“åº”å¼å¸ƒå±€ â€“ ä½¿ç”¨ Grid å®ç°çš„å“åº”å¼å¸ƒå±€ MDN","tags":["CSS","Grid"],"categories":["CSS"]},{"title":"PNPMåˆçº§æ•™ç¨‹å’Œå®è·µ","path":"/2024/03/05/Pnpmåˆçº§æ•™ç¨‹å’Œå®è·µ/","content":"workspaceåˆå§‹åŒ– monorepo é¡¹ç›®ç»“æ„1234567891011121314151617181920# åˆ›å»ºroot projectmkdir mono-projectcd mono-projectpnpm init# åˆ›å»º workspace é…ç½®æ–‡ä»¶# pnpm-workspace.yamlpackages: - &quot;examples/*&quot; - &quot;shares/*&quot;mkdir -p examples/appmkdir -p shares/down-clicd examples/apppnpm initcd shares/down-clipnpm init é…ç½®å­é¡¹ç›®çš„package.jsonæ–‡ä»¶, app ä¾èµ– down-cli app&#x2F;package.json é…ç½®å¦‚ä¸‹ 12345678910&#123; &quot;name&quot;: &quot;app&quot;, &quot;scripts&quot;: &#123; &quot;down&quot;: &quot;down --help&quot;, &quot;hi&quot;: &quot;echo app hello&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;down-cli&quot;: &quot;workspace:*&quot; &#125;&#125; down-cli&#x2F;package.json é…ç½®å¦‚ä¸‹: 123456789&#123; &quot;name&quot;: &quot;down-cli&quot;, &quot;scripts&quot;: &#123; &quot;hi&quot;: &quot;echo down hello&quot; &#125;, &quot;bin&quot;: &#123; &quot;down&quot;: &quot;bin/index.js&quot; &#125;&#125; down-cli&#x2F;bin&#x2F;index.js 12#!/usr/bin/env nodeconsole.log(&quot;down command starting..&quot;); å®‰è£…ä¾èµ–åœ¨ root project ä¸‹é¢æ‰§è¡Œ pnpm i, pnpm ä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œå­é¡¹ç›®é—´çš„ç›¸äº’ä¾èµ–ä¼š link åˆ°å¯¹åº”é¡¹ç›®çš„ node_modules æ–‡ä»¶å¤¹ä¸‹. æ¯”å¦‚, ä»¥ä¸Šçš„é¡¹ç›®ç»“æ„ï¼Œapp/node_modules/down-cli ä¼šè½¯é“¾æ¥åˆ° down-cli/bin/index.js æ‰§è¡Œå­é¡¹ç›®çš„å‘½ä»¤é…ç½® root project çš„ npm scripts æ‰§è¡ŒæŒ‡å®šå­é¡¹ç›®çš„å‘½ä»¤ mono-project/package.json 12345678&#123; &quot;name&quot;: &quot;mono-project&quot;, &quot;scripts&quot;: &#123; &quot;app-hi&quot;: &quot;pnpm run --filter app hi&quot;, &quot;app-hi2&quot;: &quot;pnpm run --filter ./examples/* hi&quot;, &quot;down&quot;: &quot;pnpm --filter app down&quot; &#125;&#125; æ›´å¤š --filter å‚æ•°çš„ç”¨æ³•å¯æŸ¥å¸®åŠ©ä¿¡æ¯ pnpm help run åœ¨ root project ä¸‹æ‰§è¡Œ, pnpm down å¯æµ‹è¯•å­é¡¹ç›®çš„å‘½ä»¤ï¼Œå®ç°è„šæœ¬å·¥å…·(down-cli)çš„å¼€å‘è°ƒè¯• åœ¨ root project ä¸‹ï¼ŒæŒ‰ç…§æŒ‡å®šå­é¡¹ç›®çš„ä¾èµ–: pnpm add lodash --filter app åŒç†ï¼Œå‘å¸ƒæŸä¸ªå­å·¥ç¨‹å¯¹åº”çš„ package, pnpm publish --filter app or pnpm publish --F app","tags":["pnpm","monorepo"]},{"title":"å‰ç«¯è„šæ‰‹æ¶å¼€å‘æŒ‡å—","path":"/2024/03/01/å‰ç«¯è„šæ‰‹æ¶å¼€å‘æŒ‡å—/","content":"ä½ ä¼šå­¦åˆ°ä»€ä¹ˆå…¶å®è„šæ‰‹æ¶å¹¶ä¸å®ç°ï¼Œéš¾çš„æ˜¯æœ€ä½³å®è·µçš„æ•´ç†å’Œæ²‰æ·€ã€‚æœ¬æ–‡ä¸ä¼šæ¶‰åŠåˆ°æœ€ä½³å®è·µæ–¹é¢çš„å†…å®¹ï¼Œåªæ˜¯æ•™ä¼šä½ å¦‚ä½•å®ç°ä¸€ä¸ªæœ€åŸºç¡€çš„è„šæ‰‹æ¶ï¼Œä»¥æ­¤ä½œä¸ºå±•ç¤ºæœ€ä½³å®è·µçš„è½½ä½“ã€‚ å› ä¸ºæ˜¯æ‰‹æŠŠæ‰‹æ•™å¦¹å­å†™è„šæ‰‹æ¶ï¼Œæ‰€ä»¥æœ¬æ–‡å¾ˆè¯¦ç»†ï¼Œå­—æ•°å¾ˆå¤šï¼Œå¤§æ¦‚æœ‰ 3 ä¸‡å­—å·¦å³ï¼Œè¯»å®Œä½ ä¼šå­¦åˆ°ï¼š å¦‚ä½•æ­å»ºä¸€ä¸ªè„šæ‰‹æ¶çš„å·¥ç¨‹ å¦‚ä½•å¼€å‘å’Œè°ƒè¯•ä¸€ä¸ªè„šæ‰‹æ¶ è„šæ‰‹æ¶ä¸­å¦‚ä½•æ¥æ”¶å’Œå¤„ç†å‘½ä»¤å‚æ•° è„šæ‰‹æ¶ä¸­å¦‚ä½•å’Œç”¨æˆ·äº¤äº’ è„šæ‰‹æ¶ä¸­å¦‚ä½•æ‹·è´ä¸€ä¸ªæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ è„šæ‰‹æ¶ä¸­å¦‚ä½•åŠ¨æ€ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ è„šæ‰‹æ¶ä¸­å¦‚ä½•å¤„ç†è·¯å¾„é—®é¢˜ è„šæ‰‹æ¶ä¸­å¦‚ä½•è‡ªåŠ¨å®‰è£…æ¨¡æ¿æ‰€éœ€ä¾èµ– æœ¬æ–‡ä¸­æ‰€æœ‰ä»£ç å·²ç»ä¸Šä¼ åˆ° GitHubã€‚ 1ã€æ­å»ºä¸€ä¸ª monorepo é£æ ¼çš„è„šæ‰‹æ¶å·¥ç¨‹1.1ã€å¦‚ä½•ç”¨ Node.js è¿è¡Œ js ä¸ºäº†é¿å… Node.js ç‰ˆæœ¬å·®å¼‚å¯¼è‡´å¥‡æ€ªçš„é—®é¢˜ï¼Œå»ºè®®å®‰è£… 16 ä»¥ä¸Šç‰ˆæœ¬çš„ Node.js ã€‚ éšä¾¿æ‰¾ä¸ªåœ°æ–¹å»ºä¸ªä¸€ä¸ª index.js æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1console.log(&quot;Welcome to Mortal World&quot;); åœ¨è¯¥æ–‡ä»¶çš„åœ°å€æ ä¸Šè¾“å‡º cmd æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œè¾“å…¥ node index.js å‘½ä»¤ï¼Œå›è½¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ å¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£ä¸­çœ‹åˆ°æ‰“å°äº† Welcome to Mortals Worldã€‚ 1.2ã€å£°æ˜è‡ªå·±çš„å‘½ä»¤å¦‚æœä½ ç†Ÿæ‚‰ Vue , è‚¯å®šå¯¹ vue-cli è¿™ä¸ªè„šæ‰‹æ¶æœ‰ä¸€å®šäº†è§£ï¼Œæ¯”å¦‚è¿è¡Œ vue create myapp å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª Vue å·¥ç¨‹ã€‚ å¦‚æœæˆ‘ä»¬æ²¡æœ‰è¿è¡Œ npm install -g vue-cli å®‰è£… vue-cli è„šæ‰‹æ¶ï¼Œåœ¨å‘½ä»¤è¡Œçª—å£ä¸­ç›´æ¥è¿è¡Œ vue create myappï¼Œä¼šæŠ¥é”™ï¼ŒæŠ¥é”™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯è§ vue ä¸æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œ vue åªæ˜¯ vue-cli è„šæ‰‹æ¶å£°æ˜çš„ä¸€ä¸ªå‘½ä»¤ã€‚ é‚£æ€ä¹ˆç»™è„šæ‰‹æ¶å£°æ˜ä¸€ä¸ªå‘½ä»¤ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œè·Ÿæˆ‘æ¥æ“ä½œã€‚ éšä¾¿æ‰¾ä¸ªåœ°æ–¹åˆ›å»º mortal-cli çš„æ–‡ä»¶å¤¹ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹åï¼Œåœ¨å…¶åœ°å€æ ä¸Šè¾“å‡º cmd æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œ è¿è¡Œ npm init å‘½ä»¤æ¥åˆå§‹åŒ–ä¸€ä¸ªè„šæ‰‹æ¶å·¥ç¨‹ï¼Œè¿è¡ŒæˆåŠŸåï¼Œä¼šåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ª pakeage.json æ–‡ä»¶ã€‚ æˆ‘ä»¬åœ¨ pakeage.json ä¸­æ·»åŠ  bin å­—æ®µï¼Œæ¥å£°æ˜ä¸€ä¸ªå‘½ä»¤ï¼Œæ·»åŠ åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314&#123; &quot;name&quot;: &quot;mortal-cli&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;bin&quot;: &#123; &quot;mortal&quot;: &quot;./bin/index.js&quot; &#125;&#125; è¿™æ ·æˆ‘ä»¬å°±å£°æ˜äº†ä¸€ä¸ª mortal çš„å‘½ä»¤ï¼Œå¦å¤– ./bin/index.js æ˜¯è¿è¡Œ mortal å‘½ä»¤åä¼šè¿è¡Œçš„ js æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ æ¥ç€æˆ‘ä»¬åœ¨ mortal-cli çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª bin æ–‡ä»¶å¤¹ï¼Œåœ¨ bin æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª index.js æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123#!/usr/bin/env nodeconsole.log(&quot;Welcome to Mortal World&quot;); æ³¨æ„åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ  #!/usr/bin/env nodeï¼Œå¦åˆ™è¿è¡Œåä¼šæŠ¥é”™ï¼ï¼ï¼ è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªæœ€åŸºç¡€çš„è„šæ‰‹æ¶å·¥ç¨‹ï¼Œæ¥ä¸‹æ¥åœ¨å‘½ä»¤è¡Œçª—å£è¾“å…¥ mortal å‘½ä»¤ï¼Œè¿è¡Œè¯¥å‘½ä»¤ã€‚ ä¼šå‘ç°ï¼Œè¿˜æ˜¯æŠ¥é”™ï¼Œæç¤º mortal å‘½ä»¤ä¸æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œå½“ç„¶ä¸æ˜¯å£°æ˜å‘½ä»¤çš„æ–¹æ³•é”™è¯¯ã€‚ å‡å¦‚ä½ æŠŠè¿™ä¸ªè„šæ‰‹æ¶å‘å¸ƒåˆ° npm ä¸Šåã€‚ç”±äº mortal-cli&#x2F;pakeage.json ä¸­ name çš„å€¼ä¸º mortal-cliï¼Œæ‰€ä»¥æˆ‘ä»¬è¿è¡Œ npm install -g mortal-cli å°†è„šæ‰‹æ¶å®‰è£…åˆ°æœ¬åœ°åï¼Œå†è¿è¡Œ mortal å‘½ä»¤ï¼Œå°±ä¼šå‘ç°è¿è¡ŒæˆåŠŸã€‚ åœ¨å®é™…å¼€å‘è„šæ‰‹æ¶è¿‡ç¨‹ä¸­ä¸å¯èƒ½è¿™ä¹ˆåšï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦å®ç°æœ¬åœ°è°ƒè¯•è„šæ‰‹æ¶çš„èƒ½åŠ›ï¼Œå®ç°èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œä¸€ä¸ªå‘½ä»¤æå®šã€‚ è¿™ä¸ªå‘½ä»¤å°±æ˜¯ npm linkï¼Œå“ˆå“ˆæƒ³ä¸åˆ°å§ï¼Œåœ¨è¿™é‡Œå°±ä¸è®²è¿°å…¶åŸç†ï¼Œå¦‚æœä½ ä»¬éœ€è¦çš„è¯ï¼Œå¯ä»¥ç•™è¨€ï¼Œæˆ‘å¼€ä¸ªå•ç« è®²è¿°ä¸€ä¸‹ã€‚ è¾“å…¥ npm link å‘½ä»¤è¿è¡Œåï¼Œå†è¾“å…¥ mortal å‘½ä»¤ï¼Œå›è½¦è¿è¡Œï¼Œçœ‹åˆ°çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ åˆ°æ­¤ï¼Œæˆ‘ä»¬æˆåŠŸçš„å£°æ˜äº†ä¸€ä¸ª mortal å‘½ä»¤ã€‚ 1.3ã€npm link çš„å¼Šç«¯ä½¿ç”¨ npm link æ¥å®ç°æœ¬åœ°è°ƒè¯•æœ‰ä¸€ä¸ªå¼Šç«¯ã€‚æ¯”å¦‚åœ¨æœ¬åœ°æœ‰å¤šä¸ªç‰ˆæœ¬çš„è„šæ‰‹æ¶ä»“åº“ï¼Œåœ¨ä»“åº“ A ä¸­ä¿®æ”¹ä»£ç åï¼Œè¿è¡Œ mortal å‘½ä»¤åï¼Œå‘ç°æ›´æ”¹çš„ä»£ç ä¸ç”Ÿæ•ˆã€‚è¿™æ˜¯å› ä¸ºå·²ç»åœ¨ä»“åº“ B çš„è„šæ‰‹æ¶å·¥ç¨‹ä¸­è¿è¡Œ npm linkï¼Œå¯¼è‡´æˆ‘ä»¬åœ¨è¿è¡Œ mortal å‘½ä»¤åæ˜¯æ‰§è¡Œä»“åº“ B ä¸­çš„ä»£ç ï¼Œåœ¨ä»“åº“ A ä¸­ä¿®æ”¹ä»£ç èƒ½ç”Ÿæ•ˆæ‰æ€ªã€‚è¦å…ˆåœ¨ä»“åº“ B çš„è„šæ‰‹æ¶å·¥ç¨‹ä¸­è¿è¡Œ npm unlink åï¼Œç„¶ååœ¨ä»“åº“ A ä¸­çš„è„šæ‰‹æ¶å·¥ç¨‹ä¸­è¿è¡Œ npm link åï¼Œä¿®æ”¹ä»“åº“ A ä¸­çš„ä»£ç æ‰èƒ½ç”Ÿæ•ˆã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªå¼Šç«¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ pnpm æ¥æ­å»º monorepo é£æ ¼çš„è„šæ‰‹æ¶å·¥ç¨‹ã€‚ åœ¨ monorepo é£æ ¼çš„å·¥ç¨‹ä¸­å¯ä»¥å«æœ‰å¤šä¸ªå­å·¥ç¨‹ï¼Œä¸”æ¯ä¸ªå­å·¥ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹ç¼–è¯‘æ‰“åŒ…åå°†äº§ç‰©å‘æˆ npm åŒ…ï¼Œæ•…åˆç§° monorepo ä¸ºå¤šåŒ…å·¥ç¨‹ã€‚ ç”±äºè„šæ‰‹æ¶å‘å¸ƒåˆ° npm ä¸Šçš„åŒ…åä¸º mortal-cli ï¼Œä¿®æ”¹è°ƒè¯•å­å·¥ç¨‹çš„ package.json æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œä»£ç ä¿®æ”¹éƒ¨åˆ†å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678&#123; &quot;scripts&quot;: &#123; &quot;mortal&quot;: &quot;mortal --help&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;mortal-cli&quot;: &quot;workspace:*&quot; &#125;&#125; æ³¨æ„ï¼Œåœ¨ dependencies å­—æ®µä¸­å£°æ˜ mortal-cli ä¾èµ–åŒ…çš„ç‰ˆæœ¬ï¼Œè¦ç”¨workspace:* æ¥å®šä¹‰ï¼Œè€Œä¸æ˜¯å…·ä½“ç‰ˆæœ¬å·æ¥å®šä¹‰ã€‚ åœ¨ pnpm ä¸­ä½¿ç”¨ workspace: åè®®å®šä¹‰æŸä¸ªä¾èµ–åŒ…ç‰ˆæœ¬å·æ—¶ï¼Œpnpm å°†åªè§£æå­˜åœ¨å·¥ä½œç©ºé—´å†…çš„ä¾èµ–åŒ…ï¼Œä¸ä¼šå»ä¸‹è½½è§£æ npm ä¸Šçš„ä¾èµ–åŒ…ã€‚ æŠŠ mortal-cli ä¾èµ–åŒ…å¼•å…¥ï¼Œæ‰§è¡Œ pnpm i å®‰è£…ä¾èµ–ï¼Œå…¶æ•ˆæœå°±è·Ÿæ‰§è¡Œ npm install -g mortal-cliä¸€æ ·ï¼Œåªä¸è¿‡ä¸æ˜¯å…¨å±€å®‰è£…è€Œå·²ï¼Œåªåœ¨è°ƒè¯•å­å·¥ç¨‹å†…å®‰è£… mortal-cli è„šæ‰‹æ¶ã€‚ç„¶åè°ƒè¯•å­å·¥ç¨‹å°±ç›´æ¥å¼•ç”¨è„šæ‰‹æ¶å­å·¥ç¨‹æœ¬åœ°ç¼–è¯‘æ‰“åŒ…åçš„äº§ç‰©ï¼Œè€Œä¸æ˜¯å‘å¸ƒåˆ° npm ä¸Šçš„äº§ç‰©ï¼Œå½»åº•åšåˆ°æœ¬åœ°è°ƒè¯•ã€‚ å¦å¤–è„šæ‰‹æ¶å­å·¥ç¨‹å’Œè°ƒè¯•å­å·¥ç¨‹æ˜¯åœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸­ï¼Œè¿™æ ·å°±åšä¸€å¯¹ä¸€çš„è°ƒè¯•ï¼Œä»è€Œè§£å†³äº†ä½¿ç”¨ npm link æ¥å®ç°æœ¬åœ°è°ƒè¯•çš„å¼Šç«¯ã€‚ åŒæ—¶åœ¨ scripts å®šä¹‰äº†è„šæœ¬å‘½ä»¤ï¼Œåœ¨è°ƒè¯•å·¥ç¨‹ä¸­æ‰§è¡Œ pnpm mortal æ—¢æ˜¯æ‰§è¡Œäº† mortal å‘½ä»¤ï¼Œä¸ç”¨è„šæ‰‹æ¶å·¥ç¨‹ä¸­æ‰§è¡Œ npm link å°±å¯ä»¥è¿è¡Œ mortal å‘½ä»¤ã€‚ 1.4ã€monorepo é£æ ¼çš„è„šæ‰‹æ¶å·¥ç¨‹ä¸‹é¢å¼€å§‹ä½¿ç”¨ pnpm æ­å»º monorepo é£æ ¼çš„è„šæ‰‹æ¶å·¥ç¨‹ï¼Œé¦–å…ˆåœ¨å‘½ä»¤è¡Œçª—å£ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç ï¼Œæ‰§è¡Œå®‰è£… pnpm ã€‚ 1iwr https://get.pnpm.io/install.ps1 -useb | iex ç„¶åé‡æ–°æ‰¾ä¸ªåœ°æ–¹åˆ›å»º mortal æ–‡ä»¶å¤¹ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹åï¼Œåœ¨å…¶åœ°å€æ ä¸Šè¾“å‡º cmd æ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€‚ è¾“å…¥ pnpm init åˆå§‹åŒ–å·¥ç¨‹ï¼Œpnpm æ˜¯ä½¿ç”¨ workspace (å·¥ä½œç©ºé—´) æ¥æ­å»ºä¸€ä¸ª monorepo é£æ ¼çš„å·¥ç¨‹ã€‚ æ‰€ä»¥æˆ‘ä»¬è¦ mortal æ–‡ä»¶å¤¹ä¸­åˆ›å»º pnpm-workspace.yaml å·¥ä½œç©ºé—´é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä»£ç ã€‚ 1packages: -&quot;packages/*&quot; - &quot;examples/*&quot;; é…ç½®åï¼Œå£°æ˜äº† packages å’Œ examples æ–‡ä»¶å¤¹ä¸­å­å·¥ç¨‹æ˜¯åŒå±ä¸€ä¸ªå·¥ä½œç©ºé—´çš„ï¼Œå·¥ä½œç©ºé—´ä¸­çš„å­å·¥ç¨‹ç¼–è¯‘æ‰“åŒ…çš„äº§ç‰©éƒ½å¯ä»¥è¢«å…¶å®ƒå­å·¥ç¨‹å¼•ç”¨ã€‚ åœ¨ packages æ–‡ä»¶å¤¹ä¸­æ–°å»º mortal-cli æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶åœ°å€æ ä¸Šè¾“å‡º cmd æ‰“å¼€å‘½ä»¤è¡Œçª—å£ã€‚ è¾“å…¥ pnpm init å‘½ä»¤ï¼Œæ‰§è¡Œæ¥åˆå§‹åŒ–ä¸€ä¸ªå·¥ç¨‹ï¼Œæ‰§è¡ŒæˆåŠŸåï¼Œä¼šåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ª pakeage.json æ–‡ä»¶ã€‚ æˆ‘ä»¬åœ¨ pakeage.json ä¸­æ·»åŠ  bin å­—æ®µï¼Œæ¥å£°æ˜ mortal å‘½ä»¤ï¼Œæ·»åŠ åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314&#123; &quot;name&quot;: &quot;mortal-cli&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;bin&quot;: &#123; &quot;mortal&quot;: &quot;./bin/index.js&quot; &#125;&#125; åœ¨ packages&#x2F;mortal-cli æ–‡ä»¶å¤¹ä¸­æ–°å»º bin æ–‡ä»¶å¤¹ï¼Œåœ¨ bin æ–‡ä»¶å¤¹ä¸­æ–°å»º index.js æ–‡ä»¶ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123#!/usr/bin/env nodeconsole.log(&quot;Welcome to Mortal World&quot;); åœ¨ examples æ–‡ä»¶å¤¹ä¸­æ–°å»º app æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶åœ°å€æ ä¸Šè¾“å‡º cmd æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼Œ è¿è¡Œ pnpm init å‘½ä»¤æ¥åˆå§‹åŒ–ä¸€ä¸ªå·¥ç¨‹ï¼Œè¿è¡ŒæˆåŠŸåï¼Œä¼šåœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ª pakeage.json æ–‡ä»¶ã€‚ æˆ‘ä»¬åœ¨ pakeage.json ä¸­æ·»åŠ  dependencies å­—æ®µï¼Œæ¥æ·»åŠ  mortal-cli ä¾èµ–ã€‚å†ç»™ scripts å¢åŠ ä¸€æ¡è‡ªå®šä¹‰è„šæœ¬å‘½ä»¤ã€‚æ·»åŠ åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314&#123; &quot;name&quot;: &quot;app&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;mortal&quot;: &quot;mortal&quot; &#125;, &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;dependencies&quot;: &#123; &quot;mortal-cli&quot;: &quot;workspace:*&quot; &#125;&#125; ç„¶ååœ¨æœ€å¤–å±‚æ ¹ç›®å½•ä¸‹è¿è¡Œ pnpm i å‘½ä»¤ï¼Œå®‰è£…ä¾èµ–ã€‚å®‰è£…æˆåŠŸåï¼Œåœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortalï¼Œä¼šå‘ç°å‘½ä»¤è¡Œçª—å£æ‰“å°å‡º Welcome to Mortal Worldï¼Œè¯´æ˜ä½ çš„ monorepo é£æ ¼çš„è„šæ‰‹æ¶å·¥ç¨‹çš„æ­å»ºæˆåŠŸäº†ã€‚ æ­¤æ—¶æ•´ä¸ªå·¥ç¨‹çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤º 123456789101112|-- mortal|-- package.json|-- pnpm-lock.yaml|-- pnpm-workspace.yaml|-- examples| |-- app| |-- package.json|-- packages|-- mortal-cli|-- package.json|-- bin|-- index.js 1.5ã€è„šæ‰‹æ¶å¿…å¤‡çš„æ¨¡å—ä¸€ä¸ªæœ€ç®€å•çš„è„šæ‰‹æ¶åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ã€‚ å‘½ä»¤å‚æ•°æ¨¡å— ç”¨æˆ·äº¤äº’æ¨¡å— æ–‡ä»¶æ‹·è´æ¨¡å— åŠ¨æ€æ–‡ä»¶ç”Ÿæˆæ¨¡å— è‡ªåŠ¨å®‰è£…ä¾èµ–æ¨¡å— ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€å°†ä»–ä»¬å®ç°ã€‚ 2ã€å‘½ä»¤å‚æ•°æ¨¡å—2.1ã€è·å–å‘½ä»¤å‚æ•°Node.js ä¸­çš„ process æ¨¡å—æä¾›äº†å½“å‰ Node.js è¿›ç¨‹ç›¸å…³çš„å…¨å±€ç¯å¢ƒä¿¡æ¯ï¼Œæ¯”å¦‚å‘½ä»¤å‚æ•°ã€ç¯å¢ƒå˜é‡ã€å‘½ä»¤è¿è¡Œè·¯å¾„ç­‰ç­‰ã€‚ 123const process = require(&quot;process&quot;);// è·å–å‘½ä»¤å‚æ•°console.log(process.argv); è„šæ‰‹æ¶æä¾›çš„ mortal å‘½ä»¤åé¢è¿˜å¯ä»¥è®¾ç½®å‚æ•°ï¼Œæ ‡å‡†çš„è„šæ‰‹æ¶å‘½ä»¤å‚æ•°éœ€è¦æ”¯æŒä¸¤ç§æ ¼å¼ï¼Œæ¯”å¦‚ï¼š 12mortal --name=orderPagemortal --name orderPage å¦‚æœé€šè¿‡ process.argv æ¥è·å–ï¼Œè¦é¢å¤–å¤„ç†ä¸¤ç§ä¸åŒçš„å‘½ä»¤å‚æ•°æ ¼å¼ï¼Œä¸æ–¹ä¾¿ã€‚ è¿™é‡Œæ¨è yargs å¼€æºåº“æ¥è§£æå‘½ä»¤å‚æ•°ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… yargsï¼š 1pnpm add yargs --F mortal-cli pnpm add æ˜¯ pnpm ä¸­å®‰è£…ä¾èµ–åŒ…çš„å‘½ä»¤ï¼Œ --F mortal-cliï¼Œæ˜¯æŒ‡å®šä¾èµ–å®‰è£…åˆ° mortal-cli å­å·¥ç¨‹ä¸­ã€‚ è¿™é‡Œè¦æ³¨æ„ï¼Œmortal-cli æ˜¯å– mortal-cli å­å·¥ç¨‹ä¸­ package.json ä¸­ name å­—æ®µçš„å€¼ï¼Œè€Œä¸æ˜¯ mortal-cli å­å·¥ç¨‹æ–‡ä»¶å¤¹çš„åç§°ã€‚ yargs çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå…¶æä¾›çš„ argv å±æ€§æ˜¯å¯¹ä¸¤ä¸ªæ ¼å¼çš„å‘½ä»¤å‚æ•°çš„å¤„ç†ç»“æœã€‚ åœ¨ bin&#x2F;index.js æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);console.log(&quot;name&quot;, yargs.argv.name); æ³¨æ„ï¼Œä»¥ä¸Šä»£ç æ˜¯åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œï¼ŒNode.js çš„æ¨¡å—æ˜¯éµå¾ª CommonJS è§„èŒƒçš„ï¼Œå¦‚æœè¦ä¾èµ–ä¸€ä¸ªæ¨¡å—ï¼Œè¦ä½¿ç”¨ Node.js å†…ç½® require ç³»ç»Ÿå‡½æ•°å¼•ç”¨æ¨¡å—ä½¿ç”¨ã€‚ åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal -- --name=orderPage ï¼Œ æ³¨æ„ï¼Œåœ¨ pnpm mortal åé¢éœ€è¦åŠ ä¸Šä¸¤ä¸ªè¿å­—ç¬¦ï¼ˆâ€“ï¼‰ï¼Œè¿™æ˜¯ä¸ºäº†å‘Šè¯‰ pnpm åé¢çš„å‚æ•°æ˜¯ä¼ é€’ç»™å‘½ä»¤mortal æœ¬èº«çš„ï¼Œè€Œä¸æ˜¯ä¼ é€’ç»™ pnpm çš„ã€‚ ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥é€šè¿‡ yargs.argv.name è·å–å‘½ä»¤å‚æ•° name çš„å€¼ã€‚ 2.2ã€è®¾ç½®å­å‘½ä»¤å‡å¦‚è„šæ‰‹æ¶è¦å¯¹å¤–æä¾›å¤šä¸ªåŠŸèƒ½ï¼Œä¸èƒ½å°†æ‰€æœ‰çš„åŠŸèƒ½éƒ½é›†ä¸­åœ¨ mortal å‘½ä»¤ä¸­å®ç°ã€‚ å¯ä»¥é€šè¿‡ yargs æä¾›çš„ command æ–¹æ³•æ¥è®¾ç½®ä¸€äº›å­å‘½ä»¤ï¼Œè®©æ¯ä¸ªå­å‘½ä»¤å¯¹åº”å„è‡ªåŠŸèƒ½ï¼Œå„å¸å…¶èŒã€‚ yargs.command çš„ç”¨æ³•æ˜¯ **yargs.command(cmd, desc, builder, handler)**ã€‚ cmdï¼šå­—ç¬¦ä¸²ï¼Œå­å‘½ä»¤åç§°ï¼Œä¹Ÿå¯ä»¥ä¼ é€’æ•°ç»„ï¼Œå¦‚ [&#39;create&#39;, &#39;c&#39;]ï¼Œè¡¨ç¤ºå­å‘½ä»¤å« createï¼Œå…¶åˆ«åæ˜¯ cï¼› descï¼šå­—ç¬¦ä¸²ï¼Œå­å‘½ä»¤æè¿°ä¿¡æ¯ï¼› builderï¼šä¸€ä¸ªè¿”å›æ•°ç»„çš„å‡½æ•°ï¼Œå­å‘½ä»¤å‚æ•°ä¿¡æ¯é…ç½®ï¼Œæ¯”å¦‚å¯ä»¥è®¾ç½®å‚æ•°ï¼š aliasï¼šåˆ«åï¼› demandï¼šæ˜¯å¦å¿…å¡«ï¼› defaultï¼šé»˜è®¤å€¼ï¼› describeï¼šæè¿°ä¿¡æ¯ï¼› typeï¼šå‚æ•°ç±»å‹ï¼Œstring | boolean | numberã€‚ handler: å‡½æ•°ï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¸“é—¨å¤„ç†è¯¥å­å‘½ä»¤å‚æ•°ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è®¾ç½®ä¸€ä¸ªç”¨æ¥ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿çš„å­å‘½ä»¤ï¼ŒæŠŠè¿™ä¸ªå­å‘½ä»¤å‘½åä¸ºcreateã€‚ ä¿®æ”¹åœ¨ bin&#x2F;index.js æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; console.log(&quot;argv&quot;, argv); &#125;).argv; åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹åˆ†åˆ«è¿è¡Œ pnpm mortal create -- --name=orderPage å’Œ pnpm mortal c -- --name=orderPage å‘½ä»¤ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨ä¸Šé¢æˆ‘ä»¬é…ç½®äº†å­å‘½ä»¤ create çš„å‚æ•° name çš„ä¸€äº›å‚æ•°ä¿¡æ¯ã€‚é‚£è¿™äº›è¦æ€ä¹ˆå±•ç¤ºç»™ç”¨æˆ·çœ‹å‘¢ï¼Ÿå…¶å®åªè¦æˆ‘ä»¬è¾“å…¥å­å‘½ä»¤çš„å‚æ•°æœ‰é”™è¯¯ï¼Œå°±ä¼šåœ¨å‘½ä»¤è¡Œçª—å£ä¸­æ˜¾ç¤ºè¿™äº›å‚æ•°ä¿¡æ¯ã€‚ åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal c -- --abc å‘½ä»¤ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ€ç®€å•åœ°å®ç°äº†è„šæ‰‹æ¶å’Œç”¨æˆ·ä¹‹é—´çš„äº¤äº’èƒ½åŠ›ï¼Œä½†æ˜¯å¦‚æœè‡ªå®šä¹‰å‚æ•°è¿‡å¤šï¼Œé‚£ä¹ˆå‘½ä»¤è¡Œå‚æ•°çš„äº¤äº’æ–¹æ³•å¯¹äºç”¨æˆ·æ¥è¯´æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜è¦å®ç°ä¸€ä¸ªç”¨æˆ·äº¤äº’æ¨¡å—ï¼Œå¦‚ä½•å®ç°è¯·çœ‹ä¸‹ä¸€å°èŠ‚ã€‚ 3ã€ç”¨æˆ·äº¤äº’æ¨¡å—æˆ‘è®¤ä¸ºæ¯”è¾ƒå¥½çš„ç”¨æˆ·äº¤äº’æ–¹å¼æ˜¯è®¯é—®å¼çš„äº¤äº’ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¿è¡Œ npm initï¼Œé€šè¿‡è¯¢é—®å¼çš„äº¤äº’å®Œæˆ package.json æ–‡ä»¶å†…å®¹çš„å¡«å……ã€‚ è¿™é‡Œæ¨èä½¿ç”¨ inquirer å¼€æºåº“æ¥å®ç°è¯¢é—®å¼çš„äº¤äº’ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… inquirerï¼š 1pnpm add inquirer@8.2.5 --F mortal-cli ä¸ºäº†ä½¿ç”¨ require å¼•å…¥ inquirer ï¼Œè¦ä½¿ç”¨ 8.2.5 ç‰ˆæœ¬çš„ inquirerã€‚ è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨äº† inquirer å¼€æºåº“çš„ä¸‰ä¸ªæ–¹é¢çš„èƒ½åŠ›ï¼š è¯¢é—®ç”¨æˆ·é—®é¢˜ è·å–å¹¶è§£æç”¨æˆ·çš„è¾“å…¥ æ£€æµ‹ç”¨æˆ·çš„ç­”æ¡ˆæ˜¯å¦åˆæ³• ä¸»è¦é€šè¿‡ inquirer.prompt() æ¥å®ç°ã€‚prompt å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªè¯¢é—®é¡¹ï¼Œè¯¢é—®é¡¹æœ‰å¾ˆå¤šé…ç½®å‚æ•°ï¼Œä¸‹é¢æ˜¯å¸¸ç”¨çš„é…ç½®é¡¹ã€‚ typeï¼šæé—®çš„ç±»å‹ï¼Œå¸¸ç”¨çš„æœ‰ è¾“å…¥æ¡†ï¼šinputï¼› ç¡®è®¤ï¼šconfirmï¼› å•é€‰ç»„ï¼šlistï¼› å¤šé€‰ç»„ï¼šcheckboxï¼› nameï¼šå­˜å‚¨å½“å‰é—®é¢˜ç­”æ¡ˆçš„å˜é‡ï¼› messageï¼šé—®é¢˜çš„æè¿°ï¼› defaultï¼šé»˜è®¤å€¼ï¼› choicesï¼šåˆ—è¡¨é€‰é¡¹ï¼Œåœ¨æŸäº›typeä¸‹å¯ç”¨ï¼› validateï¼šå¯¹ç”¨æˆ·çš„ç­”æ¡ˆè¿›è¡Œæ ¡éªŒï¼› filterï¼šå¯¹ç”¨æˆ·çš„ç­”æ¡ˆè¿›è¡Œè¿‡æ»¤å¤„ç†ï¼Œè¿”å›å¤„ç†åçš„å€¼ã€‚ æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œå¤§æ¦‚ä¼šè¯¢é—®ç”¨æˆ·ï¼šæ¨¡æ¿æ–‡ä»¶åç§°ã€æ¨¡æ¿ç±»å‹ã€ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶å¼€å‘ã€ä½¿ç”¨æ¡†æ¶å¯¹åº”çš„å“ªä¸ªç»„ä»¶åº“å¼€å‘ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ åœ¨ bin æ–‡ä»¶å¤¹ä¸­æ–°å»º inquirer.js æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293const inquirer = require(&quot;inquirer&quot;);function inquirerPrompt(argv) &#123; const &#123; name &#125; = argv; return new Promise((resolve, reject) =&gt; &#123; inquirer .prompt([ &#123; type: &quot;input&quot;, name: &quot;name&quot;, message: &quot;æ¨¡æ¿åç§°&quot;, default: name, validate: function (val) &#123; if (!/^[a-zA-Z]+$/.test(val)) &#123; return &quot;æ¨¡æ¿åç§°åªèƒ½å«æœ‰è‹±æ–‡&quot;; &#125; if (!/^[A-Z]/.test(val)) &#123; return &quot;æ¨¡æ¿åç§°é¦–å­—æ¯å¿…é¡»å¤§å†™&quot;; &#125; return true; &#125;, &#125;, &#123; type: &quot;list&quot;, name: &quot;type&quot;, message: &quot;æ¨¡æ¿ç±»å‹&quot;, choices: [&quot;è¡¨å•&quot;, &quot;åŠ¨æ€è¡¨å•&quot;, &quot;åµŒå¥—è¡¨å•&quot;], filter: function (value) &#123; return &#123; è¡¨å•: &quot;form&quot;, åŠ¨æ€è¡¨å•: &quot;dynamicForm&quot;, åµŒå¥—è¡¨å•: &quot;nestedForm&quot;, &#125;[value]; &#125;, &#125;, &#123; type: &quot;list&quot;, message: &quot;ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶å¼€å‘&quot;, choices: [&quot;react&quot;, &quot;vue&quot;], name: &quot;frame&quot;, &#125;, ]) .then((answers) =&gt; &#123; const &#123; frame &#125; = answers; if (frame === &quot;react&quot;) &#123; inquirer .prompt([ &#123; type: &quot;list&quot;, message: &quot;ä½¿ç”¨ä»€ä¹ˆUIç»„ä»¶åº“å¼€å‘&quot;, choices: [&quot;Ant Design&quot;], name: &quot;library&quot;, &#125;, ]) .then((answers1) =&gt; &#123; resolve(&#123; ...answers, ...answers1, &#125;); &#125;) .catch((error) =&gt; &#123; reject(error); &#125;); &#125; if (frame === &quot;vue&quot;) &#123; inquirer .prompt([ &#123; type: &quot;list&quot;, message: &quot;ä½¿ç”¨ä»€ä¹ˆUIç»„ä»¶åº“å¼€å‘&quot;, choices: [&quot;Element&quot;], name: &quot;library&quot;, &#125;, ]) .then((answers2) =&gt; &#123; resolve(&#123; ...answers, ...answers2, &#125;); &#125;) .catch((error) =&gt; &#123; reject(error); &#125;); &#125; &#125;) .catch((error) =&gt; &#123; reject(error); &#125;); &#125;);&#125;exports.inquirerPrompt = inquirerPrompt; å…¶ä¸­ inquirer.prompt() è¿”å›çš„æ˜¯ä¸€ä¸ª Promiseï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ then è·å–ä¸Šä¸ªè¯¢é—®çš„ç­”æ¡ˆï¼Œæ ¹æ®ç­”æ¡ˆå†å‘èµ·å¯¹åº”çš„å†…å®¹ã€‚ åœ¨ bin&#x2F;index.js ä¸­å¼•å…¥ inquirerPrompt ã€‚ 12345678910111213141516171819202122#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);const &#123; inquirerPrompt &#125; = require(&quot;./inquirer&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; inquirerPrompt(argv).then((answers) =&gt; &#123; console.log(answers); &#125;); &#125;).argv; åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal c -- --n Input å‘½ä»¤ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°â€œåœ¨ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶å¼€å‘â€çš„è¯¢é—®ä¸­å›ç­”ä¸åŒï¼Œä¸‹ä¸€ä¸ªâ€œä½¿ç”¨ä»€ä¹ˆ UI ç»„ä»¶åº“çš„å¼€å‘â€çš„è¯¢é—®å¯é€‰é¡¹ä¸ä¸€æ ·ã€‚ å›ç­”å®Œæˆåï¼Œå¯ä»¥åœ¨ä¸‹å›¾ä¸­æ¸…æ¥šåœ°çœ‹åˆ°ç­”æ¡ˆæ ¼å¼ 4ã€æ–‡ä»¶å¤¹æ‹·è´æ¨¡å—è¦ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œæœ€ç®€å•çš„åšæ³•å°±æ˜¯æ‰§è¡Œè„šæ‰‹æ¶æä¾›çš„å‘½ä»¤åï¼ŒæŠŠè„šæ‰‹æ¶ä¸­çš„æ¨¡æ¿æ–‡ä»¶ï¼Œæ‹·è´åˆ°å¯¹åº”çš„åœ°æ–¹ã€‚æ¨¡æ¿æ–‡ä»¶å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚æœ¬å°èŠ‚å…ˆä»‹ç»ä¸€ä¸‹æ¨¡æ¿æ–‡ä»¶æ˜¯æ–‡ä»¶å¤¹æ—¶å€™å¦‚ä½•æ‹·è´ã€‚ åœ¨ Node.js ä¸­æ‹·è´æ–‡ä»¶å¤¹å¹¶ä¸ç®€å•ï¼Œéœ€è¦ç”¨åˆ°é€’å½’ï¼Œè¿™é‡Œæ¨èä½¿ç”¨å¼€æºåº“copy-diræ¥å®ç°æ‹·è´æ–‡ä»¶ã€‚ è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… copy-dir ã€‚ 1pnpm add copy-dir --F mortal-cli åœ¨ bin æ–‡ä»¶å¤¹ä¸­æ–°å»º copy.js æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910111213const copydir = require(&quot;copy-dir&quot;);const fs = require(&quot;fs&quot;);function copyDir(from, to, options) &#123; copydir.sync(from, to, options);&#125;function checkMkdirExists(path) &#123; return fs.existsSync(path);&#125;exports.checkMkdirExists = checkMkdirExists;exports.copyDir = copyDir; copyDir æ–¹æ³•å®ç°éå¸¸ç®€å•ï¼Œéš¾çš„æ˜¯å¦‚ä½•ä½¿ç”¨ï¼Œä¸‹é¢åˆ›å»ºä¸€ä¸ªåœºæ™¯æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ã€‚ æˆ‘ä»¬åœ¨ bin æ–‡ä»¶å¤¹ä¸­æ–°å»º template æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æ¨¡æ¿æ–‡ä»¶ï¼Œæ¯”å¦‚åœ¨ template æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª form æ–‡ä»¶å¤¹æ¥å­˜æ”¾è¡¨å•æ¨¡æ¿ï¼Œè¿™é‡Œä¸ä»‹ç»è¡¨å•æ¨¡æ¿çš„å†…å®¹ï¼Œæˆ‘ä»¬éšæ„åœ¨ form æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª _index.js_ï¼Œåœ¨é‡Œé¢éšä¾¿å†™äº›å†…å®¹ã€‚å…¶ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617|-- mortal|-- package.json|-- pnpm-lock.yaml|-- pnpm-workspace.yaml|-- examples| |-- app| |-- package.json|-- packages|-- mortal|-- package.json|-- bin|-- template|-- form|-- index.js|-- copy.js|-- index.js|-- inquirer.js ä¸‹é¢æ¥å®ç°æŠŠ packages&#x2F;mortal&#x2F;bin&#x2F;template&#x2F;form è¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ° examples&#x2F;app&#x2F;src&#x2F;pages&#x2F;OrderPage ä¸­ ã€‚ åœ¨ bin&#x2F;index.js ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132333435#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);const path = require(&quot;path&quot;);const &#123; inquirerPrompt &#125; = require(&quot;./inquirer&quot;);const &#123; copyDir, checkMkdirExists &#125; = require(&quot;./copy&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; inquirerPrompt(argv).then((answers) =&gt; &#123; const &#123; name, type &#125; = answers; const isMkdirExists = checkMkdirExists( path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;`) ); if (isMkdirExists) &#123; console.log(`$&#123;name&#125;æ–‡ä»¶å¤¹å·²ç»å­˜åœ¨`); &#125; else &#123; copyDir( path.resolve(__dirname, `./template/$&#123;type&#125;`), path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;`) ); &#125; &#125;); &#125;).argv; ä½¿ç”¨æ‹·è´æ–‡ä»¶æ–¹æ³• copyDir çš„éš¾ç‚¹æ˜¯å‚æ•° from å’Œ to çš„èµ‹å€¼ã€‚å…¶ä¸­ from è¡¨ç¤ºè¦æ‹·è´æ–‡ä»¶çš„è·¯å¾„ï¼Œto è¡¨ç¤ºè¦æŠŠæ–‡ä»¶æ‹·è´åˆ°é‚£é‡Œçš„è·¯å¾„ã€‚è¿™é‡Œçš„è·¯å¾„æœ€å¥½ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå› ä¸ºåœ¨ Node.js ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¼šå‡ºç°ä¸€ç³»åˆ—å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ã€‚ 4.1ã€è„šæ‰‹æ¶ä¸­çš„è·¯å¾„å¤„ç†æˆ‘ä»¬å¯ä»¥ç”¨ Node.js ä¸­çš„ path æ¨¡å—æä¾›çš„ path.resolve( [fromâ€¦], to ) æ–¹æ³•å°†è·¯å¾„è½¬æˆç»å¯¹è·¯å¾„ï¼Œå°±æ˜¯å°†å‚æ•° to æ‹¼æ¥æˆä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œ[from â€¦ ] ä¸ºé€‰å¡«é¡¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªè·¯å¾„ï¼Œå¦‚ path.resolve(&#39;./aaa&#39;, &#39;./bbb&#39;, &#39;./ccc&#39;) ï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„path.resolve çš„è·¯å¾„æ‹¼æ¥è§„åˆ™ï¼š ä»åå‘å‰æ‹¼æ¥è·¯å¾„ï¼› è‹¥ to ä»¥ / å¼€å¤´ï¼Œä¸ä¼šæ‹¼æ¥åˆ°å‰é¢çš„è·¯å¾„ï¼› è‹¥ to ä»¥ ../ å¼€å¤´ï¼Œæ‹¼æ¥å‰é¢çš„è·¯å¾„ï¼Œä¸”ä¸å«æœ€åä¸€èŠ‚è·¯å¾„ï¼› è‹¥ to ä»¥ ./ å¼€å¤´æˆ–è€…æ²¡æœ‰ç¬¦å·ï¼Œåˆ™æ‹¼æ¥å‰é¢è·¯å¾„ã€‚ ä»ä»¥ä¸Šæ‹¼æ¥è§„åˆ™æ¥çœ‹ï¼Œä½¿ç”¨ path.resolve æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„å‚æ•° to çš„è®¾ç½®ã€‚ ä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹ï¼Œä½¿ç”¨ copyDir æ–¹æ³•æ—¶ï¼Œå‚æ•°å¦‚ä½•è®¾ç½®ï¼š å°† copyDir çš„å‚æ•° from è®¾ç½®ä¸º path.resolve(__dirname, `./template/$&#123;type&#125;`)ï¼Œ å…¶ä¸­ __dirname æ˜¯ç”¨æ¥åŠ¨æ€è·å–å½“å‰æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚æ¯”å¦‚åœ¨ bin&#x2F;index.js æ–‡ä»¶ä¸­ä½¿ç”¨ __dirname ï¼Œ__dirname è¡¨ç¤ºå°±æ˜¯ bin&#x2F;index.js æ–‡ä»¶æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„ D:\\mortal\\packages\\mortal-cli\\binã€‚ å› ä¸ºæ¨¡æ¿æ–‡ä»¶å­˜æ”¾åœ¨ bin&#x2F;template æ–‡ä»¶å¤¹ä¸­ ï¼ŒcopyDir æ˜¯åœ¨ bin&#x2F;index.js ä¸­ä½¿ç”¨ï¼Œbin&#x2F;template æ–‡ä»¶å¤¹ç›¸å¯¹ bin&#x2F;index.js æ–‡ä»¶çš„è·¯å¾„æ˜¯ ./templateï¼Œæ‰€ä»¥æŠŠ path.resolve çš„å‚æ•° to è®¾ç½®ä¸º ./template/$&#123;type&#125;ï¼Œå…¶ä¸­ type æ˜¯ç”¨æˆ·æ‰€é€‰çš„æ¨¡æ¿ç±»å‹ã€‚ å‡è®¾ type çš„æ¨¡æ¿ç±»å‹æ˜¯ formï¼Œé‚£ä¹ˆ path.resolve(__dirname, `./template/form`) å¾—åˆ°çš„ç»å¯¹è·¯å¾„æ˜¯ D:\\mortal\\packages\\mortal-cli\\bin\\template\\formã€‚ å°† copyDir çš„å‚æ•° to è®¾ç½®ä¸º path.resolve(process.cwd(), `$&#123;name&#125;`)ï¼Œ å…¶ä¸­ process.cwd() å½“å‰ Node.js è¿›ç¨‹æ‰§è¡Œæ—¶çš„æ–‡ä»¶æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚æ¯”å¦‚åœ¨ bin æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ node index.js æ—¶ï¼Œprocess.cwd() å¾—åˆ°çš„æ˜¯ D:\\mortal\\packages\\mortal-cli\\binã€‚ è¿è¡Œ node index.js ç›¸å½“è¿è¡Œ mortal å‘½ä»¤ã€‚è€Œåœ¨ç°ä»£å‰ç«¯å·¥ç¨‹ä¸­éƒ½æ˜¯åœ¨ package.json æ–‡ä»¶ä¸­scripts å®šä¹‰äº†è„šæœ¬å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314&#123; &quot;name&quot;: &quot;app&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;mortal&quot;: &quot;mortal&quot; &#125;, &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;dependencies&quot;: &#123; &quot;mortal-cli&quot;: &quot;workspace:*&quot; &#125;&#125; è¿è¡Œ pnpm mortal å°±ç›¸å½“è¿è¡Œ mortal å‘½ä»¤ï¼Œé‚£ä¹ˆæ‰§è¡Œ pnpm mortal æ—¶ï¼Œå½“å‰ Node.js è¿›ç¨‹æ‰§è¡Œæ—¶çš„æ–‡ä»¶æ˜¯ package.json æ–‡ä»¶ã€‚é‚£ä¹ˆ process.cwd() å¾—åˆ°çš„æ˜¯ D:\\mortal\\examples\\appã€‚ å› ä¸ºè¦æŠŠ packages&#x2F;mortal&#x2F;bin&#x2F;template&#x2F;form è¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ° examples&#x2F;app&#x2F;src&#x2F;pages&#x2F;OrderPage ä¸­ï¼Œä¸” process.cwd() çš„å€¼æ˜¯D:\\mortal\\examples\\appï¼Œsrc&#x2F;pages æ–‡ä»¶å¤¹ç›¸å¯¹ examples&#x2F;app çš„è·¯å¾„æ˜¯ ./src/pages ï¼Œæ‰€ä»¥æŠŠ path.resolve çš„å‚æ•° to è®¾ç½®ä¸º ./src/pages/$&#123;name&#125;ï¼Œå…¶ä¸­ name æ˜¯ç”¨æˆ·æ‰€è¾“å…¥çš„æ¨¡æ¿åç§°ã€‚ 4.2ã€ç›®å½•å®ˆå«åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œçœ‹èƒ½ä¸èƒ½æˆåŠŸå¾—æŠŠ packages&#x2F;mortal&#x2F;bin&#x2F;template&#x2F;form è¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ° examples&#x2F;app&#x2F;src&#x2F;pages&#x2F;OrderPage ä¸­ã€‚ æŠ¥é”™äº†ï¼Œæç¤º examples&#x2F;app&#x2F;src&#x2F;pages æ–‡ä»¶å¤¹ä¸å­˜åœ¨ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æŠ¥é”™å‡ºç°ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç›®å½•å®ˆæŠ¤çš„æ–¹æ³• mkdirGuard ï¼Œæ¯”å¦‚ examples&#x2F;app&#x2F;src&#x2F;pages æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸€ä¸ª examples&#x2F;app&#x2F;src&#x2F;pages æ–‡ä»¶å¤¹ã€‚ åœ¨ bin&#x2F;copy.js æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132const copydir = require(&quot;copy-dir&quot;);const fs = require(&quot;fs&quot;);const path = require(&quot;path&quot;);function mkdirGuard(target) &#123; try &#123; fs.mkdirSync(target, &#123; recursive: true &#125;); &#125; catch (e) &#123; mkdirp(target); function mkdirp(dir) &#123; if (fs.existsSync(dir)) &#123; return true; &#125; const dirname = path.dirname(dir); mkdirp(dirname); fs.mkdirSync(dir); &#125; &#125;&#125;function copyDir(form, to, options) &#123; mkdirGuard(to); copydir.sync(form, to, options);&#125;function checkMkdirExists(path) &#123; return fs.existsSync(path);&#125;exports.checkMkdirExists = checkMkdirExists;exports.mkdirGuard = mkdirGuard;exports.copyDir = copyDir; fs.mkdirSync çš„è¯­æ³•æ ¼å¼ï¼šfs.mkdirSync(path[, options])ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹ç›®å½•ã€‚ pathï¼šæ–‡ä»¶å¤¹ç›®å½•è·¯å¾„ï¼› optionsï¼šrecursive è¡¨ç¤ºæ˜¯å¦è¦åˆ›å»ºçˆ¶ç›®å½•ï¼Œtrue è¦ã€‚ fs.existsSync çš„è¯­æ³•æ ¼å¼ï¼šfs.existsSync(pach)ï¼Œæ£€æµ‹ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœç›®å½•å­˜åœ¨è¿”å› trueÂ ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨è¿”å›falseã€‚ pathï¼šæ–‡ä»¶å¤¹ç›®å½•è·¯å¾„ã€‚ path.dirname çš„è¯­æ³•æ ¼å¼ï¼špath.dirname(path)ï¼Œç”¨äºè·å–ç»™å®šè·¯å¾„çš„ç›®å½•åã€‚ pathï¼šæ–‡ä»¶è·¯å¾„ã€‚ åœ¨ mkdirGuard æ–¹æ³•å†…éƒ¨ï¼Œå½“è¦åˆ›å»ºçš„ç›®å½• target çˆ¶çº§ç›®å½•ä¸å­˜åœ¨æ—¶ï¼Œè°ƒç”¨fs.mkdirSync(target)ï¼Œä¼šæŠ¥é”™èµ° catch éƒ¨åˆ†é€»è¾‘ï¼Œåœ¨å…¶ä¸­é€’å½’åˆ›å»ºçˆ¶çº§ç›®å½•ï¼Œä½¿ç”¨ fs.existsSync(dir) æ¥åˆ¤æ–­çˆ¶çº§ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œæ¥ç»ˆæ­¢é€’å½’ã€‚è¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ fs.mkdirSync(dir) åˆ›å»ºçˆ¶çº§ç›®å½•è¦åœ¨ mkdirp(dirname) ä¹‹å‰è°ƒç”¨ï¼Œæ‰èƒ½å½¢æˆä¸€ä¸ªæ­£ç¡®çš„åˆ›å»ºé¡ºåºï¼Œå¦åˆ™åˆ›å»ºçˆ¶çº§ç›®å½•è¿‡ç¨‹ä¼šå› çˆ¶çº§ç›®å½•çš„çˆ¶çº§ç›®å½•ä¸å­˜åœ¨æŠ¥é”™ã€‚ æˆ‘ä»¬å†æ¬¡åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œçœ‹è¿™æ¬¡èƒ½ä¸èƒ½æˆåŠŸå¾—æŠŠ packages&#x2F;mortal&#x2F;bin&#x2F;template&#x2F;form è¿™ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ° examples&#x2F;app&#x2F;src&#x2F;pages&#x2F;OrderPage ä¸­ã€‚ æˆåŠŸæ·»åŠ ï¼Œæ·»åŠ ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š ç„¶åå†è¿è¡Œ pnpm mortal create -- --name=OrderPage å‘½ä»¤ï¼Œä¼šå‘ç°æ§åˆ¶å°æ‰“å°å‡ºæ¨¡æ¿å·²ç»å­˜åœ¨åœ¨æç¤ºã€‚ è¿™æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·ä¿®æ”¹åçš„æ¨¡æ¿æ–‡ä»¶ï¼Œè¿è¡Œå‘½ä»¤åè¢«é‡æ–°è¦†ç›–åˆ°åˆå§‹çŠ¶æ€ã€‚æ‰€ä»¥æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ ¡éªŒæ¨¡æ¿æ–‡ä»¶æ˜¯å¦å­˜åœ¨çš„ checkMkdirExists æ–¹æ³•ï¼Œå†…éƒ¨é‡‡ç”¨ fs.existsSync æ¥å®ç°ã€‚ 5ã€æ–‡ä»¶æ‹·è´æ¨¡å—æ–‡ä»¶æ‹·è´åˆ†ä¸‰æ­¥æ¥å®ç°ï¼Œä½¿ç”¨ fs.readFileSync è¯»å–è¢«æ‹·è´çš„æ–‡ä»¶å†…å®¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå†ä½¿ç”¨ fs.writeFileSync å†™å…¥æ–‡ä»¶å†…å®¹ã€‚ åœ¨ bin&#x2F;copy.js æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910function copyFile(from, to) &#123; const buffer = fs.readFileSync(from); const parentPath = path.dirname(to); mkdirGuard(parentPath); fs.writeFileSync(to, buffer);&#125;exports.copyFile = copyFile; æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ copyFile æ–¹æ³•ï¼Œåœ¨ bin&#x2F;index.js ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);const path = require(&quot;path&quot;);const &#123; inquirerPrompt &#125; = require(&quot;./inquirer&quot;);const &#123; copyDir &#125; = require(&quot;./copy&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; inquirerPrompt(argv).then((answers) =&gt; &#123; const &#123; name, type &#125; = answers; const isMkdirExists = checkMkdirExists( path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`) ); if (isMkdirExists) &#123; console.log(`$&#123;name&#125;/index.jsæ–‡ä»¶å·²ç»å­˜åœ¨`); &#125; else &#123; copyFile( path.resolve(__dirname, `./template/$&#123;type&#125;/index.js`), path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`), &#123; name, &#125; ); &#125; &#125;); &#125;).argv; copyFile å’Œ copyDir ä½¿ç”¨çš„åŒºåˆ«åœ¨å‚æ•°ï¼ŒcopyFile è¦æ±‚å‚æ•° from å’Œå‚æ•° to éƒ½ç²¾ç¡®åˆ°æ–‡ä»¶è·¯å¾„ã€‚ åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 6ã€åŠ¨æ€æ–‡ä»¶ç”Ÿæˆæ¨¡å—å‡è®¾è„šæ‰‹æ¶ä¸­æä¾›çš„æ¨¡æ¿æ–‡ä»¶ä¸­æŸäº›ä¿¡æ¯éœ€è¦æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å‚æ•°æ¥åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ã€‚ æ¯”å¦‚ä¸‹é¢æ¨¡æ¿æ–‡ä»¶ä¸­ App è¦åŠ¨æ€æ›¿æ¢æˆç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å‚æ•° name çš„å€¼ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ 12345import React from &quot;react&quot;;const App = () =&gt; &#123; return &lt;div&gt;&lt;/div&gt;;&#125;;export default App; è¿™é‡Œæ¨èä½¿ç”¨å¼€æºåº“mustacheæ¥å®ç°ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… copy-dir ã€‚ 1pnpm add mustache --F mortal-cli æˆ‘ä»¬åœ¨ packages&#x2F;mortal-cli&#x2F;bin&#x2F;template&#x2F;form æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª index.tpl æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567import React from &#x27;react&#x27;;const &#123;&#123;name&#125;&#125; = () =&gt; &#123; return ( &lt;div&gt;&lt;/div&gt; );&#125;;export default &#123;&#123;name&#125;&#125;; å…ˆå†™ä¸€ä¸ª readTemplate æ–¹æ³•æ¥è¯»å–è¿™ä¸ª index.tpl åŠ¨æ€æ¨¡æ¿æ–‡ä»¶å†…å®¹ã€‚åœ¨ bin&#x2F;copy.js æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678const Mustache = require(&quot;mustache&quot;);function readTemplate(path, data = &#123;&#125;) &#123; const str = fs.readFileSync(path, &#123; encoding: &quot;utf8&quot; &#125;); return Mustache.render(str, data);&#125;exports.readTemplate = readTemplate; readTemplate æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œpath åŠ¨æ€æ¨¡æ¿æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œdata åŠ¨æ€æ¨¡æ¿æ–‡ä»¶çš„é…ç½®æ•°æ®ã€‚ ä½¿ç”¨ Mustache.render(str, data) ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶å†…å®¹è¿”å›ï¼Œå› ä¸º Mustache.render çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ fs.readFileSync æ—¶è¦æŒ‡å®š encoding ç±»å‹ä¸º utf8ï¼Œå¦åˆ™ fs.readFileSync è¿”å› Buffer ç±»å‹æ•°æ®ã€‚ åœ¨å†™ä¸€ä¸ª copyTemplate æ–¹æ³•æ¥æ‹·è´æ¨¡æ¿æ–‡ä»¶åˆ°å¯¹åº”çš„åœ°æ–¹ï¼Œè·Ÿ copyFile æ–¹æ³•éå¸¸ç›¸ä¼¼ã€‚åœ¨ bin&#x2F;copy.js æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678function copyTemplate(from, to, data = &#123;&#125;) &#123; if (path.extname(from) !== &quot;.tpl&quot;) &#123; return copyFile(from, to); &#125; const parentToPath = path.dirname(to); mkdirGuard(parentToPath); fs.writeFileSync(to, readTemplate(from, data));&#125; path.extname(from) è¿”å›æ–‡ä»¶æ‰©å±•åï¼Œæ¯”å¦‚ path.extname(index.tpl) è¿”å› .tplã€‚ åœ¨ bin&#x2F;index.js ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);const path = require(&quot;path&quot;);const &#123; inquirerPrompt &#125; = require(&quot;./inquirer&quot;);const &#123; copyTemplate &#125; = require(&quot;./copy&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; inquirerPrompt(argv).then((answers) =&gt; &#123; const &#123; name, type &#125; = answers; const isMkdirExists = checkMkdirExists( path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`) ); if (isMkdirExists) &#123; console.log(`$&#123;name&#125;/index.jsæ–‡ä»¶å·²ç»å­˜åœ¨`); &#125; else &#123; copyTemplate( path.resolve(__dirname, `./template/$&#123;type&#125;/index.tpl`), path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`), &#123; name, &#125; ); &#125; &#125;); &#125;).argv; åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 6.1ã€mustache ç®€ä»‹ä»¥ä¸Šçš„æ¡ˆä¾‹æ˜¯ mustache æœ€ç®€å•çš„ä½¿ç”¨ï¼Œä¸‹é¢æ¥é¢å¤–ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯ã€‚ é¦–å…ˆæ¥ç†Ÿæ‚‰ä¸€ä¸‹ mustache çš„è¯­æ³•ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€äº›åœºæ™¯æ¥ä½¿ç”¨è¿™äº›è¯­æ³• &#123;&#123;key&#125;&#125; &#123;&#123;#key&#125;&#125; &#123;&#123;/key&#125;&#125; &#123;&#123;^key&#125;&#125; &#123;&#123;/key&#125;&#125; &#123;&#123;.&#125;&#125; &#123;&#123;&key&#125;&#125; 6.1.1ã€ç®€å•ç»‘å®šä½¿ç”¨ &#123;&#123;key&#125;&#125; è¯­æ³•ï¼Œkey è¦å’Œ Mustache.render æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰çš„å±æ€§åä¸€è‡´ã€‚ ä¾‹å¦‚ï¼š 1Mustache.render(&quot;&lt;span&gt;&#123;&#123;name&#125;&#125;&lt;/span&gt;&quot;, &#123; name: &quot;å¼ ä¸‰&quot; &#125;); è¾“å‡ºï¼š 1&lt;span&gt;å¼ ä¸‰&lt;/span&gt; 6.1.2ã€ç»‘å®šå­å±æ€§ä¾‹å¦‚ï¼š 1Mustache.render(&quot;&lt;span&gt;&#123;&#123;ifno.name&#125;&#125;&lt;/span&gt;&quot;, &#123; ifno: &#123; name: &quot;å¼ ä¸‰&quot; &#125; &#125;); è¾“å‡ºï¼š 1&lt;span&gt;å¼ ä¸‰&lt;/span&gt; 6.1.3ã€å¾ªç¯æ¸²æŸ“å¦‚æœ key å±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ &#123;&#123;#key&#125;&#125; &#123;&#123;/key&#125;&#125; è¯­æ³•æ¥å¾ªç¯å±•ç¤ºã€‚ å…¶ä¸­ &#123;&#123;#&#125;&#125; æ ‡è®°è¡¨ç¤ºä»è¯¥æ ‡è®°ä»¥åçš„å†…å®¹å…¨éƒ¨éƒ½è¦å¾ªç¯å±•ç¤ºï¼Œ&#123;&#123;/&#125;&#125;æ ‡è®°è¡¨ç¤ºå¾ªç¯ç»“æŸã€‚ ä¾‹å¦‚ï¼š 123Mustache.render(&quot;&lt;span&gt;&#123;&#123;#list&#125;&#125;&#123;&#123;name&#125;&#125;&#123;&#123;/list&#125;&#125;&lt;/span&gt;&quot;, &#123; list: [&#123; name: &quot;å¼ ä¸‰&quot; &#125;, &#123; name: &quot;æå››&quot; &#125;, &#123; name: &quot;ç‹äº”&quot; &#125;],&#125;); è¾“å‡ºï¼š 1&lt;span&gt;å¼ ä¸‰æå››ç‹äº”&lt;/span&gt; å¦‚æœ list çš„å€¼æ˜¯ [&#39;å¼ ä¸‰&#39;,&#39;æå››&#39;,&#39;ç‹äº”&#39;]ï¼Œè¦æŠŠ &#123;&#123;name&#125;&#125; æ›¿æ¢æˆ &#123;&#123;.&#125;&#125; æ‰å¯ä»¥æ¸²æŸ“ã€‚ 123Mustache.render(&quot;&lt;span&gt;&#123;&#123;#list&#125;&#125;&#123;&#123;.&#125;&#125;&#123;&#123;/list&#125;&#125;&lt;/span&gt;&quot;, &#123; list: [&quot;å¼ ä¸‰&quot;, &quot;æå››&quot;, &quot;ç‹äº”&quot;],&#125;); 6.1.4ã€å¾ªç¯ä¸­äºŒæ¬¡å¤„ç†æ•°æ®Mustache.render æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¸²æŸ“æ—¶å€™ä¼šæ‰§è¡Œå‡½æ•°è¾“å‡ºè¿”å›å€¼ï¼Œå‡½æ•°ä¸­å¯ä»¥ç”¨ this è·å–ç¬¬äºŒä¸ªå‚æ•°çš„ä¸Šä¸‹æ–‡ã€‚ ä¾‹å¦‚ï¼š 123456Mustache.render(&quot;&lt;span&gt;&#123;&#123;#list&#125;&#125;&#123;&#123;info&#125;&#125;&#123;&#123;/list&#125;&#125;&lt;/span&gt;&quot;, &#123; list: [&#123; name: &quot;å¼ ä¸‰&quot; &#125;, &#123; name: &quot;æå››&quot; &#125;, &#123; name: &quot;ç‹äº”&quot; &#125;], info() &#123; return this.name + &quot;,&quot;; &#125;,&#125;); è¾“å‡ºï¼š 1&lt;span&gt;å¼ ä¸‰,æå››,ç‹äº”,&lt;/span&gt; 6.1.5ã€æ¡ä»¶æ¸²æŸ“ä½¿ç”¨ &#123;&#123;#key&#125;&#125; &#123;&#123;/key&#125;&#125; è¯­æ³• å’Œ &#123;&#123;^key&#125;&#125; &#123;&#123;/key&#125;&#125; è¯­æ³•æ¥å®ç°æ¡ä»¶æ¸²æŸ“ï¼Œå½“ key ä¸º falseã€0ã€[]ã€&#123;&#125;ã€nullï¼Œæ—¢æ˜¯ key == false ä¸ºçœŸï¼Œ&#123;&#123;#key&#125;&#125; &#123;&#123;/key&#125;&#125; åŒ…è£¹çš„å†…å®¹ä¸æ¸²æŸ“ï¼Œ&#123;&#123;^key&#125;&#125; &#123;&#123;/key&#125;&#125; åŒ…è£¹çš„å†…å®¹æ¸²æŸ“ ä¾‹å¦‚ï¼š 123Mustache.render(&quot;&lt;span&gt;&#123;&#123;#show&#125;&#125;æ˜¾ç¤º&#123;&#123;/show&#125;&#125;&#123;&#123;^show&#125;&#125;éšè—&#123;&#123;/show&#125;&#125;&lt;/span&gt;&quot;, &#123; show: false,&#125;); è¾“å‡ºï¼š 1&lt;span&gt;éšè—&lt;/span&gt; 6.1.6ã€ä¸è½¬ä¹‰ HTML æ ‡ç­¾ä½¿ç”¨ &#123;&#123;&key&#125;&#125; è¯­æ³•æ¥å®ç°ã€‚ ä¾‹å¦‚ï¼š 123Mustache.render(&quot;&lt;span&gt;&#123;&#123;&amp;key&#125;&#125;&lt;/span&gt;&quot;, &#123; key: &quot;&lt;span&gt;æ ‡é¢˜&lt;/span&gt;&quot;,&#125;); è¾“å‡ºï¼š 1&lt;span&gt;&lt;span&gt;æ ‡é¢˜&lt;/span&gt;&lt;/span&gt; 7ã€è‡ªåŠ¨å®‰è£…ä¾èµ–æ¨¡å—å‡è®¾æ¨¡æ¿æ˜¯è¿™æ ·çš„ï¼š 123456789101112131415161718192021import React from &quot;react&quot;;import &#123; Button, Form, Input &#125; from &quot;antd&quot;;const App = () =&gt; &#123; const onFinish = (values) =&gt; &#123; console.log(&quot;Success:&quot;, values); &#125;; return ( &lt;Form onFinish=&#123;onFinish&#125; autoComplete=&quot;off&quot;&gt; &lt;Form.Item label=&quot;Username&quot; name=&quot;username&quot;&gt; &lt;Input /&gt; &lt;/Form.Item&gt; &lt;Form.Item&gt; &lt;Button type=&quot;primary&quot; htmlType=&quot;submit&quot;&gt; æäº¤ &lt;/Button&gt; &lt;/Form.Item&gt; &lt;/Form&gt; );&#125;;export default App; å¯ä»¥çœ‹åˆ°æ¨¡æ¿ä¸­ä½¿ç”¨äº† react å’Œ antd è¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå‡å¦‚ä½¿ç”¨æ¨¡æ¿çš„å·¥ç¨‹ä¸­æ²¡æœ‰å®‰è£…è¿™ä¸¤ä¸ªä¾èµ–ï¼Œæˆ‘ä»¬è¦å®ç°åœ¨ç”Ÿæˆæ¨¡æ¿è¿‡ç¨‹ä¸­å°±è‡ªåŠ¨å®‰è£…è¿™ä¸¤ä¸ªä¾èµ–ã€‚ æˆ‘ä»¬ä½¿ç”¨ Node ä¸­ child_process å­è¿›ç¨‹è¿™ä¸ªæ¨¡å—æ¥å®ç°ã€‚ åœ¨ child_process å­è¿›ç¨‹ä¸­çš„æœ€å¸¸ç”¨çš„è¯­æ³•æ˜¯ï¼š child_process.exec(command, options, callback) commandï¼šå‘½ä»¤ï¼Œæ¯”å¦‚ pnpm install optionsï¼šå‚æ•° cwdï¼šè®¾ç½®å‘½ä»¤è¿è¡Œç¯å¢ƒçš„è·¯å¾„ envï¼šç¯å¢ƒå˜é‡ timeoutï¼šè¿è¡Œæ‰§è¡Œç°åœ¨ callbackï¼šè¿è¡Œå‘½ä»¤ç»“æŸå›è°ƒï¼Œ(error, stdout, stderr) =&gt;&#123; &#125;ï¼Œæ‰§è¡ŒæˆåŠŸå error ä¸º nullï¼Œæ‰§è¡Œå¤±è´¥å error ä¸º Error å®ä¾‹ï¼Œstdoutã€stderr ä¸ºæ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ï¼Œå…¶æ ¼å¼é»˜è®¤æ˜¯å­—ç¬¦ä¸²ã€‚ åœ¨ bin æ–‡ä»¶å¤¹ä¸­æ–°å»º inquirer.js æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829const path = require(&quot;path&quot;);const &#123; exec &#125; = require(&quot;child_process&quot;);const LibraryMap = &#123; &quot;Ant Design&quot;: &quot;antd&quot;, iView: &quot;view-ui-plus&quot;, &quot;Ant Design Vue&quot;: &quot;ant-design-vue&quot;, Element: &quot;element-plus&quot;,&#125;;function install(cmdPath, options) &#123; const &#123; frame, library &#125; = options; const command = `pnpm add $&#123;frame&#125; &amp;&amp; pnpm add $&#123;LibraryMap[library]&#125;`; return new Promise(function (resolve, reject) &#123; exec( command, &#123; cwd: path.resolve(cmdPath), &#125;, function (error, stdout, stderr) &#123; console.log(&quot;error&quot;, error); console.log(&quot;stdout&quot;, stdout); console.log(&quot;stderr&quot;, stderr); &#125; ); &#125;);&#125;exports.install = install; åœ¨ install æ–¹æ³•ä¸­ exec çš„å‚æ•° command æ˜¯ pnpm å®‰è£…ä¾èµ–å‘½ä»¤ï¼Œå®‰è£…å¤šä¸ªä¾èµ–æ—¶ä½¿ç”¨ &amp;&amp; æ‹¼æ¥ã€‚å‚æ•° cwd æ˜¯æ‰€å®‰è£…ä¾èµ–å·¥ç¨‹çš„ package.json æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ process.cwd() è·å–ã€‚å·²ç»åœ¨ä¸Šæ–‡æåˆ°è¿‡ï¼Œprocess.cwd() æ˜¯å½“å‰Node.js è¿›ç¨‹æ‰§è¡Œæ—¶çš„æ–‡ä»¶æ‰€å±ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ æ¥ä¸‹æ¥ä½¿ç”¨ï¼Œåœ¨ bin&#x2F;index.js ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940#!/usr/bin/env nodeconst yargs = require(&quot;yargs&quot;);const path = require(&quot;path&quot;);const &#123; inquirerPrompt &#125; = require(&quot;./inquirer&quot;);const &#123; copyTemplate, checkMkdirExists &#125; = require(&quot;./copy&quot;);const &#123; install &#125; = require(&quot;./manager&quot;);yargs.command( [&quot;create&quot;, &quot;c&quot;], &quot;æ–°å»ºä¸€ä¸ªæ¨¡æ¿&quot;, function (yargs) &#123; return yargs.option(&quot;name&quot;, &#123; alias: &quot;n&quot;, demand: true, describe: &quot;æ¨¡æ¿åç§°&quot;, type: &quot;string&quot;, &#125;); &#125;, function (argv) &#123; inquirerPrompt(argv).then((answers) =&gt; &#123; const &#123; name, type &#125; = answers; const isMkdirExists = checkMkdirExists( path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`) ); if (isMkdirExists) &#123; console.log(`$&#123;name&#125;/index.jsæ–‡ä»¶å·²ç»å­˜åœ¨`); &#125; else &#123; copyTemplate( path.resolve(__dirname, `./template/$&#123;type&#125;/index.tpl`), path.resolve(process.cwd(), `./src/pages/$&#123;name&#125;/index.js`), &#123; name, &#125; ); install(process.cwd(), answers); &#125; &#125;); &#125;).argv; å½“æ‰§è¡Œå®Œ copyTemplate æ–¹æ³•åï¼Œå°±å¼€å§‹æ‰§è¡Œ install(process.cwd(), answers) è‡ªåŠ¨å®‰è£…æ¨¡æ¿ä¸­æ‰€éœ€çš„ä¾èµ–ã€‚ åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œçœ‹èƒ½ä¸èƒ½è‡ªåŠ¨å®‰è£…ä¾èµ–ã€‚ ç­‰å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œè§‚å¯Ÿ examples\\app\\package.json æ–‡ä»¶ä¸­çš„ dependencies å€¼æ˜¯ä¸æ˜¯æ·»åŠ äº† antd å’Œ react ä¾èµ–ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œå‘½ä»¤ä¸­ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç°è±¡ï¼Œå…‰æ ‡ä¸€ç›´åœ¨é—ªçƒï¼Œå¥½åƒå¡ä½äº†ï¼Œå…¶ä¸­æ˜¯ä¾èµ–åœ¨å®‰è£…ã€‚è¿™é‡Œæˆ‘ä»¬è¦å¼•å…¥ä¸€ä¸ªåŠ è½½åŠ¨ç”»ï¼Œæ¥è§£å†³è¿™ä¸ªä¸å‹å¥½çš„ç°è±¡ã€‚ è¿™é‡Œæ¨èä½¿ç”¨å¼€æºåº“oraæ¥å®ç°åŠ è½½åŠ¨ç”»ã€‚ è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… ora ã€‚ 1pnpm add ora@5.4.1 --F mortal-cli åœ¨ bin&#x2F;inquirer.js ä¿®æ”¹ä»£ç ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536const path = require(&quot;path&quot;);const &#123; exec &#125; = require(&quot;child_process&quot;);const ora = require(&quot;ora&quot;);const LibraryMap = &#123; &quot;Ant Design&quot;: &quot;antd&quot;, iView: &quot;view-ui-plus&quot;, &quot;Ant Design Vue&quot;: &quot;ant-design-vue&quot;, Element: &quot;element-plus&quot;,&#125;;function install(cmdPath, options) &#123; const &#123; frame, library &#125; = options; const command = `pnpm add $&#123;frame&#125; &amp;&amp; pnpm add $&#123;LibraryMap[library]&#125;`; return new Promise(function (resolve, reject) &#123; const spinner = ora(); spinner.start(`æ­£åœ¨å®‰è£…ä¾èµ–ï¼Œè¯·ç¨ç­‰`); exec( command, &#123; cwd: path.resolve(cmdPath), &#125;, function (error) &#123; if (error) &#123; reject(); spinner.fail(`ä¾èµ–å®‰è£…å¤±è´¥`); return; &#125; spinner.succeed(`ä¾èµ–å®‰è£…æˆåŠŸ`); resolve(); &#125; ); &#125;);&#125;exports.install = install; åœ¨ app æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œ pnpm mortal create -- --name=OrderPageï¼Œçœ‹ä¸€ä¸‹æ‰§è¡Œæ•ˆæœã€‚ 8ã€å‘å¸ƒå’Œå®‰è£…åœ¨ packages&#x2F;mortal æ–‡ä»¶å¤¹ç›®å½•ä¸‹è¿è¡Œï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…å°†è„šæ‰‹æ¶å‘å¸ƒåˆ° npm ä¸Šã€‚ 1pnpm publish --F mortal-cli å‘å¸ƒæˆåŠŸåã€‚æˆ‘ä»¬åœ¨ä¸€ä¸ªä»»æ„å·¥ç¨‹ä¸­ï¼Œæ‰§è¡Œ pnpm add mortal-cli -D å®‰è£… mortal-cli è„šæ‰‹æ¶ä¾èµ–æˆåŠŸåï¼Œåœ¨å·¥ç¨‹ä¸­æ‰§è¡Œ pnpm mortal create -- --name=OrderPage å‘½ä»¤å³å¯ã€‚ ç»“è¯­ä¸Šé¢åªæ•™å¤§å®¶å®ç°ä¸€ä¸ªæœ€æœ€ç®€å•çš„è„šæ‰‹æ¶ã€‚å…¶åŠŸèƒ½å°±åªæœ‰ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ç”Ÿæˆã€‚è™½ç„¶ç®€å•ï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯è„šæ‰‹æ¶çš„å…¥é—¨åŠŸï¼Œä»£ç å·²ç»ä¸Šä¼ åˆ° GitHubï¼Œå¤§å®¶å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œè‡ªå·±å®è·µä¸€ä¸‹ï¼Œå…‰çœ‹ä¸ç»ƒæ°¸è¿œå­¦ä¸ä¼šã€‚ å­¦ä¼šäº†ï¼Œå¯ä»¥æ€»ç»“ä¸€äº›å¹³æ—¶çš„ä¸šåŠ¡ä»£ç ï¼Œå½¢æˆæœ€ä½³å®è·µï¼Œä½¿ç”¨è„šæ‰‹æ¶ä½œä¸ºè½½ä½“å±•ç°å‡ºæ¥ï¼Œæå‡è‡ªå·±çš„èŒåœºç«äº‰åŠ›ã€‚","tags":["monorepo","scaffold"],"categories":["frontend"]},{"title":"Nginxå’ŒPHPçš„é…ç½®","path":"/2024/03/01/Nginxå’ŒPHPçš„é…ç½®/","content":"åŸæ–‡åœ°å€Nginx å’Œ PHP çš„é…ç½® - çŸ¥ä¹ é‡‡ç”¨ nginx+php ä½œä¸º webserver çš„æ¶æ„æ¨¡å¼ï¼Œåœ¨ç°å¦‚ä»Šè¿ç”¨ç›¸å½“å¹¿æ³›ã€‚ç„¶è€Œç¬¬ä¸€æ­¥éœ€è¦å®ç°çš„æ˜¯å¦‚ä½•è®© nginx æ­£ç¡®çš„è°ƒç”¨ phpã€‚ç”±äº nginx è°ƒç”¨ php å¹¶ä¸æ˜¯å¦‚åŒè°ƒç”¨ä¸€ä¸ªé™æ€æ–‡ä»¶é‚£ä¹ˆç›´æ¥ç®€å•ï¼Œæ˜¯éœ€è¦åŠ¨æ€æ‰§è¡Œ php è„šæœ¬ã€‚æ‰€ä»¥æ¶‰åŠåˆ°äº†å¯¹ nginx.conf æ–‡ä»¶çš„é…ç½®ã€‚è¿™ä¸€æ­¥å¯¹æ–°æ‰‹è€Œè¨€éœ€è¦åŠ¨ç‚¹è„‘ç­‹ï¼Œå¯¹äºä¸€èˆ¬çš„ç†Ÿæ‰‹è€Œè¨€ï¼Œä¹Ÿæœ‰ä¸å°‘åŒå­¦å¹¶æ²¡æœ‰æé€å½»ä¸ºä½•è¦å¦‚æ­¤è¿™èˆ¬é…ç½®ã€‚æœ¬æ–‡çš„ä¸»è¦å†…å®¹ä¸ºå¦‚ä½•åœ¨ nginx server ä¸­æ­£ç¡®é…ç½® php è°ƒç”¨æ–¹æ³•ï¼Œä»¥åŠé…ç½®çš„åŸºæœ¬åŸç†ã€‚ ä¸€ã€nginx é…ç½®æ–‡ä»¶ä¿®æ”¹é…ç½®æ–‡ä»¶ä½ç½®Nginx çš„é…ç½®æ–‡ä»¶é»˜è®¤ä½ç½®ä¸ºï¼š/etc/nginx/nginx.conf åœ¨æˆ‘çš„ç¯å¢ƒä¸­ nginx.conf åœ¨ /etc/nginx/nginx.conf ä½¿ç”¨ vim æ‰“å¼€æ–‡ä»¶ nginx.conf 1vim /etc/nginx/nginx.conf é…ç½®æ–‡ä»¶åˆ†æ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384# nginxè¿è¡Œçš„ç”¨æˆ·åuser nginx;# nginxå¯åŠ¨è¿›ç¨‹,é€šå¸¸è®¾ç½®æˆå’Œcpuçš„æ•°é‡ç›¸ç­‰ï¼Œè¿™é‡Œä¸ºè‡ªåŠ¨worker_processes auto;# errorlogæ–‡ä»¶ä½ç½®error_log /var/log/nginx/error.log;# pidæ–‡ä»¶åœ°å€ï¼Œè®°å½•äº†nginxçš„pidï¼Œæ–¹ä¾¿è¿›ç¨‹ç®¡ç†pid /run/nginx.pid;# Load dynamic modules. See /usr/share/nginx/README.dynamic.# ç”¨æ¥åŠ è½½å…¶ä»–åŠ¨æ€æ¨¡å—çš„é…ç½®include /usr/share/nginx/modules/*.conf;# å·¥ä½œæ¨¡å¼å’Œè¿æ¥æ•°ä¸Šé™events &#123; # æ¯ä¸ªworker_processesçš„æœ€å¤§å¹¶å‘é“¾æ¥æ•° # å¹¶å‘æ€»æ•°ï¼šworker_processes*worker_connections worker_connections 1024;&#125;# ä¸æä¾›httpæœåŠ¡ç›¸å…³çš„ä¸€äº›é…ç½®å‚æ•°ç±»ä¼¼çš„è¿˜æœ‰mailhttp &#123; # è®¾ç½®æ—¥å¿—çš„æ ¼å¼ log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; # access_logè®°å½•è®¿é—®çš„ç”¨æˆ·ã€é¡µé¢ã€æµè§ˆå™¨ã€ipå’Œå…¶ä»–çš„è®¿é—®ä¿¡æ¯ access_log /var/log/nginx/access.log main; # è¿™éƒ¨åˆ†ä¸‹é¢ä¼šå•ç‹¬è§£é‡Š # è®¾ç½®nginxæ˜¯å¦ä½¿ç”¨sendfileå‡½æ•°è¾“å‡ºæ–‡ä»¶ sendfile on; # æ•°æ®åŒ…æœ€å¤§æ—¶å‘åŒ…(ä½¿ç”¨Nagleç®—æ³•) tcp_nopush on; # ç«‹åˆ»å‘é€æ•°æ®åŒ…(ç¦ç”¨Nagleç®—æ³•) tcp_nodelay on; # é“¾æ¥è¶…æ—¶æ—¶é—´ keepalive_timeout 65; # è¿™ä¸ªæˆ‘ä¹Ÿä¸æ¸…æ¥š... types_hash_max_size 2048; # å¼•å…¥æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨ include /etc/nginx/mime.types; # é»˜è®¤æ–‡ä»¶ç±»å‹ default_type application/octet-stream; # Load modular configuration files from the /etc/nginx/conf.d directory. # See http://nginx.org/en/docs/ngx_core_module.html#include # for more information. include /etc/nginx/conf.d/*.conf; # httpæœåŠ¡ä¸Šæ”¯æŒè‹¥å¹²è™šæ‹Ÿä¸»æœºã€‚ # æ¯ä¸ªè™šæ‹Ÿä¸»æœºä¸€ä¸ªå¯¹åº”çš„serveré…ç½®é¡¹ # é…ç½®é¡¹é‡Œé¢åŒ…å«è¯¥è™šæ‹Ÿä¸»æœºç›¸å…³çš„é…ç½®ã€‚ server &#123; # ç«¯å£ listen 80 default_server; listen [::]:80 default_server; # è®¿é—®çš„åŸŸå server_name _; # é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ï¼ˆwwwç›®å½•ï¼‰ root /usr/share/nginx/html; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; # é»˜è®¤è¯·æ±‚ location / &#123; &#125; # é”™è¯¯é¡µ(404) error_page 404 /404.html; location = /40x.html &#123; &#125; # é”™è¯¯é¡µ(50X) error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125; &#125;&#125; è¦ç‚¹è¯´æ˜1ã€å…³äº error_log å¯ä»¥è®¾ç½® log çš„ç±»å‹(è®°å½•ä»€ä¹ˆçº§åˆ«çš„ä¿¡æ¯)æœ‰ï¼šdebugã€infoã€noticeã€warnã€errorã€crit å‡ ç§ 2ã€å…³äº sendfileä¸€èˆ¬çš„ç½‘ç»œä¼ è¾“è¿‡ç¨‹ç¡¬ç›˜ &gt;&gt; kernel buffer &gt;&gt; user buffer&gt;&gt; kernel socket buffer &gt;&gt;åè®®æ ˆä½¿ç”¨ sendfile åç¡¬ç›˜ &gt;&gt; kernel buffer (å¿«é€Ÿæ‹·è´åˆ° kernelsocket buffer) &gt;&gt;åè®®æ ˆå¯ä»¥æ˜¾è‘—æé«˜ä¼ è¾“æ€§èƒ½ã€‚ 3ã€tcp_nopush å’Œ tcp_nodelaytcp_nopush åªæœ‰åœ¨å¯ç”¨äº† sendfile æ—¶æ‰èµ·ä½œç”¨ï¼Œåœ¨å¯ç”¨ tcp_nopush åï¼Œç¨‹åºæ¥æ”¶åˆ°äº†æ•°æ®åŒ…åä¸ä¼šé©¬ä¸Šå‘å‡ºï¼Œè€Œæ˜¯ç­‰å¾…æ•°æ®åŒ…æœ€å¤§æ—¶ä¸€æ¬¡æ€§å‘å‡ºï¼Œå¯ä»¥ç¼“è§£ç½‘ç»œæ‹¥å µã€‚(Nagle åŒ–)ç›¸å tcp_nodelay åˆ™æ˜¯ç«‹å³å‘å‡ºæ•°æ®åŒ…. php fastcgi é…ç½®åˆ†æå®Œäº†é…ç½®æ–‡ä»¶åå¼€å§‹é…ç½®ç¯å¢ƒã€‚ å› ä¸ºåªæ˜¯é…ç½® PHP çš„æœåŠ¡å™¨ï¼Œè€Œä¸”åªä½¿ç”¨ä¸€ä¸ªç«¯å£æ‰€ä»¥åªéœ€è¦æ”¹åŠ¨ server éƒ¨åˆ† åœ¨ vim ä¸­ç‚¹å‡»â€˜iâ€™è¿›å…¥ç¼–è¾‘æ¨¡å¼ 123456789101112131415161718192021222324252627282930313233343536373839server &#123; listen 80 default_server; listen [::]:80 default_server; # è¿™é‡Œæ”¹åŠ¨äº†ï¼Œä¹Ÿå¯ä»¥å†™ä½ çš„åŸŸå server_name 192.168.17.26; # é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ï¼ˆwwwç›®å½•ï¼‰ root /var/www/; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; # è¿™é‡Œæ”¹åŠ¨äº† å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§° index index.php index.html index.htm; &#125; error_page 404 /404.html; location = /40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125; # è¿™é‡Œæ–°åŠ çš„ # PHP è„šæœ¬è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° FastCGIå¤„ç†. ä½¿ç”¨FastCGIåè®®é»˜è®¤é…ç½®. # FastcgiæœåŠ¡å™¨å’Œç¨‹åº(PHP,Python)æ²Ÿé€šçš„åè®®. location ~ \\.php$ &#123; # è®¾ç½®ç›‘å¬ç«¯å£ fastcgi_pass 127.0.0.1:9000; # è®¾ç½®nginxçš„é»˜è®¤é¦–é¡µæ–‡ä»¶(ä¸Šé¢å·²ç»è®¾ç½®è¿‡äº†ï¼Œå¯ä»¥åˆ é™¤) fastcgi_index index.php; # è®¾ç½®è„šæœ¬æ–‡ä»¶è¯·æ±‚çš„è·¯å¾„ fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; # å¼•å…¥fastcgiçš„é…ç½®æ–‡ä»¶ include fastcgi_params; &#125; &#125; ä¿®æ”¹å®Œæˆåå°† vim ç¼–è¾‘å™¨åˆ‡æ¢åˆ°ä¸€èˆ¬ä¸€åŠæ¨¡å¼(Esc),ç„¶åè¾“å…¥:wq ä¿å­˜é€€å‡ºã€‚ ä¹‹åé‡å¯ Nginx æœåŠ¡ 1service nginx restart ä»¥ä¸Šå°±é…ç½®æˆåŠŸäº†ï¼Œä½†æ˜¯ä¸Šé¢çš„é…ç½®åªæ˜¯ nginx é…ç½®éƒ¨åˆ†ï¼Œæ›´å¤šçš„å†…å®¹éœ€è¦ç»§ç»­å­¦ä¹ ã€‚ æµ‹è¯•æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•åˆ¤æ–­ Nginx é…ç½®æ˜¯å¦æˆåŠŸã€‚ åœ¨ Nginx çš„ç½‘ç«™æ ¹ç›®å½•(&#x2F;var&#x2F;www&#x2F;)ä¸‹åˆ›å»ºä¸€ä¸ª php æ–‡ä»¶ï¼Œéšä¾¿èµ·åæˆ‘çš„æ˜¯ php_info.php å†…å®¹å¦‚ä¸‹ï¼š 1234&lt;?php // é¡ºä¾¿å¯ä»¥çœ‹ä¸€ä¸‹phpçš„æ‰©å±•å…¨ä¸å…¨ phpinfo(); è¿›å…¥ä½ çš„ç½‘ç«™çœ‹çœ‹èƒ½ä¸èƒ½æ‰“å¼€æ–‡ä»¶ä½ çš„ ip&#x2F;æ–‡ä»¶å ä¾‹å¦‚ï¼š192.168.17.26&#x2F;php_info.php ok,æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é…ç½®æˆåŠŸäº†ã€‚ äºŒã€nginx+php è¿è¡ŒåŸç†ä¸Šè¾¹æˆ‘ä»¬å·²ç»é…ç½®æˆåŠŸäº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“çš„åŸç†ã€‚ é¦–å…ˆç®€å•çš„è®²ä¸€è®²åŸç†ï¼Œç›®å‰ä¸»æµçš„ nginx+php çš„è¿è¡ŒåŸç†å¦‚ä¸‹ï¼š1ã€nginx çš„workerè¿›ç¨‹ç›´æ¥ç®¡ç†æ¯ä¸€ä¸ªè¯·æ±‚åˆ° nginx çš„ç½‘ç»œè¯·æ±‚ã€‚ 2ã€å¯¹äº php è€Œè¨€ï¼Œç”±äºåœ¨æ•´ä¸ªç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹ä¸­ php æ˜¯ä¸€ä¸ª cgi ç¨‹åºçš„è§’è‰²ï¼Œæ‰€ä»¥é‡‡ç”¨åä¸ºphp-fpmçš„è¿›ç¨‹ç®¡ç†ç¨‹åºæ¥å¯¹è¿™äº›è¢«è¯·æ±‚çš„ php ç¨‹åºè¿›è¡Œç®¡ç†ã€‚php-fpm ç¨‹åºä¹Ÿå¦‚åŒ nginx ä¸€æ ·ï¼Œéœ€è¦ç›‘å¬ç«¯å£ï¼Œå¹¶ä¸”æœ‰ master å’Œ worker è¿›ç¨‹ã€‚worker è¿›ç¨‹ç›´æ¥ç®¡ç†æ¯ä¸€ä¸ª php è¿›ç¨‹ã€‚ 3ã€å…³äº fastcgiï¼šfastcgi æ˜¯ä¸€ç§è¿›ç¨‹ç®¡ç†å™¨ï¼Œç®¡ç† cgi è¿›ç¨‹ã€‚å¸‚é¢ä¸Šæœ‰å¤šç§å®ç°äº† fastcgi åŠŸèƒ½çš„è¿›ç¨‹ç®¡ç†å™¨ï¼Œphp-fpm å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚å†æä¸€ç‚¹ï¼Œphp-fpm ä½œä¸ºä¸€ç§ fast-cgi è¿›ç¨‹ç®¡ç†æœåŠ¡ï¼Œä¼šç›‘å¬ç«¯å£ï¼Œä¸€èˆ¬é»˜è®¤ç›‘å¬9000ç«¯å£ï¼Œå¹¶ä¸”æ˜¯ç›‘å¬æœ¬æœºï¼Œä¹Ÿå°±æ˜¯åªæ¥æ”¶æ¥è‡ªæœ¬æœºçš„ç«¯å£è¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸è¾“å…¥å‘½ä»¤ netstat -nlpt|grep php-fpm ä¼šå¾—åˆ°ï¼štcp 0 0 127.0.0.1:9000 0.0.0.0:* LISTEN 1057&#x2F;php-fpmè¿™é‡Œçš„ 127.0.0.1:9000 å°±æ˜¯ç›‘å¬æœ¬æœº 9000 ç«¯å£çš„æ„æ€ã€‚ 4ã€å…³äº fastcgi çš„é…ç½®æ–‡ä»¶ï¼Œç›®å‰ fastcgi çš„é…ç½®æ–‡ä»¶ä¸€èˆ¬æ”¾åœ¨ nginx.conf åŒçº§ç›®å½•ä¸‹ï¼Œé…ç½®æ–‡ä»¶å½¢å¼ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ï¼šfastcgi.conf å’Œ fastcgi_paramsã€‚ä¸åŒçš„ nginx ç‰ˆæœ¬ä¼šæœ‰ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åŒºåˆ«ï¼šfastcgi_parames æ–‡ä»¶ä¸­ç¼ºå°‘ä¸‹åˆ—é…ç½®ï¼šfastcgi_param SCRIPT_FILENAME fastcgi_script_name;æˆ‘ä»¬å¯ä»¥æ‰“å¼€ fastcgi_parames æ–‡ä»¶åŠ ä¸Šä¸Šè¿°è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨è¦ä½¿ç”¨é…ç½®çš„åœ°æ–¹åŠ¨æ€æ·»åŠ ã€‚ä½¿å¾—è¯¥é…ç½®ç”Ÿæ•ˆã€‚ 5ã€å½“éœ€è¦å¤„ç†phpè¯·æ±‚æ—¶ï¼Œnginxçš„workerè¿›ç¨‹ä¼šå°†è¯·æ±‚ç§»äº¤ç»™php-fpmçš„workerè¿›ç¨‹è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯æœ€å¼€å¤´æ‰€è¯´çš„nginxè°ƒç”¨äº†phpï¼Œå…¶å®ä¸¥æ ¼å¾—è®²æ˜¯nginxé—´æ¥è°ƒç”¨phpã€‚ äº†è§£äº†ä¸Šé¢çš„è¿™äº”ä¸ªç®€å•åŸç†ï¼Œåœ¨ nginx ä¸­é…ç½® php è°ƒç”¨æ–¹æ³•å°±å˜å¾—æ˜“å¦‚åæŒã€‚ é…ç½®æ–‡ä»¶è¯¦è§£ï¼š 12345678910server &#123; listen 8011; server_name test.cn; location ~ \\.php?.*$ &#123; root /share/test; fastcgi_pass 127.0.0.1:9000; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; &#125;&#125; 1ã€ç¬¬ä¸€ä¸ªå¤§æ‹¬å· server{ }ï¼šä¸å¿…å¤šè¯´ï¼Œä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„ serverï¼Œ2ã€listen 8011ï¼šä»£è¡¨è¯¥ server ç›‘å¬ 8011 ç«¯å£3ã€location ~ .php?.*${ }ï¼šä»£è¡¨ä¸€ä¸ªèƒ½åŒ¹é…å¯¹åº” uri çš„ locationï¼Œç”¨äºåŒ¹é…ä¸€ç±» uriï¼Œå¹¶å¯¹æ‰€åŒ¹é…çš„ uri è¯·æ±‚åšè‡ªå®šä¹‰çš„é€»è¾‘ã€é…ç½®ã€‚è¿™é‡Œçš„ locationï¼ŒåŒ¹é…äº†æ‰€æœ‰å¸¦.php çš„ uri è¯·æ±‚ï¼Œä¾‹å¦‚ï¼šhttp://192.168.244.128:8011&#x2F;test.php&#x2F;asdasd http://192.168.244.128:8011&#x2F;index.php ç­‰4ã€root &#x2F;share&#x2F;testï¼šè¯·æ±‚èµ„æºæ ¹ç›®å½•ï¼Œå‘Šè¯‰åŒ¹é…åˆ°è¯¥ location ä¸‹çš„ uri åˆ°&#x2F;share&#x2F;teset æ–‡ä»¶å¤¹ä¸‹å»å¯»æ‰¾åŒåèµ„æºã€‚5ã€fastcgi_pass 127.0.0.1:9000ï¼šè¿™è¡Œå¼€å§‹æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼šè¿™è¡Œä»£ç çš„æ„æ€æ˜¯ï¼Œå°†è¿›å…¥åˆ°è¯¥ location å†…çš„ uri è¯·æ±‚çœ‹åšæ˜¯ cgi ç¨‹åºï¼Œå¹¶å°†è¯·æ±‚å‘é€åˆ° 9000 ç«¯å£ï¼Œäº¤ç”± php-fpm å¤„ç†ã€‚6ã€fastcgi_param SCRIPT_FILENAME fastcgi_script_name; ï¼šè¿™è¡Œé…ç½®æ„æ€æ˜¯ï¼šåŠ¨æ€æ·»åŠ äº†ä¸€è¡Œ fastcgi é…ç½®ï¼Œé…ç½®å†…å®¹ä¸º SCRIPT_FILENAMEï¼Œå‘ŠçŸ¥ç®¡ç†è¿›ç¨‹ï¼Œcgi è„šæœ¬åç§°ã€‚ç”±äºæˆ‘çš„ nginx ä¸­åªæœ‰ fastcgi_params æ–‡ä»¶ï¼Œæ²¡æœ‰ fastcgi.conf æ–‡ä»¶ï¼Œæ‰€ä»¥è¦ä½¿ php-fpm çŸ¥é“ SCRIPT_FILENAME çš„å…·ä½“å€¼ï¼Œå°±å¿…é¡»è¦åŠ¨æ€çš„æ·»åŠ è¿™è¡Œé…ç½®ã€‚7ã€include fastcgi_params; å¼•å…¥ fastcgi é…ç½®æ–‡ä»¶ä»¥ä¸Šå°±æ˜¯æœ€ç®€æ´ç‰ˆçš„ nginx å¯åŠ¨ php è„šæœ¬çš„æœ€ç®€é…ç½®ï¼Œå½“é‡å¯ nginx ä¹‹åï¼Œåœ¨&#x2F;share&#x2F;test ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª xx.php æ–‡ä»¶ï¼Œè¾“å…¥ä¿å­˜ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® localhost:8011&#x2F;xx.php å°±å¯ä»¥åœ¨ç½‘é¡µä¸Šæ˜¾ç¤º hello world äº†ã€‚ ä¸‰ã€å¤–ç½‘è®¿é—®å†…ç½‘è®¾ç½®å¤–ç½‘ IPï¼šhttp://58.62.21.107:8382 æ˜ å°„å†…ç½‘æœåŠ¡å™¨ IP 192.168.17.56 çš„ 82 ç«¯å£ï¼Œå³ï¼š192.168.17.56:82,éœ€è¦åœ¨nginx.conf é…ç½®æ–‡ä»¶ä¸­å¼€æ”¾ 82 ç«¯å£ç»™ å¤–ç½‘è®¿é—®ï¼Œå³ä¸‹é¢çš„é…ç½®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104[root@ceshi www]# cat /etc/nginx/nginx.conf# For more information on configuration, see:# * Official English Documentation: http://nginx.org/en/docs/# * Official Russian Documentation: http://nginx.org/ru/docs/user nginx;worker_processes auto;error_log /var/log/nginx/error.log;pid /run/nginx.pid;# Load dynamic modules. See /usr/share/nginx/README.dynamic.include /usr/share/nginx/modules/*.conf;events &#123; worker_connections 1024;&#125;http &#123; log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; access_log /var/log/nginx/access.log main; sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; include /etc/nginx/mime.types; default_type application/octet-stream; # Load modular configuration files from the /etc/nginx/conf.d directory. # See http://nginx.org/en/docs/ngx_core_module.html#include # for more information. include /etc/nginx/conf.d/*.conf; server &#123; listen 82 default_server; # æœåŠ¡å™¨ç«¯å£ï¼Œå’Œå¤–ç½‘æ˜ å°„çš„éœ€ä¿æŒä¸€è‡´ listen [::]:82 default_server; # æœåŠ¡å™¨ç«¯å£ï¼Œå’Œå¤–ç½‘æ˜ å°„çš„éœ€ä¿æŒä¸€è‡´ server_name 192.168.17.56; root /data/www/; # Load configuration files for the default server block. include /etc/nginx/default.d/*.conf; location / &#123; &#125; error_page 404 /404.html; location = /40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125; # PHP è„šæœ¬è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° FastCGIå¤„ç†. ä½¿ç”¨FastCGIåè®®é»˜è®¤é…ç½®. # FastcgiæœåŠ¡å™¨å’Œç¨‹åº(PHP,Python)æ²Ÿé€šçš„åè®®. location ~ \\.php$ &#123; # è®¾ç½®ç›‘å¬ç«¯å£ fastcgi_pass 127.0.0.1:9000; # è®¾ç½®nginxçš„é»˜è®¤é¦–é¡µæ–‡ä»¶(ä¸Šé¢å·²ç»è®¾ç½®è¿‡äº†ï¼Œå¯ä»¥åˆ é™¤) fastcgi_index index.php; # è®¾ç½®è„šæœ¬æ–‡ä»¶è¯·æ±‚çš„è·¯å¾„ fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; # å¼•å…¥fastcgiçš„é…ç½®æ–‡ä»¶ include fastcgi_params; &#125; &#125;# Settings for a TLS enabled server.## server &#123;# listen 443 ssl http2 default_server;# listen [::]:443 ssl http2 default_server;# server_name _;# root /usr/share/nginx/html;## ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;;# ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;;# ssl_session_cache shared:SSL:1m;# ssl_session_timeout 10m;# ssl_ciphers HIGH:!aNULL:!MD5;# ssl_prefer_server_ciphers on;## # Load configuration files for the default server block.# include /etc/nginx/default.d/*.conf;## location / &#123;# &#125;## error_page 404 /404.html;# location = /40x.html &#123;# &#125;## error_page 500 502 503 504 /50x.html;# location = /50x.html &#123;# &#125;# &#125;&#125; ä»¥ä¸Šå†…å®¹å¸Œæœ›å¸®åŠ©åˆ°å¤§å®¶ï¼Œå¾ˆå¤š PHPer åœ¨è¿›é˜¶çš„æ—¶å€™æ€»ä¼šé‡åˆ°ä¸€äº›é—®é¢˜å’Œç“¶é¢ˆï¼Œä¸šåŠ¡ä»£ç å†™å¤šäº†æ²¡æœ‰æ–¹å‘æ„Ÿï¼Œä¸çŸ¥é“è¯¥ä»é‚£é‡Œå…¥æ‰‹å»æå‡ï¼Œå¯¹æ­¤æˆ‘æ•´ç†äº†ä¸€äº›èµ„æ–™ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šåˆ†å¸ƒå¼æ¶æ„ã€é«˜å¯æ‰©å±•ã€é«˜æ€§èƒ½ã€é«˜å¹¶å‘ã€æœåŠ¡å™¨æ€§èƒ½è°ƒä¼˜ã€TP6ï¼Œlaravelï¼ŒYII2ï¼ŒRedisï¼ŒSwooleã€Swoftã€Kafkaã€Mysql ä¼˜åŒ–ã€shell è„šæœ¬ã€Dockerã€å¾®æœåŠ¡ã€Nginx ç­‰å¤šä¸ªçŸ¥è¯†ç‚¹é«˜çº§è¿›é˜¶å¹²è´§éœ€è¦çš„å¯ä»¥å…è´¹åˆ†äº«ç»™å¤§å®¶ï¼Œéœ€è¦è¯·æˆ³è¿™é‡Œé“¾æ¥ æˆ–è€… çŸ¥ä¹ä¸“æ ","tags":["PHP","Nginx"],"categories":["Nginx"]},{"title":"SQLæ¦‚å¿µåŠæ•°æ®åº“è¡¨çš„åŸºæœ¬æ“ä½œ","path":"/2024/03/01/SQLæ¦‚å¿µåŠæ•°æ®åº“è¡¨çš„åŸºæœ¬æ“ä½œ/","content":"åŸæ–‡åœ°å€SQL æ¦‚å¿µåŠæ•°æ®åº“è¡¨çš„åŸºæœ¬æ“ä½œ - æ˜é‡‘ ä»‹ç»SQLä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹å…³äºæ•°æ®åº“çš„ä¸€äº›æ¦‚å¿µã€‚ ä»€ä¹ˆæ˜¯æ•°æ®åº“ æ•°æ®åº“ï¼ˆDatabaseï¼ŒDBï¼‰ï¼šæ˜¯ä¸€ä¸ªæœ‰ç»„ç»‡çš„ã€ç»Ÿä¸€ç®¡ç†çš„æ•°æ®é›†åˆã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®çš„åœ°æ–¹ã€‚ æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDatabase Management Systemï¼ŒDBMSï¼‰ï¼šç”¨æ¥æ“çºµå’Œç®¡ç†æ•°æ®åº“çš„è®¡ç®—æœºè½¯ä»¶ï¼Œä¾‹å¦‚ MySQLã€Oracleã€SqlServer ç­‰ï¼Œéƒ½æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚ ä¸€ä¸ªæ•°æ®åº“ç³»ç»Ÿä¸­å¯ä»¥åŒ…å«å¾ˆå¤šæ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“ä¸­åˆåŒ…å«å¾ˆå¤šè¡¨ï¼Œè¡¨çš„ä¸€åˆ—ç§°ä¸ºä¸€ä¸ªå­—æ®µï¼Œä¸€è¡Œç§°ä¸ºä¸€æ¡è®°å½•ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåä¸ºpersonsçš„è¡¨ï¼š id name age gender address 1 Alice 24 female Beijing 2 Bob 25 male Shanghai 3 Candy 26 female Beijing è¡¨åŒ…å«ä¸‰æ¡è®°å½•ï¼ˆæ¯ä¸€æ¡å¯¹åº”ä¸€ä¸ªäººï¼‰å’Œäº”ä¸ªåˆ—ï¼ˆidã€å§“åã€å¹´é¾„ã€æ€§åˆ«å’Œåœ°å€ï¼‰ã€‚ æŒæ¡è¿™äº›åŸºç¡€æ¦‚å¿µåï¼Œå†æ¥çœ‹ä¸‹SQLã€‚ SQL æ¦‚è¦ä»€ä¹ˆæ˜¯ SQLSQLå…¨ç§° Structured Query Languageï¼Œè¡¨ç¤ºç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ä¸€ç§ä¸“é—¨ä¸æ•°æ®åº“äº¤äº’çš„è¯­è¨€ï¼Œè§„å®šäº†å„ç§å…³é”®å­—ã€è¯­æ³•ç­‰ã€‚ SQL è¯­å¥åŠå…¶ç§ç±»ä½¿ç”¨å…³é”®å­—ã€è¡¨åå’Œåˆ—åç­‰ä»¥ä¸€å®šè¯­æ³•è§„åˆ™ç»„åˆè€Œæˆçš„è¯­å¥ç§°ä¹‹ä¸ºSQLè¯­å¥ï¼ŒSQLè¯­å¥å¯ä»¥å¯¹æ•°æ®åº“èµ‹äºˆä¸åŒæŒ‡ä»¤ï¼Œæ ¹æ®æŒ‡ä»¤çš„ç§ç±»ï¼ŒSQL è¯­å¥å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š DDLï¼ˆData Definition Languageï¼Œæ•°æ®å®šä¹‰è¯­è¨€ï¼‰ï¼šç”¨æ¥åˆ›å»ºã€åˆ é™¤æˆ–ä¿®æ”¹æ•°æ®åº“ä»¥åŠæ•°æ®åº“ä¸­çš„è¡¨ç­‰å¯¹è±¡ã€‚ createï¼šåˆ›å»ºæ•°æ®åº“å’Œè¡¨ç­‰å¯¹è±¡ dropï¼šåˆ é™¤æ•°æ®åº“å’Œè¡¨ç­‰å¯¹è±¡ alterï¼šä¿®æ”¹æ•°æ®åº“å’Œè¡¨ç­‰å¯¹è±¡çš„ç»“æ„ DMLï¼ˆData Manipulation Languageï¼Œæ•°æ®æ“çºµè¯­è¨€ï¼‰ï¼šç”¨æ¥æŸ¥è¯¢æˆ–ä¿®æ”¹è¡¨ä¸­çš„è®°å½•ã€‚ selectï¼šæŸ¥è¯¢è¡¨ä¸­çš„æ•°æ® insertï¼šå‘è¡¨ä¸­æ’å…¥æ•°æ® updateï¼šæ›´æ–°è¡¨ä¸­çš„æ•°æ® deleteï¼šåˆ é™¤è¡¨ä¸­çš„æ•°æ® DCLï¼ˆData Control Languageï¼Œæ•°æ®æ§åˆ¶è¯­è¨€ï¼‰ï¼šç”¨æ¥ç¡®è®¤æˆ–å–æ¶ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®å˜æ›´çš„æ‰§è¡Œæ“ä½œï¼Œä»¥åŠå¯¹ç”¨æˆ·æ“ä½œæ•°æ®åº“ä¸­çš„å¯¹è±¡çš„æƒé™è¿›è¡Œè®¾å®šã€‚ commitï¼šæäº¤ï¼Œå³ç¡®è®¤å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œçš„å˜æ›´ rollbackï¼šå›æ»šï¼Œå³å–æ¶ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œçš„å˜æ›´ grantï¼šèµ‹äºˆç”¨æˆ·çš„æ“ä½œæƒé™ revokeï¼šå–æ¶ˆç”¨æˆ·çš„æ“ä½œæƒé™ SQL çš„åŸºæœ¬ä¹¦å†™è§„åˆ™ SQL è¯­å¥è¦ä»¥åˆ†å·;ç»“å°¾ SQL çš„å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯è¡¨åã€å­—æ®µåã€æ•°æ®ç­‰æ˜¯åŒºåˆ†å¤§å°å†™çš„ å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸç­‰ç±»å‹éœ€ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼Œå¦‚â€™xyzâ€™ã€â€™2021-10-29â€™ å•è¯éœ€è¦ä½¿ç”¨ç©ºæ ¼æˆ–è€…æ¢è¡Œç¬¦è¿›è¡Œåˆ†éš” æ•°æ®åº“ã€è¡¨ã€å­—æ®µçš„åç§°å¯ä»¥ä½¿ç”¨è‹±æ–‡ã€æ•°å­—ä»¥åŠä¸‹åˆ’çº¿ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ•°æ®åº“åã€è¡¨åå’Œåˆ—åç­‰å°å†™ æ•°æ®ç±»å‹åªåˆ—å¸¸ç”¨ï¼š ç±»å‹ æè¿° intã€bigintã€tinyint ç­‰ æ•´æ•°æ•°å­—ç±»å‹ char å®šé•¿å­—ç¬¦ä¸²ç±»å‹ varchar å¯å˜é•¿åº¦å­—ç¬¦ä¸²ç±»å‹ text æ–‡æœ¬ç±»å‹ datetime æ—¥æœŸå’Œæ—¶é—´çš„ç»„åˆç±»å‹ï¼Œæ ¼å¼ï¼šYYYY-MM-DD HH:MM:SS Â·Â·Â· Â·Â·Â· æ•°æ®åº“çš„åŸºæœ¬æ“ä½œæ•°æ®åº“ç›¸å…³ åˆ›å»ºæ•°æ®åº“ 1CREATE DATABASE &lt;æ•°æ®åº“å&gt;; åˆ é™¤æ•°æ®åº“ 1DROP DATABASE &lt;æ•°æ®åº“å&gt;; åˆ—å‡ºæ•°æ®åº“ 1SHOW DATABASES; åˆ‡æ¢æ•°æ®åº“ 1USE &lt;æ•°æ®åº“å&gt;; æ•°æ®è¡¨ç›¸å…³ åˆ›å»ºè¡¨ 12345678910CREATE TABLE &lt;è¡¨å&gt; ( &lt;åˆ—å1&gt; &lt;ç±»å‹&gt; &lt;çº¦æŸ&gt;, &lt;åˆ—å2&gt; &lt;ç±»å‹&gt; &lt;çº¦æŸ&gt;, ... ... ... &lt;è¡¨çš„çº¦æŸ1&gt;, &lt;è¡¨çš„çº¦æŸ2&gt;, ....); åˆ é™¤è¡¨ 1DROP TABLE &lt;è¡¨å&gt;; æ›´æ–°è¡¨ æ–°å¢åˆ— 1ALTER TABLE &lt;è¡¨å&gt; ADD COLUMN &lt;åˆ—å&gt; &lt;ç±»å‹&gt; &lt;çº¦æŸ&gt;; åˆ é™¤åˆ— 1ALTER TABLE &lt;è¡¨å&gt; DROP COLUMN &lt;åˆ—å&gt;; ä¿®æ”¹åˆ— 1ALTER TABLE &lt;è¡¨å&gt; MODIFY COLUMN &lt;åˆ—å&gt; &lt;ç±»å‹&gt; &lt;çº¦æŸ&gt;; æ’å…¥æ•°æ® 1INSERT INTO &lt;è¡¨å&gt; VALUES (å€¼1, å€¼2,....); æŒ‡å®šæ‰€è¦æ’å…¥æ•°æ®çš„åˆ—: 1INSERT INTO &lt;è¡¨å&gt;(åˆ—1, åˆ—2,...) VALUES (å€¼1, å€¼2,....); ç¤ºä¾‹ åˆ›å»ºæ•°æ®åº“ 1CREATE DATABASE test; æ˜¾ç¤ºæ•°æ®åº“ 1SHOW DATABASES; åˆ‡æ¢æ•°æ®åº“ 1use test; åˆ›å»ºæ•°æ®è¡¨ 123456789CREATE TABLE `persons` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(64) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;å§“å&#x27;, `age` int(11) COMMENT &#x27;å¹´é¾„&#x27;, `gender` varchar(11) NOT NULL DEFAULT &#x27;male&#x27; COMMENT &#x27;æ€§åˆ«&#x27;, `address` varchar(64) COMMENT &#x27;åœ°å€&#x27;, `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;, PRIMARY KEY (`id`) USING BTREE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;äººå‘˜ä¿¡æ¯è¡¨&#x27;; æ–°å¢åˆ— 1ALTER TABLE persons ADD COLUMN mobile varchar(64) COMMENT &#x27;æ‰‹æœºå·&#x27;; åˆ é™¤åˆ— 1ALTER TABLE persons DROP COLUMN mobile; ä¿®æ”¹åˆ— 1ALTER TABLE persons MODIFY COLUMN age varchar(11) COMMENT &#x27;å¹´é¾„&#x27;; æ’å…¥æ•°æ® 1INSERT INTO persons VALUES (1,&#x27;Alice&#x27;,24,&#x27;female&#x27;,&#x27;Beijing&#x27;,&#x27;2021-10-29 12:00:00&#x27;); 1INSERT INTO persons(name,age,gender,address) VALUES (&#x27;Bob&#x27;,25,&#x27;male&#x27;,&#x27;Shanghai&#x27;);","tags":["SQL"],"categories":["SQL"]},{"title":"MySQLé«˜çº§SQLè¯­å¥è¿›é˜¶","path":"/2024/03/01/MySQLé«˜çº§SQLè¯­å¥è¿›é˜¶/","content":"MySQL é«˜çº§ï¼ˆè¿›é˜¶ï¼‰SQL è¯­å¥ åŸæ–‡åœ°å€MySQL é«˜çº§ï¼ˆè¿›é˜¶ï¼‰SQL è¯­å¥ - æ˜é‡‘ 1. MySQL SQL è¯­å¥1.1 å¸¸ç”¨æŸ¥è¯¢å¸¸ç”¨æŸ¥è¯¢ç®€å•æ¥è¯´å°±æ˜¯ å¢ã€åˆ ã€æ”¹ã€æŸ¥ å¯¹ MySQL æ•°æ®åº“çš„æŸ¥è¯¢ï¼Œé™¤äº†åŸºæœ¬çš„æŸ¥è¯¢å¤–ï¼Œæœ‰æ—¶å€™éœ€è¦å¯¹æŸ¥è¯¢çš„ç»“æœé›†è¿›è¡Œå¤„ç†ã€‚ ä¾‹å¦‚åªå– 10 æ¡æ•°æ®ã€å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºæˆ–åˆ†ç»„ç­‰ç­‰ 1ã€æŒ‰å…³é”®å­—æ’åº PS:ç±»æ¯”äº windows ä»»åŠ¡ç®¡ç†å™¨ ä½¿ç”¨ SELECT è¯­å¥å¯ä»¥å°†éœ€è¦çš„æ•°æ®ä» MySQL æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥ï¼Œå¦‚æœå¯¹æŸ¥è¯¢çš„ç»“æœè¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨ ORDER BY è¯­å¥æ¥å¯¹è¯­å¥å®ç°æ’åºï¼Œå¹¶æœ€ç»ˆå°†æ’åºåçš„ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚è¿™ä¸ªè¯­å¥çš„æ’åºä¸å…‰å¯ä»¥é’ˆå¯¹æŸä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹å¤šä¸ªå­—æ®µ ï¼ˆ1ï¼‰è¯­æ³• SELECT column1, column2, â€¦ FROM table_name ORDER BY column1, column2, â€¦ ASC|DESC ASC æ˜¯æŒ‰ç…§å‡åºè¿›è¡Œæ’åºçš„ï¼Œæ˜¯é»˜è®¤çš„æ’åºæ–¹å¼ï¼Œå³ ASC å¯ä»¥çœç•¥ã€‚SELECT è¯­å¥ä¸­å¦‚æœæ²¡æœ‰æŒ‡å®šå…·ä½“çš„æ’åºæ–¹å¼ï¼Œåˆ™é»˜è®¤æŒ‰ ASC æ–¹å¼è¿›è¡Œæ’åºã€‚ DESC æ˜¯æŒ‰é™åºæ–¹å¼è¿› è¡Œæ’åˆ—ã€‚å½“ç„¶ ORDER BY å‰é¢ä¹Ÿå¯ä»¥ä½¿ç”¨ WHERE å­å¥å¯¹æŸ¥è¯¢ç»“æœè¿›ä¸€æ­¥è¿‡æ»¤ã€‚ å‡†å¤‡å·¥ä½œï¼š 1234567create database k1;use k1;create table location (Region char(20),Store_Name char(20));insert into location values(&#x27;East&#x27;,&#x27;Boston&#x27;);insert into location values(&#x27;East&#x27;,&#x27;New York&#x27;);insert into location values(&#x27;West&#x27;,&#x27;Los Angeles&#x27;);insert into location values(&#x27;West&#x27;,&#x27;Houston&#x27;); 12345create table store_info (Store_Name char(20),Sales int(10),Date char(10));insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;1500&#x27;,&#x27;2020-12-05&#x27;);insert into store_info values(&#x27;Houston&#x27;,&#x27;250&#x27;,&#x27;2020-12-07&#x27;);insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;300&#x27;,&#x27;2020-12-08&#x27;);insert into store_info values(&#x27;Boston&#x27;,&#x27;700&#x27;,&#x27;2020-12-08&#x27;); 1.2 SELECTæ˜¾ç¤ºè¡¨æ ¼ä¸­ä¸€ä¸ªæˆ–æ•°ä¸ªå­—æ®µçš„æ‰€æœ‰æ•°æ®è®°å½• è¯­æ³•ï¼šSELECT â€œå­—æ®µâ€ FROM â€œè¡¨åâ€; 1SELECT Store_Name FROM location; 1SELECT Store_Name FROM Store_Info; 1.3 DISTINCTä¸æ˜¾ç¤ºé‡å¤çš„æ•°æ®è®°å½• è¯­æ³•ï¼šSELECT DISTINCT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot;; 1SELECT DISTINCT Store_Name FROM Store_Info; 1.4 AND ORä¸” æˆ– è¯­æ³•ï¼šSELECT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot; WHERE &quot;æ¡ä»¶1&quot; &#123;[AND|OR] &quot;æ¡ä»¶2&quot;&#125;+ ; 1.5 inæ˜¾ç¤ºå·²çŸ¥çš„å€¼çš„æ•°æ®è®°å½• è¯­æ³•ï¼šSELECT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot; WHERE &quot;å­—æ®µ&quot; IN (&#39;å€¼1&#39;, &#39;å€¼2&#39;, ...); 1SELECT * FROM store_info WHERE Store_Name IN (&#x27;Los Angeles&#x27;, &#x27;Houston&#x27;); 1.6 BETWEENæ˜¾ç¤ºä¸¤ä¸ªå€¼èŒƒå›´å†…çš„æ•°æ®è®°å½• è¯­æ³•ï¼šSELECT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot; WHERE &quot;å­—æ®µ&quot; BETWEEN &#39;å€¼1&#39; AND &#39;å€¼2&#39;; 2. é€šé…ç¬¦é€šå¸¸ä¸ LIKE æ­é… ä¸€èµ·ä½¿ç”¨ % ï¼šç™¾åˆ†å·è¡¨ç¤ºé›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ _ ï¼šä¸‹åˆ’çº¿è¡¨ç¤ºå•ä¸ªå­—ç¬¦ â€˜A_Zâ€™ï¼šæ‰€æœ‰ä»¥ â€˜Aâ€™ èµ·å¤´ï¼Œå¦ä¸€ä¸ªä»»ä½•å€¼çš„å­—ç¬¦ï¼Œä¸”ä»¥ â€˜Zâ€™ ä¸ºç»“å°¾çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œâ€™ABZâ€™ å’Œ â€˜A2Zâ€™ éƒ½ç¬¦åˆè¿™ä¸€ä¸ªæ¨¡å¼ï¼Œè€Œ â€˜AKKZâ€™ å¹¶ä¸ç¬¦åˆ (å› ä¸ºåœ¨ A å’Œ Z ä¹‹é—´æœ‰ä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦)ã€‚ â€˜ABC%â€™: æ‰€æœ‰ä»¥ â€˜ABCâ€™ èµ·å¤´çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œâ€™ABCDâ€™ å’Œ â€˜ABCABCâ€™ éƒ½ç¬¦åˆè¿™ä¸ªæ¨¡å¼ã€‚ â€˜%XYZâ€™: æ‰€æœ‰ä»¥ â€˜XYZâ€™ ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œâ€™WXYZâ€™ å’Œ â€˜ZZXYZâ€™ éƒ½ç¬¦åˆè¿™ä¸ªæ¨¡å¼ã€‚ â€˜%AN%â€™: æ‰€æœ‰å«æœ‰ â€˜ANâ€™è¿™ä¸ªæ¨¡å¼çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œâ€™LOS ANGELESâ€™ å’Œ â€˜SAN FRANCISCOâ€™ éƒ½ç¬¦åˆè¿™ä¸ªæ¨¡å¼ã€‚ â€˜_AN%â€™ï¼šæ‰€æœ‰ç¬¬äºŒä¸ªå­—æ¯ä¸º â€˜Aâ€™ å’Œç¬¬ä¸‰ä¸ªå­—æ¯ä¸º â€˜Nâ€™ çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œâ€™SAN FRANCISCOâ€™ ç¬¦åˆè¿™ä¸ªæ¨¡å¼ï¼Œè€Œ â€˜LOS ANGELESâ€™ åˆ™ä¸ç¬¦åˆè¿™ä¸ªæ¨¡å¼ã€‚ 2.1 LIKEåŒ¹é…ä¸€ä¸ªæ¨¡å¼æ¥æ‰¾å‡ºæˆ‘ä»¬è¦çš„æ•°æ®è®°å½• è¯­æ³•ï¼šSELECT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot; WHERE &quot;å­—æ®µ&quot; LIKE &#123;æ¨¡å¼&#125;; 1SELECT * FROM store_info WHERE Store_Name like &#x27;%os%&#x27;; 2.2 ORDER BYæŒ‰å…³é”®å­—æ’åº è¯­æ³•ï¼šSELECT &quot;å­—æ®µ&quot; FROM &quot;è¡¨å&quot; [WHERE &quot;æ¡ä»¶&quot;] ORDER BY &quot;å­—æ®µ&quot; [ASC, DESC]; æ³¨æ„ï¼šASC æ˜¯æŒ‰ç…§å‡åºè¿›è¡Œæ’åºçš„ï¼Œæ˜¯é»˜è®¤çš„æ’åºæ–¹å¼ã€‚ DESC æ˜¯æŒ‰é™åºæ–¹å¼è¿›è¡Œæ’åº 1SELECT Store_Name,Sales,Date FROM store_info ORDER BY Sales DESC; 3. å‡½æ•°3.1 æ•°å­¦å‡½æ•° abs(x) è¿”å› x çš„ç»å¯¹å€¼ rand() è¿”å› 0 åˆ° 1 çš„éšæœºæ•° mod(x,y) è¿”å› x é™¤ä»¥ y ä»¥åçš„ä½™æ•° power(x,y) è¿”å› x çš„ y æ¬¡æ–¹ round(x) è¿”å›ç¦» x æœ€è¿‘çš„æ•´æ•° round(x,y) ä¿ç•™ x çš„ y ä½å°æ•°å››èˆäº”å…¥åçš„å€¼ sqrt(x) è¿”å› x çš„å¹³æ–¹æ ¹ truncate(x,y) è¿”å›æ•°å­— x æˆªæ–­ä¸º y ä½å°æ•°çš„å€¼ ceil(x) è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•° floor(x) è¿”å›å°äºæˆ–ç­‰äº x çš„æœ€å¤§æ•´æ•° greatest(x1,x2â€¦) è¿”å›é›†åˆä¸­æœ€å¤§çš„å€¼ï¼Œä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå­—æ®µçš„æœ€å¤§çš„å€¼ least(x1,x2â€¦) è¿”å›é›†åˆä¸­æœ€å°çš„å€¼ï¼Œä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå­—æ®µçš„æœ€å°çš„å€¼ 12SELECT abs(-1), rand(), mod(5,3), power(2,3), round(1.89);SELECT round(1.8937,3), truncate(1.235,2), ceil(5.2), floor(2.1), least(1.89,3,6.1,2.1); 3.2 èšåˆå‡½æ•° avg() è¿”å›æŒ‡å®šåˆ—çš„å¹³å‡å€¼ count() è¿”å›æŒ‡å®šåˆ—ä¸­é NULL å€¼çš„ä¸ªæ•° min() è¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼ max() è¿”å›æŒ‡å®šåˆ—çš„æœ€å¤§å€¼ sum(x) è¿”å›æŒ‡å®šåˆ—çš„æ‰€æœ‰å€¼ä¹‹å’Œ 123456789SELECT avg(Sales) FROM store_info;SELECT count(Store_Name) FROM store_info;SELECT count(DISTINCT Store_Name) FROM store_info;SELECT max(Sales) FROM store_info;SELECT min(Sales) FROM store_info;SELECT sum(Sales) FROM store_info; 3.3 å­—ç¬¦ä¸²å‡½æ•° trim() è¿”å›å»é™¤æŒ‡å®šæ ¼å¼çš„å€¼ concat(x,y) å°†æä¾›çš„å‚æ•° x å’Œ y æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸² substr(x,y) è·å–ä»å­—ç¬¦ä¸² x ä¸­çš„ç¬¬ y ä¸ªä½ç½®å¼€å§‹çš„å­—ç¬¦ä¸²ï¼Œè·Ÿ substring()å‡½æ•°ä½œç”¨ç›¸åŒ substr(x,y,z) è·å–ä»å­—ç¬¦ä¸² x ä¸­çš„ç¬¬ y ä¸ªä½ç½®å¼€å§‹é•¿åº¦ä¸º z çš„å­—ç¬¦ä¸² length(x) è¿”å›å­—ç¬¦ä¸² x çš„é•¿åº¦ replace(x,y,z) å°†å­—ç¬¦ä¸² z æ›¿ä»£å­—ç¬¦ä¸² x ä¸­çš„å­—ç¬¦ä¸² y upper(x) å°†å­—ç¬¦ä¸² x çš„æ‰€æœ‰å­—æ¯å˜æˆå¤§å†™å­—æ¯ lower(x) å°†å­—ç¬¦ä¸² x çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯ left(x,y) è¿”å›å­—ç¬¦ä¸² x çš„å‰ y ä¸ªå­—ç¬¦ right(x,y) è¿”å›å­—ç¬¦ä¸² x çš„å y ä¸ªå­—ç¬¦ repeat(x,y) å°†å­—ç¬¦ä¸² x é‡å¤ y æ¬¡ space(x) è¿”å› x ä¸ªç©ºæ ¼ strcmp(x,y) æ¯”è¾ƒ x å’Œ yï¼Œè¿”å›çš„å€¼å¯ä»¥ä¸º-1,0,1 reverse(x) å°†å­—ç¬¦ä¸² x åè½¬ å¦‚ sql_mode å¼€å¯äº† PIPES_AS_CONCATï¼Œâ€||â€ è§†ä¸ºå­—ç¬¦ä¸²çš„è¿æ¥æ“ä½œç¬¦è€Œéæˆ–è¿ç®—ç¬¦ï¼Œå’Œå­—ç¬¦ä¸²çš„æ‹¼æ¥å‡½æ•° Concat ç›¸ç±»ä¼¼ï¼Œè¿™å’Œ Oracle æ•°æ®åº“ä½¿ç”¨æ–¹æ³•ä¸€æ ·çš„ 123SELECT Region || &#x27; &#x27; || Store_Name FROM location WHERE Store_Name = &#x27;Boston&#x27;;SELECT substr(Store_Name,3) FROM location WHERE Store_Name = &#x27;Los Angeles&#x27;;SELECT substr(Store_Name,2,4) FROM location WHERE Store_Name = &#x27;New York&#x27; SELECT TRIM ([ [ä½ç½®] [è¦ç§»é™¤çš„å­—ç¬¦ä¸²] FROM ] å­—ç¬¦ä¸²); **[ä½ç½®]ï¼šçš„å€¼å¯ä»¥ä¸º LEADING (èµ·å¤´), TRAILING (ç»“å°¾), BOTH (èµ·å¤´åŠç»“å°¾)ã€‚ ** [è¦ç§»é™¤çš„å­—ç¬¦ä¸²]ï¼šä»å­—ä¸²çš„èµ·å¤´ã€ç»“å°¾ï¼Œæˆ–èµ·å¤´åŠç»“å°¾ç§»é™¤çš„å­—ç¬¦ä¸²ã€‚ç¼ºçœæ—¶ä¸ºç©ºæ ¼ã€‚ 12345SELECT TRIM(LEADING &#x27;Ne&#x27; FROM &#x27;New York&#x27;);SELECT Region,length(Store_Name) FROM location;SELECT REPLACE(Region,&#x27;ast&#x27;,&#x27;astern&#x27;)FROM location; 4. GROUP BYå¯¹ GROUP BY åé¢çš„å­—æ®µçš„æŸ¥è¯¢ç»“æœè¿›è¡Œæ±‡æ€»åˆ†ç»„ï¼Œé€šå¸¸æ˜¯ç»“åˆèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨çš„ GROUP BY æœ‰ä¸€ä¸ªåŸåˆ™ å‡¡æ˜¯åœ¨ GROUP BY åé¢å‡ºç°çš„å­—æ®µï¼Œå¿…é¡»åœ¨ SELECT åé¢å‡ºç°ï¼› å‡¡æ˜¯åœ¨ SELECT åé¢å‡ºç°çš„ã€ä¸”æœªåœ¨èšåˆå‡½æ•°ä¸­å‡ºç°çš„å­—æ®µï¼Œå¿…é¡»å‡ºç°åœ¨ GROUP BY åé¢ è¯­æ³•ï¼šSELECT &quot;å­—æ®µ1&quot;, SUM(&quot;å­—æ®µ2&quot;) FROM &quot;è¡¨å&quot; GROUP BY &quot;å­—æ®µ1&quot;; 1SELECT Store_Name, SUM(Sales) FROM store_info GROUP BY Store_Name ORDER BY sales desc; 5. åˆ«åå­—æ®µåˆ¥å è¡¨æ ¼åˆ¥å è¯­æ³•ï¼šSELECT &quot;è¡¨æ ¼åˆ¥å&quot;.&quot;å­—æ®µ1&quot; [AS] &quot;å­—æ®µåˆ¥å&quot; FROM &quot;è¡¨æ ¼å&quot; [AS] &quot;è¡¨æ ¼åˆ¥å&quot;; 1SELECT A.Store_Name Store, SUM(A.Sales) &quot;Total Sales&quot; FROM store_info A GROUP BY A.Store_Name; 6. å­æŸ¥è¯¢å­æŸ¥è¯¢ä¹Ÿè¢«ç§°ä½œå†…æŸ¥è¯¢æˆ–è€…åµŒå¥—æŸ¥è¯¢ï¼Œæ˜¯æŒ‡åœ¨ä¸€ä¸ªæŸ¥è¯¢è¯­å¥é‡Œé¢è¿˜åµŒå¥—ç€å¦ä¸€ä¸ªæŸ¥è¯¢è¯­ å¥ã€‚å­æŸ¥è¯¢è¯­å¥æ˜¯å…ˆäºä¸»æŸ¥è¯¢è¯­å¥è¢«æ‰§è¡Œçš„ï¼Œå…¶ç»“æœä½œä¸ºå¤–å±‚çš„æ¡ä»¶è¿”å›ç»™ä¸»æŸ¥è¯¢è¿›è¡Œä¸‹ä¸€ æ­¥çš„æŸ¥è¯¢è¿‡æ»¤ è¿æ¥è¡¨æ ¼ï¼Œåœ¨ WHERE å­å¥æˆ– HAVING å­å¥ä¸­æ’å…¥å¦ä¸€ä¸ª SQL è¯­å¥ è¯­æ³•ï¼šSELECT &quot;å­—æ®µ1&quot; FROM &quot;è¡¨æ ¼1&quot; WHERE &quot;å­—æ®µ2&quot; [æ¯”è¾ƒè¿ç®—ç¬¦] #å¤–æŸ¥è¯¢ (SELECT &quot;å­—æ®µ1&quot; FROM &quot;è¡¨æ ¼2&quot; WHERE &quot;æ¡ä»¶&quot;); #å†…æŸ¥è¯¢ [æ¯”è¾ƒè¿ç®—ç¬¦] å¯ä»¥æ˜¯ç¬¦å·çš„è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ &#x3D;ã€&gt;ã€&lt;ã€&gt;&#x3D;ã€&lt;&#x3D; ï¼›ä¹Ÿå¯ä»¥æ˜¯æ–‡å­—çš„è¿ç®—ç¬¦ï¼Œä¾‹å¦‚ LIKEã€INã€BETWEEN 12345SELECT SUM(Sales) FROM store_info WHERE Store_Name IN(SELECT Store_Name FROM location WHERE Region = &#x27;West&#x27;);SELECT SUM(A.Sales) FROM store_info A WHERE A.Store_Name IN(SELECT Store_Name FROM location B WHERE B.Store_Name = A.Store_Name); 7. EXISTSç”¨æ¥æµ‹è¯•å†…æŸ¥è¯¢æœ‰æ²¡æœ‰äº§ç”Ÿä»»ä½•ç»“æœï¼Œç±»ä¼¼å¸ƒå°”å€¼æ˜¯å¦ä¸ºçœŸ #å¦‚æœæœ‰çš„è¯ï¼Œç³»ç»Ÿå°±ä¼šæ‰§è¡Œå¤–æŸ¥è¯¢ä¸­çš„ SQL è¯­å¥ã€‚è‹¥æ˜¯æ²¡æœ‰çš„è¯ï¼Œé‚£æ•´ä¸ª SQL è¯­å¥å°±ä¸ä¼šäº§ç”Ÿä»»ä½•ç»“æœã€‚ è¯­æ³•ï¼šSELECT &quot;å­—æ®µ1&quot; FROM &quot;è¡¨æ ¼1&quot; WHERE EXISTS (SELECT \\* FROM &quot;è¡¨æ ¼2&quot; WHERE &quot;æ¡ä»¶&quot;); 1SELECT SUM(Sales) FROM store_info WHERE EXISTS (SELECT * FROM location WHERE Region = &#x27;West&#x27;); 8. è¿æ¥æŸ¥è¯¢å‡†å¤‡å·¥ä½œ 1234567create database k1;use k1;create table location (Region char(20),Store_Name char(20));insert into location values(&#x27;East&#x27;,&#x27;Boston&#x27;);insert into location values(&#x27;East&#x27;,&#x27;New York&#x27;);insert into location values(&#x27;West&#x27;,&#x27;Los Angeles&#x27;);insert into location values(&#x27;West&#x27;,&#x27;Houston&#x27;); 12345create table store_info (Store_Name char(20),Sales int(10),Date char(10));insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;1500&#x27;,&#x27;2020-12-05&#x27;);insert into store_info values(&#x27;Houston&#x27;,&#x27;250&#x27;,&#x27;2020-12-07&#x27;);insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;300&#x27;,&#x27;2020-12-08&#x27;);insert into store_info values(&#x27;Boston&#x27;,&#x27;700&#x27;,&#x27;2020-12-08&#x27;); 1UPDATE store_info SET store_name=&#x27;Washington&#x27; WHERE sales=300; inner join(å†…è¿æ¥)ï¼šåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è¡Œ left join(å·¦è¿æ¥)ï¼šè¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½• right join(å³è¿æ¥)ï¼šè¿”å›åŒ…æ‹¬å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è®°å½• 8.1 å†…è¿æ¥MySQL ä¸­çš„å†…è¿æ¥å°±æ˜¯ä¸¤å¼ æˆ–å¤šå¼ è¡¨ä¸­åŒæ—¶ç¬¦åˆæŸç§æ¡ä»¶çš„æ•°æ®è®°å½•çš„ç»„åˆã€‚é€šå¸¸åœ¨ FROM å­å¥ä¸­ä½¿ç”¨å…³é”®å­— INNER JOIN æ¥è¿æ¥å¤šå¼ è¡¨ï¼Œå¹¶ä½¿ç”¨ ON å­å¥è®¾ç½®è¿æ¥æ¡ä»¶ï¼Œå†…è¿æ¥æ˜¯ç³»ç»Ÿé»˜è®¤çš„è¡¨è¿æ¥ï¼Œæ‰€ä»¥åœ¨ FROM å­å¥åå¯ä»¥çœç•¥ INNER å…³é”®å­—ï¼Œåªä½¿ç”¨ å…³é”®å­— JOINã€‚åŒæ—¶æœ‰å¤šä¸ªè¡¨æ—¶ï¼Œä¹Ÿå¯ä»¥è¿ç»­ä½¿ç”¨ INNER JOIN æ¥å®ç°å¤šè¡¨çš„å†…è¿æ¥ï¼Œä¸è¿‡ä¸ºäº†æ›´å¥½çš„æ€§èƒ½ï¼Œå»ºè®®æœ€å¥½ä¸è¦è¶…è¿‡ä¸‰ä¸ªè¡¨ (1) è¯­æ³• æ±‚äº¤é›† 1SELECT column_name(s)FROM table1 INNER JOIN table2 ON table1.column_name = table2.column_name; 1SELECT * FROM location A INNER JOIN store_info B on A.Store_Name = B.Store_Name ; å†…è¿æŸ¥è¯¢ï¼šé€šè¿‡ inner join çš„æ–¹å¼å°†ä¸¤å¼ è¡¨æŒ‡å®šçš„ç›¸åŒå­—æ®µçš„è®°å½•è¡Œè¾“å‡ºå‡ºæ¥ 8.2 å·¦è¿æ¥å·¦è¿æ¥ä¹Ÿå¯ä»¥è¢«ç§°ä¸ºå·¦å¤–è¿æ¥ï¼Œåœ¨ FROM å­å¥ä¸­ä½¿ç”¨ LEFT JOIN æˆ–è€… LEFT OUTER JOIN å…³é”®å­—æ¥è¡¨ç¤ºã€‚å·¦è¿æ¥ä»¥å·¦ä¾§è¡¨ä¸ºåŸºç¡€è¡¨ï¼Œæ¥æ”¶å·¦è¡¨çš„æ‰€æœ‰è¡Œï¼Œå¹¶ç”¨è¿™äº›è¡Œä¸å³ä¾§å‚ è€ƒè¡¨ä¸­çš„è®°å½•è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´åŒ¹é…å·¦è¡¨ä¸­çš„æ‰€æœ‰è¡Œä»¥åŠå³è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚ 1SELECT * FROM location A LEFT JOIN store_info B on A.Store_Name = B.Store_Name ; å·¦è¿æ¥ä¸­å·¦è¡¨çš„è®°å½•å°†ä¼šå…¨éƒ¨è¡¨ç¤ºå‡ºæ¥ï¼Œè€Œå³è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆæœç´¢æ¡ä»¶çš„è®°å½•ï¼Œå³è¡¨è®°å½•ä¸è¶³çš„åœ°æ–¹å‡ä¸º NULL 8.3 å³è¿æ¥å³è¿æ¥ä¹Ÿè¢«ç§°ä¸ºå³å¤–è¿æ¥ï¼Œåœ¨ FROM å­å¥ä¸­ä½¿ç”¨ RIGHT JOIN æˆ–è€… RIGHT OUTER JOIN å…³é”®å­—æ¥è¡¨ç¤ºã€‚å³è¿æ¥è·Ÿå·¦è¿æ¥æ­£å¥½ç›¸åï¼Œå®ƒæ˜¯ä»¥å³è¡¨ä¸ºåŸºç¡€è¡¨ï¼Œç”¨äºæ¥æ”¶å³è¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œå¹¶ç”¨è¿™äº›è®°å½•ä¸å·¦è¡¨ä¸­çš„è¡Œè¿›è¡ŒåŒ¹é… 1SELECT * FROM location A RIGHT JOIN store_info B on A.Store_Name = B.Store_Name ; 9. UNION â€”-è”é›†å°†ä¸¤ä¸ª SQL è¯­å¥çš„ç»“æœåˆå¹¶èµ·æ¥ï¼Œä¸¤ä¸ª SQL è¯­å¥æ‰€äº§ç”Ÿçš„å­—æ®µéœ€è¦æ˜¯åŒæ ·çš„æ•°æ®è®°å½•ç§ç±» UNION ï¼šç”Ÿæˆç»“æœçš„æ•°æ®è®°å½•å€¼å°†æ²¡æœ‰é‡å¤ï¼Œä¸”æŒ‰ç…§å­—æ®µçš„é¡ºåºè¿›è¡Œæ’åº è¯­æ³•ï¼š[SELECT è¯­å¥ 1] UNION [SELECT è¯­å¥ 2]; 1SELECT Store_Name FROM location UNION SELECT Store_Name FROM store_info; UNION ALL ï¼šå°†ç”Ÿæˆç»“æœçš„æ•°æ®è®°å½•å€¼éƒ½åˆ—å‡ºæ¥ï¼Œæ— è®ºæœ‰æ— é‡å¤ è¯­æ³•ï¼š[SELECT è¯­å¥ 1] UNION ALL [SELECT è¯­å¥ 2]; 1SELECT Store_Name FROM location UNION ALL SELECT Store_Name FROM store_info; 9.1 äº¤é›†å€¼å–ä¸¤ä¸ª SQL è¯­å¥ç»“æœçš„äº¤é›† 123SELECT A.Store_Name FROM location A INNER JOIN store_info B ON A.Store_Name = B.Store_Name;SELECT A.Store_Name FROM location A INNER JOIN store_info B USING(Store_Name); å–ä¸¤ä¸ª SQL è¯­å¥ç»“æœçš„äº¤é›†ï¼Œä¸”æ²¡æœ‰é‡å¤ 123456789101112SELECT DISTINCT A.Store_Name FROM location A INNER JOIN store_info B USING(Store_Name);SELECT DISTINCT Store_Name FROM location WHERE (Store_Name) IN (SELECT Store_Name FROM store_info);SELECT DISTINCT A.Store_Name FROM location A LEFT JOIN store_info B USING(Store_Name) WHERE B.Store_Name IS NOT NULL;SELECT A.Store_Name FROM (SELECT B.Store_Name FROM location B INNER JOIN store_info C ON B.Store_Name = C.Store_Name) AGROUP BY A.Store_Name;SELECT A.Store_Name FROM(SELECT DISTINCT Store_Name FROM location UNION ALL SELECT DISTINCT Store_Name FROM store_info) AGROUP BY A.Store_Name HAVING COUNT(*) &gt; 1; 9.2 æ— äº¤é›†å€¼æ˜¾ç¤ºç¬¬ä¸€ä¸ª SQL è¯­å¥çš„ç»“æœï¼Œä¸”ä¸ç¬¬äºŒä¸ª SQL è¯­å¥æ²¡æœ‰äº¤é›†çš„ç»“æœï¼Œä¸”æ²¡æœ‰é‡å¤ 1234567SELECT DISTINCT Store_Name FROM location WHERE (Store_Name) NOT IN (SELECT Store_Name FROM store_info);SELECT DISTINCT A.Store_Name FROM location A LEFT JOIN store_info B USING(Store_Name) WHERE B.Store_Name IS NULL;SELECT A.Store_Name FROM(SELECT DISTINCT Store_Name FROM location UNION ALL SELECT DISTINCT Store_Name FROM store_info) AGROUP BY A.Store_Name HAVING COUNT(*) = 1; 10. caseæ˜¯ SQL ç”¨æ¥åšä¸º IF-THEN-ELSE ä¹‹ç±»é€»è¾‘çš„å…³é”®å­— è¯­æ³•ï¼š 1234567SELECT CASE (&quot;å­—æ®µå&quot;) WHEN &quot;æ¡ä»¶1&quot; THEN &quot;ç»“æœ1&quot; WHEN &quot;æ¡ä»¶2&quot; THEN &quot;ç»“æœ2&quot; ... [ELSE &quot;ç»“æœN&quot;] ENDFROM &quot;è¡¨å&quot;; â€œæ¡ä»¶â€ å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼æˆ–æ˜¯å…¬å¼ã€‚ ELSE å­å¥åˆ™å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚ 123456789SELECT Store_Name, CASE Store_Name WHEN &#x27;Los Angeles&#x27; THEN Sales * 2 WHEN &#x27;Boston&#x27; THEN 2000 ELSE Sales END&quot;New Sales&quot;,DateFROM store_info;#&quot;New Sales&quot; æ˜¯ç”¨äº CASE é‚£ä¸ªå­—æ®µçš„å­—æ®µåã€‚ 11. æ­£åˆ™è¡¨è¾¾å¼ åŒ¹é…æ¨¡å¼ æè¿° å®ä¾‹ ^ åŒ¹é…æ–‡æœ¬çš„å¼€å§‹ä½ç½® â€˜^bdâ€™ åŒ¹é…ä»¥ bd å¼€å¤´çš„å­—ç¬¦ä¸² $ åŒ¹é…æ–‡æœ¬çš„ç»“æŸä½ç½® â€˜qn$â€™ åŒ¹é…ä»¥ qn ç»“å°¾çš„å­—ç¬¦ä¸² . åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ â€˜s.tâ€™ åŒ¹é…ä»»ä½• s å’Œ t ä¹‹é—´æœ‰ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸² * åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªåœ¨å®ƒå‰é¢çš„å­—ç¬¦ â€˜fo*tâ€™ åŒ¹é… t å‰é¢æœ‰ä»»æ„ä¸ª o + åŒ¹é…å‰é¢çš„å­—ç¬¦ 1 æ¬¡æˆ–å¤šæ¬¡ â€˜hom+â€™ åŒ¹é…ä»¥ ho å¼€å¤´ï¼Œåé¢è‡³å°‘ä¸€ä¸ª m çš„å­—ç¬¦ä¸² å­—ç¬¦ä¸² åŒ¹é…åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸² â€˜cloâ€™ åŒ¹é…å«æœ‰ clo çš„å­—ç¬¦ä¸² p1 p2 åŒ¹é… p1 æˆ– p2 [â€¦] åŒ¹é…å­—ç¬¦é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ â€˜[abc]â€™ åŒ¹é… a æˆ–è€… b æˆ–è€… c [^â€¦] åŒ¹é…ä¸åœ¨æ‹¬å·ä¸­çš„ä»»ä½•å­—ç¬¦ â€˜[^ab]â€™ åŒ¹é…ä¸åŒ…å« a æˆ–è€… b çš„å­—ç¬¦ä¸² {n} åŒ¹é…å‰é¢çš„å­—ç¬¦ä¸² n æ¬¡ â€˜g{2}â€™ åŒ¹é…å«æœ‰ 2 ä¸ª g çš„å­—ç¬¦ä¸² {n,m} åŒ¹é…å‰é¢çš„å­—ç¬¦ä¸²è‡³å°‘ n æ¬¡ï¼Œè‡³å¤š m æ¬¡ â€˜f{1,3}â€™ åŒ¹é… f æœ€å°‘ 1 æ¬¡ï¼Œæœ€å¤š 3 æ¬¡ è¯­æ³•ï¼šSELECT â€œå­—æ®µâ€ FROM â€œè¡¨åâ€ WHERE â€œå­—æ®µâ€ REGEXP {æ¨¡å¼}; 123SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;os&#x27;;SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;^[A-G]&#x27;;SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;Ho|Bo&#x27;; 12. å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹æ˜¯ä¸€ç»„ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„ SQL è¯­å¥é›†åˆã€‚ å­˜å‚¨è¿‡ç¨‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯å°†å¸¸ç”¨æˆ–è€…å¤æ‚çš„å·¥ä½œé¢„å…ˆä½¿ç”¨ SQL è¯­å¥å†™å¥½å¹¶ç”¨ä¸€ä¸ªæŒ‡å®šçš„åç§°å­˜å‚¨èµ·æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ç»ç¼–è¯‘å’Œä¼˜åŒ–åå­˜å‚¨åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸­ã€‚å½“éœ€è¦ä½¿ç”¨è¯¥å­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œåªéœ€è¦è°ƒç”¨å®ƒå³å¯ã€‚å­˜å‚¨è¿‡ç¨‹åœ¨æ‰§è¡Œä¸Šæ¯”ä¼ ç»Ÿ SQL é€Ÿåº¦æ›´å¿«ã€æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚ å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹ï¼š 1ã€æ‰§è¡Œä¸€æ¬¡åï¼Œä¼šå°†ç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç é©»ç•™ç¼“å†²åŒºï¼Œæé«˜æ‰§è¡Œæ•ˆç‡ 2ã€SQL è¯­å¥åŠ ä¸Šæ§åˆ¶è¯­å¥çš„é›†åˆï¼Œçµæ´»æ€§é«˜ 3ã€åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨ï¼Œå®¢æˆ·ç«¯è°ƒç”¨æ—¶ï¼Œé™ä½ç½‘ç»œè´Ÿè½½ 4ã€å¯å¤šæ¬¡é‡å¤è¢«è°ƒç”¨ï¼Œå¯éšæ—¶ä¿®æ”¹ï¼Œä¸å½±å“å®¢æˆ·ç«¯è°ƒç”¨ 5ã€å¯å®Œæˆæ‰€æœ‰çš„æ•°æ®åº“æ“ä½œï¼Œä¹Ÿå¯æ§åˆ¶æ•°æ®åº“çš„ä¿¡æ¯è®¿é—®æƒé™ 12.1 åˆ›å»ºå­˜å‚¨è¿‡ç¨‹123456DELIMITER $$ #å°†è¯­å¥çš„ç»“æŸç¬¦å·ä»åˆ†å·;ä¸´æ—¶æ”¹ä¸ºä¸¤ä¸ª$$(å¯ä»¥æ˜¯è‡ªå®šä¹‰)CREATE PROCEDURE Proc() #åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Œè¿‡ç¨‹åä¸ºProcï¼Œä¸å¸¦å‚æ•°-&gt; BEGIN #è¿‡ç¨‹ä½“ä»¥å…³é”®å­— BEGIN å¼€å§‹-&gt; select * from Store_Info; #è¿‡ç¨‹ä½“è¯­å¥-&gt; END $$ #è¿‡ç¨‹ä½“ä»¥å…³é”®å­— END ç»“æŸDELIMITER ; #å°†è¯­å¥çš„ç»“æŸç¬¦å·æ¢å¤ä¸ºåˆ†å· å®ä¾‹ 12345678DELIMITER $$ #å°†è¯­å¥çš„ç»“æŸç¬¦å·ä»åˆ†å·;ä¸´æ—¶æ”¹ä¸ºä¸¤ä¸ª$$(å¯ä»¥è‡ªå®šä¹‰)CREATE PROCEDURE Proc5() #åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Œè¿‡ç¨‹åä¸ºProc5ï¼Œä¸å¸¦å‚æ•°-&gt; BEGIN #è¿‡ç¨‹ä½“ä»¥å…³é”®å­— BEGIN å¼€å§‹-&gt; create table user (id int (10), name char(10),score int (10));-&gt; insert into user values (1, &#x27;cyw&#x27;,70);-&gt; select * from cyw; #è¿‡ç¨‹ä½“è¯­å¥-&gt; END $$ #è¿‡ç¨‹ä½“ä»¥å…³é”®å­— END ç»“æŸDELIMITER ; #å°†è¯­å¥çš„ç»“æŸç¬¦å·æ¢å¤ä¸ºåˆ†å· 12.2 è°ƒç”¨å­˜å‚¨è¿‡ç¨‹1CALL Proc; 12.3 æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹SHOW CREATE PROCEDURE [æ•°æ®åº“.]å­˜å‚¨è¿‡ç¨‹å; #æŸ¥çœ‹æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„å…·ä½“ä¿¡æ¯ 123SHOW CREATE PROCEDURE Proc;SHOW PROCEDURE STATUS [LIKE &#x27;%Proc%&#x27;] \\G 12.4 å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°**IN è¾“å…¥å‚æ•°ï¼š**è¡¨ç¤ºè°ƒç”¨è€…å‘è¿‡ç¨‹ä¼ å…¥å€¼ï¼ˆä¼ å…¥å€¼å¯ä»¥æ˜¯å­—é¢é‡æˆ–å˜é‡ï¼‰ **OUT è¾“å‡ºå‚æ•°ï¼š**è¡¨ç¤ºè¿‡ç¨‹å‘è°ƒç”¨è€…ä¼ å‡ºå€¼(å¯ä»¥è¿”å›å¤šä¸ªå€¼)ï¼ˆä¼ å‡ºå€¼åªèƒ½æ˜¯å˜é‡ï¼‰ **INOUT è¾“å…¥è¾“å‡ºå‚æ•°ï¼š**æ—¢è¡¨ç¤ºè°ƒç”¨è€…å‘è¿‡ç¨‹ä¼ å…¥å€¼ï¼Œåˆè¡¨ç¤ºè¿‡ç¨‹å‘è°ƒç”¨è€…ä¼ å‡ºå€¼ï¼ˆå€¼åªèƒ½æ˜¯å˜é‡ï¼‰ 12345678DELIMITER $$CREATE PROCEDURE Proc6(IN inname CHAR(16))-&gt; BEGIN-&gt; SELECT * FROM store_info WHERE Store_Name = inname;-&gt; END $$DELIMITER ;CALL Proc6(&#x27;Boston&#x27;); 12.5 ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹12345ALTER PROCEDURE &lt;è¿‡ç¨‹å&gt;[&lt;ç‰¹å¾&gt;... ]ALTER PROCEDURE GetRole MODIFIES SQL DATA SQL SECURITY INVOKER;MODIFIES sQLDATA:è¡¨æ˜å­ç¨‹åºåŒ…å«å†™æ•°æ®çš„è¯­å¥SECURITY:å®‰å…¨ç­‰çº§invoker:å½“å®šä¹‰ä¸ºINVOKERæ—¶ï¼Œåªè¦æ‰§è¡Œè€…æœ‰æ‰§è¡Œæƒé™ï¼Œå°±å¯ä»¥æˆåŠŸæ‰§è¡Œã€‚ 12.6 åˆ é™¤å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹å†…å®¹çš„ä¿®æ”¹æ–¹æ³•æ˜¯é€šè¿‡åˆ é™¤åŸæœ‰å­˜å‚¨è¿‡ç¨‹ï¼Œä¹‹åå†ä»¥ç›¸åŒçš„åç§°åˆ›å»ºæ–°çš„å­˜å‚¨è¿‡ç¨‹ã€‚å¦‚æœè¦ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„åç§°ï¼Œå¯ä»¥å…ˆåˆ é™¤åŸå­˜å‚¨è¿‡ç¨‹ï¼Œå†ä»¥ä¸åŒçš„å‘½ååˆ›å»ºæ–°çš„å­˜å‚¨è¿‡ç¨‹ã€‚ 12DROP PROCEDURE IF EXISTS Proc;#ä»…å½“å­˜åœ¨æ—¶åˆ é™¤ï¼Œä¸æ·»åŠ  IF EXISTS æ—¶ï¼Œå¦‚æœæŒ‡å®šçš„è¿‡ç¨‹ä¸å­˜åœ¨ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªé”™è¯¯ 13. æ¡ä»¶è¯­å¥if-then-else Â·Â·Â·Â· end if 12345678910111213141516mysql&gt; delimiter $$mysql&gt;mysql&gt; CREATE PROCEDURE proc8(IN pro int) -&gt; -&gt; begin -&gt; -&gt; declare var int; -&gt; set var=pro*2; -&gt; if var&gt;=10 then -&gt; update t set id=id+1; -&gt; else -&gt; update t set id=id-1; -&gt; end if; -&gt; end $$mysql&gt; delimiter ; 14. å¾ªç¯è¯­å¥while Â·Â·Â·Â· end while 12345678910111213mysql&gt; delimiter $$mysql&gt;mysql&gt; create procedure proc9() -&gt; begin -&gt; declare var int(10); -&gt; set var=0; -&gt; while var&lt;6 do -&gt; insert into t values(var); -&gt; set var=var+1; -&gt; end while; -&gt; end $$mysql&gt; delimiter ; 15. è§†å›¾è¡¨ create view15.1 è§†å›¾è¡¨æ¦‚è¿°è§†å›¾ï¼Œå¯ä»¥è¢«å½“ä½œæ˜¯è™šæ‹Ÿè¡¨æˆ–å­˜å‚¨æŸ¥è¯¢ã€‚ è§†å›¾è·Ÿè¡¨æ ¼çš„ä¸åŒæ˜¯ï¼Œè¡¨æ ¼ä¸­æœ‰å®é™…å‚¨å­˜æ•°æ®è®°å½•ï¼Œè€Œè§†å›¾æ˜¯å»ºç«‹åœ¨è¡¨æ ¼ä¹‹ä¸Šçš„ä¸€ä¸ªæ¶æ„ï¼Œå®ƒæœ¬èº«å¹¶ä¸å®é™…å‚¨å­˜æ•°æ®è®°å½•ã€‚ ä¸´æ—¶è¡¨åœ¨ç”¨æˆ·é€€å‡ºæˆ–åŒæ•°æ®åº“çš„è¿æ¥æ–­å¼€åå°±è‡ªåŠ¨æ¶ˆå¤±äº†ï¼Œè€Œè§†å›¾ä¸ä¼šæ¶ˆå¤±ã€‚ è§†å›¾ä¸å«æœ‰æ•°æ®ï¼Œåªå­˜å‚¨å®ƒçš„å®šä¹‰ï¼Œå®ƒçš„ç”¨é€”ä¸€èˆ¬å¯ä»¥ç®€åŒ–å¤æ‚çš„æŸ¥è¯¢ã€‚ æ¯”å¦‚ä½ è¦å¯¹å‡ ä¸ªè¡¨è¿›è¡Œè¿æ¥æŸ¥è¯¢ï¼Œè€Œä¸”è¿˜è¦è¿›è¡Œç»Ÿè®¡æ’åºç­‰æ“ä½œï¼Œå†™ sql è¯­å¥ä¼šå¾ˆéº»çƒ¦çš„ï¼Œç”¨è§†å›¾å°†å‡ ä¸ªè¡¨è”ç»“èµ·æ¥ï¼Œç„¶åå¯¹è¿™ä¸ªè§†å›¾è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå°±å’Œå¯¹ä¸€ä¸ªè¡¨æŸ¥è¯¢ä¸€æ ·ï¼Œå¾ˆæ–¹ä¾¿ã€‚ 15.2 è§†å›¾è¡¨èƒ½å¦ä¿®æ”¹ï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œè§†å›¾è¡¨ä¿å­˜çš„æ˜¯ select è¯­å¥çš„å®šä¹‰ï¼Œæ‰€ä»¥è§†å›¾è¡¨å¯ä¸å¯ä»¥ä¿®æ”¹éœ€è¦è§†æƒ…å†µè€Œå®šã€‚ å¦‚æœ select è¯­å¥æŸ¥è¯¢çš„å­—æ®µæ˜¯æ²¡æœ‰è¢«å¤„ç†è¿‡çš„æºè¡¨å­—æ®µï¼Œåˆ™å¯ä»¥é€šè¿‡è§†å›¾è¡¨ä¿®æ”¹æºè¡¨æ•°æ®ï¼› å¦‚æœ select è¯­å¥æŸ¥è¯¢çš„å­—æ®µæ˜¯è¢« group by è¯­å¥æˆ– å‡½æ•° å¤„ç†è¿‡çš„å­—æ®µï¼Œåˆ™ä¸å¯ä»¥ç›´æ¥ä¿®æ”¹è§†å›¾è¡¨çš„æ•°æ®ã€‚ 123create view v_store_info as select store_name,sales from store_info;update v_store_info set sales=1000 where store_name=&#x27;Houston&#x27;; 123create view v_sales as select store_name,sum(sales) from store_info group by store_name having sum(sales)&gt;1000;update v_sales set store_name=&#x27;xxxx&#x27; where store_name=&#x27;Los Angeles&#x27;; 15.3 åŸºæœ¬è¯­æ³•15.3.1 åˆ›å»ºè§†å›¾è¡¨12è¯­æ³•create view &quot;è§†å›¾è¡¨å&quot; as &quot;select è¯­å¥&quot;; 12create view v_region_sales as select a.region region,sum(b.sales) sales from location ainner join store_info b on a.store_name = b.store_name group by region; 15.4 æŸ¥çœ‹è§†å›¾è¡¨12è¯­æ³•select * from è§†å›¾è¡¨å; 1select * from v_region_sales; 15.5 åˆ é™¤è§†å›¾è¡¨12è¯­æ³•drop view è§†å›¾è¡¨å; 1drop view v_region_sales; 15.6 é€šè¿‡è§†å›¾è¡¨æ±‚æ— äº¤é›†å€¼å°†ä¸¤ä¸ªè¡¨ä¸­æŸä¸ªå­—æ®µçš„ä¸é‡å¤å€¼è¿›è¡Œåˆå¹¶ åªå‡ºç°ä¸€æ¬¡ï¼ˆcount &#x3D;1 ï¼‰ ï¼Œå³æ— äº¤é›† é€šè¿‡ 123create view è§†å›¾è¡¨å as select distinct å­—æ®µ from å·¦è¡¨ union all select distinct å­—æ®µ from å³è¡¨;select å­—æ®µ from è§†å›¾è¡¨å group by å­—æ®µ having count(å­—æ®µ)=1; 12#å…ˆå»ºç«‹è§†å›¾è¡¨create viem v_union as select distinct store_name from location union all select distinct store_name from store_info; 12#å†é€šè¿‡è§†å›¾è¡¨æ±‚æ— äº¤é›†select store_name from v_union group by store_name having count(*)=1;","tags":["SQL"],"categories":["SQL"]},{"title":"PHPåŸºç¡€çŸ¥è¯†æ€»ç»“","path":"/2024/03/01/PHPåŸºç¡€çŸ¥è¯†æ€»ç»“/","content":"PHPæ˜¯ä»€ä¹ˆPHPå…¨ç§°â€œPHP: Hypertext Preprocessorâ€ï¼Œæ˜¯è¶…æ–‡æœ¬é¢„å¤„ç†å™¨çš„å­—æ¯ç¼©å†™ PHPæ˜¯ä¸€ç§åˆ›å»ºåŠ¨æ€äº¤äº’æ€§ç«™ç‚¹çš„æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ã€‚ PHPæ–‡ä»¶å¯åŒ…å«HTMLã€JavaScriptä»£ç å’ŒPHPä»£ç ï¼ŒPHPä»£ç åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œç»“æœä»¥çº¯HTMLå½¢å¼è¿”å›ç»™æµè§ˆå™¨ã€‚ PHPæ–‡ä»¶çš„é»˜è®¤æ–‡ä»¶æ‰©å±•åæ˜¯ â€œ.phpâ€ PHP èƒ½åšä»€ä¹ˆPHPå…·æœ‰è®¿é—®æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åº“çš„èƒ½åŠ›ï¼Œä¸»è¦ç”¨äºwebå¼€å‘ï¼Œç”ŸæˆåŠ¨æ€é¡µé¢å†…å®¹ã€‚æ—©æœŸå¾ˆå¤šçš„CMSï¼ˆå†…å®¹ç®¡ç†ç³»ç»Ÿï¼‰éƒ½æ˜¯åŸºäºPHPå¼€å‘çš„ï¼Œæ¯”å¦‚ï¼šWordPressã€Discuzã€phpcmsç­‰ã€‚ å®‰è£…PHPæ˜¯ä¸€ç§æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œéœ€è¦å®‰è£…PHPæœåŠ¡å™¨ç¯å¢ƒæ‰èƒ½è¿è¡ŒPHPè„šæœ¬ã€‚PHPçš„æœåŠ¡å™¨ç¯å¢ƒç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š Web æœåŠ¡å™¨ PHP è§£æå™¨ DBMS æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ¯”å¦‚ MySQL æ¨èå®‰è£…é›†æˆå¼€å‘ç¯å¢ƒ WAMP æˆ–è€… XAMPP è¿›å…¥äº¤äº’æ¨¡å¼åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥è¾“å…¥PHPä»£ç å¹¶ç«‹å³çœ‹åˆ°ç»“æœï¼Œè€Œä¸éœ€è¦åˆ›å»ºä¸€ä¸ªPHPæ–‡ä»¶ã€‚ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ php -a è¿›å…¥äº¤äº’æ¨¡å¼ äº¤äº’æ¨¡å¼æ˜¯ä¸€ä¸ªç»ƒä¹ å’Œæµ‹è¯•PHPä»£ç çš„ç¯å¢ƒ 1php -a åŸºæœ¬è¯­æ³•PHPåŸºæœ¬è¯­æ³•ç›¸å…³çš„ç»ƒä¹ ï¼Œå¯å‚è€ƒä»£ç åº“(https://gitee.com/stephenykk/php-starter) ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„è‡ªå®šä¹‰æ–¹æ³•å®šä¹‰åœ¨common.phpä¸­, å†…å®¹å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233&lt;?phpfunction clog($msg, $tag = &#x27;p&#x27;)&#123; // echo $msg, &quot; &quot;; echo &quot;&lt;$tag&gt;&quot;, $msg, &quot;&lt;/$tag&gt;&quot;;&#125;function newline()&#123; echo &quot;&lt;br/&gt;&quot;;&#125;function clogList($arr)&#123; echo &quot;&lt;ol&gt;&quot;; foreach ($arr as $val) &#123; clog($val, &#x27;li&#x27;); &#125; echo &quot;&lt;/ol&gt;&quot;;&#125;function title($ttl, $level = 2)&#123; $tag = &quot;h$level&quot;; clog($ttl, $tag);&#125;function comment($con)&#123; clog(&#x27;:: &#x27; . $con, tag: &#x27;blockquote&#x27;);&#125;?&gt; è„šæœ¬ä½ç½®PHPè„šæœ¬å¯æ”¾åœ¨æ–‡æ¡£çš„ä»»ä½•ä½ç½®ï¼ŒPHPè„šæœ¬ä»¥ &lt;?php å¼€å§‹ï¼Œä»¥ ?&gt; ç»“æŸ è¿˜æ”¯æŒçŸ­æ ‡ç­¾ &lt;? ... ?&gt;ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨ 123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;My first PHP page&lt;/h1&gt;&lt;?phpecho &quot;Hello World!&quot;;?&gt;&lt;/body&gt;&lt;/html&gt; è¯­å¥ç»“æŸç¬¦ æ¯æ¡PHPè¯­å¥éƒ½å¿…é¡»ä»¥åˆ†å·(;)ç»“æŸï¼Œå¦åˆ™ä¼šæŠ¥é”™ 12345678&lt;h1&gt;My first PHP page&lt;/h1&gt;&lt;?php$a = 10;$b = 20;echo &quot;Hello 10 + 20 = &quot; . ($a + $b);?&gt; æ³¨é‡Šæ–¹å¼å’Œå¤§å¤šæ•°ç¨‹åºè¯­è¨€ä¸€æ ·ï¼Œç”¨ // è¡¨ç¤ºå•è¡Œæ³¨é‡Šï¼Œ/* */ è¡¨ç¤ºå¤šè¡Œæ³¨é‡Š 12345678910111213&lt;h1&gt;My first PHP page&lt;/h1&gt;&lt;?php//This is a PHP comment line/*This isa PHP commentblock*/?&gt; è¾“å‡ºè¯­å¥PHP æœ‰å››ç§åŸºæœ¬çš„è¾“å‡ºæ–¹å¼ï¼š echo è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸² print è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸² print_r ä»¥æ˜“è¯»çš„æ ¼å¼æ‰“å°å…³è”æ•°ç»„&#x2F;å¯¹è±¡å˜é‡ var_dump æ‰“å°å˜é‡çš„ç›¸å…³ä¿¡æ¯ è¾“å‡ºå­—ç¬¦ä¸²çš„è¯ï¼Œç”¨ echo å’Œ print éƒ½å¯ä»¥ï¼ŒåŒºåˆ«åœ¨äº echo å¯ä»¥è¾“å‡ºå¤šä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ print åªèƒ½è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ echo è¾“å‡ºçš„é€Ÿåº¦æ¯” print å¿«ï¼Œ echo æ²¡æœ‰è¿”å›å€¼ï¼Œprint æœ‰è¿”å›å€¼ 1 1234567891011121314151617181920&lt;?phpecho &quot;Hello World!&quot;;// å¯ç”¨é€—å·åˆ†éš”å¤šä¸ªå­—ç¬¦ä¸²ï¼Œecho ä¼šå°†å®ƒä»¬è¿æ¥èµ·æ¥echo &quot;good&quot;, &quot;day&quot; // goodday// ä»¥å‘½ä»¤/å‡½æ•°çš„å½¢å¼è°ƒç”¨ printprint &quot;Hello World!&quot;;print(&#x27;Hello world&#x27;);// printåªèƒ½ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚print(&quot;Hello&quot;, &quot;Alice&quot;); // æŠ¥é”™print &quot;hello&quot;, &quot;Alice&quot;; // æŠ¥é”™// print_r() è¾“å‡ºå¯¹è±¡/å…³è”æ•°ç»„å˜é‡$colors = array(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;);print_r($colors);// var_dump() è¾“å‡ºå˜é‡çš„ç›¸å…³ä¿¡æ¯$msg = &quot;hero&quot;;var_dump($msg);?&gt; è¾“å‡ºå˜é‡å’Œå­—ç¬¦ä¸² 1234567891011&lt;?php$msg=&quot;Learn PHP&quot;;// ç›´æ¥è¾“å‡ºå˜é‡echo $msg;// åŒå¼•å·å­—ç¬¦ä¸²å†…éƒ¨å¯æ’å…¥å˜é‡ï¼Œå•å¼•å·ä¸æ”¯æŒå˜é‡æ’å€¼echo &quot;today, let us $txt2&quot;; // ç”¨å¤§æ‹¬å· æ˜¾å¼çš„æŒ‡å®šè¿™æ˜¯å˜é‡echo &quot;My car is a &#123;$cars[0]&#125;&quot;; ?&gt; å˜é‡å˜é‡ä»¥ $ ç¬¦å·å¼€å§‹ï¼Œåé¢è·Ÿç€å˜é‡çš„åç§°, å¦‚: $color, $color = red PHP æ²¡æœ‰å£°æ˜å˜é‡çš„å‘½ä»¤ï¼Œ å˜é‡åœ¨æ‚¨ç¬¬ä¸€æ¬¡èµ‹å€¼ç»™å®ƒçš„æ—¶å€™è¢«åˆ›å»ºã€‚ 1234&lt;?php$msg = &quot;hero&quot;;echo &quot;hello &quot;, $msg;?&gt; PHP æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€, ä¼šè‡ªåŠ¨å°†å˜é‡åšç±»å‹è½¬æ¢ã€‚ åœ¨å¼ºç±»å‹çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä½¿ç”¨å˜é‡å‰å…ˆå£°æ˜ï¼ˆå®šä¹‰ï¼‰å˜é‡çš„ç±»å‹å’Œåç§°ã€‚ ä½œç”¨åŸŸPHP æœ‰å››ç§ä¸åŒçš„å˜é‡ä½œç”¨åŸŸï¼š å±€éƒ¨ä½œç”¨åŸŸ å…¨å±€ä½œç”¨åŸŸ é™æ€ä½œç”¨åŸŸ å‚æ•°ä½œç”¨åŸŸ å±€éƒ¨ä½œç”¨åŸŸå‡½æ•°å†…éƒ¨ä¸ºå±€éƒ¨ä½œç”¨åŸŸï¼Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ä¸ºå±€éƒ¨å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ã€‚ 1234567&lt;?phpfunction mySum($n) &#123; $m = 10; // å±€éƒ¨å˜é‡ return $n + $m;&#125;?&gt; å…¨å±€ä½œç”¨åŸŸå‡½æ•°å¤–éƒ¨ä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œå‡½æ•°å¤–éƒ¨å£°æ˜çš„å˜é‡ç§°ä¸ºå…¨å±€å˜é‡ å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼Œéœ€è¦åŠ  global å£°æ˜ PHPä¸ä¼šè‡ªåŠ¨æ²¿ç€ä½œç”¨åŸŸé“¾å»æŸ¥æ‰¾å˜é‡ã€‚ 12345678&lt;?php$user = &#x27;Alice&#x27;;function outputUser() &#123; global $user; // globalå£°æ˜ echo $user;&#125;?&gt; é™æ€ä½œç”¨åŸŸé™æ€å˜é‡ä»…åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­å­˜åœ¨ï¼Œå½“ç¨‹åºæ‰§è¡Œç¦»å¼€æ­¤ä½œç”¨åŸŸæ—¶ï¼Œå…¶å€¼å¹¶ä¸ä¸¢å¤±ã€‚ é™æ€å˜é‡åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒå…¶å€¼ï¼Œç±»ä¼¼çš„ç‰¹æ€§åœ¨å…¶ä»–è¯­è¨€ä¸­å¾ˆå°‘è§ã€‚ 1234567891011121314151617181920212223&lt;?phpfunction countUp() &#123; static $x = 0; $x++; echo &#x27;$x is: &#x27; , $x , &quot; &quot;;&#125;countUp();countUp();countUp();// -------$x=5;$y=10;function myTest()&#123;global $x,$y;$y=$x+$y;&#125;myTest();echo $y; // è¾“å‡º 15?&gt; å‚æ•°ä½œç”¨åŸŸå‚æ•°æ˜¯é€šè¿‡è°ƒç”¨ä»£ç å°†å€¼ä¼ é€’ç»™å‡½æ•°çš„å±€éƒ¨å˜é‡, å‚æ•°æ˜¯åœ¨å‚æ•°åˆ—è¡¨ä¸­å£°æ˜çš„ï¼Œä½œä¸ºå‡½æ•°å£°æ˜çš„ä¸€éƒ¨åˆ† 123456&lt;?phpfunction myTest($x) &#123; $x++; echo $x;&#125;?&gt; è¶…å…¨å±€å˜é‡PHP ä¸­é¢„å®šä¹‰äº†ä¸å°‘è¶…çº§å…¨å±€å˜é‡ï¼ˆsuperglobalsï¼‰, å®ƒä»¬åœ¨å…¨éƒ¨ä½œç”¨åŸŸä¸­éƒ½å¯ç›´æ¥ä½¿ç”¨ã€‚ $GLOBALS $_SERVER $_REQUEST $_POST $_GET $_COOKIE $_FILES $_ENV $_SESSION $GLOBALSPHPå°†æ‰€æœ‰å…¨å±€å˜é‡å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º $GLOBALS çš„æ•°ç»„ä¸­ã€‚ è¿™ä¸ªæ•°ç»„å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œå¯ç›´æ¥ç”¨æ¥æ›´æ–°å…¨å±€å˜é‡ã€‚ è¶…å…¨å±€å˜é‡ $GLOBALS å¯ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦åŠ  global å£°æ˜ 123456789101112&lt;?php$x=5;$y=10;function myTest()&#123; $GLOBALS[&#x27;y&#x27;] = $GLOBALS[&#x27;x&#x27;]+$GLOBALS[&#x27;y&#x27;];&#125;myTest();echo $y;?&gt; $_SERVER$_SERVERæ˜¯ä¸€ä¸ªåŒ…å«æœåŠ¡ç«¯ä¿¡æ¯çš„å…³è”æ•°ç»„ 123456789101112131415&lt;?phpecho $_SERVER[&#x27;SERVER_NAME&#x27;];echo $_SERVER[&#x27;SERVER_PROTOCOL&#x27;];echo $_SERVER[&#x27;REQUEST_METHOD&#x27;];echo $_SERVER[&#x27;HTTP_HOST&#x27;];echo $_SERVER[&#x27;HTTP_REFERER&#x27;]; echo $_SERVER[&#x27;HTTP_USER_AGENT&#x27;]; // /try/demo_source/demo_global_server.phpecho $_SERVER[&#x27;PHP_SELF&#x27;]; // /try/demo_source/demo_global_server.phpecho $_SERVER[&#x27;SCRIPT_NAME&#x27;]; ?&gt; $_REQUEST$_REQUEST ç”¨äºæ”¶é›† HTML è¡¨å•æäº¤çš„æ•°æ®ã€‚ 1234567891011&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER[&#x27;PHP_SELF&#x27;];?&gt;&quot;&gt; Name: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt; &lt;input type=&quot;submit&quot;&gt;&lt;/form&gt;&lt;?php $name = $_REQUEST[&#x27;fname&#x27;]; echo $name;?&gt; $_POST$_POST ç”¨äºæ”¶é›†POSTæ–¹å¼æäº¤çš„è¡¨å•æ•°æ® 12345678910&lt;!--é¡µé¢postç»™è‡ªå·±--&gt;&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER[&#x27;PHP_SELF&#x27;];?&gt;&quot;&gt; Name: &lt;input type=&quot;text&quot; name=&quot;fname&quot;&gt; &lt;input type=&quot;submit&quot;&gt;&lt;/form&gt;&lt;?php $name = $_POST[&#x27;fname&#x27;]; echo $name;?&gt; $_GET$_GET ç”¨äºæ”¶é›†GETæ–¹å¼æäº¤çš„è¡¨å•æ•°æ®&#x2F;URLä¸­å‘é€çš„æ•°æ® 123456&lt;a href=&quot;test_get.php?subject=PHP&amp;web=w3cschool.cc&quot;&gt;Test $GET&lt;/a&gt;&lt;?php echo &quot;Study &quot; . $_GET[&#x27;subject&#x27;] . &quot; at &quot; . $_GET[&#x27;web&#x27;];?&gt; æ•°æ®ç±»å‹PHPçš„æ•°æ®ç±»å‹åŒ…æ‹¬: string, integer, float, boolean, array, object, null var_dump() å¯æŸ¥çœ‹å˜é‡çš„æ•°æ®ç±»å‹ å­—ç¬¦ä¸²å¯ä»¥å°†ä»»ä½•æ–‡æœ¬æ”¾åœ¨å•å¼•å·å’ŒåŒå¼•å·ä¸­ 123456789&lt;?php// åŒå¼•å· åŒ…å«çš„å­—ç¬¦ä¸²å¯æ’å…¥å˜é‡$name = &#x27;Alice&#x27;;$x = &quot;Hello $name!&quot;;// å•å¼•å· åŒ…æ‹¬å­—ç¬¦ä¸²å­—é¢é‡ $x = &#x27;Hello world!&#x27;; ?&gt; å’Œå…¶ä»–è¯­è¨€å¾ˆä¸åŒçš„æ˜¯ï¼Œå­—ç¬¦ä¸²è¿æ¥ç”¨ . æ“ä½œç¬¦ è½¬ä¹‰åºåˆ—åœ¨åŒå¼•å·ä¸­æ‰æœ‰æ•ˆ 12345678&lt;?php// å­—ç¬¦ä¸²è¿æ¥$x = &quot;Hello&quot; . &quot; world!&quot;;// å­—ç¬¦ä¸²è½¬ä¹‰$x = &quot;Hello world! &quot;;?&gt; å­—ç¬¦ä¸²å‡½æ•° 12345678&lt;?php//è·å–å­—ç¬¦ä¸²é•¿åº¦echo strlen(&quot;Hello world!&quot;); //è·å–å­ä¸²ä½ç½®echo strpos(&quot;Hello world!&quot;,&quot;world&quot;); ?&gt; æ•´å‹æ•´å‹æ•°å€¼æœ‰å¤šç§è¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œè¿›åˆ¶è½¬æ¢å‡½æ•° base_convert() 1234567891011&lt;?php// åè¿›åˆ¶$x = 5985;$x = -345; // negative number// åå…­è¿›åˆ¶ 0xå¼€å¤´$x = 0x8C;// å…«è¿›åˆ¶ 0å¼€å¤´$x = 047;?&gt; æµ®ç‚¹å‹æµ®ç‚¹æ•°å³å°æ•°ï¼Œå¯ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º 123456789&lt;?php$x = 10.365;// ç§‘å­¦è®¡æ•°æ³•$x = 2.4e3;$x = 8E-5;?&gt; å¸ƒå°”å‹å¸ƒå°”å‹åªæœ‰ä¸¤ä¸ªå€¼: true å’Œ false 1234567&lt;?php$isLike = false;if ($color == &quot;blue&quot;) &#123; $isLike = true;&#125;?&gt; æ•°ç»„ä¸€ä¸ªæ•°ç»„å˜é‡å¯ä»¥å­˜å‚¨å¤šä¸ªå€¼æ•°ç»„æ˜¯å¾ˆå¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œåˆ†ä¸ºï¼šæ™®é€šæ•°ç»„å’Œå…³è”æ•°ç»„ ç”¨åºå·åšç´¢å¼•çš„å«æ™®é€šæ•°ç»„ï¼Œç”¨å­—ç¬¦ä¸²åšç´¢å¼•çš„å«å…³è”æ•°ç»„ 12345678910&lt;?php// æ™®é€šæ•°ç»„$cars = array(&quot;Volvo&quot;,&quot;BMW&quot;,&quot;Toyota&quot;);print_r($cars);echo $cars[0];// å…³è”æ•°ç»„$captain = array(&quot;name&quot; =&gt; &quot;Lufy&quot;, &quot;age&quot; =&gt; 18);echo $captain[&quot;name&quot;];?&gt; æ•°ç»„çš„ä½¿ç”¨ 123456789101112131415161718192021&lt;?php$cars = array(&quot;Volvo&quot;, &quot;BMW&quot;, &quot;Toyota&quot;); // è®¿é—®å…ƒç´ echo &quot;I like &quot; . $cars[0] . &quot;, &quot; . $cars[1]; // è·å–é•¿åº¦echo count($cars);// éå†$len = count($cars);for ($i = 0; $i &lt; $len; $i++) &#123; echo $cars[$i];&#125;// éå†å…³è”æ•°ç»„$lufy = array(&quot;name&quot; =&gt; &quot;Lufy&quot;, &quot;skill&quot; =&gt; &quot;stretch&quot;, &quot;age&quot; =&gt; 11);foreach ($lufy as $key =&gt; $value) &#123; echo &quot;Key=&quot; . $key . &quot;, Value=&quot; . $value;&#125;?&gt; æ•°ç»„æ’åº sort() å¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ— rsort() å¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ— asort() æ ¹æ®å…³è”æ•°ç»„çš„å€¼ï¼Œå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ— arsort() æ ¹æ®å…³è”æ•°ç»„çš„å€¼ï¼Œå¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ— ksort() æ ¹æ®å…³è”æ•°ç»„çš„é”®ï¼Œå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ— krsort() æ ¹æ®å…³è”æ•°ç»„çš„é”®ï¼Œå¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ— 123456789101112131415161718192021&lt;?php// sort()$cars = array(&quot;Volvo&quot;, &quot;BMW&quot;, &quot;Toyota&quot;);sort($cars);$len = count($cars);for ($x = 0; $x &lt; $len; $x++) &#123; echo $cars[$x];&#125;// rsort()rsort($cars);//asort() arsort() å…³è”æ•°ç»„æ’åº value$friendAges = array(&quot;Peter&quot; =&gt; 33, &quot;Ben&quot; =&gt; 36, &quot;Joe&quot; =&gt; 24);asort($friendAges);arsort($friendAges);//ksort() krsort() å…³è”æ•°ç»„æ’åº keyksort($friendAges);krsort($friendAges); å¯¹è±¡å…ˆç”¨ class å…³é”®å­—åˆ›å»ºè‡ªå®šä¹‰ç±»ï¼Œç„¶åä½¿ç”¨ new å…³é”®å­—åˆ›å»ºå¯¹è±¡ PHPç”¨ç®­å¤´ -&gt; è®¿é—®å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• 123456789101112131415161718192021222324252627&lt;?phpclass Car&#123; var $color; function Car($color=&quot;green&quot;) &#123; $this-&gt;color = $color; &#125; function getcolor() &#123; return $this-&gt;color; &#125;&#125;function print_vars($obj) &#123; // éå†å…³è”æ•°ç»„ foreach (get_object_vars($obj) as $prop =&gt; $val) &#123; echo &quot;\\t$prop = $val &quot;; &#125;&#125;$myCar = new Car(&quot;white&quot;);// show myCar propertiesprint_vars($myCar);?&gt; nullnullå€¼è¡¨ç¤ºå˜é‡æ²¡æœ‰å€¼nullç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå°±æ˜¯ null 1234567&lt;?php$x = &quot;Hello world!&quot;;$x = null;var_dump($x);?&gt; å¸¸é‡å¸¸é‡æ˜¯ä¸€ä¸ªç®€å•å€¼çš„æ ‡è¯†ç¬¦ï¼Œå¸¸é‡åœ¨è„šæœ¬ä¸­ä¸èƒ½æ”¹å˜ï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªè„šæœ¬ä¸­éƒ½å¯ä»¥ä½¿ç”¨ å¸¸é‡åä¸éœ€è¦åŠ  $ ä¿®é¥°ç¬¦ å®šä¹‰å¸¸é‡ï¼Œä½¿ç”¨ define() å‡½æ•°ï¼š define(string constant_name, mixed value, case_sensitive = true) è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°: constant_nameï¼šå¿…é€‰å‚æ•°ï¼Œå¸¸é‡åç§°ï¼Œå³æ ‡å¿—ç¬¦ã€‚ valueï¼šå¿…é€‰å‚æ•°ï¼Œå¸¸é‡çš„å€¼ã€‚ case_sensitiveï¼šå¯é€‰å‚æ•°ï¼ŒæŒ‡å®šæ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼Œè®¾å®šä¸º true è¡¨ç¤ºä¸æ•æ„Ÿã€‚ 123456&lt;?phpdefine(&quot;GREETING&quot;, &quot;Welcome to Hero College!&quot;);echo GREETING;?&gt; è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ï¼š !, &amp;&amp;, ||, and, or, xor å…³ç³»è¿ç®—ç¬¦ï¼š ==, !=, &lt;&gt;, ===, !== === æ£€æŸ¥ç±»å‹å’Œå€¼æ˜¯å¦éƒ½ç›¸ç­‰ï¼Œ!== æ£€æŸ¥ç±»å‹å’Œå€¼æ˜¯å¦ä¸å®Œå…¨ç›¸ç­‰ 123456789101112131415161718192021&lt;?php//æ•°ç»„è¿ç®—ç¬¦ åˆå¹¶: + $x = array(&quot;a&quot; =&gt; &quot;red&quot;, &quot;b&quot; =&gt; &quot;green&quot;);$y = array(&quot;c&quot; =&gt; &quot;blue&quot;, &quot;d&quot; =&gt; &quot;yellow&quot;);$z = $x + $y; // $x å’Œ $y æ•°ç»„åˆå¹¶var_dump($z);// ç»å¯¹ç›¸ç­‰: ===$n = 10;$s = &#x27;10&#x27;var_dump($n == $s); // truevar_dump($n === $s); // false// æ•°ç»„ç»å¯¹ç›¸ç­‰ï¼Œè¦æ±‚å¯¹åº”ä½ç½®çš„é”®å€¼ç»å¯¹ç›¸ç­‰(å€¼å’Œç±»å‹éƒ½ç›¸ç­‰)$a = array(10, &#x27;20&#x27;)$b = array(&#x27;10&#x27;, 20)var_dump($a == $b); // truevar_dump($a === $b); // false?&gt; æµç¨‹æ§åˆ¶åˆ†æ”¯å’Œå¾ªç¯æµç¨‹çš„æ§åˆ¶è¯­æ³•å’ŒJAVAç­‰è¯­è¨€ä¸€æ · 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970&lt;?php$t = date(&quot;H&quot;);// å•åˆ†æ”¯if ($t &lt; &quot;20&quot;) &#123; echo &quot;Have a good day!&quot;;&#125;$t = date(&quot;H&quot;);// åŒåˆ†æ”¯if ($t &lt; &quot;20&quot;) &#123; echo &quot;Have a good day!&quot;;&#125; else &#123; echo &quot;Have a good night!&quot;;&#125;$t = date(&quot;H&quot;);// å¤šåˆ†æ”¯if ($t &lt; &quot;10&quot;) &#123; echo &quot;good morning!&quot;;&#125; else if ($t &lt; &quot;20&quot;) &#123; echo &quot;good day!&quot;;&#125; else &#123; echo &quot;good night!&quot;;&#125;$favcolor = &quot;red&quot;;// å¤šåˆ†æ”¯switch ($favcolor) &#123; case &quot;red&quot;: echo &quot;Your favorite color is red!&quot;; break; case &quot;blue&quot;: echo &quot;Your favorite color is blue!&quot;; break; case &quot;green&quot;: echo &quot;Your favorite color is green!&quot;; break; default: echo &quot;Your favorite color is others&quot;;&#125;// æ¡ä»¶å¾ªç¯$i = 1;while ($i &lt;= 5) &#123; echo &quot;The number is &quot; . $i . &quot;&lt;br&gt;&quot;; $i++;&#125;$i = 1;do &#123; $i++; echo &quot;The number is &quot; . $i . &quot;&lt;br&gt;&quot;;&#125;while ($i &lt;= 5);// å›ºå®šæ¬¡æ•°å¾ªç¯for ($i = 1; $i &lt;= 5; $i++) &#123; echo &quot;The number is &quot; . $i . &quot;&lt;br&gt;&quot;;&#125;// å¾ªç¯éå†$x = array(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);foreach ($x as $value) &#123; echo $value . &quot;&lt;br&gt;&quot;;&#125;?&gt; å‡½æ•°PHP çš„çœŸæ­£å¨åŠ›æºè‡ªäºå®ƒçš„å‡½æ•°, åœ¨ PHP ä¸­ï¼Œæä¾›äº†è¶…è¿‡ 1000 ä¸ªå†…å»ºçš„å‡½æ•°ã€‚ 123456789101112131415161718&lt;?php// å‡½æ•°ä¼ å‚function outputMessage($fname, $punctuation)&#123; echo $fname . &quot; laugh&quot; . $punctuation . &quot;&lt;br&gt;&quot;;&#125;outputMessage(&quot;Nami&quot;, &quot;!!&quot;);// å‡½æ•°è¿”å›å€¼function add($x, $y)&#123; $total = $x + $y; return $total;&#125;echo &quot;1 + 16 = &quot; . add(1, 16);?&gt; é­”æœ¯å˜é‡é­”æœ¯å¸¸é‡çš„å€¼è·Ÿå®ƒä»¬åœ¨ä»£ç ä¸­çš„ä½ç½®ç›¸å…³ï¼Œä¸åŒä½ç½®ä¼šè¿”å›ä¸åŒçš„å€¼ __LINE__ æ–‡ä»¶ä¸­çš„å½“å‰è¡Œå·ã€‚ __FILE__ æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶åã€‚å¦‚æœç”¨åœ¨è¢«åŒ…å«æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…å«çš„æ–‡ä»¶åã€‚ __DIR__ æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å¦‚æœç”¨åœ¨è¢«åŒ…æ‹¬æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…æ‹¬çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ __FUNCTION__ è¿”å›è¯¥å‡½æ•°è¢«å®šä¹‰æ—¶çš„åå­— 123456&lt;?phpfunction test() &#123; echo &#x27;å‡½æ•°åä¸ºï¼š&#x27; . __FUNCTION__ ;&#125;test();?&gt; __CLASS__ è¿”å›è¯¥ç±»è¢«å®šä¹‰æ—¶çš„åå­— ç±»ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ Foo\\Barï¼‰__CLASS__ å¯¹ trait ä¹Ÿèµ·ä½œç”¨ã€‚å½“ç”¨åœ¨ trait æ–¹æ³•ä¸­æ—¶ï¼Œ__CLASS__ æ˜¯è°ƒç”¨ trait æ–¹æ³•çš„ç±»çš„åå­—ã€‚ 12345678910&lt;?phpclass Car &#123; function printInfo() &#123; echo &#x27;ç±»åä¸ºï¼š&#x27; . __CLASS__ . &quot;&lt;br&gt;&quot;; echo &#x27;å‡½æ•°åä¸ºï¼š&#x27; . __FUNCTION__ ; &#125;&#125;$t = new Car();$t-&gt;printInfo();?&gt; __TRAIT__ Trait çš„åå­—, è‡ª PHP 5.4.0 èµ·ï¼ŒPHP å®ç°äº†ä»£ç å¤ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç§°ä¸º traitsã€‚ Trait ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ Foo\\Barï¼‰ã€‚ ä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜sayHelloè¢«æ’å…¥çš„ SayWorld Trait ä¸­çš„ sayHello æ–¹æ³•æ‰€è¦†ç›–ã€‚ ä¼˜å…ˆé¡ºåºæ˜¯ï¼š å½“å‰ç±»ä¸­çš„æ–¹æ³•ä¼šè¦†ç›– trait æ–¹æ³•ï¼Œ trait æ–¹æ³•åˆè¦†ç›–äº†åŸºç±»ä¸­çš„æ–¹æ³•ã€‚ 123456789101112131415161718192021&lt;?phpclass Base &#123; public function sayHello() &#123; echo &#x27;Hello &#x27;; &#125;&#125;trait SayWorld &#123; public function sayHello() &#123; parent::sayHello(); echo &#x27;World!&#x27;; &#125;&#125;class MyHelloWorld extends Base &#123; use SayWorld;&#125;$o = new MyHelloWorld();$o-&gt;sayHello();?&gt; __METHOD__ è¿”å›æ–¹æ³•å&#x2F;å‡½æ•°å 123456&lt;?phpfunction test() &#123; echo &#x27;å‡½æ•°åä¸ºï¼š&#x27; . __METHOD__ ;&#125;test();?&gt; __NAMESPACE__ è¿”å›å½“å‰å‘½åç©ºé—´çš„åç§° 12345&lt;?phpnamespace MyProject;echo &#x27;å‘½åç©ºé—´ä¸ºï¼š&quot;&#x27;, __NAMESPACE__, &#x27;&quot;&#x27;; // è¾“å‡º &quot;MyProject&quot;?&gt; åŠ¨æ€è¯­è¨€ç‰¹å¾PHPæ”¯æŒåŠ¨æ€è®¿é—®ç±»ã€å‡½æ•°å’Œå¸¸é‡ ç±»å’Œå‡½æ•°çš„åç§°å­˜åœ¨å˜é‡ä¸­ï¼Œç„¶åç”¨è¯¥å˜é‡åŠ¨æ€è°ƒç”¨ç±»å’Œå‡½æ•°ï¼Œè¿™ç§æå…¶åŠ¨æ€çš„è®¿é—®æ–¹å¼å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸å¸¸ç”¨ 1234567891011121314151617181920212223//example.php&lt;?phpclass MyClass &#123; function __construct() &#123; echo __METHOD__, &quot; &quot;; &#125;&#125;function myFunction()&#123; echo __FUNCTION__, &quot; &quot;;&#125;const MY_FAV = &quot;LEARNING&quot;;$a = &#x27;MyClass&#x27;;$obj = new $a; // MyClass::__construct$b = &#x27;myFunction&#x27;;$b(); // myFunctionecho constant(&#x27;MY_FAV&#x27;), &quot; &quot;; // LEARNING?&gt; å‘½åç©ºé—´PHP å‘½åç©ºé—´(namespace)æ˜¯åœ¨ PHP 5.3 ä¸­åŠ å…¥çš„ï¼Œå¦‚æœä½ å­¦è¿‡ C#å’Œ Javaï¼Œé‚£å‘½åç©ºé—´å°±ä¸ç®—ä»€ä¹ˆæ–°äº‹ç‰©ã€‚ ä¸è¿‡åœ¨ PHP å½“ä¸­è¿˜æ˜¯æœ‰ç€ç›¸å½“é‡è¦çš„æ„ä¹‰ã€‚ PHP å‘½åç©ºé—´å¯ä»¥è§£å†³ä»¥ä¸‹ä¸¤ç±»é—®é¢˜ï¼š ç”¨æˆ·ä»£ç ä¸ PHP å†…éƒ¨çš„ç±»&#x2F;å‡½æ•°&#x2F;å¸¸é‡ä¹‹é—´çš„åå­—å†²çªã€‚ åˆ›å»ºåˆ«åï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å¸¸é‡ã€ç±»å’Œå‡½æ•°åéƒ½æ”¾åœ¨å…¨å±€ç©ºé—´ä¸‹ï¼Œå°±å’Œ PHP æ”¯æŒå‘½åç©ºé—´ä¹‹å‰ä¸€æ ·ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸­åŒ…å«å‘½åç©ºé—´ï¼Œå®ƒå¿…é¡»åœ¨å…¶å®ƒæ‰€æœ‰ä»£ç ä¹‹å‰å£°æ˜å‘½åç©ºé—´ å£°æ˜ MyProject å‘½åç©ºé—´ 12345&lt; ?phpnamespace MyProject;// ... ä»£ç  ... ä¹Ÿå¯ä»¥åœ¨åŒä¸€ä¸ªphpæ–‡ä»¶ä¸­å®šä¹‰ä¸åŒçš„å‘½åç©ºé—´ä»£ç  123456789101112namespace MyProject1;// MyProject1 å‘½åç©ºé—´ä¸­çš„PHPä»£ç namespace MyProject2;// MyProject2 å‘½åç©ºé—´ä¸­çš„PHPä»£ç // å¦ä¸€ç§è¯­æ³•namespace MyProject3 &#123; // MyProject3 å‘½åç©ºé—´ä¸­çš„PHPä»£ç &#125;?&gt; åœ¨å£°æ˜å‘½åç©ºé—´ä¹‹å‰ï¼Œå”¯ä¸€åˆæ³•çš„ä»£ç æ˜¯ç”¨äºå®šä¹‰æºæ–‡ä»¶ç¼–ç æ–¹å¼çš„ declare è¯­å¥ã€‚æ‰€æœ‰é PHP ä»£ç åŒ…æ‹¬ç©ºç™½ç¬¦éƒ½ä¸èƒ½å‡ºç°åœ¨å‘½åç©ºé—´çš„å£°æ˜ä¹‹å‰ã€‚ 123456789101112131415&lt;?phpdeclare(encoding=&#x27;UTF-8&#x27;);namespace MyProject &#123; const CONNECT_OK = 1; class Connection &#123; /* ... */ &#125; function connect() &#123; /* ... */ &#125;&#125;// namespaceä¸å¸¦åç§°ï¼Œåˆ™è¡¨ç¤ºå…¨å±€å‘½åç©ºé—´namespace &#123; session_start(); $a = MyProject\\connect(); echo MyProject\\Connection::start();&#125;?&gt; ä»¥ä¸‹ä»£ç ä¼šå‡ºç°è¯­æ³•é”™è¯¯ï¼š 12345&lt;html&gt;&lt;?phpnamespace MyProject; // å‘½åç©ºé—´å‰å‡ºç°äº†â€œ&lt;html&gt;â€ ä¼šè‡´å‘½é”™è¯¯?&gt; å­å‘½åç©ºé—´ç±»ä¼¼çˆ¶æ–‡ä»¶å¤¹åŒ…å«å­æ–‡ä»¶å¤¹ï¼Œå‘½åç©ºé—´ä¸‹è¿˜å¯ä»¥åˆ’åˆ†å­å‘½åç©ºé—´ã€‚å­å‘½åç©ºé—´åŒæ ·å¯ä»¥åŒ…å«ç±»ã€å‡½æ•°å’Œå¸¸é‡ç­‰ã€‚ 12345678910&lt;?phpnamespace MyProject\\Sub\\Level;const CONNECT_OK = 1;class Connection &#123; /* ... */ &#125;function Connect() &#123; /* ... */ &#125;?&gt; å‘½åç©ºé—´çš„ä½¿ç”¨PHPå‘½åç©ºé—´é‡Œçš„ç±»å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å¼•ç”¨ï¼šéé™å®šåç§°ï¼Œé™å®šåç§°ï¼Œå®Œå…¨é™å®šåç§°ã€‚ éé™å®šåç§° éé™å®šåç§°å³ä¸åŒ…å«å‰ç¼€çš„ç±»åç§°ã€‚ ç”¨éé™å®šåç§°è®¿é—®ç±»å’Œç±»çš„é™æ€æ–¹æ³• 123$a = new Foo(); Foo::staticmethod();?&gt; å¦‚æœå½“å‰å‘½åç©ºé—´æ˜¯ MyBlog, åˆ™ Foo å°†è¢«è§£æä¸º MyBlog\\Fooã€‚éé™å®šåç§°çš„å¼•ç”¨é»˜è®¤åœ¨å½“å‰å‘½åç©ºé—´æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°çš„è¯å°±ä¼šåˆ°å…¨å±€å‘½åç©ºé—´æ‰¾ ä¸å®Œå…¨é™å®šåç§°ä¸å®Œå…¨é™å®šåç§°ï¼Œå³åŒ…å«ç›¸å¯¹å‰ç¼€çš„ç±»åç§°ã€‚ 123456789101112$a = new BlogCommon\\Foo(); BlogCommon\\Foo::staticmethod();?&gt;``` å¦‚æœå½“å‰çš„å‘½åç©ºé—´æ˜¯ `MyBlog` åˆ™ `Foo` ä¼šè¢«è§£æä¸º `MyBlog\\BlogCommon\\Foo`ã€‚å¸¦ç›¸å¯¹å‘½åç©ºé—´å‰ç¼€çš„å¼•ç”¨ï¼Œè‡ªåŠ¨åœ¨å¼€å¤´æ·»åŠ è°ƒç”¨ä»£ç æ‰€å¤„çš„å‘½åç©ºé—´ (*ç±»ä¼¼ç›¸å¯¹è·¯å¾„*)3. å®Œå…¨é™å®šåç§° åŒ…å«äº†å…¨å±€å‰ç¼€æ“ä½œç¬¦çš„åç§°```php$a = new \\MyBlog\\Foo();\\MyBlog\\Foo::staticmethod();?&gt; Foo æ€»æ˜¯è¢«è§£æä¸º \\MyBlog\\Fooã€‚å¸¦ç»å¯¹å‘½åç©ºé—´å‰ç¼€çš„å¼•ç”¨,å¼•ç”¨è·¯å¾„å·²æ˜ç¡®ï¼Œä¸ä¼šæ·»åŠ ä»»ä½•å‰ç¼€ã€‚(ç±»ä¼¼ç»å¯¹è·¯å¾„) å‘½åç©ºé—´ç»¼åˆç¤ºä¾‹å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šlufy.php å’Œ onePiece.phpï¼Œå®ƒä»¬åˆ†åˆ«å±äºä¸¤ä¸ªä¸åŒçš„å‘½åç©ºé—´ OnePiece\\Lufy å’Œ OnePiece lufy.php ä»£ç å¦‚ä¸‹ 12345678910111213&lt;?phpnamespace OnePiece\\Lufy;const FAV = &#x27;Eating&#x27;;function sayHi() &#123; echo &quot;hello everyone&quot;;&#125;class Ability &#123; static function learn($name) &#123; echo &quot;Lufy is learning ability $name!&quot;; &#125;&#125;?&gt; onePiece.php ä»£ç å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536&lt;?phpnamespace OnePiece;include &#x27;lufy.php&#x27;;const FAV = &#x27;Opening Party&#x27;;function sayHi() &#123; echo &quot;hi, everyone! we are a team!&quot;;&#125;class Ability &#123; static function learn($name) &#123; echo &quot;Zoro and others are learning ability $name!&quot;; &#125;&#125;// éé™å®šåç§°// è§£æä¸º \\OnePiece\\sayHisayHi();// è§£æä¸º \\OnePiece\\Ability::learnAbility::learn(&#x27;php&#x27;); // ä¸å®Œå…¨é™å®šåç§°// è§£æä¸º \\OnePiece\\Lufy\\sayHiLufy\\sayHi(); // è§£æä¸ºç±» \\OnePiece\\Lufy\\Ability, ä»¥åŠç±»çš„æ–¹æ³• learnLufy\\Ability::learn(&#x27;php&#x27;); // å®Œå…¨é™å®šåç§°\\OnePiece\\Lufy\\sayHi(); \\OnePiece\\Lufy\\Ability::learn(&#x27;php&#x27;);?&gt; å‘½åç©ºé—´å†…è®¿é—®å…¨å±€ç©ºé—´åœ¨å‘½åç©ºé—´å†…éƒ¨è®¿é—®å…¨å±€ç±»ã€å‡½æ•°å’Œå¸¸é‡, ç”¨ \\ å‰ç¼€å³å¯ï¼š 1234567891011&lt;?phpnamespace Foo;function strlen() &#123;&#125;const INI_ALL = 3;class Exception &#123;&#125;$a = \\strlen(&#x27;hi&#x27;); // è°ƒç”¨å…¨å±€å‡½æ•°strlen$b = \\INI_ALL; // è®¿é—®å…¨å±€å¸¸é‡ INI_ALL$c = new \\Exception(&#x27;error&#x27;); // å®ä¾‹åŒ–å…¨å±€ç±» Exception?&gt; åŠ¨æ€è®¿é—®å‘½åç©ºé—´åŠ¨æ€è®¿é—®å‘½åç©ºé—´ä¸‹çš„ç±»ã€å‡½æ•°å’Œå¸¸é‡ 1234567891011121314151617181920212223&lt;?phpnamespace OnePiece;class MyClass &#123; function __construct() &#123; echo __METHOD__, &quot; &quot;; &#125;&#125;function myFunction() &#123; echo __FUNCTION__, &quot; &quot;;&#125;const MY_CODE = &quot;TIDY&quot;;$a = &#x27;OnePiece\\MyClass&#x27;;$obj = new $a(); // OnePiece\\MyClass::__construct$b = &#x27;OnePiece\\myFunction&#x27;;$b(); // OnePiece\\myFunctionecho constant(&#x27;OnePiece\\MY_CODE&#x27;), &quot; &quot;; // TIDY?&gt; å‘½åç©ºé—´é­”æœ¯å˜é‡å‘½åç©ºé—´é­”æœ¯å˜é‡ __NAMESPACE__çš„å€¼æ˜¯å½“å‰å‘½åç©ºé—´åç§°ï¼Œåœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ï¼Œå®ƒçš„å€¼ä¸ºç©ºå­—ç¬¦ä¸² 12345&lt;?phpnamespace MyProject;echo &#x27;&quot;&#x27;, __NAMESPACE__, &#x27;&quot;&#x27;; // è¾“å‡º &quot;MyProject&quot;?&gt; ä½¿ç”¨__NAMESPACE__åŠ¨æ€è®¿é—®ç±»ï¼Œå¹¶åˆ›å»ºå®ä¾‹ã€‚ 123456789&lt;?phpnamespace MyProject;function get($classname)&#123; $a = __NAMESPACE__ . &#x27;\\\\&#x27; . $classname; return new $a;&#125;?&gt; namespaceå…³é”®å­—å…³é”®å­— namespace çš„ä½œç”¨æœ‰ä¸¤ä¸ª å£°æ˜ä¸€ä¸ªå‘½åç©ºé—´ ç”¨æ¥æ˜¾å¼è®¿é—®å½“å‰å‘½åç©ºé—´æˆ–å­å‘½åç©ºé—´ä¸­çš„å…ƒç´ ã€‚å®ƒç­‰ä»·äºç±»ä¸­çš„ self æ“ä½œç¬¦ã€‚ 1234567891011121314151617181920&lt;?phpnamespace OnePiece;function sayHi() &#123; echo &quot;Hi, everybody~~&quot;;&#125;class Ability &#123; static function learn($name) &#123; echo &quot;I can learn &quot;, $name, &quot; &quot;; &#125;&#125;const LIKE_COLOR = &#x27;SKY-BLUE&#x27;;namespace\\sayHi(); namespace\\Ability::learn(&#x27;PHP&#x27;); echo namespace\\LIKE_COLOR; ?&gt; å‘½åç©ºé—´åˆ«åPHPæ”¯æŒä¸ºå‘½åç©ºé—´å’Œå‘½åç©ºé—´å†…éƒ¨ç±»å®šä¹‰åˆ«å æ³¨æ„ï¼šPHPä¸æ”¯æŒä¸ºå¯¼å…¥å‘½åç©ºé—´å†…çš„å‡½æ•°æˆ–å¸¸é‡å®šä¹‰åˆ«åã€‚ ä½¿ç”¨ use å…³é”®å­—å®šä¹‰åˆ«å captain-lufy.phpä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132&lt;?phpnamespace Cartoon\\OnePiece\\Lufy;include &#x27;inc/header.php&#x27;;function sayHi()&#123; clog(&quot;hi, I am lufy&quot;);&#125;class Hobby&#123; var $likings; function add($name) &#123; $this-&gt;likings[] = $name; &#125; function show() &#123; print_r($this-&gt;likings); &#125;&#125;// $lufyHobby = new Hobby();// $lufyHobby-&gt;add(&#x27;eating&#x27;);// $lufyHobby-&gt;add(&#x27;sleeping&#x27;);// $lufyHobby-&gt;show();include &#x27;inc/footer.php&#x27;; use-namespace.phpç”¨äºæµ‹è¯•å‘½åç©ºé—´åˆ«åï¼Œä»£ç å¦‚ä¸‹ 12345678910111213141516171819&lt;?phpinclude &#x27;captain-lufy.php&#x27;;// ç›´æ¥ç”¨å®Œæ•´å‘½åç©ºé—´è·¯å¾„å¼•ç”¨é‡Œé¢çš„æ–¹æ³•Cartoon\\OnePiece\\Lufy\\sayHi();// åŒ use Cartoon\\OnePiece\\Lufy as Lufy;use Cartoon\\OnePiece\\Lufy;Lufy\\sayHi();use Cartoon\\OnePiece\\Lufy as Lu;Lu\\sayHi();// å¯ä»¥ç»™å‘½åç©ºé—´å†…çš„ç±»èµ·åˆ«åuse Cartoon\\OnePiece\\Lufy\\Hobby as Hob;$hob = new Hob();$hob-&gt;add(&#x27;running&#x27;);$hob-&gt;show(); ä¸€è¡Œä¸­åŒ…å«å¤šä¸ª use è¯­å¥ 123456&lt;?phpuse My\\Full\\Classname as MyClass, My\\Full\\NSname;$obj = new MyClass; // å®ä¾‹åŒ– My\\Full\\Classname å¯¹è±¡NSname\\subns\\func(); // è°ƒç”¨å‡½æ•° My\\Full\\NSname\\subns\\func?&gt; å¯¼å…¥æ“ä½œæ˜¯åœ¨ç¼–è¯‘æ‰§è¡Œçš„ï¼Œä½†åŠ¨æ€çš„ç±»åç§°ã€å‡½æ•°åç§°æˆ–å¸¸é‡åç§°åˆ™ä¸æ˜¯ã€‚ 1234567&lt;?phpuse My\\Full\\Classname as Another, My\\Full\\NSname;$obj = new Another; // å®ä¾‹åŒ–ä¸€ä¸ª My\\Full\\Classname å¯¹è±¡$a = &#x27;Another&#x27;;$obj = new $a; // å®ä¾‹åŒ–ä¸€ä¸ª Another å¯¹è±¡?&gt; å¦å¤–ï¼Œå¯¼å…¥æ“ä½œåªå½±å“éé™å®šåç§°å’Œä¸å®Œå…¨é™å®šåç§°ã€‚å®Œå…¨é™å®šåç§°ç”±äºæ˜¯ç¡®å®šçš„ï¼Œæ•…ä¸å—å¯¼å…¥çš„å½±å“ã€‚ 12345678&lt;?phpuse My\\Full\\Classname as Another, My\\Full\\NSname;$obj = new Another; // instantiates object of class My\\Full\\Classname$obj = new \\Another; // instantiates object of class Another$obj = new Another\\thing; // instantiates object of class My\\Full\\Classname\\thing$obj = new \\Another\\thing; // instantiates object of class Another\\thing?&gt; å‘½åç©ºé—´æŸ¥æ‰¾åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œå½“ PHP é‡åˆ°ä¸€ä¸ªéé™å®šçš„ç±»ã€å‡½æ•°æˆ–å¸¸é‡åç§°æ—¶ï¼Œå®ƒä½¿ç”¨ä¸åŒçš„ä¼˜å…ˆç­–ç•¥æ¥è§£æè¯¥åç§°ã€‚ ç±»åæ€»æ˜¯è§£æåˆ°å½“å‰å‘½åç©ºé—´(æ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™)ã€‚å› æ­¤åœ¨è®¿é—®ç³»ç»Ÿå†…éƒ¨æˆ–ä¸åŒ…å«åœ¨å‘½åç©ºé—´ä¸­çš„ç±»åç§°æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šåç§° å‡½æ•°å’Œå¸¸é‡æ¥è¯´ï¼Œå¦‚æœå½“å‰å‘½åç©ºé—´ä¸­ä¸å­˜åœ¨è¯¥å‡½æ•°æˆ–å¸¸é‡ï¼ŒPHP ä¼šé€€è€Œä½¿ç”¨å…¨å±€ç©ºé—´ä¸­çš„å‡½æ•°æˆ–å¸¸é‡ã€‚ 123456789&lt;?phpnamespace A\\B\\C;class Exception extends \\Exception &#123;&#125;$a = new Exception(&#x27;hi&#x27;); // $a æ˜¯ç±» A\\B\\C\\Exception çš„ä¸€ä¸ªå¯¹è±¡$b = new \\Exception(&#x27;hi&#x27;); // $b æ˜¯ç±» Exception çš„ä¸€ä¸ªå¯¹è±¡$c = new ArrayObject; // è‡´å‘½é”™è¯¯, æ‰¾ä¸åˆ° A\\B\\C\\ArrayObject ç±»?&gt; å…¨å±€å‘½åç©ºé—´å¦‚æœæ²¡æœ‰å®šä¹‰ä»»ä½•å‘½åç©ºé—´ï¼Œæ‰€æœ‰çš„ç±»ä¸å‡½æ•°çš„å®šä¹‰éƒ½æ˜¯åœ¨å…¨å±€ç©ºé—´ï¼Œä¸ PHP å¼•å…¥å‘½åç©ºé—´æ¦‚å¿µå‰ä¸€æ ·ã€‚åœ¨åç§°å‰åŠ ä¸Šå‰ç¼€ \\ è¡¨ç¤ºè¯¥åç§°æ˜¯å…¨å±€ç©ºé—´ä¸­çš„åç§°ã€‚ 123456789&lt;?phpnamespace A\\B\\C;/* è¿™ä¸ªå‡½æ•°æ˜¯ A\\B\\C\\fopen */function fopen() &#123; $f = \\fopen(...); // è°ƒç”¨å…¨å±€çš„fopenå‡½æ•° return $f;&#125;?&gt; æ–‡ä»¶å¤„ç†æ‰“å¼€æ–‡ä»¶æ‰“å¼€æ–‡ä»¶ç”¨å‡½æ•°fopen() 12&lt;?php$file = fopen($fname, mode) //æ–‡ä»¶çš„åç§°, æ‰“å¼€æ¨¡å¼ æ–‡ä»¶æ‰“å¼€æ¨¡å¼ r åªè¯»ã€‚åœ¨æ–‡ä»¶çš„å¼€å¤´å¼€å§‹ã€‚ r+ è¯»&#x2F;å†™ã€‚åœ¨æ–‡ä»¶çš„å¼€å¤´å¼€å§‹ã€‚ w åªå†™ã€‚æ‰“å¼€å¹¶æ¸…ç©ºæ–‡ä»¶çš„å†…å®¹ï¼›å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶ã€‚ w+ è¯»&#x2F;å†™ã€‚æ‰“å¼€å¹¶æ¸…ç©ºæ–‡ä»¶çš„å†…å®¹ï¼›å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶ã€‚ a è¿½åŠ ã€‚æ‰“å¼€å¹¶å‘æ–‡ä»¶æœ«å°¾è¿›è¡Œå†™æ“ä½œï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶ã€‚ a+ è¯»&#x2F;è¿½åŠ ã€‚é€šè¿‡å‘æ–‡ä»¶æœ«å°¾å†™å†…å®¹ï¼Œæ¥ä¿æŒæ–‡ä»¶å†…å®¹ã€‚ x åªå†™ã€‚åˆ›å»ºæ–°æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¿”å› FALSE å’Œä¸€ä¸ªé”™è¯¯ã€‚ x+ è¯»&#x2F;å†™ã€‚åˆ›å»ºæ–°æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™è¿”å› FALSE å’Œä¸€ä¸ªé”™è¯¯ã€‚ å¦‚æœ fopen() å‡½æ•°æ— æ³•æ‰“å¼€æŒ‡å®šæ–‡ä»¶ï¼Œåˆ™è¿”å› 0 (false)ã€‚ 123456789101112131415&lt;?php//æ‰“å¼€æ–‡ä»¶$file = fopen(&quot;welcome.txt&quot;, &quot;r&quot;) or exit(&quot;Unable to open file!&quot;);// Output a line of the file until the end is reached//æ˜¯å¦åˆ°è¾¾æ–‡ä»¶æœ«å°¾while(!feof($file))&#123;echo fgets($file). &quot;&lt;br&gt;&quot;; //é€è¡Œè¯»å–æ–‡ä»¶//echo fgetc($file); //é€å­—ç¬¦è¯»å–&#125;//å…³é—­æ–‡ä»¶fclose($file);?&gt; æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„å‡½æ•° basename() è¿”å›è·¯å¾„ä¸­çš„æ–‡ä»¶åéƒ¨åˆ†ã€‚ dirname() è¿”å›è·¯å¾„ä¸­çš„ç›®å½•åç§°éƒ¨åˆ†ã€‚ realpath() è¿”å›ç»å¯¹è·¯å¾„åã€‚ pathinfo() è¿”å›å…³äºæ–‡ä»¶è·¯å¾„çš„ä¿¡æ¯ã€‚ copy() å¤åˆ¶æ–‡ä»¶ã€‚ delete() å‚è§ unlink() æˆ– unset() rename() é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ã€‚ mkdir() åˆ›å»ºç›®å½•ã€‚ rmdir() åˆ é™¤ç©ºçš„ç›®å½•ã€‚ unlink() åˆ é™¤æ–‡ä»¶ã€‚ is_dir() åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•ã€‚ is_file() åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ˜¯å¸¸è§„çš„æ–‡ä»¶ã€‚ fstat() è¿”å›å…³äºä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶çš„ä¿¡æ¯ã€‚ fclose() å…³é—­æ‰“å¼€çš„æ–‡ä»¶ã€‚ feof() æµ‹è¯•æ–‡ä»¶æŒ‡é’ˆæ˜¯å¦åˆ°äº†æ–‡ä»¶æœ«å°¾ã€‚ fgetc() ä»æ‰“å¼€çš„æ–‡ä»¶ä¸­è¿”å›å­—ç¬¦ã€‚ fgets() ä»æ‰“å¼€çš„æ–‡ä»¶ä¸­è¿”å›ä¸€è¡Œã€‚ fgetss() ä»æ‰“å¼€çš„æ–‡ä»¶ä¸­è¿”å›ä¸€è¡Œï¼Œå¹¶è¿‡æ»¤æ‰ HTML å’Œ PHP æ ‡ç­¾ã€‚ file() æŠŠæ–‡ä»¶è¯»å…¥ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ file_exists() æ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚ file_get_contents() æŠŠæ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸²ã€‚~~è·å–æ–‡ä»¶å†…å®¹ file_put_contents() æŠŠå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ã€‚~~å†™å…¥æ–‡ä»¶å†…å®¹ fgetcsv() ä»æ‰“å¼€çš„æ–‡ä»¶ä¸­è§£æä¸€è¡Œï¼Œæ ¡éªŒ CSV å­—æ®µã€‚ fputcsv() æŠŠè¡Œæ ¼å¼åŒ–ä¸º CSV å¹¶å†™å…¥ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ä¸­ã€‚ filesize() è¿”å›æ–‡ä»¶å¤§å°ã€‚ filetype() è¿”å›æ–‡ä»¶ç±»å‹ã€‚ fopen() æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æˆ– URLã€‚ fread() è¯»å–æ‰“å¼€çš„æ–‡ä»¶ã€‚ readfile() è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å†™å…¥åˆ°è¾“å‡ºç¼“å†²ã€‚ fputs() fwrite() çš„åˆ«åã€‚ ftruncate() æŠŠæ‰“å¼€æ–‡ä»¶æˆªæ–­åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚ fwrite() å†™å…¥æ‰“å¼€çš„æ–‡ä»¶ã€‚ fscanf() æ ¹æ®æŒ‡å®šçš„æ ¼å¼å¯¹è¾“å…¥è¿›è¡Œè§£æã€‚ fseek() åœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­å®šä½ã€‚ ftell() è¿”å›åœ¨æ‰“å¼€æ–‡ä»¶ä¸­çš„å½“å‰ä½ç½®ã€‚ rewind() å€’å›æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®ã€‚ glob() è¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶å&#x2F;ç›®å½•çš„æ•°ç»„ã€‚ move_uploaded_file() æŠŠä¸Šä¼ çš„æ–‡ä»¶ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ stat() è¿”å›å…³äºæ–‡ä»¶çš„ä¿¡æ¯ã€‚ JSONå¤„ç† json_encode() å¯¹å˜é‡è¿›è¡Œ JSON ç¼–ç  json_decode() å¯¹ JSON æ ¼å¼çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ï¼Œè½¬æ¢ä¸º PHP å˜é‡ 1234&lt;?php $arr = array(&#x27;a&#x27; =&gt; 1, &#x27;b&#x27; =&gt; 2, &#x27;c&#x27; =&gt; 3, &#x27;d&#x27; =&gt; 4, &#x27;e&#x27; =&gt; 5); echo json_encode($arr);?&gt; jsonå­—ç¬¦ä¸²è§£ç ä¸ºphpå…³è”æ•°ç»„ 12345&lt;?php $json = &#x27;&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3,&quot;d&quot;:4,&quot;e&quot;:5&#125;&#x27;; var_dump(json_decode($json)); var_dump(json_decode($json, true));?&gt; é¢å‘å¯¹è±¡PHPé¢å‘å¯¹è±¡çš„åŸºæœ¬ç”¨æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;?phpinclude &quot;./inc/header.php&quot;;class Animal&#123; var $name; public function hi() &#123; echo &#x27;hi, &#x27;, $this-&gt;name, &quot; &quot;; &#125; public static function ho() &#123; // å•å¼•å·å†…çš„ç‰¹æ®Šåºåˆ—ä¸ä¼šè¢«è½¬ä¹‰ eg: &#x27; &#x27; echo &#x27;ho func called&#x27;, &quot; &quot;; &#125; function move() &#123; echo &quot;animal is running&quot;; &#125;&#125;title(&#x27;é¢å‘å¯¹è±¡&#x27;);comment(&#x27;è®¿é—®å±æ€§å’Œæ–¹æ³•&#x27;);$dog = new Animal();$dog-&gt;name = &#x27;husky&#x27;;$dog-&gt;hi();comment(&#x27;å¯æ·»åŠ ä»»æ„å±æ€§&#x27;);$dog-&gt;like = &#x27;running&#x27;;clog($dog-&gt;like);$prop = &#x27;name&#x27;;$arr = array(&#x27;name&#x27;, &#x27;like&#x27;);function getProp()&#123; global $arr; return $arr[1];&#125;comment(&#x27;è®¿é—®åŠ¨æ€å±æ€§(å±æ€§ç”±å˜é‡æˆ–æ–¹æ³•è¿”å›å€¼å†³å®š)&#x27;);clog(getProp() . &#x27;&lt;==&#x27;);clog($dog-&gt;$prop);clog($dog-&gt;&#123;$prop&#125;);clog($dog-&gt;&#123;$arr[1]&#125;);clog($dog-&gt;&#123;getProp()&#125;);comment(&#x27;æ‰“å°å£°æ˜çš„ç±»&#x27;);print_r(get_declared_classes());//var_dump(Animal); // error//print_r(Animal);comment(&#x27;æ‰“å°ç±»çš„æ–¹æ³•&#x27;);print_r(get_class_methods($dog));comment(&#x27;æ‰“å°å¯¹è±¡&#x27;);print_r($dog);comment(&#x27;è®¿é—®é™æ€æ–¹æ³•&#x27;);Animal::ho();comment(&#x27;æŸ¥çœ‹å¯¹è±¡æœ‰å“ªäº›å±æ€§ (å³è‡ªçœ)&#x27;);print_r(get_object_vars($dog));comment(&#x27;ä¸‰å…ƒè¿ç®—ç¬¦&#x27;);clog(&#x27;1&#x27; == 1 ? &#x27;yes&#x27; : &#x27;n&#x27;);clog(&#x27;1&#x27; == 10 ? &#x27;y&#x27; : &#x27;n&#x27;);include &#x27;inc/footer.php&#x27;; æ¨¡å—åŒ–phpå¯ä»¥é€šè¿‡ include , require, require_onceç­‰è¯­å¥å¼•å…¥å…¶ä»–phpæ¨¡å—ã€‚ header.phpçš„ä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;PHP Learning&lt;/title&gt; &lt;style&gt; body &#123; padding: 20px; font-weight: 200; &#125; h1, h2, h3, h4 &#123; font-weight: 500; text-align: center; &#125; blockquote &#123; margin: 0; margin-top: 30px; background: #eee; padding: 10px; border-radius: 4px; font-weight: 500; color: cadetblue; &#125; ul, ol &#123; margin: 30px 0; padding: 10px 30px; background: #f3fafa; &#125; li &#123; margin: 10px; font-size: 20px; font-style: italic; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;?php require_once &#x27;common.php&#x27;; ?&gt; module.phpç”¨äºæµ‹è¯•å¯¼å…¥å…¶ä»–phpæ¨¡å— 1234567891011&lt;?phpinclude &#x27;inc/header.php&#x27;;// require(&#x27;captain-lufy.php&#x27;);require &#x27;captain-lufy.php&#x27;;use Cartoon\\OnePiece\\Lufy;Lufy\\sayHi();include &#x27;inc/footer.php&#x27;; æ€»ç»“æœ¬æ–‡ä»åˆå­¦è€…çš„è§’åº¦å¯¹PHPè¿›è¡Œè®²è§£ï¼Œæ²¡æœ‰è¯¦ç»†ä»‹ç»æ¯”è¾ƒå¸¸ç”¨çš„æ•°ç»„å’Œé¢å‘å¯¹è±¡ç­‰éƒ¨åˆ†ã€‚å¦‚æœæœ¬æ–‡çš„å†…å®¹åŸºæœ¬éƒ½æŒæ¡ï¼Œçœ‹æ‡‚åŸºç¡€çš„PHPä»£ç åº”è¯¥ä¸æˆé—®é¢˜ã€‚ PHPæ›¾ç»å¾ˆæµè¡Œï¼Œç°åœ¨æœ‰äº›å…è´¹çš„è™šæ‹Ÿæœº(å¦‚: infinityfree)å¤šæ•°æä¾›çš„æ˜¯PHPé›†æˆç¯å¢ƒï¼Œå¯ä»¥è®©æˆ‘ä»¬æ‰˜ç®¡ä¸€äº›ç®€å•çš„ä¸ªäººåº”ç”¨ï¼Œå› è€Œå¯¹PHPè¿›è¡Œå­¦ä¹ äº†è§£è¿˜æ˜¯æœ‰ç‚¹å¿…è¦çš„ã€‚","tags":["PHP"],"categories":["PHP"]},{"title":"2023å†çœ‹ReactçŠ¶æ€ç®¡ç†åº“","path":"/2024/02/28/2023å†çœ‹ReactçŠ¶æ€ç®¡ç†åº“/","content":"åŸæ–‡åœ°å€2023 å†çœ‹ React çŠ¶æ€ç®¡ç†åº“ - æ˜é‡‘ ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†ï¼ŸçŠ¶æ€çŠ¶æ€æ˜¯è¡¨ç¤ºç»„ä»¶å½“å‰çŠ¶å†µçš„ JS å¯¹è±¡ã€‚åœ¨ React ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ useState æˆ–è€… this.state ç»´æŠ¤ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œé€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚ ä¸ºäº†é¿å…çŠ¶æ€ä¼ é€’è¿‡ç¨‹ä¸­å‡ºç°æ··ä¹±ï¼ŒReact å¼•å…¥äº†â€œå•å‘æ•°æ®æµâ€çš„ç†å¿µã€‚ä¸»è¦æ€æƒ³æ˜¯ç»„ä»¶ä¸ä¼šæ”¹å˜æ¥æ”¶çš„propsæ•°æ®ï¼Œåªä¼šç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ä»–ä»¬ä¼šä½¿ç”¨æ¥æ”¶åˆ°çš„æ–°å€¼ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å€¼ã€‚å½“ç»„ä»¶çš„æ›´æ–°æœºåˆ¶è§¦å‘åï¼Œä»–ä»¬åªæ˜¯ä½¿ç”¨æ–°å€¼è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚ ç»„ä»¶é€šä¿¡çˆ¶å­ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ props å’Œ callback æ–¹å¼ï¼›æ·±å±‚æ¬¡ç»„ä»¶åˆ™è¦é€šè¿‡â€œçŠ¶æ€æå‡â€å’Œ props å±‚å±‚ä¼ é€’ã€‚ å¸¸è§æ¨¡å¼React çŠ¶æ€ç®¡ç†çš„å¸¸è§æ¨¡å¼æœ‰ï¼š çŠ¶æ€æå‡ï¼šå…„å¼Ÿç»„ä»¶é—´æ˜¯æ²¡æ³•ç›´æ¥å…±äº«çŠ¶æ€çš„ï¼Œå¯ä»¥é€šè¿‡å°†çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„ç¥–å…ˆç»„ä»¶ä¸­ï¼Œæ‰€æœ‰å…„å¼Ÿç»„ä»¶å°±å¯ä»¥é€šè¿‡ props ä¸€çº§çº§ä¼ é€’è·å–çŠ¶æ€ï¼› çŠ¶æ€ç»„åˆï¼šæŸäº›çŠ¶æ€å¯èƒ½åªåœ¨åº”ç”¨ç¨‹åºçš„ç‰¹å®šå­æ ‘ä¸­éœ€è¦ã€‚æœ€å¥½å°†çŠ¶æ€å­˜å‚¨åœ¨å°½å¯èƒ½æ¥è¿‘å®é™…éœ€è¦çš„ä½ç½®ï¼Œè¿™æœ‰åŠ©äºä¼˜åŒ–æ¸²æŸ“è¡Œä¸ºï¼› å±æ€§é€ä¼ ï¼šå°†çˆ¶ç»„ä»¶çš„çŠ¶æ€ä»¥ props å½¢å¼ä¸€çº§çº§ä¼ é€’ç»™åµŒå¥—å­ç»„ä»¶ï¼› Providerï¼šReactÂ Context é€šè¿‡ Provider åŒ…è£¹ç»„ä»¶ï¼Œè¢«åŒ…è£¹çš„æ‰€æœ‰åµŒå¥—å­ç»„ä»¶éƒ½å¯ä»¥ä¸ç”¨é€šè¿‡å±æ€§é€ä¼ è€Œæ˜¯é€šè¿‡ context ç›´æ¥è·å–çŠ¶æ€ã€‚ å±‚å±‚ä¼ é€’çš„ valueÂ onChange ä¼šå¯¹ä¸€ä¸ªä¼˜è´¨ä»£ç åº“å¸¦æ¥çš„æ¯ç­æ€§å½±å“ï¼Œç²—æš´åœ°æŠŠæ•°æ®å¡åœ¨ redux ä¸­ä¹Ÿå¹¶ä¸èƒ½è®©ä¸€ä¸ªåº”ç”¨å¾—åˆ°å¾ˆå¥½çš„æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ è¦è§£å†³çš„é—®é¢˜çŠ¶æ€ç®¡ç†åº“è¦è§£å†³çš„é—®é¢˜ï¼š ä»ç»„ä»¶æ ‘çš„ã€Œä»»ä½•åœ°æ–¹ã€è¯»å–å­˜å‚¨çš„çŠ¶æ€ å†™å…¥å­˜å‚¨çŠ¶æ€çš„èƒ½åŠ› æä¾›ã€Œä¼˜åŒ–æ¸²æŸ“ã€çš„æœºåˆ¶ æä¾›ã€Œä¼˜åŒ–å†…å­˜ä½¿ç”¨ã€çš„æœºåˆ¶ ä¸ã€Œå¹¶å‘æ¨¡å¼çš„å…¼å®¹æ€§ã€ æ•°æ®çš„ã€ŒæŒä¹…åŒ–ã€ ã€Œä¸Šä¸‹æ–‡ä¸¢å¤±ã€é—®é¢˜ ã€Œprops å¤±æ•ˆã€é—®é¢˜ ã€Œå­¤å„¿ã€é—®é¢˜ å¿ƒæ™ºæ¨¡å‹çŠ¶æ€æ›´æ–°æœ‰ä¸¤ç§å¿ƒæ™ºæ¨¡å‹ï¼š ä¸å¯å˜çŠ¶æ€æ¨¡å‹ å¯å˜çŠ¶æ€æ¨¡å‹ ä¸»è¦å¥½å¤„æ˜¯å¯ä»¥ä½¿ç”¨åŸç”Ÿ JS æ–¹æ³•ï¼› åŸºäº Proxy çš„çŠ¶æ€ç®¡ç†çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯çŠ¶æ€ä¸å¯é¢„æµ‹ï¼Œéš¾ä»¥ debugã€‚ å› ä¸º React æ²¡æœ‰å®˜æ–¹çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ŒReact ç”Ÿæ€ä¸­çŠ¶æ€ç®¡ç†åº“ï¼Œç™¾èŠ±é½æ”¾ï¼Œæ¼”è¿›å‡ºå¾ˆå¤šè®¾è®¡æ€æƒ³å’Œå¿ƒæ™ºæ¨¡å¼ã€‚å¦‚ä½•é€‰æ‹©çŠ¶æ€ç®¡ç†åº“å°±å˜å¾—ååˆ†ä»¤äººæŠ“ç‹‚ã€‚ ReactÂ Contextåœ¨å¤šçº§åµŒå¥—ç»„ä»¶åœºæ™¯ä¸‹ï¼Œä½¿ç”¨â€œå±æ€§ä¸‹é’»â€æ–¹å¼è¿›è¡Œç»„ä»¶é€šä¿¡æ˜¯ä¸€ä»¶æˆæœ¬æé«˜çš„äº‹æƒ…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReact å®˜æ–¹æä¾› Context ç”¨äºé¿å…ä¸€çº§çº§å±æ€§ä¼ é€’ã€‚ Context çš„é—®é¢˜Contextçš„ç¼ºç‚¹Context å­˜åœ¨çš„é—®é¢˜ä¹Ÿæ˜¯è€ç”Ÿå¸¸è°ˆã€‚åœ¨ react é‡Œï¼Œcontext æ˜¯ä¸ªåæ¨¡å¼çš„ä¸œè¥¿ï¼Œä¸åŒäº redux ç­‰çš„ç»†ç²’åº¦å“åº”å¼æ›´æ–°ï¼Œcontext çš„å€¼ä¸€æ—¦å˜åŒ–ï¼Œæ‰€æœ‰ä¾èµ–è¯¥ context çš„ç»„ä»¶å…¨éƒ¨éƒ½ä¼š forceÂ updateï¼Œå› ä¸º contextÂ API å¹¶ä¸èƒ½ç»†ç²’åº¦åœ°åˆ†ææŸä¸ªç»„ä»¶ä¾èµ–äº† context é‡Œçš„å“ªä¸ªå±æ€§ï¼Œå¹¶ä¸”å®ƒå¯ä»¥ç©¿é€ React.memo å’Œ shouldComponentUpdate çš„å¯¹æ¯”ï¼ŒæŠŠæ‰€æœ‰æ¶‰åŠçš„ç»„ä»¶å¼ºåˆ¶åˆ·æ–°ã€‚ React å®˜æ–¹æ–‡æ¡£åœ¨ WhenÂ toÂ UseÂ Contextä¸€èŠ‚ä¸­å†™é“ï¼š Context è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„ç”¨æˆ·ã€ä¸»é¢˜æˆ–é¦–é€‰è¯­è¨€ã€‚ æ³¨æ„ç³»ç»Ÿä¸­è·Ÿä¸šåŠ¡ç›¸å…³ä¼šé¢‘ç¹å˜åŠ¨çš„æ•°æ®åœ¨å…±äº«æ—¶ï¼Œåº”è°¨æ…ä½¿ç”¨ context å¦‚æœå†³å®šä½¿ç”¨ contextï¼Œå¯ä»¥åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œå°†å¤šä¸ªå­ç»„ä»¶ä¾èµ–çš„ä¸åŒ context å±æ€§æå‡åˆ°ä¸€ä¸ªçˆ¶ç»„ä»¶ä¸­ï¼Œç”±çˆ¶ç»„ä»¶è®¢é˜… context å¹¶ä»¥ prop çš„æ–¹å¼ä¸‹å‘ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨å­ç»„ä»¶çš„ memoã€shouldComponentUpdate ç”Ÿæ•ˆã€‚ æ­¤å¤–ï¼Œå®˜æ–¹æ–‡æ¡£è¿˜æåˆ°äº†å¦å¤–ä¸€ä¸ªå‘ï¼Œä½¿ç”¨çš„æ—¶å€™ä¹Ÿåº”è¯¥æ³¨æ„ã€‚ ä¼˜ç‚¹ ä½œä¸º React å†…ç½®çš„ hookï¼Œä¸éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼› ä¹¦å†™è¿˜ç®—æ–¹ä¾¿ã€‚ ç¼ºç‚¹ Context åªèƒ½å­˜å‚¨å•ä¸€å€¼ï¼Œå½“æ•°æ®é‡å¤§èµ·æ¥æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ createContext åˆ›å»ºå¤§é‡ contextï¼› ç›´æ¥ä½¿ç”¨çš„è¯ï¼Œä¼šæœ‰ä¸€å®šçš„æ€§èƒ½é—®é¢˜ï¼šæ¯ä¸€æ¬¡å¯¹ state çš„æŸä¸ªå€¼å˜æ›´ï¼Œéƒ½ä¼šå¯¼è‡´å…¶ä»–ä½¿ç”¨è¯¥ state çš„ç»„ä»¶ re-renderï¼Œå³ä½¿æ²¡æœ‰ä½¿ç”¨è¯¥å€¼ã€‚ ä½ å¯ä»¥é€šè¿‡ useMemo æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å°±éœ€è¦ä¸€å®šçš„æˆæœ¬æ¥å®šåˆ¶ä¸€ä¸ªé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼› æ— æ³•å¤„ç†å¼‚æ­¥è¯·æ±‚ã€‚å¯¹äºå¼‚æ­¥çš„é€»è¾‘ï¼ŒContextÂ API å¹¶æ²¡æœ‰æä¾›ä»»ä½• APIï¼Œéœ€è¦è‡ªå·±åšå°è£…ï¼› æ— æ³•å¤„ç†æ•°æ®é—´çš„è”åŠ¨ã€‚ContextÂ API å¹¶æ²¡æœ‰æä¾› API æ¥ç”Ÿæˆæ´¾ç”ŸçŠ¶æ€ï¼ŒåŒæ ·ä¹Ÿéœ€è¦è‡ªè¡Œå»å°è£…ä¸€äº›æ–¹æ³•æ¥å®ç°ã€‚ React å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“æ¦‚è§ˆReact çš„å¤–éƒ¨çŠ¶æ€ç®¡ç†åº“ä¸€ç›´ä»¥æ¥æ˜¯ React ç”Ÿæ€ä¸­éå¸¸å†…å·çš„ä¸€ä¸ªé¢†åŸŸã€‚ç›®å‰æ¯”è¾ƒå¸¸è§çš„çŠ¶æ€ç®¡ç†åº“æœ‰ Reduxï¼ˆåŒ…æ‹¬åŸºäº Redux çš„ Dvaã€Icestoreï¼‰ã€Mobxã€Zustandã€Recoilã€Jotaiã€Valtioã€Hox ç­‰ã€‚ ä» npmÂ trends çœ‹å„ä¸ªçŠ¶æ€ç®¡ç†åº“è¿‘ä¸€å¹´çš„ä¸‹è½½é‡è¶‹åŠ¿ï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Redux ä½œä¸º React çŠ¶æ€ç®¡ç†çš„è€å¤§å“¥ï¼Œä¸‹è½½é‡ä¸Šä¾ç„¶é¥é¥é¢†å…ˆå…¶ä»–åº“ã€‚Mobx ä½œä¸ºå¾€å¹´çƒ­åº¦ä»…æ¬¡äº Redux çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½ç½®æ­£é€æ­¥æœ‰è¢« zustand è¶…è¶Šçš„è¶‹åŠ¿ã€‚recoil&#x2F;jotai&#x2F;valtio ä½œä¸ºè¿™ä¸¤å¹´çƒ­é—¨çš„æ–°å…´åº“çƒ­åº¦ä¹Ÿåœ¨é€æ­¥ä¸Šå‡ã€‚hox åˆ™å¤„äºä¸æ¸©ä¸ç«çš„å°´å°¬åœ°ä½ã€‚ å°†ä»¥ä¸ŠçŠ¶æ€ç®¡ç†åº“æŒ‰å¿ƒæ™ºæ¨¡å‹ã€è¯ç”Ÿæ—¶é—´ã€star æ•°ï¼Œç»˜åˆ¶æ°”æ³¡å›¾ã€‚ä»¥ ReactÂ v16.8 ç‰ˆæœ¬ä¸ºåˆ†æ°´å²­ï¼ŒçŠ¶æ€ç®¡ç†åº“å¯åˆ†ä¸º Class æ—¶ä»£å’Œ Hooks æ—¶ä»£ã€‚Class æ—¶ä»£ä¸­ Redux å’Œ Mobx éƒ½æ˜¯éå¸¸ä¼˜ç§€çš„çŠ¶æ€åº“ã€‚éšç€ Hooks æ—¶ä»£çš„åˆ°æ¥ï¼ŒçŠ¶æ€ç®¡ç†çš„å¿ƒæ™ºæ¨¡å‹ä¹Ÿé€æ­¥å‘ç”Ÿç€æ¼”å˜ã€‚æ•´ä½“å‘ˆç°ä»ä¸­å¿ƒåŒ–åˆ°å»ä¸­å¿ƒåŒ–ï¼Œä»å•ä¸€çŠ¶æ€åˆ°åŸå­çŠ¶æ€ï¼Œä» Provider åˆ°æ‹¥æŠ± Hooks ç­‰æ¼”å˜è¶‹åŠ¿ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬å¯¹ä¸Šè¿°çŠ¶æ€ç®¡ç†åº“è¿›è¡Œé€ä¸€å¯¹æ¯”ä»‹ç»ã€‚ Class æ—¶ä»£ReduxRedux çš„çµæ„Ÿæ¥æºäº Flux æ¶æ„å’Œå‡½æ•°å¼ç¼–ç¨‹åŸç†ï¼ŒçŠ¶æ€æ›´æ–°å¯é¢„æµ‹ã€å¯è·Ÿè¸ªï¼Œæå€¡ä½¿ç”¨ã€Œå•ä¸€å­˜å‚¨ã€ã€‚è¿™é€šå¸¸ä¼šã€Œå¯¼è‡´å°†æ‰€æœ‰çš„ä¸œè¥¿å­˜å‚¨åœ¨ä¸€ä¸ªå¤§çš„å•ä½“å­˜å‚¨ä¸­ã€ã€‚å°† UI å’Œè¿œç¨‹å®ä½“çŠ¶æ€ä¹‹é—´çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†ï¼Œè¿™å˜å¾—éå¸¸éš¾ä»¥ç®¡ç†ã€‚å¯¹æ€§èƒ½é€ æˆäº†ä¸å°çš„å‹åŠ›ã€‚ å•å‘æ•°æ®æµä»–çš„å·¥ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š ç”¨æˆ·åœ¨ view å±‚è§¦å‘æŸä¸ªäº‹ä»¶ï¼Œé€šè¿‡ dispatch å‘é€äº† action å’Œ payload action å’Œ payload è¢«ä¼ å…¥ reducer å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ state store æ‹¿åˆ° reducer è¿”å›çš„ state å¹¶åšæ›´æ–°ï¼ŒåŒæ—¶é€šçŸ¥ view å±‚è¿›è¡Œ re-render ç”±æ­¤å¯çœ‹å‡º Redux éµå¾ªâ€œå•å‘æ•°æ®æµâ€å’Œâ€œä¸å¯å˜çŠ¶æ€æ¨¡å‹â€çš„è®¾è®¡æ€æƒ³ã€‚è¿™ä½¿å¾— Redux çš„çŠ¶æ€å˜åŒ–æ˜¯å¯é¢„æµ‹ã€å¯è°ƒå¼çš„ã€‚ ä¸‰å¤§åŸåˆ™æ­¤å¤–ï¼ŒRedux è¿˜éµå¾ªä¸‰å¤§åŸåˆ™ï¼š å•ä¸€æ•°æ®æº æ•´ä¸ªåº”ç”¨çš„ å…¨å±€ stateè¢«å‚¨å­˜åœ¨ä¸€æ£µ objectÂ tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª objectÂ tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª storeä¸­ã€‚ state æ˜¯åªè¯»çš„ å”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚ çº¯å‡½æ•°ä¿®æ”¹ é€šè¿‡ reducer ä¿®æ”¹çŠ¶æ€ï¼Œreducer æ˜¯çº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¹‹å‰çš„ state å’Œ actionï¼Œå¹¶è¿”å›æ–°çš„ stateã€‚è®°ä½ï¼Œä¸€å®šè¦è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ä¹‹å‰çš„ stateã€‚ å¦‚ä½•å¤„ç†å¼‚æ­¥redux æ²¡æœ‰è§„å®šå¦‚ä½•å¤„ç†å¼‚æ­¥æ•°æ®æµï¼Œæœ€åŸå§‹çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ ActionÂ Creatorsï¼Œä¹Ÿå°±æ˜¯åœ¨åˆ¶é€  action ä¹‹å‰è¿›è¡Œå„ç§çš„å¼‚æ­¥æ“ä½œï¼Œä½ å¯ä»¥æŠŠè¦å¤ç”¨çš„æ“ä½œæŠ½ç¦»å‡ºæ¥ã€‚ å½“ç„¶è¿™æ ·å¹¶ä¸ä¼˜é›…ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ç±»ä¼¼ redux-thunkã€redux-saga è¿™äº›ä¸­é—´ä»¶æ¥æ”¯æŒå¤„ç†å¼‚æ­¥ã€‚ å¦‚ä½•å¤„ç†æ•°æ®é—´è”åŠ¨react-redux çš„ useSelector è·å–çŠ¶æ€åï¼Œä½ å¯ä»¥ç¼–å†™ä¸€äº›é€»è¾‘æ¥å¤„ç†æ´¾ç”ŸçŠ¶æ€ã€‚å¦‚æœæ´¾ç”ŸçŠ¶æ€éœ€è¦å¤ç”¨ï¼Œè®°å¾—ç»™æŠ½ç¦»å‡ºæ¥ã€‚ ä¼˜ç‚¹ ç¹è£çš„ç¤¾åŒºï¼Œåƒä¸æ”¯æŒå¼‚æ­¥è¿™ç§é—®é¢˜æ˜¯ç”±æˆç†Ÿçš„ä¸­é—´ä»¶å¯ä»¥è§£å†³çš„ï¼Œä½ é‡åˆ°çš„é—®é¢˜å¤šå¤šå°‘å°‘å¯ä»¥åœ¨ç¤¾åŒºæ‰¾åˆ°ç­”æ¡ˆ; å¯æ‰©å±•æ€§é«˜ï¼Œä¸­é—´ä»¶æ¨¡å¼è®©ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²çš„æ­¦è£…ä½ çš„ dispatch; å•ä¸€æ•°æ®æºä¸”æ˜¯æ ‘å½¢ç»“æ„ï¼Œè¿™è®© redux æ”¯æŒå›æº¯ï¼Œåœ¨è°ƒè¯•ä¸Šä¹Ÿæ›´æ–¹ä¾¿; æœ‰æˆç†Ÿçš„å¼€å‘è°ƒè¯•å·¥å…· reduxÂ devtoolsã€‚ ç¼ºç‚¹ é™¡å³­çš„å­¦ä¹ æ›²çº¿ã€‚å°†å‰¯ä½œç”¨æ‰”ç»™ä¸­é—´ä»¶æ¥å¤„ç†ï¼Œå¯¼è‡´ç¤¾åŒºä¸€å †ä¸­é—´ä»¶ï¼Œå­¦ä¹ æˆæœ¬é™¡ç„¶å¢åŠ ã€‚æ¯”å¦‚å¤„ç†å¼‚æ­¥è¯·æ±‚çš„ Redux-sagaã€è®¡ç®—è¡ç”ŸçŠ¶æ€çš„ reselectï¼› å¤§é‡çš„æ¨¡ç‰ˆä»£ç ã€‚ä½¿ç”¨ reduxï¼Œå¼€å‘è€…è¦ç¼–å†™å¤§é‡å’Œä¸šåŠ¡é€»è¾‘æ— å…³çš„æ¨¡æ¿ä»£ç ï¼Œè¿™ç»™å¼€å‘å’ŒåæœŸç»´æŠ¤éƒ½å¸¦æ¥äº†é¢å¤–çš„æˆæœ¬ï¼› å¤§çŠ¶æ€é‡æƒ…å†µä¸‹ï¼Œæ€§èƒ½è¾ƒå·®ã€‚state æ›´æ–°ä¼šå½±å“æ‰€æœ‰ç»„ä»¶ã€‚æ¯ä¸ª action éƒ½ä¼šè°ƒç”¨æ‰€æœ‰ reducerï¼› reducer è¦è¿”å›æ–°çš„å¯¹è±¡ï¼Œå¦‚æœæ›´æ–°çš„å€¼å±‚çº§è¾ƒæ·±ï¼Œæ›´æ–°æˆæœ¬ä¹Ÿå¾ˆé«˜ï¼› æ›´å¤šçš„å†…å­˜å ç”¨ï¼Œç”±äºé‡‡ç”¨å•ä¸€æ•°æ®æºï¼Œæ‰€æœ‰çŠ¶æ€å­˜å‚¨åœ¨ä¸€ä¸ª state ä¸­ï¼Œå½“æŸäº›çŠ¶æ€ä¸å†éœ€è¦ä½¿ç”¨æ—¶ï¼Œä¹Ÿä¸ä¼šè¢«åƒåœ¾å›æ”¶é‡Šæ”¾å†…å­˜ï¼› å½“ç„¶ï¼Œredux ä¹Ÿåœ¨è‡´åŠ›äºè§£å†³ä¸Šè¿°ç¼ºç‚¹ã€‚æ¯”å¦‚ï¼ŒreduxÂ toolkitå°±æ—¨åœ¨è®©å¼€å‘è€…ä½¿ç”¨æ ‡å‡†æ–¹å¼ç¼–å†™ redux é€»è¾‘ã€‚ä¸»è¦è§£å†³ redux çš„ 3 ä¸ªé—®é¢˜ï¼š é…ç½® reduxÂ store è¿‡äºéº»çƒ¦ï¼› å¿…é¡»æ‰‹åŠ¨é¢å¤–æ·»åŠ å¾ˆå¤šåŒ…æ‰èƒ½æ­£å¸¸ä½¿ç”¨ reduxï¼› redux éœ€è¦å¤ªå¤šæ¨¡æ¿ä»£ç ã€‚ ä¸è¿‡ï¼Œå³ä½¿æœ‰ reduxÂ toolkit çš„åŠ æŒï¼Œredux çš„å­¦ä¹ æˆæœ¬ä¾æ—§ä¸ä½ã€‚ Dvadva é¦–å…ˆæ˜¯ä¸€ä¸ªåŸºäº reduxå’Œ redux-sagaçš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº† react-routerå’Œ fetchï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æ¶ã€‚ Dva çš„ç‰¹ç‚¹ï¼š æ˜“å­¦æ˜“ç”¨ï¼Œä»…æœ‰ 6 ä¸ª apiï¼Œå¯¹ redux ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œé…åˆ umi ä½¿ç”¨åæ›´æ˜¯é™ä½ä¸º 0Â API elm æ¦‚å¿µï¼Œé€šè¿‡ reducers,Â effects å’Œ subscriptions ç»„ç»‡ model æ’ä»¶æœºåˆ¶ï¼Œæ¯”å¦‚ dva-loadingå¯ä»¥è‡ªåŠ¨å¤„ç† loading çŠ¶æ€ï¼Œä¸ç”¨ä¸€ééåœ°å†™ showLoading å’Œ hideLoading æ”¯æŒ HMRï¼ŒåŸºäº babel-plugin-dva-hmrå®ç° componentsã€routes å’Œ models çš„ HMR Dva å¤§å¹…é™ä½äº† Redux çš„ä¸Šæ‰‹æˆæœ¬ï¼Œè¿‡å»ä¹Ÿåœ¨ç¤¾åŒºæ‹¥æœ‰äº†æ‹¥è¶¸ï¼ŒgithubÂ star æ•° 16.1kã€‚ä¸è¿‡ï¼Œä» 2019.11 å¼€å§‹å°±æ²¡æœ‰æ–°çš„ç‰ˆæœ¬å‘å¸ƒï¼Œçœ‹èµ·æ¥å·²ç»å¤„äºä¸ç»´æŠ¤çŠ¶æ€ã€‚ icestoreicestore æ˜¯ IceJså†…ç½®çŠ¶æ€ç®¡ç†åº“ã€‚icestore æ˜¯é¢å‘ React åº”ç”¨çš„ã€ç®€å•å‹å¥½çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚ å®ƒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç‰¹å¾ï¼š ç®€å•ã€ç†Ÿæ‚‰çš„ APIï¼šä¸éœ€è¦é¢å¤–çš„å­¦ä¹ æˆæœ¬ï¼Œåªéœ€è¦äº†è§£ ReactÂ Hooksï¼Œå¯¹ Redux ç”¨æˆ·å‹å¥½ã€‚ é›†æˆå¼‚æ­¥å¤„ç†ï¼šè®°å½•å¼‚æ­¥æ“ä½œæ—¶çš„æ‰§è¡ŒçŠ¶æ€ï¼Œç®€åŒ–è§†å›¾ä¸­å¯¹äºç­‰å¾…æˆ–é”™è¯¯çš„å¤„ç†é€»è¾‘ã€‚ æ”¯æŒç»„ä»¶ Class å†™æ³•ï¼šå‹å¥½çš„å…¼å®¹ç­–ç•¥å¯ä»¥è®©è€é¡¹ç›®äº«å—è½»é‡çŠ¶æ€ç®¡ç†çš„ä¹è¶£ã€‚ è‰¯å¥½çš„ TypeScript æ”¯æŒï¼šæä¾›å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼Œåœ¨ VSÂ Code ä¸­èƒ½è·å¾—å®Œæ•´çš„ç±»å‹æ£€æŸ¥å’Œæ¨æ–­ã€‚ icestore çš„çµæ„Ÿæ¥è‡ªäº rematchå’Œ constateã€‚æ•´ä½“å®ç°å’Œ rematch åŸºæœ¬ä¸€è‡´ã€‚rematch æ˜¯ä¸€ä¸ªæ²¡æœ‰æ¨¡æ¿ä»£ç çš„ redux æœ€ä½³å®è·µã€‚icestore æ•´ä½“é…ç½®ç®€å•ï¼Œè§£å†³äº† redux å­¦ä¹ æˆæœ¬é«˜ã€å¤§é‡æ¨¡æ¿ä»£ç ç­‰é—®é¢˜ï¼ŒåŒæ—¶åˆå¾ˆå¥½çš„æ”¯æŒäº†å¼‚æ­¥å¤„ç†ã€TypeScript å’Œ SSRã€‚ IceJS è‡ªå·±ç»™å‡ºçš„èƒ½åŠ›å¯¹ç…§è¡¨ï¼š O: æ”¯æŒ X: ä¸æ”¯æŒ +: éœ€è¦é¢å¤–åœ°è¿›è¡Œèƒ½åŠ›æ‰©å±• åŠŸèƒ½&#x2F;åº“ redux constate zustand react-tracked icestore æ¡†æ¶ Any React React React React ç®€å•æ€§ â˜…â˜… â˜…â˜…â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜…â˜… æ›´å°‘çš„æ¨¡æ¿ä»£ç  â˜… â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜…â˜… å¯é…ç½®æ€§ â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜… â˜…â˜…â˜…â˜…â˜… å…±äº«çŠ¶æ€ O O O O O å¤ç”¨çŠ¶æ€ O O O O O çŠ¶æ€è”åŠ¨ + + + + O Class ç»„ä»¶æ”¯æŒ O + + + O Function ç»„ä»¶æ”¯æŒ O O O O O å¼‚æ­¥æ›´æ–°çš„çŠ¶æ€ + X X X O SSR O O X O O æŒä¹…åŒ– + X X X + æ‡’åŠ è½½æ¨¡å‹ + + + + O ä¸­å¿ƒåŒ– + X X X O ä¸­é—´ä»¶æˆ–æ’ä»¶æœºåˆ¶ O X O X O å¼€å‘è€…å·¥å…· O X O X O Mobxè®¾è®¡æ€æƒ³MobX çš„ä¸»è¦æ€æƒ³æ˜¯ç”¨ã€Œå‡½æ•°å“åº”å¼ç¼–ç¨‹ã€å’Œã€Œå¯å˜çŠ¶æ€æ¨¡å‹ã€ä½¿å¾—çŠ¶æ€ç®¡ç†å˜å¾—ç®€å•å’Œå¯æ‰©å±•ã€‚ MobX èƒŒåçš„å“²å­¦å¾ˆç®€å•: ä»»ä½•æºè‡ªåº”ç”¨çŠ¶æ€çš„ä¸œè¥¿éƒ½åº”è¯¥è‡ªåŠ¨åœ°è·å¾—ã€‚å…¶ä¸­åŒ…æ‹¬ UIã€æ•°æ®åºåˆ—åŒ–ã€æœåŠ¡å™¨é€šè®¯ï¼Œç­‰ç­‰ã€‚ React å’Œ MobX æ˜¯ä¸€å¯¹å¼ºåŠ›ç»„åˆã€‚React é€šè¿‡æä¾›æœºåˆ¶æŠŠåº”ç”¨çŠ¶æ€è½¬æ¢ä¸ºå¯æ¸²æŸ“ç»„ä»¶æ ‘å¹¶å¯¹å…¶è¿›è¡Œæ¸²æŸ“ã€‚è€Œ MobX æä¾›æœºåˆ¶æ¥å­˜å‚¨å’Œæ›´æ–°åº”ç”¨çŠ¶æ€ä¾› React ä½¿ç”¨ã€‚ å¯¹äºåº”ç”¨å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼ŒReact å’Œ MobX éƒ½æä¾›äº†æœ€ä¼˜å’Œç‹¬ç‰¹çš„è§£å†³æ–¹æ¡ˆã€‚React æä¾›äº†ä¼˜åŒ– UI æ¸²æŸ“çš„æœºåˆ¶ï¼Œ è¿™ç§æœºåˆ¶å°±æ˜¯é€šè¿‡ä½¿ç”¨è™šæ‹Ÿ DOM æ¥å‡å°‘æ˜‚è´µçš„ DOM å˜åŒ–çš„æ•°é‡ã€‚MobX æä¾›äº†ä¼˜åŒ–åº”ç”¨çŠ¶æ€ä¸ React ç»„ä»¶åŒæ­¥çš„æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯ä½¿ç”¨å“åº”å¼è™šæ‹Ÿä¾èµ–çŠ¶æ€å›¾è¡¨ï¼Œå®ƒåªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰æ›´æ–°å¹¶ä¸”æ°¸è¿œä¿æŒæ˜¯æœ€æ–°çš„ã€‚ å¿ƒæ™ºæ¨¡å‹Mobx çš„å¿ƒæ™ºæ¨¡å‹å’Œ react å¾ˆåƒï¼Œå®ƒåŒºåˆ†äº†åº”ç”¨ç¨‹åºçš„ä¸‰ä¸ªæ¦‚å¿µï¼š State(çŠ¶æ€) Actions(åŠ¨ä½œ) Derivations(æ´¾ç”Ÿ) é¦–å…ˆåˆ›å»ºå¯è§‚å¯Ÿçš„çŠ¶æ€ï¼ˆObservableÂ Stateï¼‰ï¼Œé€šè¿‡ Action æ›´æ–° Stateï¼Œç„¶åè‡ªåŠ¨æ›´æ–°æ‰€æœ‰çš„æ´¾ç”Ÿï¼ˆDerivationsï¼‰ã€‚æ´¾ç”ŸåŒ…æ‹¬ ComputedÂ valueï¼ˆç±»ä¼¼ useMemo æˆ– useSelectorï¼‰ã€å‰¯ä½œç”¨å‡½æ•°(ç±»ä¼¼ useEffect)å’Œ UIï¼ˆrenderï¼‰ã€‚ Mobx è™½ç„¶å¿ƒæ™ºæ¨¡å‹åƒ reactï¼Œä½†æ˜¯å®ç°å´æ˜¯å®Œå®Œå…¨å…¨çš„ vueï¼šmutableÂ +Â proxyï¼ˆä¸ºäº†å…¼å®¹æ€§ï¼Œproxy å®é™…ä¸Šä½¿ç”¨ Object.defineProperty å®ç°ï¼‰ã€‚ ä½¿ç”¨å react çš„æ•°æ®æµæ¨¡å¼ï¼Œæ³¨å®šä¼šæœ‰æˆæœ¬ï¼š Mobx çš„å“åº”å¼è„±ç¦»äº† react è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°±ä¸å¾—ä¸æ˜¾å¼å£°æ˜å…¶æ´¾ç”Ÿçš„ä½œç”¨æ—¶æœºå’ŒèŒƒå›´ã€‚æ¯”å¦‚å‰¯ä½œç”¨è§¦å‘éœ€è¦åœ¨ useEffect é‡Œå†è·‘ä¸€ä¸ª autorun&#x2F;reactionï¼Œè¦ç»™ DOMÂ render åŒ…ä¸€å±‚ useObserver&#x2F;Observerï¼Œéƒ½åŠ å¤§äº†å¼€å‘æˆæœ¬ã€‚ Mobx ä¼šåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ”¶é›†ä¾èµ–ï¼Œå’Œ state å»ºç«‹è”ç³»ï¼Œè¿™ä¸ªæ–¹å¼åœ¨å³å°†åˆ°æ¥çš„ reactÂ 18 çš„å¹¶å‘æ¨¡å¼ï¼ˆConcurrentÂ Modeï¼‰ä¸­ï¼Œå¯èƒ½æ— æ³•å¹³æ»‘åœ°è¿ç§»ã€‚ä¸ºæ­¤ï¼Œreact ä¸“é—¨å¼€å‘äº†create-subscriptionæ–¹æ³•ç”¨äºåœ¨ç»„ä»¶ä¸­è®¢é˜…å¤–éƒ¨æºï¼Œä½†æ˜¯å®é™…çš„åº”ç”¨æ•ˆæœè¿˜æœªå¯çŸ¥ã€‚ å°¤å¤§æœ¬äººä¹Ÿç›–è¿‡ç« ï¼šReactÂ +Â MobX æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ›´ç¹ççš„ Vueã€‚ MobxÂ vsÂ ReduxMobx å’Œ Redux çš„å¯¹æ¯”ï¼Œå®é™…ä¸Šå¯ä»¥å½’ç»“ä¸º é¢å‘å¯¹è±¡ vs å‡½æ•°å¼å’Œ MutableÂ vsÂ Immutableã€‚ ç›¸æ¯”äº redux çš„å¹¿æ’­éå† dispatchï¼Œç„¶åéå†åˆ¤æ–­å¼•ç”¨æ¥å†³å®šç»„ä»¶æ˜¯å¦æ›´æ–°ï¼Œmobx åŸºäº proxy å¯ä»¥ç²¾ç¡®æ”¶é›†ä¾èµ–ã€å±€éƒ¨æ›´æ–°ç»„ä»¶ï¼ˆç±»ä¼¼ vueï¼‰ï¼Œç†è®ºä¸Šä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œä½† redux è®¤ä¸ºè¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼ˆWonâ€™tÂ callingÂ â€œallÂ myÂ reducersâ€Â forÂ eachÂ actionÂ beÂ slow?ï¼‰ Mobx å› ä¸ºæ•°æ®åªæœ‰ä¸€ä»½å¼•ç”¨ï¼Œæ²¡æœ‰å›æº¯èƒ½åŠ›ï¼Œä¸åƒ redux æ¯æ¬¡æ›´æ–°éƒ½ç›¸å½“äºæ‰“äº†ä¸€ä¸ªå¿«ç…§ï¼Œè°ƒè¯•æ—¶æ­é…redux-loggerè¿™æ ·çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥å¾ˆç›´è§‚åœ°çœ‹åˆ°æ•°æ®æµå˜åŒ–å†å²ã€‚ Mobx çš„å­¦ä¹ æˆæœ¬æ›´ä½ï¼Œæ²¡æœ‰å…¨å®¶æ¡¶ã€‚ Mobx åœ¨æ›´æ–° state ä¸­æ·±å±‚åµŒå¥—å±æ€§æ—¶æ›´æ–¹ä¾¿ï¼Œç›´æ¥èµ‹å€¼å°±å¥½äº†ï¼Œredux åˆ™éœ€è¦æ›´æ–°æ‰€æœ‰é€”ç»å±‚çº§çš„å¼•ç”¨ï¼ˆå½“ç„¶æ­é…immerä¹Ÿä¸éº»çƒ¦ï¼‰ã€‚ ä¼˜ç‚¹ ç®€å•æ˜“ç”¨ï¼Œæ²¡æœ‰æ¨¡æ¿ä»£ç ï¼› ç²¾å‡†æ›´æ–°ï¼Œæ€§èƒ½æ›´å¥½ï¼› ç¼ºç‚¹ éš¾ä»¥è°ƒè¯•ã€‚ç”±äºé‡‡ç”¨å¯å˜çŠ¶æ€æ¨¡å‹ï¼ŒçŠ¶æ€ä¸å¯é¢„æµ‹å’Œè¿½æº¯ï¼Œéš¾ä»¥ debugï¼› å¤ªè¿‡çµæ´»ï¼Œæ›´å®¹æ˜“å¯¼è‡´ bugï¼› å“åº”å¼æ˜¯åŸºäº Proxy å®ç°çš„ï¼Œå¸Œæœ›ä¼ é€’çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‹¿åˆ°çš„å´æ˜¯ä¸€ä¸ª Proxyã€‚æ’æŸ¥é—®é¢˜æ—¶æœ‰ç‚¹ç—›è‹¦ã€‚ Hooks æ—¶ä»£Hooks æ˜¯ ReactÂ 16.8 æ–°å¢çš„ç‰¹æ€§ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ state ä»¥åŠå…¶ä»– React ç‰¹æ€§ã€‚ Hooks çš„å¼•å…¥ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ ReactÂ Class ç»„ä»¶çš„ä»¥ä¸‹é—®é¢˜ï¼š åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ Class ç»„ä»¶ä¼šå°†è§†å›¾å’ŒçŠ¶æ€é€»è¾‘ç³…æ‚åœ¨ä¸€èµ·ï¼Œå¦‚æœæƒ³å¤ç”¨ç»„ä»¶ä¸­çš„çŠ¶æ€é€»è¾‘ï¼Œéœ€è¦ä½¿ç”¨ renderÂ props å’Œé«˜é˜¶ç»„ä»¶ï¼Œä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ç»„ä»¶ç»“æ„ï¼Œä¼šå½¢æˆç»„ä»¶çš„åµŒå¥—åœ°ç‹±ï¼Œä»£ç é€»è¾‘ä¹Ÿä¼šå˜å¾—éš¾ä»¥ç†è§£ã€‚ å¤æ‚ç»„ä»¶çš„ç†è§£æˆæœ¬å¾ˆé«˜ Class ç»„ä»¶çš„çŠ¶æ€é€»è¾‘ä¼šå……æ–¥åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å‡ºç°åœ¨åŒä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œé€»è¾‘éš¾ä»¥ç†è§£ï¼Œå®¹æ˜“å¼•å‘ bugï¼Œä¸”åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œå¾ˆéš¾å°†ç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„ç²’åº¦ã€‚ Hooks æ˜¯ä¸€ç§å¼€å‘ç†å¿µå’Œç»„ç»‡ç†å¿µçš„é©æ–°ï¼Œæœ‰ 3 ä¸ªç‰¹æ€§ï¼š primitiveã€‚å…ƒæ•°æ®åŒ–ï¼Œå°†æ··æ²Œçš„ state æ‰“æ•£ä¸ºä¸€ä¸ªä¸ªå…ƒæ•°æ®ï¼› decentralizationã€‚å»ä¸­å¿ƒåŒ–ï¼ŒClass æ—¶ä»£çš„ç†å¿µæ˜¯â€œé¡¶å±‚ä¸‹å‘â€ï¼ŒHooks å¸¦æ¥äº†å¼ºçƒˆçš„â€œç»„ä»¶è‡ªæ²»â€ç†å¿µï¼› algebraicÂ effectsã€‚ä»£æ•°æ•ˆåº”ï¼Œå‰¥ç¦»ç»„ä»¶ä¸­çš„å‰¯ä½œç”¨ï¼Œè®©å¼€å‘è€…æ›´ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ã€‚ ä»£æ•°æ•ˆåº”æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç”¨äºå°†å‰¯ä½œç”¨ä»å‡½æ•°è°ƒç”¨ä¸­åˆ†ç¦»ã€‚ è‡ªä¸‹è€Œä¸Šæ¨¡å¼çš„å´›èµ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥å‰çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå¦‚ Reduxï¼Œè®¾è®¡ç†å¿µæ˜¯çŠ¶æ€ ã€Œè‡ªä¸Šè€Œä¸‹ã€æµåŠ¨ã€‚å®ƒã€Œå€¾å‘äºåœ¨ç»„ä»¶æ ‘çš„é¡¶ç«¯å¸èµ°æ‰€æœ‰çš„çŠ¶æ€ã€ã€‚çŠ¶æ€è¢«ç»´æŠ¤åœ¨ç»„ä»¶æ ‘çš„é«˜å¤„ï¼Œä¸‹é¢çš„ç»„ä»¶é€šè¿‡é€‰æ‹©å™¨æ‹‰å–ä»–ä»¬éœ€è¦çš„çŠ¶æ€ã€‚ åœ¨æ–°çš„ç»„ä»¶æ„å»ºç†å¿µä¸­ï¼Œä¸€ç§ã€Œè‡ªä¸‹è€Œä¸Šã€çš„è§‚ç‚¹å¯¹æ„å»ºå…·æœ‰ç»„åˆæ¨¡å¼çš„åº”ç”¨å…·æœ‰å¾ˆå¥½çš„æŒ‡å¯¼ä½œç”¨ã€‚ è€Œ hook å°±æ˜¯è¿™ç§ç†å¿µçš„è·µè¡Œè€…ï¼Œå³æŠŠå¯ç»„åˆçš„éƒ¨ä»¶æ”¾åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ›´å¤§çš„æ•´ä½“ã€‚ é€šè¿‡ hookï¼Œæˆ‘ä»¬å¯ä»¥ä»å…·æœ‰å·¨å¤§å…¨å±€å­˜å‚¨çš„ã€Œå•ä½“çŠ¶æ€ç®¡ç†ã€è½¬å˜ä¸ºå‘è‡ªä¸‹è€Œä¸Šçš„ ã€Œå¾®çŠ¶æ€ç®¡ç†ã€ï¼Œé€šè¿‡ hook æ¶ˆè´¹æ›´å°çš„çŠ¶æ€ç‰‡ã€‚ åƒæ¥ä¸‹æ¥è¦ä»‹ç»çš„ Recoil å’Œ Jotai è¿™æ ·çš„æµè¡Œåº“ä»¥å…¶ ã€ŒåŸå­çŠ¶æ€ã€çš„æ¦‚å¿µä½“ç°äº†è¿™ç§è‡ªä¸‹è€Œä¸Šçš„ç†å¿µã€‚ã€ŒåŸå­æ˜¯ä¸€ä¸ªæœ€å°ä½†å®Œæ•´çš„çŠ¶æ€å•ä½ã€ã€‚å®ƒä»¬æ˜¯å°å—çš„çŠ¶æ€ï¼Œå¯ä»¥è¿æ¥åœ¨ä¸€èµ·å½¢æˆæ–°çš„è¡ç”ŸçŠ¶æ€ã€‚æœ€ç»ˆå½¢æˆäº†ä¸€ä¸ªåº”ç”¨çŠ¶æ€å›¾ã€‚ è¿™ä¸ªæ¨¡å‹å…è®¸ä½ è‡ªä¸‹è€Œä¸Šåœ°å»ºç«‹èµ·ã€ŒçŠ¶æ€å›¾ã€ã€‚å¹¶é€šè¿‡ä»…ä½¿å›¾ä¸­å·²æ›´æ–°çš„åŸå­å¤±æ•ˆæ¥ä¼˜åŒ–æ¸²æŸ“ã€‚ è¿™ä¸æ‹¥æœ‰ä¸€ä¸ªå¤§çš„å•ä½“çŠ¶æ€çƒå½¢æˆé²œæ˜å¯¹æ¯”ï¼Œä½ å¯ä»¥ã€Œè®¢é˜…å¹¶è¯•å›¾é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä»‹ç» 5 ä¸ª Hooks æ—¶ä»£çš„çŠ¶æ€åº“ï¼Œåˆ†åˆ«æ˜¯ recoilã€zustandã€jotaiã€valtioã€hoxã€‚æ¯”è¾ƒæœ‰è¶£çš„æ˜¯å…¶ä¸­ 3 ä¸ªéƒ½æ˜¯ DaishiÂ Katoå¼€å‘çš„ï¼Œé‡‡ç”¨äº†ä¸åŒçš„è®¾è®¡æ€æƒ³ï¼Œä½†æ˜¯éƒ½åœ¨çŸ­æœŸå†…å–å¾—ä¸é”™çš„ç¤¾åŒºçƒ­åº¦ï¼Œè¿™ 3 ä¸ªåº“åˆ†åˆ«æ˜¯ zustandã€jotaiã€valtioï¼Œè¿™ä¸‰ä¸ªè¯å…¶å®æ˜¯â€œçŠ¶æ€â€åœ¨ 3 ç§è¯­è¨€ä¸­çš„ä¸åŒå‘éŸ³ã€‚ zustandÂ ğŸ‡©ğŸ‡ª å¾·è¯­ â€œçŠ¶æ€â€ï¼ŒjotaiÂ ğŸ‡¯ğŸ‡µ æ—¥è¯­ â€œçŠ¶æ€â€ã€valtioÂ ğŸ‡«ğŸ‡® èŠ¬å…°è¯­ â€œçŠ¶æ€â€ã€‚ Recoilç®€ä»‹Recoil æ˜¯åœ¨ ReactÂ EuropeÂ 2020Â Conference ä¸Š facebook å®˜æ–¹æ¨å‡ºçš„ä¸“ä¸º react æ‰“é€ çš„çŠ¶æ€ç®¡ç†åº“ï¼ŒåŠ¨æœºæ˜¯è§£å†³ react çŠ¶æ€å…±äº«æ¨¡å¼çš„å±€é™æ€§ï¼š ä»¥å¾€åªèƒ½å°† state æå‡åˆ°å…¬å…±ç¥–å…ˆæ¥å®ç°çŠ¶æ€å…±äº«ï¼Œå¹¶ä¸”ä¸€æ—¦è¿™ä¹ˆåšäº†ï¼ŒåŸºæœ¬å°±æ— æ³•å°†ç»„ä»¶æ ‘çš„é¡¶å±‚ï¼ˆstate å¿…é¡»å­˜åœ¨çš„åœ°æ–¹ï¼‰ä¸å¶å­ç»„ä»¶ (ä½¿ç”¨ state çš„åœ°æ–¹) è¿›è¡Œä»£ç åˆ†å‰² Context åªèƒ½å­˜å‚¨å•ä¸€å€¼ï¼Œæ— æ³•å­˜å‚¨å¤šä¸ªå„è‡ªæ‹¥æœ‰æ¶ˆè´¹è€…çš„å€¼çš„é›†åˆ è®¾è®¡æ€æƒ³Recoil çš„çŠ¶æ€é›†æ˜¯ä¸€ä¸ªæœ‰å‘å›¾ (directedÂ graph)ï¼Œæ­£äº¤ä¸”å¤©ç„¶è¿ç»“äº React ç»„ä»¶æ ‘ã€‚çŠ¶æ€çš„å˜åŒ–ä»è¯¥å›¾çš„é¡¶ç‚¹ï¼ˆatomï¼‰å¼€å§‹ï¼Œæµç»çº¯å‡½æ•° (selector) å†ä¼ å…¥ç»„ä»¶ã€‚ Recoil å®šä¹‰äº†ä¸€ä¸ªæœ‰å‘å›¾ (directedÂ graph)ï¼Œæ­£äº¤åŒæ—¶åˆå¤©ç„¶è¿ç»“äºä½ çš„ React æ ‘ä¸Šã€‚çŠ¶æ€çš„å˜åŒ–ä»è¯¥å›¾çš„é¡¶ç‚¹ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º atomï¼‰å¼€å§‹ï¼Œæµç»çº¯å‡½æ•° (æˆ‘ä»¬ç§°ä¹‹ä¸º selector) å†ä¼ å…¥ç»„ä»¶ã€‚åŸºäºè¿™æ ·çš„å®ç°ï¼š æˆ‘ä»¬å¯ä»¥å®šä¹‰æ— éœ€æ¨¡æ¿ä»£ç çš„ APIï¼Œå…±äº«çš„çŠ¶æ€æ‹¥æœ‰ä¸ React æœ¬åœ° state ä¸€æ ·ç®€å•çš„ get&#x2F;set æ¥å£ (å½“ç„¶å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ reducer ç­‰è¿›è¡Œå°è£…)ï¼› æˆ‘ä»¬æœ‰äº†ä¸ Concurrent æ¨¡å¼åŠå…¶ä»– React æ–°ç‰¹æ€§å…¼å®¹çš„å¯èƒ½æ€§ï¼› çŠ¶æ€çš„å®šä¹‰æ˜¯æ¸è¿›å¼å’Œåˆ†å¸ƒå¼çš„ï¼Œè¿™ä½¿ä»£ç åˆ†å‰²æˆä¸ºå¯èƒ½ï¼› æ— éœ€ä¿®æ”¹å¯¹åº”çš„ç»„ä»¶ï¼Œå°±èƒ½å°†å®ƒä»¬æœ¬åœ°çš„ state ç”¨æ´¾ç”Ÿæ•°æ®æ›¿æ¢ï¼› æ— éœ€ä¿®æ”¹å¯¹åº”çš„ç»„ä»¶ï¼Œå°±èƒ½å°†æ´¾ç”Ÿæ•°æ®åœ¨åŒæ­¥ä¸å¼‚æ­¥é—´åˆ‡æ¢ï¼› æˆ‘ä»¬èƒ½å°†å¯¼èˆªè§†ä¸ºå¤´ç­‰æ¦‚å¿µï¼Œç”šè‡³å¯ä»¥å°†çŠ¶æ€çš„è½¬å˜ç¼–ç è¿›é“¾æ¥ä¸­ï¼› å¯ä»¥å¾ˆè½»æ¾åœ°ä»¥å¯å›æº¯çš„æ–¹å¼æŒä¹…åŒ–æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼ŒæŒä¹…åŒ–çš„çŠ¶æ€ä¸ä¼šå› ä¸ºåº”ç”¨çš„æ”¹å˜è€Œä¸¢å¤±ã€‚ æ­£äº¤ï¼šç›¸äº’ç‹¬ç«‹ï¼Œç›¸äº’é—´ä¸å¯æ›¿ä»£ï¼Œå¹¶ä¸”å¯ä»¥ç»„åˆèµ·æ¥å®ç°å…¶å®ƒåŠŸèƒ½ Recoil æ¯ä¸€æ¬¡çŠ¶æ€å˜æ›´éƒ½ä¼šç”Ÿæˆä¸€ä¸ªä¸å¯å˜çš„å¿«ç…§ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å¿«é€Ÿå®ç°åº”ç”¨å¯¼èˆªç›¸å…³çš„åŠŸèƒ½ï¼Œä¾‹å¦‚çŠ¶æ€å›æº¯ã€è·³è½¬ç­‰ã€‚ æ ¸å¿ƒæ–¹æ³•Recoil ä¸­å®šä¹‰çŠ¶æ€çš„ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š atom: å®šä¹‰åŸå­çŠ¶æ€ï¼Œå³ç»„ä»¶çš„æŸä¸ªçŠ¶æ€æœ€å°é›†ï¼Œ selector: å®šä¹‰æ´¾ç”ŸçŠ¶æ€ï¼Œå…¶å®å°±æ˜¯ computedÂ value æ¶ˆè´¹çŠ¶æ€çš„æ–¹æ³•æœ‰ useRecoilStateã€useRecoilValueã€useSetRecoilState ç­‰ï¼Œç”¨æ³•å’Œ react çš„ useState ç±»ä¼¼ï¼Œå‡ ä¹æ²¡æœ‰ä¸Šæ‰‹æˆæœ¬ã€‚å¦å¤–å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œrecoil ç›®å‰åªæ”¯æŒ FC çš„ hook ç”¨æ³•ï¼ŒClass ç»„ä»¶æƒ³ç”¨çš„è¯å¯ä»¥é€šè¿‡ HOC çš„æ–¹å¼è·å–çŠ¶æ€å¹¶æ³¨å…¥ç»„ä»¶ã€‚ ä¼˜ç‚¹ çŠ¶æ€åŸå­åŒ–ï¼ˆatomï¼‰ï¼Œè‡ªç”±ç»„åˆå’Œè®¢é˜…ï¼›å¹¶ä¸”çŠ¶æ€å®šä¹‰æ˜¯æ¸è¿›å¼å’Œåˆ†å¸ƒå¼çš„ï¼Œä½¿ä»£ç åˆ†å‰²æˆä¸ºå¯èƒ½ï¼› æ²¡æœ‰æ¨¡æ¿ä»£ç ï¼Œå¤©ç„¶æ˜¯ hook æ¨¡å¼ï¼Œè®© react å°½é‡ä¿æŒåŸæ¥çš„æ ·å­ï¼› å…¼å®¹å¹¶å‘æ¨¡å¼ï¼ˆConcurrentÂ Modeï¼‰ï¼› æä¾›å¯¹çŠ¶æ€æµçš„å¿«ç…§ï¼ˆsnapshotï¼‰æ”¯æŒï¼Œå¯ä»¥è½»æ¾å›æº¯åº”ç”¨çŠ¶æ€ï¼Œç”šè‡³å°† snopshot ç¼–ç æ”¾è¿› urlï¼Œè®©ä»»ä½•äººæ‰“å¼€åº”ç”¨éƒ½èƒ½è¿›å…¥åˆ°åŒæ ·çš„çŠ¶æ€ï¼› èƒ½åŠ›å¯¹ç…§è¡¨ æ–¹æ¡ˆ å­¦ä¹ æˆæœ¬ ç¼–ç æˆæœ¬ TS å‹å¥½ SSR CodeÂ Split å¹¶å‘æ¨¡å¼å…¼å®¹ å¯è°ƒè¯•æ€§ ç”Ÿæ€ç¹è£ Redux é«˜ é«˜ ä¸€èˆ¬ æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒ å¥½ é«˜ Mobx ä¸­ ä¸­ å¥½ æ”¯æŒ æ”¯æŒ æœªçŸ¥ å·® ä¸­ Recoil ä½ ä½ å¥½ å®è·µè¾ƒå°‘ æ”¯æŒ æ”¯æŒ å¥½ ä½ Zustandç®€ä»‹zustand æ˜¯ä¸€ä¸ªè½»é‡çº§çŠ¶æ€ç®¡ç†åº“ï¼Œå’Œ redux ä¸€æ ·éƒ½æ˜¯åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹å’Œå•å‘æ•°æ®æµçš„ï¼ŒçŠ¶æ€å¯¹è±¡ state ä¸å¯è¢«ä¿®æ”¹ï¼Œåªèƒ½è¢«æ›¿æ¢ã€‚æ¸²æŸ“ä¼˜åŒ–è¦æ‰‹åŠ¨é€šè¿‡ selectors è¿›è¡Œã€‚ ZustandÂ vsÂ Redux zustand å’Œ redux æ˜¯éå¸¸åƒçš„ï¼Œéƒ½åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹ï¼Œéƒ½åŸºäºå•å‘æ•°æ®æµã€‚ ä¸è¿‡ï¼Œredux éœ€è¦åº”ç”¨è¢« ContextÂ Provider åŒ…è£¹ï¼Œzustand åˆ™ä¸éœ€è¦ã€‚ äºŒè€…æ›´æ–°æ•°æ®çš„æ–¹å¼ä¸åŒï¼Œredux åŸºäº reducersï¼Œæ›´æ–°çŠ¶æ€çš„ reducers æ˜¯ä¸¥æ ¼çš„æ–¹æ³•ï¼Œè¿™å°±ä½¿å¾—çŠ¶æ€æ›´åŠ å¯é¢„æµ‹ã€‚zustand ä¸ä½¿ç”¨ reducers è€Œæ˜¯é€šè¿‡æ›´çµæ´»çš„æ–¹æ³•æ¥æ›´æ–°çŠ¶æ€ã€‚ ç‰¹ç‚¹zustand çš„ç‰¹ç‚¹ï¼š è½»é‡çº§ï¼› ä¸­å¿ƒåŒ–ï¼Œå•ä¸€ storeï¼› ä¸å¯å˜çŠ¶æ€æ¨¡å‹ï¼› ä¸å›ºæ‰§ã€‚å¾ˆå°‘é™åˆ¶ï¼Œéå¸¸å¼€æ”¾ã€‚ Jotaiç®€ä»‹jotai æ˜¯ä¸€ä¸ªå°å‹å…¨å±€çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæ¨¡ä»¿äº† useStateã€useReducerã€‚jotai æœ‰ä¸ªå«åš atom çš„æ¦‚å¿µï¼Œç”¨äºè¡¨ç¤ºå°çš„çŠ¶æ€ç‰‡æ®µã€‚å’Œ zustand ä¸åŒçš„æ˜¯ï¼Œä»–æ˜¯ä¸€ä¸ªç»„ä»¶çº§åˆ«çš„çŠ¶æ€ç®¡ç†åº“ã€‚å’Œ zustand ç›¸åŒçš„æ˜¯åŒæ ·éƒ½åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹ã€‚ jotai æ˜¯ Context å’Œè®¢é˜…æœºåˆ¶çš„ç»“åˆï¼Œæ˜¯é¢å‘ React çš„ä¸€ç§å…¨å±€çŠ¶æ€ç®¡ç†åº“ã€‚å¦‚æœä½ çš„éœ€æ±‚æ˜¯ä¸€ä¸ªæ²¡æœ‰é¢å¤–é‡å¤æ¸²æŸ“çš„ Contextï¼Œé‚£ jotai æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ç‰¹ç‚¹jotai æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š è¯­æ³•ç®€å• jotai çš„çŠ¶æ€ä¸æ˜¯å…¨å±€çŠ¶æ€ atom å¯ä»¥åœ¨ React ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé‡Œåˆ›å»ºå’Œé”€æ¯ã€‚è¿™é€šè¿‡å¤šä¸ª Context æ˜¯æ— æ³•å®ç°çš„ï¼Œå› ä¸ºä½¿ç”¨ Context å¢åŠ ä¸€ä¸ªæ–°çš„ state æ„å‘³ç€å¢åŠ ä¸€ä¸ªæ–°çš„ Provider ç»„ä»¶ï¼Œå¦‚æœæ–°å¢ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ‰€æœ‰çš„å­ç»„ä»¶éƒ½ä¼šè¢«é‡æ–°æŒ‚è½½ï¼Œä¼šå¤±å»æ‰€æœ‰çŠ¶æ€ã€‚ è¡ç”Ÿ atom atom å¯ä»¥åƒç§¯æœ¨ä¸€æ ·è¢«ç»„åˆï¼Œç”Ÿæˆæ–°çš„ atomï¼Œä»è€Œå®ç°å¤æ‚é€»è¾‘ã€‚ jotai é€šè¿‡ atom ä¹‹é—´çš„ä¾èµ–æ¥å®ç°è‡ªåŠ¨æ¸²æŸ“ä¼˜åŒ–ã€‚ æ¨èåœºæ™¯ï¼šç»„ä»¶ä¸ºä¸­å¿ƒçš„åº”ç”¨ã€‚ RecoilÂ vsÂ Jotaijotai æ·±å— recoil å¯å‘ï¼Œè®¾è®¡ç†å¿µåŸºæœ¬ç›¸åŒã€‚ä½†æœ‰ä»¥ä¸‹ä¸åŒï¼š æœ€å¤§çš„ä¸åŒæ˜¯æ˜¯å¦éœ€è¦é”®å­—ç¬¦ä¸²ï¼Œå¼€å‘ jotai çš„ä¸€å¤§åŠ¨åŠ›å°±æ˜¯è¦çœç•¥é”®å­—ç¬¦ä¸²ã€‚å› ä¸ºé”®å±æ€§å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé”®å‘½åæ˜¯ä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ï¼› å¦ä¸€ä¸ªä¸åŒæ˜¯ jotai ä¸éœ€è¦ä½¿ç”¨ Provider åŒ…è£¹ç»„ä»¶ï¼Œè¿™å¯¹å¼€å‘è€…æ¥è¯´å¯ä»¥å¤§å¹…é™ä½å¼€å‘æˆæœ¬å’Œå¿ƒç†è´Ÿæ‹…ã€‚ ZustandÂ vsÂ JotaiZustand å’Œ Jotai ä¹‹é—´æœ‰ä¸¤ä¸ªä¸»è¦ä¸åŒï¼š Zustand æ˜¯å•ä¸€ storeï¼ŒJotai ç”±åŸå­ atom ç»„åˆè€Œæˆï¼› Zustand çš„ store å­˜å‚¨åœ¨ React å¤–éƒ¨ï¼ŒJotai çš„ store å­˜å‚¨åœ¨ React å†…éƒ¨ã€‚ Valtioç®€ä»‹åŸºäºå¯å˜çŠ¶æ€æ¨¡å‹ï¼Œåˆ©ç”¨ Proxy è·å–ä¸€ä¸ªå’Œ React é›†æˆåœ¨ä¸€èµ·çš„ä¸å¯å˜å¿«ç…§ã€‚ åˆ©ç”¨ Proxy è‡ªåŠ¨è¿›è¡Œé‡æ–°æ¸²æŸ“ä¼˜åŒ–ï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿ç”¨äº†çŠ¶æ€ä½¿ç”¨è·Ÿè¸ªæŠ€æœ¯ã€‚é€šè¿‡çŠ¶æ€ä½¿ç”¨è·Ÿè¸ªï¼Œå¯ä»¥æ£€æµ‹åˆ°çŠ¶æ€çš„å“ªéƒ¨åˆ†è¢«ä½¿ç”¨ï¼Œè®©ç»„ä»¶å®ç°æŒ‰ä½¿ç”¨é‡æ–°æ¸²æŸ“ã€‚åŒæ—¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ç¼–å†™æ›´å°‘çš„ä»£ç ã€‚ ValtioÂ vsÂ Zustandzustand åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹ï¼Œvaltio åŸºäºå¯å˜çŠ¶æ€æ¨¡å‹ã€‚ valtio é€šè¿‡å±æ€§è®¿é—®è‡ªåŠ¨è¿›è¡Œæ¸²æŸ“ä¼˜åŒ–ï¼Œzustand æ¨èä½¿ç”¨ selectors æ‰‹åŠ¨è¿›è¡Œæ¸²æŸ“ä¼˜åŒ–ã€‚ ValtioÂ vsÂ Mobxæ¸²æŸ“ä¼˜åŒ–ä¸Šï¼Œvaltio ä½¿ç”¨ hookï¼Œmobx ä½¿ç”¨é«˜é˜¶ç»„ä»¶ã€‚ Hoxä»çŠ¶æ€ç®¡ç†åˆ°çŠ¶æ€å…±äº«reduxã€zustandã€recoil è¿™äº›çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä»¬è™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥å¸®æˆ‘ä»¬è§£å†³æ•°æ®å…±äº«çš„é—®é¢˜ï¼Œä½†å®ƒä»¬æœ€æœ¬è´¨çš„èƒ½åŠ›è¿˜æ˜¯å¯¹æ•°æ®çš„æ“ä½œã€‚å®ƒä»¬è¢«ç§°åšä¹Ÿç¡®å®åº”è¯¥è¢«ç§°åšâ€çŠ¶æ€ç®¡ç†â€å·¥å…·ã€‚ è€Œ Hox æƒ³è§£å†³çš„é—®é¢˜ï¼Œä¸æ˜¯å¦‚ä½•ç»„ç»‡å’Œæ“ä½œæ•°æ®ï¼Œä¸æ˜¯æ•°æ®æµçš„åˆ†å±‚ã€å¼‚æ­¥ã€ç»†ç²’åº¦ï¼Œæˆ‘ä»¬å¸Œæœ› Hox åªèšç„¦äºä¸€ä¸ªç—›ç‚¹ï¼šåœ¨å¤šä¸ªç»„ä»¶é—´å…±äº«çŠ¶æ€ã€‚ å¦‚æœä½ ä¹Ÿæ„è¯†åˆ°äº†ï¼Œå±‚å±‚ä¼ é€’çš„ valueÂ onChange ä¼šå¯¹ä¸€ä¸ªä¼˜è´¨ä»£ç åº“å¸¦æ¥çš„æ¯ç­æ€§å½±å“ï¼Œç²—æš´åœ°æŠŠæ•°æ®å¡åœ¨ redux ä¸­ä¹Ÿå¹¶ä¸èƒ½è®©ä¸€ä¸ªåº”ç”¨å¾—åˆ°å¾ˆå¥½çš„æ‹“å±•æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé‚£ä¹ˆ Hox æˆ–è®¸ä¼šæ˜¯ä¸€ä¸ªé€‚åˆä½ çš„â€çŠ¶æ€å…±äº«â€æ–¹æ¡ˆï¼Œå®ƒç®€å•ã€è½»é‡ã€å¯é ï¼Œé€‚åˆæ— è®ºå¤§å°çš„å‡ ä¹æ‰€æœ‰é¡¹ç›®ã€‚ ä¼˜åŠ¿ ç›´æ¥å¤ç”¨å·²æœ‰çš„ React çŸ¥è¯†ï¼Œå‡ ä¹æ²¡æœ‰å­¦ä¹ æˆæœ¬ï¼Œä½ æ€ä¹ˆå†™ React ç»„ä»¶ï¼Œå°±å¯ä»¥æ€ä¹ˆå†™ Store ä¸ºçµæ´»é‡æ„è€Œè®¾è®¡ï¼Œåœ¨ Store å’Œç»„ä»¶ä¸­ä½¿ç”¨åŒä¸€å¥— DSL å¯ä»¥è®©ä½ å‡ ä¹ 0 æˆæœ¬çš„å°†ç»„ä»¶çš„å±€éƒ¨çŠ¶æ€è½¬åŒ–ä¸ºä¸€ä¸ªç»„ä»¶é—´å…±äº«çš„çŠ¶æ€ åŒæ—¶æ”¯æŒå±€éƒ¨çŠ¶æ€å’Œå…¨å±€çŠ¶æ€ï¼Œåœ¨çµæ´»å’Œç®€å•ä¹‹é—´åšåˆ°äº†å¾ˆå¥½çš„å¹³è¡¡ ä¼˜ç§€çš„æ€§èƒ½å’Œ TypeScript æ”¯æŒ æ€»ç»“ç®€å•åœºæ™¯ä½¿ç”¨åŸç”Ÿçš„ useStateã€useReducerã€useContext å°±èƒ½æ»¡è¶³ï¼›è¿˜å¯ä»¥ç”¨ Hoxè¿™æ ·å°è€Œç¾çš„åº“å°† hook çš„çŠ¶æ€ç›´æ¥æ‹“å±•æˆæŒä¹…åŒ–çŠ¶æ€ï¼Œå‡ ä¹æ²¡æœ‰é¢å¤–çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚ å¤æ‚åœºæ™¯çš„åº”ç”¨ï¼Œreduxã€mobx éƒ½æ˜¯ç»å—è¿‡åƒé”¤ç™¾ç‚¼çš„åº“ï¼Œç¤¾åŒºç”Ÿæ€ä¹Ÿå¾ˆå®Œå¤‡ã€‚ Redux é«˜åº¦æ¨¡æ¿åŒ–ã€åˆ†å±‚åŒ–ï¼ŒèŒè´£åˆ’åˆ†æ¸…æ™°ï¼Œå¡‘é€ äº†å…¶çŠ¶æ€åœ¨å¯å›æº¯ã€å¯ç»´æŠ¤æ€§æ–¹é¢çš„ä¼˜åŠ¿ï¼›æ­é… thunkã€saga è¿™äº›ä¸­é—´ä»¶å‡ ä¹æ˜¯æ— æ‰€ä¸èƒ½ã€‚ Mobx çš„ä¼˜åŠ¿æ˜¯å†™æ³•ç®€å•å’Œé«˜æ€§èƒ½ï¼Œä½†çŠ¶æ€çš„å¯ç»´æŠ¤æ€§ä¸å¦‚ reduxï¼Œåœ¨å¹¶å‘æ¨¡å¼ä¸­çš„å…¼å®¹æ€§ä¹Ÿæœ‰å¾…è§‚å¯Ÿã€‚ éšç€ hook å’Œæœ‰å®˜æ–¹èƒŒæ™¯çš„ recoil çš„å‡ºç°ï¼ŒçŠ¶æ€ç®¡ç†ä¼¼ä¹åœ¨æœåŸå­åŒ–ã€ç»„ä»¶åŒ–çš„æ–¹å‘å‘å±•ï¼Œè¿™ä¹Ÿç¬¦åˆ react çš„ç»„ä»¶åŒ–å“²å­¦ã€‚Redux çš„æš´åŠ›éå†å’Œåˆ†å‘æˆ–è®¸å·²ç»æ˜¯é€†æ½®æµçš„è§£æ³•ã€‚ æ²¡æœ‰æœ€å¥½çš„çŠ¶æ€ç®¡ç†åº“ï¼Œåªæœ‰æœ€åˆé€‚çš„çŠ¶æ€ç®¡ç†åº“ã€‚ è¯¦ç»†çŠ¶æ€åº“èƒ½åŠ›å¯¹ç…§è¡¨ï¼š Class æ—¶ä»£ Hooks æ—¶ä»£ ä¼ ç»Ÿæµæ´¾ å“åº”å¼æµæ´¾ åŸå­çŠ¶æ€æµæ´¾ ä¼ ç»Ÿæµæ´¾ å“åº”å¼æµæ´¾ åŸå­çŠ¶æ€æµæ´¾ redux dvajs icestoreï¼ˆice å†…ç½®ï¼‰ mobx recoil zustand Valtio Jotai hox STAR æ•° 59k 16.1k 387 26k 18.1k 24.5k 5.9k 11.3k 1.3k è¯ç”Ÿæ—¶é—´ 2011 2016.12 2019.3 2015.3 2019 2018 2020.11 2020.3 2019.1 ç‰¹æ€§ å…¨å±€ä¸€æ£µçŠ¶æ€æ ‘ï¼Œåˆ©ç”¨ contextï¼Œé€šè¿‡ action è§¦å‘å˜åŠ¨ï¼Œreducer çº¯å‡½æ•°ä¿®æ”¹ storeï¼Œæœ€åå¯¼è‡´ props å˜åŠ¨ï¼Œè¿›è€Œç»„ä»¶é‡æ–°æ¸²æŸ“ æ·±åº¦æ•´åˆ reduxã€redux-sagaï¼Œä¾¿äº redux ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢ ç±» dvajsï¼Œåˆ›é€  icestore çš„çµæ„Ÿæ¥è‡ªäº rematch å’Œ constateã€‚ åŸºäº ES6Â proxyÂ ï¼Œä½¿ç”¨è§‚å¯Ÿè€…&#x2F;å¯è§‚å¯Ÿæ¨¡å¼çš„ï¼Œå½“ä½ ä¿®æ”¹ä¸€ä¸ªå€¼æ—¶ï¼Œä»»ä½•ä½¿ç”¨è¯¥å€¼çš„ç»„ä»¶éƒ½ä¼šè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚ åŸå­åŒ–ç®¡ç†çŠ¶æ€ï¼Œè¿›è¡Œç²¾ç¡®æ¸²æŸ“ã€‚ä½¿ç”¨ Recoil ä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªæ•°æ®æµå‘å›¾ï¼Œä» atomï¼ˆå…±äº«çŠ¶æ€ï¼‰åˆ° selectorï¼ˆçº¯å‡½æ•°ï¼‰ï¼Œå†æµå‘ React ç»„ä»¶ã€‚Atom æ˜¯ç»„ä»¶å¯ä»¥è®¢é˜…çš„ state å•ä½ã€‚selector å¯ä»¥åŒæ­¥æˆ–å¼‚æ­¥æ”¹å˜æ­¤ stateã€‚ åŸºäºè§‚å¯Ÿè€…&#x2F;å¯è§‚å¯Ÿæ¨¡å¼ï¼Œå†…éƒ¨å¯¹é€šè¿‡ state ç»‘å®šçš„ç»„ä»¶ï¼Œæ·»åŠ åˆ°äº†è®¢é˜…è€…é˜Ÿåˆ—ï¼Œstore ä¸­çš„å±æ€§ç›¸å½“äºä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå½“å±æ€§çŠ¶æ€å˜æ›´åï¼Œé€šçŸ¥æ‰€æœ‰è®¢é˜…äº†è¯¥æ•°å±æ€§çš„ç»„ä»¶è¿›è¡Œæ›´æ–° åˆ©ç”¨ Proxy è‡ªåŠ¨è¿›è¡Œé‡æ–°æ¸²æŸ“ä¼˜åŒ–ï¼Œè¿™ä¸ªè¿‡ç¨‹ä½¿ç”¨äº†çŠ¶æ€ä½¿ç”¨è·Ÿè¸ªæŠ€æœ¯ã€‚é€šè¿‡çŠ¶æ€ä½¿ç”¨è·Ÿè¸ªï¼Œå¯ä»¥æ£€æµ‹åˆ°çŠ¶æ€çš„å“ªéƒ¨åˆ†è¢«ä½¿ç”¨ï¼Œè®©ç»„ä»¶å®ç°æŒ‰ä½¿ç”¨é‡æ–°æ¸²æŸ“ã€‚åŒæ—¶ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ç¼–å†™æ›´å°‘çš„ä»£ç ã€‚ jotai æ˜¯ä¸€ä¸ªå°å‹å…¨å±€çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæ¨¡ä»¿äº† useStateã€useReducerã€‚jotai æœ‰ä¸ªå«åš atom çš„æ¦‚å¿µï¼Œç”¨äºè¡¨ç¤ºå°çš„çŠ¶æ€ç‰‡æ®µã€‚å’Œ zustand ä¸åŒçš„æ˜¯ï¼Œä»–æ˜¯ä¸€ä¸ªç»„ä»¶çº§åˆ«çš„çŠ¶æ€ç®¡ç†åº“ã€‚å’Œ zustand ç›¸åŒçš„æ˜¯åŒæ ·éƒ½åŸºäºä¸å¯å˜çŠ¶æ€æ¨¡å‹ã€‚ ç±»ä¼¼äºè‡ªå®šä¹‰ hookï¼Œåˆ©ç”¨ useState èƒ½åŠ›ï¼Œstate çŠ¶æ€å˜åŒ–è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ å­¦ä¹ æˆæœ¬ å¾ˆé«˜ ä½ ä½ ä¸­ ä½ ä½ ä½ ä½ ä½ ä½¿ç”¨æˆæœ¬ å¾ˆé«˜ï¼Œæ¨¡æ¿ä»£ç å¤š ä½ï¼Œä»…æœ‰ 6 ä¸ª API ä½ ä¸­ ä½ ä½ ä½ ä½ ä½ Typescript å‹å¥½ å‹å¥½ ä¸å‹å¥½ï¼Œæ²¡æœ‰æ¸…æ™°çš„ä¾èµ–å…³ç³»ï¼Œç±»å‹æ”¯æŒå¾ˆå·® å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ çŠ¶æ€æ‹†åˆ† react&#x2F;toolkitÂ createSlice æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ€§èƒ½ ä¸­ç­‰ ä¸­ç­‰ ä¸­ç­‰ å¥½ å¥½ ä¸­ç­‰ å¥½ å¥½ å¥½ å¼‚æ­¥æ”¯æŒ ä¸å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ å‹å¥½ ReactÂ concurrent æ¨¡å¼æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒ æ˜“äºè°ƒè¯• æ˜¯ æ˜¯ æ˜¯ å¦ æ˜¯ æ˜¯ å¦ æ˜¯ devtools æœ‰ æœ‰ æœ‰ æ—  æ—  æœ‰ æ—  æ—  æ—  SSR æ”¯æŒ æ”¯æŒ æ”¯æŒ æ”¯æŒï¼Œä½†å¯èƒ½ä¸å¥å…¨ æ”¯æŒï¼Œä½†å¯èƒ½ä¸å¥å…¨ æ”¯æŒï¼Œä½†å¯èƒ½ä¸å¥å…¨ æ”¯æŒï¼Œä½†å¯èƒ½ä¸å¥å…¨ ä¸æ”¯æŒ å‚è€ƒèµ„æ–™ DoÂ ReactÂ HooksÂ ReplaceÂ Redux? React çŠ¶æ€ç®¡ç†å·¥å…·ï¼šæˆ‘æ˜¯è¿™æ ·é€‰æ‹©çš„ YouÂ MightÂ NotÂ NeedÂ Redux å„æµæ´¾ React çŠ¶æ€ç®¡ç†å¯¹æ¯”å’ŒåŸç†å®ç° ç›˜ç‚¹ React å¸¸è§çš„çŠ¶æ€ç®¡ç†æ–¹å¼ 2022 å¹´ï¼Œæˆ‘ä»¬å†æ¥è°ˆè°ˆ React çŠ¶æ€ç®¡ç† DvaJS æ”¯ä»˜å®å‰ç«¯åº”ç”¨æ¶æ„çš„å‘å±•å’Œé€‰æ‹© HoxJS ReduxÂ vsÂ Zustand React çŠ¶æ€ç®¡ç†æ–°æµªæ½® React-å…¨å±€çŠ¶æ€ç®¡ç†çš„ç¾¤é­”ä¹±èˆ å„æµæ´¾ React çŠ¶æ€ç®¡ç†å¯¹æ¯”å’ŒåŸç†å®ç° -Â mdnice å¢¨æ»´ è‡ªè¿° Â·Â Redux RecoilÂ -Â Facebook å®˜æ–¹ React çŠ¶æ€ç®¡ç†å™¨ [è¯‘]Â React çŠ¶æ€ç®¡ç†çš„å‰ä¸–ï¼Œä»Šç”Ÿå’Œæœªæ¥ - å¼€å‘è€…å¤´æ¡ 2021 å¹´çš„ React çŠ¶æ€ç®¡ç† - æ˜é‡‘ çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå‘å±•æ¦‚è§ˆ StateÂ Management:Â OverviewÂ |Â ReactÂ CommonÂ ToolsÂ andÂ Practices BloggedÂ Answers:Â WhyÂ ReactÂ ContextÂ isÂ NotÂ aÂ â€œStateÂ Managementâ€Â ToolÂ (andÂ WhyÂ ItÂ Doesnâ€™tÂ ReplaceÂ Redux) zustandÂ vsÂ redux hoxÂ - ä¸‹ä¸€ä»£ React çŠ¶æ€ç®¡ç†å™¨ MobXÂ vsÂ Redux:Â EvaluatingÂ TwoÂ PopularÂ LibrariesÂ ForÂ StateÂ ManagementÂ |Â SPECÂ INDIA React çŠ¶æ€ç®¡ç†çš„æ–°æµªæ½® Redux çš„æ€§èƒ½é—®é¢˜ mobxÂ vsÂ redux zustandÂ vsÂ jotaiÂ vsÂ valtio","tags":["React"],"categories":["React"]},{"title":"[Reactè¿›é˜¶]APIå…¨é¢è§£è¯»ä¸åŸºç¡€å®è·µ","path":"/2024/02/28/[Reactè¿›é˜¶]APIå…¨é¢è§£è¯»ä¸åŸºç¡€å®è·µ/","content":"åŸæ–‡åœ°å€ã€ŒReact è¿›é˜¶ã€ React å…¨éƒ¨ api è§£è¯»+åŸºç¡€å®è·µå¤§å…¨(å¤¯å®åŸºç¡€ 2 ä¸‡å­—æ€»ç»“) - æ˜é‡‘ å¾ˆå¤šåŒå­¦ç”¨reactå¼€å‘çš„æ—¶å€™ï¼ŒçœŸæ­£ç”¨åˆ°çš„Reactçš„apiå°‘ä¹‹åˆå°‘ï¼ŒåŸºæœ¬åœç•™åœ¨Component,React.memoç­‰å±‚é¢,å®é™…reactæºç ä¸­ï¼Œæš´éœ²å‡ºæ¥çš„æ–¹æ³•å¹¶ä¸å°‘ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶å¾ˆå°‘ç”¨ã€‚ä½†æ˜¯Reactæš´éœ²å‡ºè¿™ä¹ˆå¤šapiå¹¶éæ²¡æœ‰ç”¨ï¼Œæƒ³è¦ç©è½¬react,å°±è¦æ˜ç™½è¿™äº›APIç©¶ç«Ÿæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Œä»Šå¤©å°±è®©æˆ‘ä»¬ä»react åˆ° react-dom,ä¸€æ¬¡æ€§æŠŠreactç”Ÿäº§ç¯å¢ƒçš„æš´éœ²apiå¤ä¹ ä¸ªé(æ¶µç›– 90%+)ã€‚ æˆ‘ä»¬æŠŠreact,APIï¼Œåˆ†ä¸ºç»„ä»¶ç±»ï¼Œå·¥å…·ç±»ï¼Œ**hooks**ï¼Œå†åŠ ä¸Š react-dom ï¼Œä¸€å…±å››å¤§æ–¹å‘ï¼Œåˆ†åˆ«åŠ ä»¥æ¢è®¨ã€‚ ä¸ºäº†èƒ½è®©å±å¹•å‰çš„ä½ ï¼Œæ›´ç†è§£api,æˆ‘æ˜¯ç»å°½è„‘æ±,æœ¬æ–‡çš„æ¯ä¸€ä¸ªapiåŸºæœ¬éƒ½ä¼šå‡ºä¸€ä¸ªdemoæ¼”ç¤ºæ•ˆæœ,å¼¥è¡¥ä¸€ä¸‹å¤©ä¹¦èˆ¬çš„reactæ–‡æ¡£ ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘å¯¹apiåŸºæœ¬æ¦‚å¿µçš„ç†è§£ã€‚åˆ›ä½œä¸æ˜“ï¼Œå¸Œæœ›å±å¹•å‰çš„ä½ èƒ½ç»™ç¬”è€…èµä¸ªèµï¼Œä»¥æ­¤é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œå‰ç«¯ç¡¬æ–‡ã€‚ è€è§„çŸ©ï¼Œæˆ‘ä»¬å¸¦ç€ç–‘é—®å¼€å§‹ä»Šå¤©çš„é˜…è¯»(è‡ªæµ‹æŒæ¡ç¨‹åº¦)ï¼Ÿ 1 reactæš´éœ²çš„apiæœ‰å“ªäº›ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿ 2 reactæä¾›äº†å“ªäº›è‡ªæµ‹æ€§èƒ½çš„æ‰‹æ®µï¼Ÿ 3 refæ—¢ç„¶ä¸èƒ½ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶å¦‚ä½•æ§åˆ¶å‡½æ•°å­ç»„ä»¶å†…çš„stateå’Œæ–¹æ³•ï¼Ÿ 4 createElementå’ŒcloneElementæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ 5 reactå†…ç½®çš„childrenéå†æ–¹æ³•ï¼Œå’Œæ•°ç»„æ–¹æ³•,æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 6 reactæ€ä¹ˆå°†å­å…ƒç´ æ¸²æŸ“åˆ°çˆ¶å…ƒç´ ä¹‹å¤–çš„æŒ‡å®šå®¹å™¨ä¸­ï¼Ÿ â€¦ æˆ‘ç›¸ä¿¡è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œè¿™äº›é—®é¢˜å…¨éƒ½ä¼šè¿åˆƒè€Œè§£ï¼Ÿ ç»„ä»¶ç±»ç»„ä»¶ç±»ï¼Œè¯¦ç»†åˆ†çš„è¯æœ‰ä¸‰ç§ç±»ï¼Œç¬¬ä¸€ç±»è¯´ç™½äº†å°±æ˜¯æˆ‘å¹³æ—¶ç”¨äºç»§æ‰¿çš„åŸºç±»ç»„ä»¶Component,PureComponent,è¿˜æœ‰å°±æ˜¯reactæä¾›çš„å†…ç½®çš„ç»„ä»¶ï¼Œæ¯”å¦‚Fragment,StrictMode,å¦ä¸€éƒ¨åˆ†å°±æ˜¯é«˜é˜¶ç»„ä»¶forwardRef,memoç­‰ã€‚ ComponentComponentæ˜¯classç»„ä»¶çš„æ ¹åŸºã€‚\b ç±»ç»„ä»¶ä¸€åˆ‡å§‹äºComponentã€‚å¯¹äºReact.Componentä½¿ç”¨ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»€ä¹ˆå¥½è®²çš„ã€‚æˆ‘ä»¬è¿™é‡Œé‡ç‚¹ç ”ç©¶ä¸€ä¸‹reactå¯¹Componentåšäº†äº›ä»€ä¹ˆã€‚ react/src/ReactBaseClasses.js 123456function Component(props, context, updater) &#123; this.props = props; this.context = context; this.refs = emptyObject; this.updater = updater || ReactNoopUpdateQueue;&#125; è¿™å°±æ˜¯Componentå‡½æ•°ï¼Œå…¶ä¸­updaterå¯¹è±¡ä¸Šä¿å­˜ç€æ›´æ–°ç»„ä»¶çš„æ–¹æ³•ã€‚ æˆ‘ä»¬å£°æ˜çš„ç±»ç»„ä»¶æ˜¯ä»€ä¹ˆæ—¶å€™ä»¥ä½•ç§å½¢å¼è¢«å®ä¾‹åŒ–çš„å‘¢ï¼Ÿ react-reconciler/src/ReactFiberClassComponent.js constructClassInstance 12345678910111213function constructClassInstance(workInProgress, ctor, props) &#123; const instance = new ctor(props, context); instance.updater = &#123; isMounted, enqueueSetState() &#123; /* setState è§¦å‘è¿™é‡Œé¢çš„é€»è¾‘ */ &#125;, enqueueReplaceState() &#123;&#125;, enqueueForceUpdate() &#123; /* forceUpdate è§¦å‘è¿™é‡Œçš„é€»è¾‘ */ &#125;, &#125;;&#125; å¯¹äºComponentï¼Œ react å¤„ç†é€»è¾‘è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå®ä¾‹åŒ–æˆ‘ä»¬ç±»ç»„ä»¶ï¼Œç„¶åèµ‹å€¼updaterå¯¹è±¡ï¼Œè´Ÿè´£ç»„ä»¶çš„æ›´æ–°ã€‚ç„¶ååœ¨ç»„ä»¶å„ä¸ªé˜¶æ®µï¼Œæ‰§è¡Œç±»ç»„ä»¶çš„renderå‡½æ•°ï¼Œå’Œå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±å¯ä»¥äº†ã€‚ PureComponentPureComponentå’Œ Componentç”¨æ³•ï¼Œå·®ä¸å¤šä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œçº¯ç»„ä»¶PureComponentä¼šæµ…æ¯”è¾ƒï¼Œpropså’Œstateæ˜¯å¦ç›¸åŒï¼Œæ¥å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚æ‰€ä»¥ä¸€èˆ¬ç”¨äºæ€§èƒ½è°ƒä¼˜ï¼Œå‡å°‘renderæ¬¡æ•°ã€‚ ä»€ä¹ˆå«åšæµ…æ¯”è¾ƒï¼Œæˆ‘è¿™é‡Œä¸¾ä¸ªåˆ—å­ï¼š 12345678910111213141516171819202122232425262728class Index extends React.PureComponent &#123; constructor(props) &#123; super(props); this.state = &#123; data: &#123; name: &quot;alien&quot;, age: 28, &#125;, &#125;; &#125; handerClick = () =&gt; &#123; const &#123; data &#125; = this.state; data.age++; this.setState(&#123; data &#125;); &#125;; render() &#123; const &#123; data &#125; = this.state; return ( &lt;div className=&quot;box&quot;&gt; &lt;div className=&quot;show&quot;&gt; &lt;div&gt; ä½ çš„å§“åæ˜¯: &#123;data.name&#125; &lt;/div&gt; &lt;div&gt; å¹´é¾„ï¼š &#123;data.age&#125;&lt;/div&gt; &lt;button onClick=&#123;this.handerClick&#125;&gt;age++&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; ); &#125;&#125; ç‚¹å‡»æŒ‰é’®ï¼Œæ²¡æœ‰ä»»ä½•ååº”ï¼Œå› ä¸ºPureComponentä¼šæ¯”è¾ƒä¸¤æ¬¡dataå¯¹è±¡ï¼Œéƒ½æŒ‡å‘åŒä¸€ä¸ªdata,æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä¸æ›´æ–°è§†å›¾ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨handerClickäº‹ä»¶ä¸­è¿™ä¹ˆå†™ï¼š 1this.setState(&#123; data: &#123; ...data &#125; &#125;); æµ…æ‹·è´å°±èƒ½æ ¹æœ¬è§£å†³é—®é¢˜ã€‚ memoReact.memoå’ŒPureComponentä½œç”¨ç±»ä¼¼ï¼Œå¯ä»¥ç”¨ä½œæ€§èƒ½ä¼˜åŒ–ï¼ŒReact.memo æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ å’ŒåŒºåˆ«PureComponentæ˜¯ React.memoåªèƒ½å¯¹propsçš„æƒ…å†µç¡®å®šæ˜¯å¦æ¸²æŸ“ï¼Œè€ŒPureComponentæ˜¯é’ˆå¯¹propså’Œstateã€‚ React.memo æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°åŸå§‹ç»„ä»¶æœ¬èº«ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥æ ¹æ®ä¸€æ¬¡æ›´æ–°ä¸­propsæ˜¯å¦ç›¸åŒå†³å®šåŸå§‹ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚æ˜¯ä¸€ä¸ªè¿”å›å¸ƒå°”å€¼ï¼Œtrue è¯æ˜ç»„ä»¶æ— é¡»é‡æ–°æ¸²æŸ“ï¼Œfalseè¯æ˜ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªå’Œç±»ç»„ä»¶ä¸­çš„shouldComponentUpdate()æ­£å¥½ç›¸å ã€‚ React.memo: ç¬¬äºŒä¸ªå‚æ•° è¿”å› true ç»„ä»¶ä¸æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ shouldComponentUpdate: è¿”å› true ç»„ä»¶æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶ä¸æ¸²æŸ“ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬åšä¸€ä¸ªåœºæ™¯ï¼Œæ§åˆ¶ç»„ä»¶åœ¨ä»…æ­¤ä¸€ä¸ªpropsæ•°å­—å˜é‡ï¼Œä¸€å®šèŒƒå›´æ¸²æŸ“ã€‚ ä¾‹å­ ğŸŒ°ï¼š æ§åˆ¶ props ä¸­çš„ number ï¼š 1 åªæœ‰ number æ›´æ”¹ï¼Œç»„ä»¶æ¸²æŸ“ã€‚ 2 åªæœ‰ number å°äº 5 ï¼Œç»„ä»¶æ¸²æŸ“ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960function TextMemo(props) &#123; console.log(&quot;å­ç»„ä»¶æ¸²æŸ“&quot;); if (props) return &lt;div&gt;hello,world&lt;/div&gt;;&#125;const controlIsRender = (pre, next) =&gt; &#123; if (pre.number === next.number) &#123; // number ä¸æ”¹å˜ ï¼Œä¸æ¸²æŸ“ç»„ä»¶ return true; &#125; else if (pre.number !== next.number &amp;&amp; next.number &gt; 5) &#123; // number æ”¹å˜ ï¼Œä½†å€¼å¤§äº5 ï¼Œ ä¸æ¸²æŸ“ç»„ä»¶ return true; &#125; else &#123; // å¦åˆ™æ¸²æŸ“ç»„ä»¶ return false; &#125;&#125;;const NewTexMemo = memo(TextMemo, controlIsRender);class Index extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; number: 1, num: 1, &#125;; &#125; render() &#123; const &#123; num, number &#125; = this.state; return ( &lt;div&gt; &lt;div&gt; æ”¹å˜numï¼šå½“å‰å€¼ &#123;num&#125; &lt;button onClick=&#123;() =&gt; this.setState(&#123; num: num + 1 &#125;)&#125;&gt; num++ &lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.setState(&#123; num: num - 1 &#125;)&#125;&gt; num-- &lt;/button&gt; &lt;/div&gt; &lt;div&gt; æ”¹å˜numberï¼š å½“å‰å€¼ &#123;number&#125; &lt;button onClick=&#123;() =&gt; this.setState(&#123; number: number + 1 &#125;)&#125; &gt; &#123;&quot; &quot;&#125; number ++ &lt;/button&gt; &lt;button onClick=&#123;() =&gt; this.setState(&#123; number: number - 1 &#125;)&#125; &gt; &#123;&quot; &quot;&#125; number --&#123;&quot; &quot;&#125; &lt;/button&gt; &lt;/div&gt; &lt;NewTexMemo num=&#123;num&#125; number=&#123;number&#125; /&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœï¼š å®Œç¾è¾¾åˆ°äº†æ•ˆæœï¼ŒReact.memoä¸€å®šç¨‹åº¦ä¸Šï¼Œå¯ä»¥ç­‰ä»·äºç»„ä»¶å¤–éƒ¨ä½¿ç”¨shouldComponentUpdate ï¼Œç”¨äºæ‹¦æˆªæ–°è€propsï¼Œç¡®å®šç»„ä»¶æ˜¯å¦æ›´æ–°ã€‚ forwardRefå®˜ç½‘å¯¹forwardRefçš„æ¦‚å¿µå’Œç”¨æ³•å¾ˆç¬¼ç»Ÿï¼Œä¹Ÿæ²¡æœ‰ç»™å®šä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹ã€‚å¾ˆå¤šåŒå­¦ä¸çŸ¥é“ forwardRefå…·ä½“æ€ä¹ˆç”¨ï¼Œä¸‹é¢æˆ‘ç»“åˆå…·ä½“ä¾‹å­ç»™å¤§å®¶è®²è§£forwardRefåº”ç”¨åœºæ™¯ã€‚ 1 è½¬å‘å¼•å…¥ Ref è¿™ä¸ªåœºæ™¯å®é™…å¾ˆç®€å•ï¼Œæ¯”å¦‚çˆ¶ç»„ä»¶æƒ³è·å–å­™ç»„ä»¶ï¼ŒæŸä¸€ä¸ªdomå…ƒç´ ã€‚è¿™ç§éš”ä»£refè·å–å¼•ç”¨ï¼Œå°±éœ€è¦forwardRefæ¥åŠ©åŠ›ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243function Son(props) &#123; const &#123; grandRef &#125; = props; return ( &lt;div&gt; &lt;div&gt; i am alien &lt;/div&gt; &lt;span ref=&#123;grandRef&#125;&gt;è¿™ä¸ªæ˜¯æƒ³è¦è·å–å…ƒç´ &lt;/span&gt; &lt;/div&gt; );&#125;class Father extends React.Component &#123; constructor(props) &#123; super(props); &#125; render() &#123; return ( &lt;div&gt; &lt;Son grandRef=&#123;this.props.grandRef&#125; /&gt; &lt;/div&gt; ); &#125;&#125;const NewFather = React.forwardRef((props, ref) =&gt; ( &lt;Father grandRef=&#123;ref&#125; &#123;...props&#125; /&gt;));class GrandFather extends React.Component &#123; constructor(props) &#123; super(props); &#125; node = null; componentDidMount() &#123; console.log(this.node); &#125; render() &#123; return ( &lt;div&gt; &lt;NewFather ref=&#123;(node) =&gt; (this.node = node)&#125; /&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ reactä¸å…è®¸refé€šè¿‡propsä¼ é€’ï¼Œå› ä¸ºç»„ä»¶ä¸Šå·²ç»æœ‰ ref è¿™ä¸ªå±æ€§,åœ¨ç»„ä»¶è°ƒå’Œè¿‡ç¨‹ä¸­ï¼Œå·²ç»è¢«ç‰¹æ®Šå¤„ç†ï¼ŒforwardRefå‡ºç°å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠrefè½¬å‘åˆ°è‡ªå®šä¹‰çš„forwardRefå®šä¹‰çš„å±æ€§ä¸Šï¼Œè®©refï¼Œå¯ä»¥é€šè¿‡propsä¼ é€’ã€‚ 2 é«˜é˜¶ç»„ä»¶è½¬å‘ Ref ä¸€æ–‡åƒé€hocæ–‡ç« ä¸­è®²åˆ°ï¼Œç”±äºå±æ€§ä»£ç†çš„hocï¼Œè¢«åŒ…è£¹ä¸€å±‚ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œæ˜¯é€šè¿‡refæ‹¿ä¸åˆ°åŸå§‹ç»„ä»¶çš„å®ä¾‹çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡forWardRefè½¬å‘refã€‚ 1234567891011121314151617181920212223242526272829303132function HOC(Component) &#123; class Wrap extends React.Component &#123; render() &#123; const &#123; forwardedRef, ...otherprops &#125; = this.props; return &lt;Component ref=&#123;forwardedRef&#125; &#123;...otherprops&#125; /&gt;; &#125; &#125; return React.forwardRef((props, ref) =&gt; ( &lt;Wrap forwardedRef=&#123;ref&#125; &#123;...props&#125; /&gt; ));&#125;class Index extends React.Component &#123; componentDidMount() &#123; console.log(666); &#125; render() &#123; return &lt;div&gt;hello,world&lt;/div&gt;; &#125;&#125;const HocIndex = HOC(Index, true);export default () =&gt; &#123; const node = useRef(null); useEffect(() =&gt; &#123; /* å°±å¯ä»¥è·¨å±‚çº§ï¼Œæ•è·åˆ° Index ç»„ä»¶çš„å®ä¾‹äº† */ console.log(node.current.componentDidMount); &#125;, []); return ( &lt;div&gt; &lt;HocIndex ref=&#123;node&#125; /&gt; &lt;/div&gt; );&#125;; å¦‚ä¸Šï¼Œè§£å†³äº†é«˜é˜¶ç»„ä»¶å¼•å…¥Refçš„é—®é¢˜ã€‚ lazy React.lazy å’Œ Suspense æŠ€æœ¯è¿˜ä¸æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚å¦‚æœä½ æƒ³è¦åœ¨ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¨è Loadable Components è¿™ä¸ªåº“ React.lazyå’ŒSuspenseé…åˆä¸€èµ·ç”¨ï¼Œèƒ½å¤Ÿæœ‰åŠ¨æ€åŠ è½½ç»„ä»¶çš„æ•ˆæœã€‚React.lazy æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦åŠ¨æ€è°ƒç”¨ import()ã€‚å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª Promise ï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª default export çš„ React ç»„ä»¶ã€‚ æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªåŠ¨æ€åŠ è½½çš„åœºæ™¯ã€‚ çˆ¶ç»„ä»¶ 12345678910111213141516171819202122232425262728import Test from &quot;./comTest&quot;;const LazyComponent = React.lazy( () =&gt; new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(&#123; default: () =&gt; &lt;Test /&gt;, &#125;); &#125;, 2000); &#125;));class index extends React.Component &#123; render() &#123; return ( &lt;div className=&quot;context_box&quot; style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;React.Suspense fallback=&#123; &lt;div className=&quot;icon&quot;&gt; &lt;SyncOutlined spin /&gt; &lt;/div&gt; &#125; &gt; &lt;LazyComponent /&gt; &lt;/React.Suspense&gt; &lt;/div&gt; ); &#125;&#125; æˆ‘ä»¬ç”¨setTimeoutæ¥æ¨¡æ‹Ÿimportå¼‚æ­¥å¼•å…¥æ•ˆæœã€‚ Test 123456789101112131415class Test extends React.Component &#123; constructor(props) &#123; super(props); &#125; componentDidMount() &#123; console.log(&quot;--componentDidMount--&quot;); &#125; render() &#123; return ( &lt;div&gt; &lt;img src=&#123;alien&#125; className=&quot;alien&quot; /&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ Suspenseä½•ä¸ºSuspense, Suspense è®©ç»„ä»¶â€œç­‰å¾…â€æŸä¸ªå¼‚æ­¥æ“ä½œï¼Œç›´åˆ°è¯¥å¼‚æ­¥æ“ä½œç»“æŸå³å¯æ¸²æŸ“ã€‚ ç”¨äºæ•°æ®è·å–çš„ Suspense æ˜¯ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;Suspense&gt; ä»¥å£°æ˜çš„æ–¹å¼æ¥â€œç­‰å¾…â€ä»»ä½•å†…å®¹ï¼ŒåŒ…æ‹¬æ•°æ®ã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»å®ƒåœ¨æ•°æ®è·å–çš„ç”¨ä¾‹ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨äºç­‰å¾…å›¾åƒã€è„šæœ¬æˆ–å…¶ä»–å¼‚æ­¥çš„æ“ä½œã€‚ ä¸Šé¢è®²åˆ°é«˜é˜¶ç»„ä»¶lazyæ—¶å€™ï¼Œå·²ç»ç”¨ lazy + Suspenseæ¨¡å¼ï¼Œæ„å»ºäº†å¼‚æ­¥æ¸²æŸ“ç»„ä»¶ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å®˜ç½‘æ–‡æ¡£ä¸­çš„æ¡ˆä¾‹ï¼š 1234const ProfilePage = React.lazy(() =&gt; import(&quot;./ProfilePage&quot;)); // æ‡’åŠ è½½&lt;Suspense fallback=&#123;&lt;Spinner /&gt;&#125;&gt; &lt;ProfilePage /&gt;&lt;/Suspense&gt;; Fragmentreactä¸å…è®¸ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªèŠ‚ç‚¹å…ƒç´ ï¼Œæ¯”å¦‚è¯´å¦‚ä¸‹æƒ…å†µ 12345render()&#123; return &lt;li&gt; ğŸğŸğŸ &lt;/li&gt; &lt;li&gt; ğŸŒğŸŒğŸŒ &lt;/li&gt; &lt;li&gt; ğŸ‡ğŸ‡ğŸ‡ &lt;/li&gt;&#125; å¦‚æœæˆ‘ä»¬æƒ³è§£å†³è¿™ä¸ªæƒ…å†µï¼Œå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å¤–å±‚å¥—ä¸€ä¸ªå®¹å™¨å…ƒç´ ã€‚ 1234567render()&#123; return &lt;div&gt; &lt;li&gt; ğŸğŸğŸ &lt;/li&gt; &lt;li&gt; ğŸŒğŸŒğŸŒ &lt;/li&gt; &lt;li&gt; ğŸ‡ğŸ‡ğŸ‡ &lt;/li&gt; &lt;/div&gt;&#125; ä½†æ˜¯æˆ‘ä»¬ä¸æœŸæœ›ï¼Œå¢åŠ é¢å¤–çš„domèŠ‚ç‚¹ï¼Œæ‰€ä»¥reactæä¾›Fragmentç¢ç‰‡æ¦‚å¿µï¼Œèƒ½å¤Ÿè®©ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ 12345&lt;React.Fragment&gt; &lt;li&gt; ğŸğŸğŸ &lt;/li&gt; &lt;li&gt; ğŸŒğŸŒğŸŒ &lt;/li&gt; &lt;li&gt; ğŸ‡ğŸ‡ğŸ‡ &lt;/li&gt;&lt;/React.Fragment&gt; è¿˜å¯ä»¥ç®€å†™æˆï¼š 12345&lt;&gt; &lt;li&gt; ğŸğŸğŸ &lt;/li&gt; &lt;li&gt; ğŸŒğŸŒğŸŒ &lt;/li&gt; &lt;li&gt; ğŸ‡ğŸ‡ğŸ‡ &lt;/li&gt;&lt;/&gt; å’ŒFragmentåŒºåˆ«æ˜¯ï¼ŒFragmentå¯ä»¥æ”¯æŒkeyå±æ€§ã€‚&lt;&gt;&lt;/&gt;ä¸æ”¯æŒkeyå±æ€§ã€‚ æ¸©é¦¨æç¤ºã€‚æˆ‘ä»¬é€šè¿‡mapéå†åçš„å…ƒç´ ï¼Œreactåº•å±‚ä¼šå¤„ç†ï¼Œé»˜è®¤åœ¨å¤–éƒ¨åµŒå¥—ä¸€ä¸ª&lt;Fragment&gt;ã€‚ æ¯”å¦‚ï¼š 123&#123; [1, 2, 3].map((item) =&gt; &lt;span key=&#123;item.id&#125;&gt;&#123;item.name&#125;&lt;/span&gt;);&#125; reactåº•å±‚å¤„ç†ä¹‹åï¼Œç­‰ä»·äºï¼š 12345&lt;Fragment&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt;&lt;/Fragment&gt; ProfilerProfilerè¿™ä¸ªapiä¸€èˆ¬ç”¨äºå¼€å‘é˜¶æ®µï¼Œæ€§èƒ½æ£€æµ‹ï¼Œæ£€æµ‹ä¸€æ¬¡reactç»„ä»¶æ¸²æŸ“ç”¨æ—¶ï¼Œæ€§èƒ½å¼€é”€ã€‚ Profiler éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜¯ idï¼Œç”¨äºè¡¨è¯†å”¯ä¸€æ€§çš„Profilerã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼šonRenderå›è°ƒå‡½æ•°ï¼Œç”¨äºæ¸²æŸ“å®Œæˆï¼Œæ¥å—æ¸²æŸ“å‚æ•°ã€‚ å®è·µï¼š 1234567891011121314151617const index = () =&gt; &#123; const callback = (...arg) =&gt; console.log(arg); return ( &lt;div&gt; &lt;div&gt; &lt;Profiler id=&quot;root&quot; onRender=&#123;callback&#125;&gt; &lt;Router&gt; &lt;Meuns /&gt; &lt;KeepaliveRouterSwitch withoutRoute&gt; &#123;renderRoutes(menusList)&#125; &lt;/KeepaliveRouterSwitch&gt; &lt;/Router&gt; &lt;/Profiler&gt; &lt;/div&gt; &lt;/div&gt; );&#125;; ç»“æœ onRender 0 -id: root -&gt; Profiler æ ‘çš„ id ã€‚ 1 -phase: mount -&gt; mount æŒ‚è½½ ï¼Œ update æ¸²æŸ“äº†ã€‚ 2 -actualDuration: 6.685000262223184 -&gt; æ›´æ–° committed èŠ±è´¹çš„æ¸²æŸ“æ—¶é—´ã€‚ 3 -baseDuration: 4.430000321008265 -&gt; æ¸²æŸ“æ•´é¢—å­æ ‘éœ€è¦çš„æ—¶é—´ 4 -startTime : 689.7299999836832 -&gt; æœ¬æ¬¡æ›´æ–°å¼€å§‹æ¸²æŸ“çš„æ—¶é—´ 5 -commitTime : 698.5799999674782 -&gt; æœ¬æ¬¡æ›´æ–° committed çš„æ—¶é—´ 6 -interactions: set&#123;&#125; -&gt; æœ¬æ¬¡æ›´æ–°çš„ interactions çš„é›†åˆ å°½ç®¡ Profiler æ˜¯ä¸€ä¸ªè½»é‡çº§ç»„ä»¶ï¼Œæˆ‘ä»¬ä¾ç„¶åº”è¯¥åœ¨éœ€è¦æ—¶æ‰å»ä½¿ç”¨å®ƒã€‚å¯¹ä¸€ä¸ªåº”ç”¨æ¥è¯´ï¼Œæ¯æ·»åŠ ä¸€äº›éƒ½ä¼šç»™ CPU å’Œå†…å­˜å¸¦æ¥ä¸€äº›è´Ÿæ‹…ã€‚ StrictModeStrictModeè§åçŸ¥æ„ï¼Œä¸¥æ ¼æ¨¡å¼ï¼Œç”¨äºæ£€æµ‹reacté¡¹ç›®ä¸­çš„æ½œåœ¨çš„é—®é¢˜ï¼Œã€‚ä¸ Fragment ä¸€æ ·ï¼Œ StrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UI ã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚ ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼›å®ƒä»¬ä¸ä¼šå½±å“ç”Ÿäº§æ„å»ºã€‚ StrictModeç›®å‰æœ‰åŠ©äºï¼š â‘  è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ â‘¡ å…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š â‘¢ å…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š â‘£ æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨ â‘¤ æ£€æµ‹è¿‡æ—¶çš„ context API å®è·µ:è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ å¯¹äºä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒæŒ‡çš„æ˜¯UNSAFE_componentWillMountï¼ŒUNSAFE_componentWillReceiveProps , UNSAFE_componentWillUpdate å¤–å±‚å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼š 12345678&lt;React.StrictMode&gt; &lt;Router&gt; &lt;Meuns /&gt; &lt;KeepaliveRouterSwitch withoutRoute&gt; &#123;renderRoutes(menusList)&#125; &lt;/KeepaliveRouterSwitch&gt; &lt;/Router&gt;&lt;/React.StrictMode&gt; æˆ‘ä»¬åœ¨å†…å±‚ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ: 123456class Index extends React.Component &#123; UNSAFE_componentWillReceiveProps() &#123;&#125; render() &#123; return &lt;div className=&quot;box&quot; /&gt;; &#125;&#125; æ•ˆæœï¼š å·¥å…·ç±»æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç©¶ä¸€ä¸‹reactå·¥å…·ç±»å‡½æ•°çš„ç”¨æ³•ã€‚ createElementä¸€æåˆ°createElementï¼Œå°±ä¸ç”±å¾—å’ŒJSXè”ç³»ä¸€èµ·ã€‚æˆ‘ä»¬å†™çš„jsxï¼Œæœ€ç»ˆä¼šè¢« babelï¼Œç”¨createElementç¼–è¯‘æˆreactå…ƒç´ å½¢å¼ã€‚æˆ‘å†™ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ä¼šè¢«ç¼–è¯‘æˆä»€ä¹ˆæ ·å­ï¼Œ å¦‚æœæˆ‘ä»¬åœ¨renderé‡Œé¢è¿™ä¹ˆå†™ï¼š 123456789render()&#123; return &lt;div className=&quot;box&quot; &gt; &lt;div className=&quot;item&quot; &gt;ç”Ÿå‘½å‘¨æœŸ&lt;/div&gt; &lt;Text mes=&quot;hello,world&quot; /&gt; &lt;React.Fragment&gt; Flagment &lt;/React.Fragment&gt; &#123; /* */ &#125; textæ–‡æœ¬ &lt;/div&gt;&#125; ä¼šè¢«ç¼–è¯‘æˆè¿™æ ·ï¼š 1234567render() &#123; return React.createElement(&quot;div&quot;, &#123; className: &quot;box&quot; &#125;, React.createElement(&quot;div&quot;, &#123; className: &quot;item&quot; &#125;, &quot;\\u751F\\u547D\\u5468\\u671F&quot;), React.createElement(Text, &#123; mes: &quot;hello,world&quot; &#125;), React.createElement(React.Fragment, null, &quot; Flagment &quot;), &quot;text\\u6587\\u672C&quot;); &#125; å½“ç„¶æˆ‘ä»¬å¯ä»¥ä¸ç”¨jsxæ¨¡å¼ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡createElementè¿›è¡Œå¼€å‘ã€‚ createElementæ¨¡å‹: 1React.createElement(type, [props], [...children]); createElementå‚æ•°ï¼š **ç¬¬ä¸€ä¸ªå‚æ•°:**å¦‚æœæ˜¯ç»„ä»¶ç±»å‹ï¼Œä¼šä¼ å…¥ç»„ä»¶ï¼Œå¦‚æœæ˜¯domå…ƒç´ ç±»å‹ï¼Œä¼ å…¥divæˆ–è€…spanä¹‹ç±»çš„å­—ç¬¦ä¸²ã€‚ ç¬¬äºŒä¸ªå‚æ•°::ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨domç±»å‹ä¸­ä¸ºå±æ€§ï¼Œåœ¨ç»„ä»¶ç±»å‹ä¸­ä¸ºpropsã€‚ **å…¶ä»–å‚æ•°:**ï¼Œä¾æ¬¡ä¸ºchildrenï¼Œæ ¹æ®é¡ºåºæ’åˆ—ã€‚ createElement åšäº†äº›ä»€ä¹ˆï¼Ÿ ç»è¿‡createElementå¤„ç†ï¼Œæœ€ç»ˆä¼šå½¢æˆ $$typeof = Symbol(react.element)å¯¹è±¡ã€‚å¯¹è±¡ä¸Šä¿å­˜äº†è¯¥react.elementçš„ä¿¡æ¯ã€‚ cloneElementå¯èƒ½æœ‰çš„åŒå­¦è¿˜å‚»å‚»çš„åˆ†ä¸æ¸…æ¥šcloneElementå’ŒcreateElementåŒºåˆ«å’Œä½œç”¨ã€‚ createElementæŠŠæˆ‘ä»¬å†™çš„jsxï¼Œå˜æˆelementå¯¹è±¡; è€ŒcloneElementçš„ä½œç”¨æ˜¯ä»¥ element å…ƒç´ ä¸ºæ ·æ¿å…‹éš†å¹¶è¿”å›æ–°çš„ React å…ƒç´ ã€‚è¿”å›å…ƒç´ çš„ props æ˜¯å°†æ–°çš„ props ä¸åŸå§‹å…ƒç´ çš„ props æµ…å±‚åˆå¹¶åçš„ç»“æœã€‚ é‚£ä¹ˆcloneElementæ„Ÿè§‰åœ¨æˆ‘ä»¬å®é™…ä¸šåŠ¡ç»„ä»¶ä¸­ï¼Œå¯èƒ½æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯åœ¨ä¸€äº›å¼€æºé¡¹ç›®ï¼Œæˆ–è€…æ˜¯å…¬å…±æ’æ§½ç»„ä»¶ä¸­ç”¨å¤„è¿˜æ˜¯è›®å¤§çš„ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸­ï¼ŒåŠ«æŒchildren elementï¼Œç„¶åé€šè¿‡cloneElementå…‹éš†elementï¼Œæ··å…¥propsã€‚ç»å…¸çš„æ¡ˆä¾‹å°±æ˜¯ react-routerä¸­çš„Swtichç»„ä»¶ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¥åŒ¹é…å”¯ä¸€çš„ Routeå¹¶åŠ ä»¥æ¸²æŸ“ã€‚ æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªåœºæ™¯ï¼Œåœ¨ç»„ä»¶ä¸­ï¼Œå»åŠ«æŒchildrenï¼Œç„¶åç»™childrenèµ‹èƒ½ä¸€äº›é¢å¤–çš„props: 123456789101112131415161718192021function FatherComponent(&#123; children &#125;) &#123; const newChildren = React.cloneElement(children, &#123; age: 18 &#125;); return &lt;div&gt; &#123;newChildren&#125; &lt;/div&gt;;&#125;function SonComponent(props) &#123; console.log(props); return &lt;div&gt;hello,world&lt;/div&gt;;&#125;class Index extends React.Component &#123; render() &#123; return ( &lt;div className=&quot;box&quot;&gt; &lt;FatherComponent&gt; &lt;SonComponent name=&quot;alien&quot; /&gt; &lt;/FatherComponent&gt; &lt;/div&gt; ); &#125;&#125; æ‰“å°ï¼š å®Œç¾è¾¾åˆ°äº†æ•ˆæœï¼ createContextcreateContextç”¨äºåˆ›å»ºä¸€ä¸ªContextå¯¹è±¡ï¼ŒcreateContextå¯¹è±¡ä¸­ï¼ŒåŒ…æ‹¬ç”¨äºä¼ é€’ Context å¯¹è±¡å€¼ valueçš„Providerï¼Œå’Œæ¥å—valueå˜åŒ–è®¢é˜…çš„Consumerã€‚ 1const MyContext = React.createContext(defaultValue); createContextæ¥å—ä¸€ä¸ªå‚æ•°defaultValueï¼Œå¦‚æœConsumerä¸Šä¸€çº§ä¸€ç›´æ²¡æœ‰Provider,åˆ™ä¼šåº”ç”¨defaultValueä½œä¸ºvalueã€‚åªæœ‰å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ defaultValue å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚ æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ª Context.Providerå’ŒContext.Consumerçš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829303132function ComponentB() &#123; /* ç”¨ Consumer è®¢é˜…ï¼Œ æ¥è‡ª Provider ä¸­ value çš„æ”¹å˜ */ return ( &lt;MyContext.Consumer&gt; &#123;(value) =&gt; &lt;ComponentA &#123;...value&#125; /&gt;&#125; &lt;/MyContext.Consumer&gt; );&#125;function ComponentA(props) &#123; const &#123; name, mes &#125; = props; return ( &lt;div&gt; &lt;div&gt; å§“åï¼š &#123;name&#125; &lt;/div&gt; &lt;div&gt; æƒ³å¯¹å¤§å®¶è¯´ï¼š &#123;mes&#125; &lt;/div&gt; &lt;/div&gt; );&#125;function index() &#123; const [value] = React.useState(&#123; name: &quot;alien&quot;, mes: &quot;let us learn React &quot;, &#125;); return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;MyContext.Provider value=&#123;value&#125;&gt; &lt;ComponentB /&gt; &lt;/MyContext.Provider&gt; &lt;/div&gt; );&#125; æ‰“å°ç»“æœï¼š Providerå’ŒConsumerçš„è‰¯å¥½çš„ç‰¹æ€§ï¼Œå¯ä»¥åšæ•°æ®çš„å­˜å’Œå–ï¼ŒConsumerä¸€æ–¹é¢ä¼ é€’value,å¦ä¸€æ–¹é¢å¯ä»¥è®¢é˜…valueçš„æ”¹å˜ã€‚ Providerè¿˜æœ‰ä¸€ä¸ªç‰¹æ€§å¯ä»¥å±‚å±‚ä¼ é€’valueï¼Œè¿™ç§ç‰¹æ€§åœ¨react-reduxä¸­è¡¨ç°çš„æ·‹æ¼“å°½è‡´ã€‚ createFactory1React.createFactory(type); è¿”å›ç”¨äºç”ŸæˆæŒ‡å®šç±»å‹ React å…ƒç´ çš„å‡½æ•°ã€‚ç±»å‹å‚æ•°æ—¢å¯ä»¥æ˜¯æ ‡ç­¾åå­—ç¬¦ä¸²ï¼ˆåƒæ˜¯ â€˜divâ€˜ æˆ– â€˜spanâ€˜ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ React ç»„ä»¶ ç±»å‹ ï¼ˆ class ç»„ä»¶æˆ–å‡½æ•°ç»„ä»¶ï¼‰ï¼Œæˆ–æ˜¯ React fragment ç±»å‹ã€‚ ä½¿ç”¨ï¼š 12345678const Text = React.createFactory(() =&gt; &lt;div&gt;hello,world&lt;/div&gt;);function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;Text /&gt; &lt;/div&gt; );&#125; æ•ˆæœ æŠ¥å‡ºè­¦å‘Šï¼Œè¿™ä¸ªapiå°†è¦è¢«åºŸå¼ƒï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸å¤šè®²äº†ï¼Œå¦‚æœæƒ³è¦è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œè¯·ç”¨React.createElement createRefcreateRefå¯ä»¥åˆ›å»ºä¸€ä¸ª ref å…ƒç´ ï¼Œé™„åŠ åœ¨reactå…ƒç´ ä¸Šã€‚ ç”¨æ³•ï¼š 123456789101112class Index extends React.Component &#123; constructor(props) &#123; super(props); this.node = React.createRef(); &#125; componentDidMount() &#123; console.log(this.node); &#125; render() &#123; return &lt;div ref=&#123;this.node&#125;&gt; my name is alien &lt;/div&gt;; &#125;&#125; ä¸ªäººè§‰å¾—createRefè¿™ä¸ªæ–¹æ³•ï¼Œå¾ˆé¸¡è‚‹ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥classç±»ç»„ä»¶ä¸­è¿™ä¹ˆå†™ï¼Œæ¥æ•è·refã€‚ 123456789class Index extends React.Component &#123; node = null; componentDidMount() &#123; console.log(this.node); &#125; render() &#123; return &lt;div ref=&#123;(node) =&gt; this.node&#125;&gt; my name is alien &lt;/div&gt;; &#125;&#125; æˆ–è€…åœ¨functionç»„ä»¶ä¸­è¿™ä¹ˆå†™ï¼š 1234567function Index() &#123; const node = React.useRef(null); useEffect(() =&gt; &#123; console.log(node.current); &#125;, []); return &lt;div ref=&#123;node&#125;&gt; my name is alien &lt;/div&gt;;&#125; isValidElementè¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨æ¥æ£€æµ‹æ˜¯å¦ä¸ºreact elementå…ƒç´ ,æ¥å—å¾…éªŒè¯å¯¹è±¡ï¼Œè¿”å›trueæˆ–è€…falseã€‚è¿™ä¸ª api å¯èƒ½å¯¹äºä¸šåŠ¡ç»„ä»¶çš„å¼€å‘ï¼Œä½œç”¨ä¸å¤§ï¼Œå› ä¸ºå¯¹äºç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œéƒ½æ˜¯å·²çŸ¥çš„ï¼Œæˆ‘ä»¬æ ¹æœ¬å°±ä¸éœ€è¦å»éªŒè¯ï¼Œæ˜¯å¦æ˜¯react element å…ƒç´ ã€‚ ä½†æ˜¯ï¼Œå¯¹äºä¸€èµ·å…¬å…±ç»„ä»¶æˆ–æ˜¯å¼€æºåº“ï¼ŒisValidElementå°±å¾ˆæœ‰ä½œç”¨äº†ã€‚ å®è·µ æˆ‘ä»¬åšä¸€ä¸ªåœºæ™¯ï¼ŒéªŒè¯å®¹å™¨ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶ï¼Œè¿‡æ»¤åˆ°éreact elementç±»å‹ã€‚ æ²¡æœ‰ç”¨isValidElementéªŒè¯ä¹‹å‰ï¼š 1234567891011121314151617181920const Text = () =&gt; &lt;div&gt;hello,world&lt;/div&gt;;class WarpComponent extends React.Component &#123; constructor(props) &#123; super(props); &#125; render() &#123; return this.props.children; &#125;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &lt;Text /&gt; &lt;div&gt; my name is alien &lt;/div&gt; Let&#x27;s learn react together! &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; è¿‡æ»¤ä¹‹å‰çš„æ•ˆæœ æˆ‘ä»¬ç”¨isValidElementè¿›è¡Œreact elementéªŒè¯: 1234567891011class WarpComponent extends React.Component &#123; constructor(props) &#123; super(props); this.newChidren = this.props.children.filter((item) =&gt; React.isValidElement(item) ); &#125; render() &#123; return this.newChidren; &#125;&#125; è¿‡æ»¤ä¹‹åæ•ˆæœ è¿‡æ»¤æ‰äº†éreact element çš„ Let&#39;s learn react together!ã€‚ Children.mapæ¥ä¸‹æ¥çš„äº”ä¸ªapiéƒ½æ˜¯å’Œreact.Chidrenç›¸å…³çš„ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®˜ç½‘çš„æè¿°ï¼ŒReact.Children æä¾›äº†ç”¨äºå¤„ç† this.props.children ä¸é€æ˜æ•°æ®ç»“æ„çš„å®ç”¨æ–¹æ³•ã€‚ æœ‰çš„åŒå­¦ä¼šé—®éå† childrenç”¨æ•°ç»„æ–¹æ³•,map ï¼ŒforEach ä¸å°±å¯ä»¥äº†å—ï¼Ÿ è¯·æˆ‘ä»¬æ³¨æ„ä¸€ä¸‹ä¸é€æ˜æ•°æ®ç»“æ„,ä»€ä¹ˆå«åšä¸é€æ˜ç»“æ„? æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹é€æ˜çš„ç»“æ„ï¼š 123456789101112131415161718192021class Text extends React.Component &#123; render() &#123; return &lt;div&gt;hello,world&lt;/div&gt;; &#125;&#125;function WarpComponent(props) &#123; console.log(props.children); return props.children;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &lt;Text /&gt; &lt;Text /&gt; &lt;Text /&gt; &lt;span&gt;hello,world&lt;/span&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ‰“å° ä½†æ˜¯æˆ‘ä»¬æŠŠIndexç»“æ„æ”¹å˜ä¸€ä¸‹ï¼š 123456789101112function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &#123;new Array(3).fill(0).map(() =&gt; ( &lt;Text /&gt; ))&#125; &lt;span&gt;hello,world&lt;/span&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ‰“å° è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä¸èƒ½æ­£å¸¸çš„éå†äº†ï¼Œå³ä½¿éå†ä¹Ÿä¸èƒ½éå†ï¼Œæ¯ä¸€ä¸ªå­å…ƒç´ ã€‚æ­¤æ—¶å°±éœ€è¦ react.Chidren æ¥å¸®å¿™äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬æŠŠWarpComponentç»„ä»¶ç”¨react.Chidrenå¤„ç†children: 12345function WarpComponent(props) &#123; const newChildren = React.Children.map(props.children, (item) =&gt; item); console.log(newChildren); return newChildren;&#125; æ­¤æ—¶å°±èƒ½æ­£å¸¸éå†äº†ï¼Œè¾¾åˆ°äº†é¢„æœŸæ•ˆæœã€‚ æ³¨æ„ å¦‚æœ children æ˜¯ä¸€ä¸ª Fragment å¯¹è±¡ï¼Œå®ƒå°†è¢«è§†ä¸ºå•ä¸€å­èŠ‚ç‚¹çš„æƒ…å†µå¤„ç†ï¼Œè€Œä¸ä¼šè¢«éå†ã€‚ Children.forEachChildren.forEachå’ŒChildren.map ç”¨æ³•ç±»ä¼¼ï¼ŒChildren.mapå¯ä»¥è¿”å›æ–°çš„æ•°ç»„ï¼ŒChildren.forEachä»…åœç•™åœ¨éå†é˜¶æ®µã€‚ æˆ‘ä»¬å°†ä¸Šé¢çš„WarpComponentæ–¹æ³•ï¼Œç”¨Children.forEachæ”¹ä¸€ä¸‹ã€‚ 1234function WarpComponent(props) &#123; React.Children.forEach(props.children, (item) =&gt; console.log(item)); return props.children;&#125; Children.countchildren ä¸­çš„ç»„ä»¶æ€»æ•°é‡ï¼Œç­‰åŒäºé€šè¿‡ map æˆ– forEach è°ƒç”¨å›è°ƒå‡½æ•°çš„æ¬¡æ•°ã€‚å¯¹äºæ›´å¤æ‚çš„ç»“æœï¼ŒChildren.countå¯ä»¥è¿”å›åŒä¸€çº§åˆ«å­ç»„ä»¶çš„æ•°é‡ã€‚ æˆ‘ä»¬è¿˜æ˜¯æŠŠä¸Šè¿°ä¾‹å­è¿›è¡Œæ”¹é€ ï¼š 1234567891011121314151617181920212223function WarpComponent(props) &#123; const childrenCount = React.Children.count(props.children); console.log(childrenCount, &quot;childrenCount&quot;); return props.children;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &#123;new Array(3) .fill(0) .map((item, index) =&gt; new Array(2) .fill(1) .map((item, index1) =&gt; ( &lt;Text key=&#123;index + index1&#125; /&gt; )) )&#125; &lt;span&gt;hello,world&lt;/span&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ•ˆæœ: Children.toArrayChildren.toArrayè¿”å›ï¼Œprops.childrenæ‰å¹³åŒ–åç»“æœã€‚ 1234567891011121314151617181920212223function WarpComponent(props) &#123; const newChidrenArray = React.Children.toArray(props.children); console.log(newChidrenArray, &quot;newChidrenArray&quot;); return newChidrenArray;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &#123;new Array(3) .fill(0) .map((item, index) =&gt; new Array(2) .fill(1) .map((item, index1) =&gt; ( &lt;Text key=&#123;index + index1&#125; /&gt; )) )&#125; &lt;span&gt;hello,world&lt;/span&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ•ˆæœï¼š newChidrenArray ,å°±æ˜¯æ‰å¹³åŒ–çš„æ•°ç»„ç»“æ„ã€‚React.Children.toArray() åœ¨æ‹‰å¹³å±•å¼€å­èŠ‚ç‚¹åˆ—è¡¨æ—¶ï¼Œæ›´æ”¹ key å€¼ä»¥ä¿ç•™åµŒå¥—æ•°ç»„çš„è¯­ä¹‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ toArray ä¼šä¸ºè¿”å›æ•°ç»„ä¸­çš„æ¯ä¸ª key æ·»åŠ å‰ç¼€ï¼Œä»¥ä½¿å¾—æ¯ä¸ªå…ƒç´  key çš„èŒƒå›´éƒ½é™å®šåœ¨æ­¤å‡½æ•°å…¥å‚æ•°ç»„çš„å¯¹è±¡å†…ã€‚ Children.onlyéªŒè¯ children æ˜¯å¦åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆä¸€ä¸ª React å…ƒç´ ï¼‰ï¼Œå¦‚æœæœ‰åˆ™è¿”å›å®ƒï¼Œå¦åˆ™æ­¤æ–¹æ³•ä¼šæŠ›å‡ºé”™è¯¯ã€‚ ä¸å”¯ä¸€ 12345678910111213141516function WarpComponent(props) &#123; console.log(React.Children.only(props.children)); return props.children;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &#123;new Array(3).fill(0).map((item, index) =&gt; ( &lt;Text key=&#123;index&#125; /&gt; ))&#125; &lt;span&gt;hello,world&lt;/span&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ•ˆæœ å”¯ä¸€ 12345678910111213function WarpComponent(props) &#123; console.log(React.Children.only(props.children)); return props.children;&#125;function Index() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WarpComponent&gt; &lt;Text /&gt; &lt;/WarpComponent&gt; &lt;/div&gt; );&#125; æ•ˆæœ React.Children.only() ä¸æ¥å— React.Children.map() çš„è¿”å›å€¼ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„è€Œå¹¶ä¸æ˜¯ React å…ƒç´ ã€‚ react-hookså¯¹äºreact-hooks,æˆ‘å·²ç»å†™äº†ä¸‰éƒ¨æ›²ï¼Œä»‹ç»äº†react-hooksä½¿ç”¨ï¼Œè‡ªå®šä¹‰hooksï¼Œä»¥åŠreact-hooksåŸç†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å»çœ‹çœ‹ï¼Œæ–‡ç« æœ«å°¾æœ‰é“¾æ¥ï¼Œå¯¹äºå¸¸ç”¨çš„apiï¼Œæˆ‘è¿™é‡Œå‚è€ƒäº†react-hookså¦‚ä½•ä½¿ç”¨é‚£ç¯‡æ–‡ç« ã€‚å¹¶åšäº†ç›¸åº”ç²¾ç®€åŒ–å’Œä¸€äº›å†…å®¹çš„è¡¥å……ã€‚ useStateuseStateå¯ä»¥å¼¥è¡¥å‡½æ•°ç»„ä»¶æ²¡æœ‰stateçš„ç¼ºé™·ã€‚useStateå¯ä»¥æ¥å—ä¸€ä¸ªåˆè¯†å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°actionï¼Œactionè¿”å›å€¼ä½œä¸ºæ–°çš„stateã€‚è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå€¼ä¸ºstateè¯»å–å€¼ï¼Œç¬¬äºŒä¸ªå€¼ä¸ºæ”¹å˜stateçš„dispatchActionå‡½æ•°ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415161718const DemoState = (props) =&gt; &#123; /* numberä¸ºæ­¤æ—¶stateè¯»å–å€¼ ï¼ŒsetNumberä¸ºæ´¾å‘æ›´æ–°çš„å‡½æ•° */ let [number, setNumber] = useState(0); /* 0ä¸ºåˆå§‹å€¼ */ return ( &lt;div&gt; &lt;span&gt;&#123;number&#125;&lt;/span&gt; &lt;button onClick=&#123;() =&gt; &#123; setNumber(number + 1); /* å†™æ³•ä¸€ */ setNumber((number) =&gt; number + 1); /* å†™æ³•äºŒ */ console.log(number); /* è¿™é‡Œçš„numberæ˜¯ä¸èƒ½å¤Ÿå³æ—¶æ”¹å˜çš„ */ &#125;&#125; &gt; num++ &lt;/button&gt; &lt;/div&gt; );&#125;; useEffectuseEffectå¯ä»¥å¼¥è¡¥å‡½æ•°ç»„ä»¶æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç¼ºç‚¹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨useEffectç¬¬ä¸€ä¸ªå‚æ•°å›è°ƒå‡½æ•°ä¸­ï¼Œåšä¸€äº›è¯·æ±‚æ•°æ®ï¼Œäº‹ä»¶ç›‘å¬ç­‰æ“ä½œï¼Œç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºdepä¾èµ–é¡¹ï¼Œå½“ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°ã€‚ useEffect å¯ä»¥ç”¨ä½œæ•°æ®äº¤äº’ã€‚ 12345678910111213141516171819202122232425262728293031323334353637/* æ¨¡æ‹Ÿæ•°æ®äº¤äº’ */function getUserInfo(a) &#123; return new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(&#123; name: a, age: 16, &#125;); &#125;, 500); &#125;);&#125;const DemoEffect = (&#123; a &#125;) =&gt; &#123; const [userMessage, setUserMessage]: any = useState(&#123;&#125;); const div = useRef(); const [number, setNumber] = useState(0); /* æ¨¡æ‹Ÿäº‹ä»¶ç›‘å¬å¤„ç†å‡½æ•° */ const handleResize = () =&gt; &#123;&#125;; /* useEffectä½¿ç”¨ ï¼Œè¿™é‡Œå¦‚æœä¸åŠ é™åˆ¶ ï¼Œä¼šæ˜¯å‡½æ•°é‡å¤æ‰§è¡Œï¼Œé™·å…¥æ­»å¾ªç¯*/ useEffect(() =&gt; &#123; /* è¯·æ±‚æ•°æ® */ getUserInfo(a).then((res) =&gt; &#123; setUserMessage(res); &#125;); /* æ“ä½œdom */ console.log(div.current); /* div */ /* äº‹ä»¶ç›‘å¬ç­‰ */ window.addEventListener(&quot;resize&quot;, handleResize); /* åªæœ‰å½“props-&gt;aå’Œstate-&gt;numberæ”¹å˜çš„æ—¶å€™ ,useEffectå‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œ ï¼Œå¦‚æœæ­¤æ—¶æ•°ç»„ä¸ºç©º[]ï¼Œè¯æ˜å‡½æ•°åªæœ‰åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ç›¸å½“äºcomponentDidMount */ &#125;, [a, number]); return ( &lt;div ref=&#123;div&#125;&gt; &lt;span&gt;&#123;userMessage.name&#125;&lt;/span&gt; &lt;span&gt;&#123;userMessage.age&#125;&lt;/span&gt; &lt;div onClick=&#123;() =&gt; setNumber(1)&#125;&gt;&#123;number&#125;&lt;/div&gt; &lt;/div&gt; );&#125;; useEffect å¯ä»¥ç”¨ä½œäº‹ä»¶ç›‘å¬ï¼Œè¿˜æœ‰ä¸€äº›åŸºäºdomçš„æ“ä½œã€‚,åˆ«å¿˜äº†åœ¨useEffectç¬¬ä¸€ä¸ªå‚æ•°å›è°ƒå‡½æ•°ï¼Œè¿”ä¸€ä¸ªå‡½æ•°ç”¨äºæ¸…é™¤äº‹ä»¶ç›‘å¬ç­‰æ“ä½œã€‚ 12345678910111213141516const DemoEffect = (&#123; a &#125;) =&gt; &#123; /* æ¨¡æ‹Ÿäº‹ä»¶ç›‘å¬å¤„ç†å‡½æ•° */ const handleResize = () =&gt; &#123;&#125;; useEffect(() =&gt; &#123; /* å®šæ—¶å™¨ å»¶æ—¶å™¨ç­‰ */ const timer = setInterval(() =&gt; console.log(666), 1000); /* äº‹ä»¶ç›‘å¬ */ window.addEventListener(&quot;resize&quot;, handleResize); /* æ­¤å‡½æ•°ç”¨äºæ¸…é™¤å‰¯ä½œç”¨ */ return function () &#123; clearInterval(timer); window.removeEventListener(&quot;resize&quot;, handleResize); &#125;; &#125;, [a]); return &lt;div&gt;&lt;/div&gt;;&#125;; useMemouseMemoæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼ç”¨äºäº§ç”Ÿä¿å­˜å€¼ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½œä¸ºdepä¾èµ–é¡¹ï¼Œæ•°ç»„é‡Œé¢çš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œäº§ç”Ÿæ–°çš„å€¼ã€‚ åº”ç”¨åœºæ™¯ï¼š 1 ç¼“å­˜ä¸€äº›å€¼ï¼Œé¿å…é‡æ–°æ‰§è¡Œä¸Šä¸‹æ–‡ 1234const number = useMemo(() =&gt; &#123; /** ....å¤§é‡çš„é€»è¾‘è¿ç®— **/ return number;&#125;, [props.number]); // åªæœ‰ props.number æ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°è®¡ç®—numberçš„å€¼ã€‚ 2 å‡å°‘ä¸å¿…è¦çš„domå¾ªç¯ 123456789101112131415/* ç”¨ useMemoåŒ…è£¹çš„listå¯ä»¥é™å®šå½“ä¸”ä»…å½“listæ”¹å˜çš„æ—¶å€™æ‰æ›´æ–°æ­¤listï¼Œè¿™æ ·å°±å¯ä»¥é¿å…selectListé‡æ–°å¾ªç¯ */&#123; useMemo( () =&gt; ( &lt;div&gt; &#123;selectList.map((i, v) =&gt; ( &lt;span className=&#123;style.listSpan&#125; key=&#123;v&#125;&gt; &#123;i.patentName&#125; &lt;/span&gt; ))&#125; &lt;/div&gt; ), [selectList] );&#125; 3 å‡å°‘å­ç»„ä»¶æ¸²æŸ“ 12345/* åªæœ‰å½“propsä¸­ï¼Œliståˆ—è¡¨æ”¹å˜çš„æ—¶å€™ï¼Œå­ç»„ä»¶æ‰æ¸²æŸ“ */const goodListChild = useMemo( () =&gt; &lt;GoodList list=&#123;props.list&#125; /&gt;, [props.list]); useCallbackuseMemo å’Œ useCallback æ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰æ‰§è¡Œï¼Œéƒ½æ˜¯è¿”å›ç¼“å­˜çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº useMemo è¿”å›çš„æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼Œ useCallback è¿”å›çš„æ˜¯å‡½æ•°ã€‚ è¿”å›çš„callbackå¯ä»¥ä½œä¸ºpropså›è°ƒå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ã€‚ 123456789101112131415161718192021222324252627/* ç”¨react.memo */const DemoChildren = React.memo((props) =&gt; &#123; /* åªæœ‰åˆå§‹åŒ–çš„æ—¶å€™æ‰“å°äº† å­ç»„ä»¶æ›´æ–° */ console.log(&quot;å­ç»„ä»¶æ›´æ–°&quot;); useEffect(() =&gt; &#123; props.getInfo(&quot;å­ç»„ä»¶&quot;); &#125;, []); return &lt;div&gt;å­ç»„ä»¶&lt;/div&gt;;&#125;);const DemoUseCallback = (&#123; id &#125;) =&gt; &#123; const [number, setNumber] = useState(1); /* æ­¤æ—¶usecallbackçš„ç¬¬ä¸€å‚æ•° (sonName)=&gt;&#123; console.log(sonName) &#125; ç»è¿‡å¤„ç†èµ‹å€¼ç»™ getInfo */ const getInfo = useCallback( (sonName) =&gt; &#123; console.log(sonName); &#125;, [id] ); return ( &lt;div&gt; &#123;/* ç‚¹å‡»æŒ‰é’®è§¦å‘çˆ¶ç»„ä»¶æ›´æ–° ï¼Œä½†æ˜¯å­ç»„ä»¶æ²¡æœ‰æ›´æ–° */&#125; &lt;button onClick=&#123;() =&gt; setNumber(number + 1)&#125;&gt;å¢åŠ &lt;/button&gt; &lt;DemoChildren getInfo=&#123;getInfo&#125; /&gt; &lt;/div&gt; );&#125;; useRefuseRefçš„ä½œç”¨ï¼š ä¸€ æ˜¯å¯ä»¥ç”¨æ¥è·å–domå…ƒç´ ï¼Œæˆ–è€…classç»„ä»¶å®ä¾‹ ã€‚ äºŒ react-hooksåŸç†æ–‡ç« ä¸­è®²è¿‡ï¼Œåˆ›å»ºuseRefæ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªåŸå§‹å¯¹è±¡ï¼Œåªè¦å‡½æ•°ç»„ä»¶ä¸è¢«é”€æ¯ï¼ŒåŸå§‹å¯¹è±¡å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæ¥é€šè¿‡useRefä¿å­˜ä¸€äº›æ•°æ®ã€‚ 1234567891011121314const DemoUseRef = () =&gt; &#123; const dom = useRef(null); const handerSubmit = () =&gt; &#123; /* &lt;div &gt;è¡¨å•ç»„ä»¶&lt;/div&gt; dom èŠ‚ç‚¹ */ console.log(dom.current); &#125;; return ( &lt;div&gt; &#123;/* ref æ ‡è®°å½“å‰domèŠ‚ç‚¹ */&#125; &lt;div ref=&#123;dom&#125;&gt;è¡¨å•ç»„ä»¶&lt;/div&gt; &lt;button onClick=&#123;() =&gt; handerSubmit()&#125;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; );&#125;; useLayoutEffectuseEffectæ‰§è¡Œé¡ºåº: ç»„ä»¶æ›´æ–°æŒ‚è½½å®Œæˆ -&gt; æµè§ˆå™¨ dom ç»˜åˆ¶å®Œæˆ -&gt; æ‰§è¡Œ useEffect å›è°ƒã€‚ useLayoutEffect æ‰§è¡Œé¡ºåº: ç»„ä»¶æ›´æ–°æŒ‚è½½å®Œæˆ -&gt; æ‰§è¡Œ useLayoutEffect å›è°ƒ-&gt; æµè§ˆå™¨domç»˜åˆ¶å®Œæˆã€‚ æ‰€ä»¥è¯´ useLayoutEffect ä»£ç å¯èƒ½ä¼šé˜»å¡æµè§ˆå™¨çš„ç»˜åˆ¶ ã€‚æˆ‘ä»¬å†™çš„ effectå’Œ useLayoutEffectï¼Œreactåœ¨åº•å±‚ä¼šè¢«åˆ†åˆ«æ‰“ä¸ŠPassiveEffectï¼ŒHookLayoutï¼Œåœ¨commité˜¶æ®µåŒºåˆ†å‡ºï¼Œåœ¨ä»€ä¹ˆæ—¶æœºæ‰§è¡Œã€‚ 12345678910111213const DemoUseLayoutEffect = () =&gt; &#123; const target = useRef(); useLayoutEffect(() =&gt; &#123; /*æˆ‘ä»¬éœ€è¦åœ¨domç»˜åˆ¶ä¹‹å‰ï¼Œç§»åŠ¨domåˆ°åˆ¶å®šä½ç½®*/ const &#123; x, y &#125; = getPositon(); /* è·å–è¦ç§»åŠ¨çš„ x,yåæ ‡ */ animate(target.current, &#123; x, y &#125;); &#125;, []); return ( &lt;div&gt; &lt;span ref=&#123;target&#125; className=&quot;animate&quot;&gt;&lt;/span&gt; &lt;/div&gt; );&#125;; useReduceråœ¨react-hooksåŸç†é‚£ç¯‡æ–‡ç« ä¸­è®²è§£åˆ°ï¼ŒuseStateåº•å±‚å°±æ˜¯ä¸€ä¸ªç®€å•ç‰ˆçš„useReducer useReducer æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ª reducer , reducer çš„å‚æ•°å°±æ˜¯å¸¸è§„ reducer é‡Œé¢çš„ state å’Œ action ,è¿”å›æ”¹å˜åçš„ state , useReducer ç¬¬äºŒä¸ªå‚æ•°ä¸º state çš„åˆå§‹å€¼ è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹å°±æ˜¯æ›´æ–°ä¹‹å state çš„å€¼ ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ´¾å‘æ›´æ–°çš„ dispatch å‡½æ•°ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹useReducerå¦‚ä½•ä½¿ç”¨ï¼š 1234567891011121314151617181920212223242526272829303132333435const DemoUseReducer = () =&gt; &#123; /* numberä¸ºæ›´æ–°åçš„stateå€¼, dispatchNumbner ä¸ºå½“å‰çš„æ´¾å‘å‡½æ•° */ const [number, dispatchNumbner] = useReducer((state, action) =&gt; &#123; const &#123; payload, name &#125; = action; /* returnçš„å€¼ä¸ºæ–°çš„state */ switch (name) &#123; case &quot;add&quot;: return state + 1; case &quot;sub&quot;: return state - 1; case &quot;reset&quot;: return payload; &#125; return state; &#125;, 0); return ( &lt;div&gt; å½“å‰å€¼ï¼š&#123;number&#125; &#123;/* æ´¾å‘æ›´æ–° */&#125; &lt;button onClick=&#123;() =&gt; dispatchNumbner(&#123; name: &quot;add&quot; &#125;)&#125;&gt; å¢åŠ  &lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatchNumbner(&#123; name: &quot;sub&quot; &#125;)&#125;&gt; å‡å°‘ &lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatchNumbner(&#123; name: &quot;reset&quot;, payload: 666 &#125;)&#125; &gt; èµ‹å€¼ &lt;/button&gt; &#123;/* æŠŠdispatch å’Œ state ä¼ é€’ç»™å­ç»„ä»¶ */&#125; &lt;MyChildren dispatch=&#123;dispatchNumbner&#125; State=&#123;&#123; number &#125;&#125; /&gt; &lt;/div&gt; );&#125;; useContextæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useContext ï¼Œæ¥è·å–çˆ¶çº§ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ context å€¼ï¼Œè¿™ä¸ªå½“å‰å€¼å°±æ˜¯æœ€è¿‘çš„çˆ¶çº§ç»„ä»¶ Provider è®¾ç½®çš„ value å€¼ï¼ŒuseContext å‚æ•°ä¸€èˆ¬æ˜¯ç”± createContext æ–¹å¼å¼•å…¥ ,ä¹Ÿå¯ä»¥çˆ¶çº§ä¸Šä¸‹æ–‡ context ä¼ é€’ ( å‚æ•°ä¸º context )ã€‚useContext å¯ä»¥ä»£æ›¿ context.Consumer æ¥è·å– Provider ä¸­ä¿å­˜çš„ value å€¼ 1234567891011121314151617181920212223242526/* ç”¨useContextæ–¹å¼ */const DemoContext = () =&gt; &#123; const value: any = useContext(Context); /* my name is alien */ return &lt;div&gt; my name is &#123;value.name&#125;&lt;/div&gt;;&#125;;/* ç”¨Context.Consumer æ–¹å¼ */const DemoContext1 = () =&gt; &#123; return ( &lt;Context.Consumer&gt; &#123;/* my name is alien */&#125; &#123;(value) =&gt; &lt;div&gt; my name is &#123;value.name&#125;&lt;/div&gt;&#125; &lt;/Context.Consumer&gt; );&#125;;export default () =&gt; &#123; return ( &lt;div&gt; &lt;Context.Provider value=&#123;&#123; name: &quot;alien&quot;, age: 18 &#125;&#125;&gt; &lt;DemoContext /&gt; &lt;DemoContext1 /&gt; &lt;/Context.Provider&gt; &lt;/div&gt; );&#125;; useImperativeHandleuseImperativeHandle å¯ä»¥é…åˆ forwardRef è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚è¿™ä¸ªå¾ˆæœ‰ç”¨ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºå­ç»„ä»¶ï¼Œå¦‚æœæ˜¯classç±»ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡refè·å–ç±»ç»„ä»¶çš„å®ä¾‹ï¼Œä½†æ˜¯åœ¨å­ç»„ä»¶æ˜¯å‡½æ•°ç»„ä»¶çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡refçš„ï¼Œé‚£ä¹ˆæ­¤æ—¶useImperativeHandleå’Œ forwardRefé…åˆå°±èƒ½è¾¾åˆ°æ•ˆæœã€‚ useImperativeHandleæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•° ref: æ¥å— forWardRef ä¼ é€’è¿‡æ¥çš„ refã€‚ ç¬¬äºŒä¸ªå‚æ•° createHandle ï¼šå¤„ç†å‡½æ•°ï¼Œè¿”å›å€¼ä½œä¸ºæš´éœ²ç»™çˆ¶ç»„ä»¶çš„refå¯¹è±¡ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•° deps:ä¾èµ–é¡¹ depsï¼Œä¾èµ–é¡¹æ›´æ”¹å½¢æˆæ–°çš„refå¯¹è±¡ã€‚ æˆ‘ä»¬æ¥æ¨¡æ‹Ÿç»™åœºæ™¯ï¼Œç”¨useImperativeHandleï¼Œä½¿å¾—çˆ¶ç»„ä»¶èƒ½è®©å­ç»„ä»¶ä¸­çš„inputè‡ªåŠ¨èµ‹å€¼å¹¶èšç„¦ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748function Son(props, ref) &#123; console.log(props); const inputRef = useRef(null); const [inputValue, setInputValue] = useState(&quot;&quot;); useImperativeHandle( ref, () =&gt; &#123; const handleRefs = &#123; /* å£°æ˜æ–¹æ³•ç”¨äºèšç„¦inputæ¡† */ onFocus() &#123; inputRef.current.focus(); &#125;, /* å£°æ˜æ–¹æ³•ç”¨äºæ”¹å˜inputçš„å€¼ */ onChangeValue(value) &#123; setInputValue(value); &#125;, &#125;; return handleRefs; &#125;, [] ); return ( &lt;div&gt; &lt;input placeholder=&quot;è¯·è¾“å…¥å†…å®¹&quot; ref=&#123;inputRef&#125; value=&#123;inputValue&#125; /&gt; &lt;/div&gt; );&#125;const ForwarSon = forwardRef(Son);class Index extends React.Component &#123; inputRef = null; handerClick() &#123; const &#123; onFocus, onChangeValue &#125; = this.cur; onFocus(); onChangeValue(&quot;let us learn React!&quot;); &#125; render() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;ForwarSon ref=&#123;(node) =&gt; (this.inputRef = node)&#125; /&gt; &lt;button onClick=&#123;this.handerClick.bind(this)&#125;&gt; æ“æ§å­ç»„ä»¶ &lt;/button&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ: useDebugValueuseDebugValue å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚è¿™ä¸ªhooksç›®çš„å°±æ˜¯æ£€æŸ¥è‡ªå®šä¹‰hooks 123456789function useFriendStatus(friendID) &#123; const [isOnline, setIsOnline] = useState(null); // ... // åœ¨å¼€å‘è€…å·¥å…·ä¸­çš„è¿™ä¸ª Hook æ—è¾¹æ˜¾ç¤ºæ ‡ç­¾ // e.g. &quot;FriendStatus: Online&quot; useDebugValue(isOnline ? &quot;Online&quot; : &quot;Offline&quot;); return isOnline;&#125; æˆ‘ä»¬ä¸æ¨èä½ å‘æ¯ä¸ªè‡ªå®šä¹‰ Hook æ·»åŠ  debug å€¼ã€‚å½“å®ƒä½œä¸ºå…±äº«åº“çš„ä¸€éƒ¨åˆ†æ—¶æ‰æœ€æœ‰ä»·å€¼ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ¼å¼åŒ–å€¼çš„æ˜¾ç¤ºå¯èƒ½æ˜¯ä¸€é¡¹å¼€é”€å¾ˆå¤§çš„æ“ä½œã€‚é™¤ééœ€è¦æ£€æŸ¥ Hookï¼Œå¦åˆ™æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšã€‚å› æ­¤ï¼ŒuseDebugValue æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼ã€‚ useTransitionuseTransitionå…è®¸å»¶æ—¶ç”±stateæ”¹å˜è€Œå¸¦æ¥çš„è§†å›¾æ¸²æŸ“ã€‚é¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚å®ƒè¿˜å…è®¸ç»„ä»¶å°†é€Ÿåº¦è¾ƒæ…¢çš„æ•°æ®è·å–æ›´æ–°æ¨è¿Ÿåˆ°éšåæ¸²æŸ“ï¼Œä»¥ä¾¿èƒ½å¤Ÿç«‹å³æ¸²æŸ“æ›´é‡è¦çš„æ›´æ–°ã€‚ 12const TIMEOUT_MS = &#123; timeoutMs: 2000 &#125;;const [startTransition, isPending] = useTransition(TIMEOUT_MS); useTransition æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œ timeoutMsä»£ç éœ€è¦å»¶æ—¶çš„æ—¶é—´ã€‚ è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼š æ˜¯ä¸€ä¸ªæ¥å—å›è°ƒçš„å‡½æ•°ã€‚æˆ‘ä»¬ç”¨å®ƒæ¥å‘Šè¯‰ React éœ€è¦æ¨è¿Ÿçš„ state ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼š ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¡¨ç¤ºæ˜¯å¦æ­£åœ¨ç­‰å¾…ï¼Œè¿‡åº¦çŠ¶æ€çš„å®Œæˆ(å»¶æ—¶stateçš„æ›´æ–°)ã€‚ ä¸‹é¢æˆ‘ä»¬å¼•å…¥å®˜ç½‘çš„åˆ—å­ï¼Œæ¥äº†è§£useTransitionçš„ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425const SUSPENSE_CONFIG = &#123; timeoutMs: 2000 &#125;;function App() &#123; const [resource, setResource] = useState(initialResource); const [startTransition, isPending] = useTransition(SUSPENSE_CONFIG); return ( &lt;&gt; &lt;button disabled=&#123;isPending&#125; onClick=&#123;() =&gt; &#123; startTransition(() =&gt; &#123; const nextUserId = getNextId(resource.userId); setResource(fetchProfileData(nextUserId)); &#125;); &#125;&#125; &gt; Next &lt;/button&gt; &#123;isPending ? &quot; åŠ è½½ä¸­...&quot; : null&#125; &lt;Suspense fallback=&#123;&lt;Spinner /&gt;&#125;&gt; &lt;ProfilePage resource=&#123;resource&#125; /&gt; &lt;/Suspense&gt; &lt;/&gt; );&#125; åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ startTransition åŒ…è£…äº†æˆ‘ä»¬çš„æ•°æ®è·å–ã€‚è¿™ä½¿æˆ‘ä»¬å¯ä»¥ç«‹å³å¼€å§‹è·å–ç”¨æˆ·èµ„æ–™çš„æ•°æ®ï¼ŒåŒæ—¶æ¨è¿Ÿä¸‹ä¸€ä¸ªç”¨æˆ·èµ„æ–™é¡µé¢ä»¥åŠå…¶å…³è”çš„ Spinner çš„æ¸²æŸ“ 2 ç§’é’Ÿï¼ˆ timeoutMs ä¸­æ˜¾ç¤ºçš„æ—¶é—´ï¼‰ã€‚ è¿™ä¸ªapiç›®å‰å¤„äºå®éªŒé˜¶æ®µï¼Œæ²¡æœ‰è¢«å®Œå…¨å¼€æ”¾å‡ºæ¥ã€‚ react-domæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¸€èµ·ç ”ç©¶react-domä¸­æ¯”è¾ƒé‡è¦çš„apiã€‚ renderrender æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„react-domçš„ apiï¼Œç”¨äºæ¸²æŸ“ä¸€ä¸ªreactå…ƒç´ ï¼Œä¸€èˆ¬reacté¡¹ç›®æˆ‘ä»¬éƒ½ç”¨å®ƒï¼Œæ¸²æŸ“æ ¹éƒ¨å®¹å™¨appã€‚ 1ReactDOM.render(element, container[, callback]) ä½¿ç”¨ 1ReactDOM.render(&lt;App /&gt;, document.getElementById(&quot;app&quot;)); ReactDOM.renderä¼šæ§åˆ¶containerå®¹å™¨èŠ‚ç‚¹é‡Œçš„å†…å®¹ï¼Œä½†æ˜¯ä¸ä¼šä¿®æ”¹å®¹å™¨èŠ‚ç‚¹æœ¬èº«ã€‚ hydrateæœåŠ¡ç«¯æ¸²æŸ“ç”¨hydrateã€‚ç”¨æ³•ä¸ render() ç›¸åŒï¼Œä½†å®ƒç”¨äºåœ¨ ReactDOMServer æ¸²æŸ“çš„å®¹å™¨ä¸­å¯¹ HTML çš„å†…å®¹è¿›è¡Œ hydrate æ“ä½œã€‚ 1ReactDOM.hydrate(element, container[, callback]) createPortalPortal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚createPortal å¯ä»¥æŠŠå½“å‰ç»„ä»¶æˆ– element å…ƒç´ çš„å­èŠ‚ç‚¹ï¼Œæ¸²æŸ“åˆ°ç»„ä»¶ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹ã€‚ é‚£ä¹ˆå…·ä½“åº”ç”¨åˆ°ä»€ä¹ˆåœºæ™¯å‘¢ï¼Ÿ æ¯”å¦‚ä¸€äº›å…¨å±€çš„å¼¹çª—ç»„ä»¶model,&lt;Model/&gt;ç»„ä»¶ä¸€èˆ¬éƒ½å†™åœ¨æˆ‘ä»¬çš„ç»„ä»¶å†…éƒ¨ï¼Œå€’æ˜¯çœŸæ­£æŒ‚è½½çš„domï¼Œéƒ½æ˜¯åœ¨å¤–å±‚å®¹å™¨ï¼Œæ¯”å¦‚bodyä¸Šã€‚æ­¤æ—¶å°±å¾ˆé€‚åˆcreatePortalAPIã€‚ createPortalæ¥å—ä¸¤ä¸ªå‚æ•°ï¼š 1ReactDOM.createPortal(child, container); ç¬¬ä¸€ä¸ªï¼š child æ˜¯ä»»ä½•å¯æ¸²æŸ“çš„ React å­å…ƒç´  ç¬¬äºŒä¸ªï¼š containeræ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å®è·µä¸€ä¸‹ï¼š 12345678910111213141516171819202122232425function WrapComponent(&#123; children &#125;) &#123; const domRef = useRef(null); const [PortalComponent, setPortalComponent] = useState(null); React.useEffect(() =&gt; &#123; setPortalComponent(ReactDOM.createPortal(children, domRef.current)); &#125;, []); return ( &lt;div&gt; &lt;div className=&quot;container&quot; ref=&#123;domRef&#125;&gt;&lt;/div&gt; &#123;PortalComponent&#125; &lt;/div&gt; );&#125;class Index extends React.Component &#123; render() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;WrapComponent&gt; &lt;div&gt;hello,world&lt;/div&gt; &lt;/WrapComponent&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬childrenå®é™…åœ¨container ä¹‹å¤–æŒ‚è½½çš„ï¼Œä½†æ˜¯å·²ç»è¢«createPortalæ¸²æŸ“åˆ°containerä¸­ã€‚ unstable_batchedUpdatesåœ¨react-legacyæ¨¡å¼ä¸‹ï¼Œå¯¹äºäº‹ä»¶ï¼Œreactäº‹ä»¶æœ‰æ‰¹é‡æ›´æ–°æ¥å¤„ç†åŠŸèƒ½,ä½†æ˜¯è¿™ä¸€äº›éå¸¸è§„çš„äº‹ä»¶ä¸­ï¼Œæ‰¹é‡æ›´æ–°åŠŸèƒ½ä¼šè¢«æ‰“ç ´ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨react-domä¸­æä¾›çš„unstable_batchedUpdates æ¥è¿›è¡Œæ‰¹é‡æ›´æ–°ã€‚ ä¸€æ¬¡ç‚¹å‡»å®ç°çš„æ‰¹é‡æ›´æ–° 1234567891011121314151617181920212223class Index extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; numer: 1, &#125;; &#125; handerClick = () =&gt; &#123; this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); &#125;; render() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;button onClick=&#123;this.handerClick&#125;&gt;click me&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ æ¸²æŸ“æ¬¡æ•°ä¸€æ¬¡ã€‚ æ‰¹é‡æ›´æ–°æ¡ä»¶è¢«æ‰“ç ´ 12345678910handerClick = () =&gt; &#123; Promise.resolve().then(() =&gt; &#123; this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); &#125;);&#125;; æ•ˆæœ æ¸²æŸ“æ¬¡æ•°ä¸‰æ¬¡ã€‚ unstable_batchedUpdate åŠ©åŠ› 123456789101112handerClick = () =&gt; &#123; Promise.resolve().then(() =&gt; &#123; ReactDOM.unstable_batchedUpdates(() =&gt; &#123; this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); this.setState(&#123; numer: this.state.numer + 1 &#125;); console.log(this.state.numer); &#125;); &#125;);&#125;; æ¸²æŸ“æ¬¡æ•°ä¸€æ¬¡,å®Œç¾è§£å†³æ‰¹é‡æ›´æ–°é—®é¢˜ã€‚ flushSyncflushSync å¯ä»¥å°†å›è°ƒå‡½æ•°ä¸­çš„æ›´æ–°ä»»åŠ¡ï¼Œæ”¾åœ¨ä¸€ä¸ªè¾ƒé«˜çš„ä¼˜å…ˆçº§ä¸­ã€‚æˆ‘ä»¬çŸ¥é“reactè®¾å®šäº†å¾ˆå¤šä¸åŒä¼˜å…ˆçº§çš„æ›´æ–°ä»»åŠ¡ã€‚å¦‚æœä¸€æ¬¡æ›´æ–°ä»»åŠ¡åœ¨flushSyncå›è°ƒå‡½æ•°å†…éƒ¨ï¼Œé‚£ä¹ˆå°†è·å¾—ä¸€ä¸ªè¾ƒé«˜ä¼˜å…ˆçº§çš„æ›´æ–°ã€‚æ¯”å¦‚ 1234ReactDOM.flushSync(() =&gt; &#123; /* æ­¤æ¬¡æ›´æ–°å°†è®¾ç½®ä¸€ä¸ªè¾ƒé«˜ä¼˜å…ˆçº§çš„æ›´æ–° */ this.setState(&#123; name: &quot;alien&quot; &#125;);&#125;); ä¸ºäº†è®©å¤§å®¶ç†è§£flushSyncï¼Œæˆ‘è¿™é‡Œåšä¸€ä¸ªdemoå¥‰ä¸Šï¼Œ 12345678910111213141516171819202122232425/* flushSync */import ReactDOM from &quot;react-dom&quot;;class Index extends React.Component &#123; state = &#123; number: 0 &#125;; handerClick = () =&gt; &#123; setTimeout(() =&gt; &#123; this.setState(&#123; number: 1 &#125;); &#125;); this.setState(&#123; number: 2 &#125;); ReactDOM.flushSync(() =&gt; &#123; this.setState(&#123; number: 3 &#125;); &#125;); this.setState(&#123; number: 4 &#125;); &#125;; render() &#123; const &#123; number &#125; = this.state; console.log(number); // æ‰“å°ä»€ä¹ˆï¼Ÿï¼Ÿ return ( &lt;div&gt; &lt;div&gt;&#123;number&#125;&lt;/div&gt; &lt;button onClick=&#123;this.handerClick&#125;&gt;æµ‹è¯•flushSync&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; å…ˆä¸çœ‹ç­”æ¡ˆï¼Œç‚¹å‡»ä¸€ä¸‹æŒ‰é’®ï¼Œæ‰“å°ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬æ¥ç‚¹å‡»ä¸€ä¸‹çœ‹çœ‹ æ‰“å° 0 3 4 1 ï¼Œç›¸ä¿¡ä¸éš¾ç†è§£ä¸ºä»€ä¹ˆè¿™ä¹ˆæ‰“å°äº†ã€‚ é¦–å…ˆ flushSync this.setState(&#123; number: 3 &#125;)è®¾å®šäº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„æ›´æ–°ï¼Œæ‰€ä»¥ 3 å…ˆè¢«æ‰“å° 2 4 è¢«æ‰¹é‡æ›´æ–°ä¸º 4 ç›¸ä¿¡è¿™ä¸ªdemoè®©æˆ‘ä»¬æ›´æ·±å…¥äº†è§£äº†flushSyncã€‚ findDOMNodefindDOMNodeç”¨äºè®¿é—®ç»„ä»¶DOMå…ƒç´ èŠ‚ç‚¹ï¼Œreactæ¨èä½¿ç”¨refæ¨¡å¼ï¼Œä¸æœŸæœ›ä½¿ç”¨findDOMNodeã€‚ 1ReactDOM.findDOMNode(component); æ³¨æ„çš„æ˜¯ï¼š 1 findDOMNodeåªèƒ½ç”¨åœ¨å·²ç»æŒ‚è½½çš„ç»„ä»¶ä¸Šã€‚ 2 å¦‚æœç»„ä»¶æ¸²æŸ“å†…å®¹ä¸º null æˆ–è€…æ˜¯ falseï¼Œé‚£ä¹ˆ findDOMNodeè¿”å›å€¼ä¹Ÿæ˜¯ nullã€‚ 3 findDOMNode ä¸èƒ½ç”¨äºå‡½æ•°ç»„ä»¶ã€‚ æ¥ä¸‹æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼ŒfindDOMNodeå…·ä½“æ€ä¹ˆä½¿ç”¨çš„ï¼š 12345678910111213class Index extends React.Component &#123; handerFindDom = () =&gt; &#123; console.log(ReactDOM.findDOMNode(this)); &#125;; render() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;100px&quot; &#125;&#125;&gt; &lt;div&gt;hello,world&lt;/div&gt; &lt;button onClick=&#123;this.handerFindDom&#125;&gt;è·å–å®¹å™¨dom&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœï¼š æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†å¤–å±‚å®¹å™¨ç”¨refæ¥æ ‡è®°ï¼Œè·å–æ•è·åŸç”Ÿçš„domèŠ‚ç‚¹ã€‚ unmountComponentAtNodeä» DOM ä¸­å¸è½½ç»„ä»¶ï¼Œä¼šå°†å…¶äº‹ä»¶å¤„ç†å™¨å’Œ state ä¸€å¹¶æ¸…é™¤ã€‚ å¦‚æœæŒ‡å®šå®¹å™¨ä¸Šæ²¡æœ‰å¯¹åº”å·²æŒ‚è½½çš„ç»„ä»¶ï¼Œè¿™ä¸ªå‡½æ•°ä»€ä¹ˆä¹Ÿä¸ä¼šåšã€‚å¦‚æœç»„ä»¶è¢«ç§»é™¤å°†ä¼šè¿”å› true ï¼Œå¦‚æœæ²¡æœ‰ç»„ä»¶å¯è¢«ç§»é™¤å°†ä¼šè¿”å› false ã€‚ æˆ‘ä»¬æ¥ç®€å•ä¸¾ä¾‹çœ‹çœ‹unmountComponentAtNodeå¦‚ä½•ä½¿ç”¨ï¼Ÿ 123456789101112131415161718192021222324252627282930function Text() &#123; return &lt;div&gt;hello,world&lt;/div&gt;;&#125;class Index extends React.Component &#123; node = null; constructor(props) &#123; super(props); this.state = &#123; numer: 1, &#125;; &#125; componentDidMount() &#123; /* ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåˆ›å»ºä¸€ä¸ª container å®¹å™¨ */ ReactDOM.render(&lt;Text /&gt;, this.node); &#125; handerClick = () =&gt; &#123; /* ç‚¹å‡»å¸è½½å®¹å™¨ */ const state = ReactDOM.unmountComponentAtNode(this.node); console.log(state); &#125;; render() &#123; return ( &lt;div style=&#123;&#123; marginTop: &quot;50px&quot; &#125;&#125;&gt; &lt;div ref=&#123;(node) =&gt; (this.node = node)&#125;&gt;&lt;/div&gt; &lt;button onClick=&#123;this.handerClick&#125;&gt;click me&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; æ•ˆæœ æ€»ç»“æœ¬æ–‡é€šè¿‡reactç»„ä»¶å±‚é¢ï¼Œå·¥å…·å±‚é¢ï¼Œhookså±‚é¢ï¼Œreact-domäº†è§£äº†apiçš„ç”¨æ³•ï¼Œå¸Œæœ›çœ‹å®Œçš„åŒå­¦ï¼Œèƒ½å¤Ÿå¯¹ç€æ–‡ç« ä¸­çš„demoè‡ªå·±æ•²ä¸€éï¼Œåˆ°å¤´æ¥ä¼šå‘ç°è‡ªå·±æˆé•¿ä¸å°‘ã€‚ æœ€å, é€äººç«ç‘°ï¼Œæ‰‹ç•™ä½™é¦™ï¼Œè§‰å¾—æœ‰æ”¶è·çš„æœ‹å‹å¯ä»¥ç»™ç¬”è€…ç‚¹èµï¼Œå…³æ³¨ä¸€æ³¢ ï¼Œé™†ç»­æ›´æ–°å‰ç«¯è¶…ç¡¬æ ¸æ–‡ç« ã€‚ æå‰é€æ¼ï¼šæ¥ä¸‹æ¥ä¼šå‡ºä¸€éƒ¨æ­ç§˜reactäº‹ä»¶ç³»ç»Ÿçš„æ–‡ç« ã€‚ æ„Ÿå…´è¶£çš„åŒå­¦è¯·å…³æ³¨å…¬ä¼—å· å‰ç«¯Sharing æŒç»­æ¨é€ä¼˜è´¨å¥½æ–‡ å¾€æœŸ react æ–‡ç« æ–‡ç« ä¸­ï¼Œå¯¹äºå…¶ä»–æ²¡æœ‰è®²åˆ°çš„react-hooksï¼Œå»ºè®®å¤§å®¶çœ‹react-hooksä¸‰éƒ¨æ›²ã€‚ react-hooks ä¸‰éƒ¨æ›² ç¬¬ä¸€éƒ¨ï¼š react-hooks å¦‚ä½•ä½¿ç”¨ 150+ èµ ğŸ‘ ç¬¬äºŒéƒ¨ï¼šç©è½¬ react-hooks,è‡ªå®šä¹‰ hooks è®¾è®¡æ¨¡å¼åŠå…¶å®æˆ˜ 240+ ğŸ‘ èµ ç¬¬ä¸‰éƒ¨ï¼šã€Œreact è¿›é˜¶ã€ä¸€æ–‡åƒé€ react-hooks åŸç† 820 react è¿›é˜¶ç³»åˆ— ã€Œreact è¿›é˜¶ã€å¹´ç»ˆé€ç»™ react å¼€å‘è€…çš„å…«æ¡ä¼˜åŒ–å»ºè®® 918+ èµ ğŸ‘ ã€Œreact è¿›é˜¶ã€ä¸€æ–‡åƒé€ React é«˜é˜¶ç»„ä»¶(HOC) 330+ èµ ğŸ‘ react æºç ç³»åˆ— ã€Œæºç è§£æ ã€è¿™ä¸€æ¬¡å½»åº•å¼„æ‡‚ react-router è·¯ç”±åŸç† 132+ èµ ğŸ‘ ã€Œæºç è§£æã€ä¸€æ–‡åƒé€ react-redux æºç ï¼ˆuseMemo ç»å…¸æºç çº§æ¡ˆä¾‹ï¼‰ 143+ èµ ğŸ‘ å¼€æºé¡¹ç›®ç³»åˆ— ã€Œreact ç¼“å­˜é¡µé¢ã€ä»éœ€æ±‚åˆ°å¼€æºï¼ˆæˆ‘æ˜¯æ€ä¹ˆæ ·è®©äº§å“å°å§å§åˆ®ç›®ç›¸çœ‹çš„ï¼‰ 300+ èµ ğŸ‘ ã€Œå‰ç«¯å·¥ç¨‹åŒ–ã€ä» 0-1 æ­å»º reactï¼Œts è„šæ‰‹æ¶ï¼ˆ1.2w å­—è¶…è¯¦ç»†æ•™ç¨‹ï¼‰ 330+ èµ ğŸ‘ å‚è€ƒæ–‡æ¡£react ä¸­æ–‡æ–‡æ¡£","tags":["React"],"categories":["React"]},{"title":"LinuxåŸºç¡€æ•™ç¨‹","path":"/2024/02/26/LinuxåŸºç¡€æ•™ç¨‹/","content":"ç®€ä»‹Linux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIX å’Œ UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚ Linux çš„å‘è¡Œç‰ˆLinux çš„å‘è¡Œç‰ˆç®€å•è¯´å°±æ˜¯ linux å†…æ ¸å’Œåº”ç”¨è½¯ä»¶çš„æ‰“åŒ… ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€TurboLinuxã€BluePointã€RedFlagã€Xtermã€SlackWare ç­‰ã€‚ ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ å†…æ ¸å¼•å¯¼BIOS è‡ªæ£€ï¼Œç”±è®¾ç½®çš„å¯åŠ¨è®¾å¤‡å¯åŠ¨ï¼Œæ“ä½œç³»ç»Ÿæ¥ç®¡ç¡¬ä»¶ï¼Œè¯» /boot ç›®å½•çš„å†…æ ¸æ–‡ä»¶ è¿è¡Œ init è¿›ç¨‹è¯»å–é…ç½® /etc/inittab è¿è¡Œçº§åˆ«è®¸å¤šç¨‹åºéœ€è¦å¼€æœºå¯åŠ¨ã€‚å®ƒä»¬åœ¨ Windows å«åšâ€æœåŠ¡â€ï¼ˆserviceï¼‰ï¼Œåœ¨ Linux å°±å«åšâ€å®ˆæŠ¤è¿›ç¨‹â€ï¼ˆdaemonï¼‰ã€‚ä¸åŒçš„åœºåˆéœ€è¦å¯åŠ¨ä¸åŒçš„ç¨‹åºï¼Œæ‰€ä»¥å°±æœ‰äº†è¿è¡Œçº§åˆ« initè¿›ç¨‹çš„ä¸€å¤§ä»»åŠ¡ï¼Œå°±æ˜¯æ ¹æ®è¿è¡Œçº§åˆ«å»æ‰§è¡Œå¯¹åº”çš„å¼€æœºå¯åŠ¨çš„ç¨‹åº Linux ç³»ç»Ÿæœ‰ 7 ä¸ªè¿è¡Œçº§åˆ«(runlevel)ï¼š è¿è¡Œçº§åˆ«0ï¼š ç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ è¿è¡Œçº§åˆ«1ï¼š å•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™† è¿è¡Œçº§åˆ«2ï¼š å¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS) è¿è¡Œçº§åˆ«3ï¼š å®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼ è¿è¡Œçº§åˆ«4ï¼š ç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™ è¿è¡Œçº§åˆ«5ï¼š X11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼ è¿è¡Œçº§åˆ«6ï¼š ç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨ ä½¿ç”¨è¿è¡Œçº§åˆ«å…³æœºå’Œé‡å¯12sudo init 0 # å…³æœºsudo init 6 # é‡å¯ ç³»ç»Ÿåˆå§‹åŒ–çœŸæ­£çš„ rc å¯åŠ¨è„šæœ¬ï¼Œæ”¾åœ¨ init.d ç›®å½•ï¼Œå®ƒä»¬æœ‰ç±»ä¼¼çš„ç”¨æ³•ï¼Œä¸€èˆ¬éƒ½èƒ½æ¥å— start, stop, restart, statusç­‰å‚æ•°&#x2F;etc&#x2F;rc5.d ä¸­çš„ rc è„šæœ¬ï¼Œé€šå¸¸éƒ½æ˜¯ K æˆ– S å¼€å¤´çš„é“¾æ¥æ–‡ä»¶ï¼ŒS å¼€å¤´åˆ™ç”¨startå‚æ•°è¿è¡Œ, K å¼€å¤´çš„åˆ™ç”¨stopå‚æ•°è¿è¡Œ å»ºç«‹ç»ˆç«¯rc è„šæœ¬æ‰§è¡Œå®Œåï¼Œinit ä¼šæ¥ç€æ‰“å¼€ 6 ä¸ªç»ˆç«¯, ä»¥ä¾¿ç”¨æˆ·ç™»å½• ç”¨æˆ·ç™»å½•ç”¨æˆ·æœ‰ä¸‰ç§ç™»å½•æ–¹å¼: å‘½ä»¤è¡Œç™»å½• ssh ç™»å½• å›¾å½¢ç•Œé¢ç™»å½• è¿è¡Œçº§åˆ«ä¸º 5ï¼Œç™»å½•åè¿›å…¥ KDE Gnome ç­‰çª—å£ç®¡ç†å™¨ ç»ˆç«¯åˆ‡æ¢ctrl+alt+F1-F6 åˆ‡æ¢ç»ˆç«¯ 1-6, ctrl+alt+F7è¿”å›å›¾å½¢ç•Œé¢ linux å…³æœºæ­£ç¡®çš„å…³æœºæµç¨‹: sync &gt; shutdown &gt; reboot &gt; haltå…³æœºæŒ‡ä»¤ shutdown, man shutdown æŸ¥çœ‹å¸®åŠ© 12345678910shutdown -h 1 &#x27;machine will shutdown in 1 minute&#x27; # -h haltshutdown now # é©¬ä¸Šå…³æœºshutdown -r now # é©¬ä¸Šé‡å¯ åŒ rebootshutdown -r +5 # 5åˆ†é’Ÿåé‡å¯shutdown -h 20:24 # æŸæ—¶é—´ç‚¹å…³æœºshutdown -h now # é©¬ä¸Šå…³æœº åŒ haltshutdown -c # å–æ¶ˆå®šæ—¶å…³æœºpoweroff # å…³æœºinit 0 # å…³æœºinit 6 # é‡å¯ shutdownå’Œhaltçš„åŒºåˆ«halt æ‰§è¡Œæ—¶,æ€æ­»åº”ç”¨è¿›ç¨‹, æ‰§è¡Œ sync ç³»ç»Ÿè°ƒç”¨,æ–‡ä»¶ç³»ç»Ÿå†™æ“ä½œå®Œæˆåå°±ä¼šåœæ­¢å†…æ ¸ï¼Œè¦æ‰‹åŠ¨å…³é—­ç”µæº; shutdown ä¼šåœæ­¢åº”ç”¨è¿›ç¨‹ å¸è½½æ–‡ä»¶ç³»ç»Ÿ ç„¶åå…³é—­ç”µæº linux ç³»ç»Ÿç›®å½•ç»“æ„ /binbin æ˜¯ binary çš„ç¼©å†™ï¼Œè¯¥ç›®å½•å­˜æ”¾æœ€å¸¸ç”¨çš„å‘½ä»¤ /bootå­˜æ”¾å¯åŠ¨ linux æ—¶ç”¨åˆ°çš„æ ¸å¿ƒæ–‡ä»¶ /devdev æ˜¯ device çš„ç¼©å†™, å­˜æ”¾å¤–éƒ¨è®¾å¤‡ linux ä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶ç›¸åŒ /etcå­˜æ”¾ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶ /homeç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„ä¸»ç›®å½• é€šå¸¸å’Œç”¨æˆ·ååŒå /libå­˜æ”¾ç³»ç»Ÿçš„åŠ¨æ€é“¾æ¥å…±äº«åº“, ç±»ä¼¼äº windows ä¸­çš„ dll æ–‡ä»¶,å‡ ä¹æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½éœ€è¦è¿™äº›å…±äº«åº“ /lost+foundä¸€èˆ¬ä¸ºç©ºï¼Œéæ³•å…³æœºåï¼Œä¼šå­˜æ”¾ä¸€äº›æ–‡ä»¶ /mediaæŠŠè¯†åˆ«çš„åª’ä½“è®¾å¤‡æŒ‚è½½åˆ°è¯¥ç›®å½• /mntç”¨æˆ·æŒ‚è½½çš„å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ /optå­˜æ”¾é¢å¤–å®‰è£…çš„è½¯ä»¶ /procè¯¥ç›®å½•æ˜¯è™šæ‹Ÿç›®å½•ï¼Œæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œå¯ä»¥ä»ä¸­è·å–ç³»ç»Ÿä¿¡æ¯, å¯ç›´æ¥ä¿®æ”¹é‡Œé¢çš„æŸäº›æ–‡ä»¶ /rootè¶…çº§ç®¡ç†å‘˜çš„ä¸»ç›®å½• /sbinå­˜æ”¾ç³»ç»Ÿç®¡ç†ç›¸å…³çš„ç¨‹åº selinuxRedhat&#x2F;CentOS ç‰¹æœ‰çš„ï¼Œå®‰å…¨ç›¸å…³çš„æ–‡ä»¶ /srvå­˜æ”¾æœåŠ¡å¯åŠ¨åéœ€æå–çš„æ•°æ® /syså†…æ ¸è®¾å¤‡æ ‘çš„ç›´è§‚åæ˜ ï¼Œåˆ›å»ºå†…æ ¸å¯¹è±¡æ—¶ï¼Œä¼šåœ¨è¿™é‡Œæ–°å¢å¯¹åº”çš„æ–‡ä»¶ /tmpå­˜æ”¾ä¸´æ—¶æ–‡ä»¶ usréå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾è¿™é‡Œï¼Œç±»ä¼¼ windows çš„ program files æ–‡ä»¶å¤¹ usr/binæ™®é€šç”¨æˆ·ä½¿ç”¨çš„ç¨‹åº /usr/sbinè¶…çº§ç®¡ç†å‘˜ä½¿ç”¨çš„ç¨‹åº /usr/srcå­˜æ”¾æºç çš„ç›®å½• /varå­˜æ”¾ç»å¸¸è¢«ä¿®æ”¹çš„æ–‡ä»¶ï¼Œå¦‚ æ—¥å¿— /runä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚ç³»ç»Ÿé‡å¯æ—¶ï¼Œä¼šæ¸…ç©º å¿˜è®°å¯†ç çš„è§£å†³åŠæ³•: å•ç”¨æˆ·æ¨¡å¼ æˆ– rescue æ¨¡å¼ linux è¿œç¨‹ç™»å½•window ä¸‹è¿œç¨‹ç™»å½•å®¢æˆ·ç«¯æœ‰ secureCRT, Putty, SSH Secure Shell, Xshellç­‰ linux æ–‡ä»¶åŸºæœ¬å±æ€§123ls -al # é•¿åˆ—è¡¨æ ¼å¼ æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ åŒ…æ‹¬ . ..ls -R # é€’å½’åœ°æ˜¾ç¤ºå­ç›®å½•å†…å®¹ll # åŒ ls -l æ–‡ä»¶ç±»å‹|å±ä¸»æƒé™|å±ç»„æƒé™|å…¶ä»–ç”¨æˆ·çš„æƒé™ æ–‡ä»¶ç±»å‹: d æ–‡ä»¶å¤¹ - æ–‡ä»¶ l é“¾æ¥æ–‡ä»¶ b äºŒè¿›åˆ¶æ–‡ä»¶&#x2F;å¯æ‰§è¡Œæ–‡ä»¶&#x2F;æ¥å£è®¾å¤‡ c å­—ç¬¦æ–‡ä»¶&#x2F;ä¸²è¡Œç«¯å£è®¾å¤‡ æ–‡ä»¶å½’å± æ–‡ä»¶å±ä¸» æ–‡ä»¶æ‰€æœ‰è€… æ–‡ä»¶å±ç»„ æ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ· å…¶ä»–ç”¨æˆ· æ–‡ä»¶æ‰€æœ‰è€…,æ–‡ä»¶æ‰€æœ‰ç»„å’Œå…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚ å¯¹äº root ç”¨æˆ·æ¥è¯´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ–‡ä»¶çš„æƒé™å¯¹å…¶ä¸èµ·ä½œç”¨ã€‚ 123456789101112131415161718192021222324252627282930cat /etc/group | sort # æŸ¥çœ‹ç”¨æˆ·ç»„ (sortè¡¨ç¤ºæŒ‰å­—æ¯æ’åº) group_name:passwd:GID:user_list (passwd ä¸º x è¡¨ç¤ºåŠ å¯†)cat /etc/passwd | sort # æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ user_name:passwd:uid:gid:group_name:home_dir:default_shellcat /etc/gshadow # ç”¨æˆ·ç»„çš„å¯†ç æ–‡ä»¶ group_name:passwd å¯†ç æ˜¯åŠ å¯†çš„cat /etc/shadow # ç”¨æˆ·çš„å¯†ç æ–‡ä»¶ user_name:passwdwhoami # æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·groups &lt;user&gt; # æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·/æŒ‡å®šç”¨æˆ· å±äºå“ªäº›ç»„ å¦‚ groups rootls /etc/sudoers.d #sudoç”¨æˆ·åˆ—è¡¨# ä¸åŒç”¨æˆ·æœ‰ä¸åŒæƒé™ è‹¥æ²¡æœ‰xæƒé™ä¸èƒ½æ‰“å¼€ç›®å½•sudo adduser test # åˆ›å»ºç”¨æˆ·test# sudo deluser test --remove-home åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·çš„ä¸»ç›®å½•cd /optmkdir myfolderll # æŸ¥çœ‹chown pan myfolder # ä¿®æ”¹æ‰€æœ‰è€…ä¸ºpanchmod g-x,o-x myfolder # åŒç»„å’Œå…¶ä»–ç»„çš„ç”¨æˆ· å–æ¶ˆæ‰§è¡Œæƒé™su test # åˆ‡æ¢åˆ°testç”¨æˆ·cd myfolder # testç”¨æˆ·æ²¡æœ‰myfolderçš„æ‰§è¡Œæƒé™ æ‰€ä»¥æ‰“ä¸å¼€æ–‡ä»¶å¤¹alias # æŸ¥çœ‹åˆ«åsu - &lt;user&gt; # åˆ‡æ¢ç”¨æˆ· å·¥ä½œç›®å½•ä¹Ÿåˆ‡æ¢åˆ°ç›®æ ‡ç”¨æˆ·çš„homeç›®å½•su &lt;user&gt; # åªåˆ‡æ¢ç”¨æˆ·tar -cvzf demo.tgz demoDir # å‹ç¼©æ–‡ä»¶å¤¹tar -zxvf demo.tar.gz -C /home/pan # è§£å‹åˆ°æŒ‡å®šè·¯å¾„ä¸‹(è¯¥è·¯å¾„éœ€è¦çœŸå®å­˜åœ¨)tar -tvf demo.tar # æŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹ æ›´æ”¹æ–‡ä»¶å±æ€§chgrp æ›´æ”¹æ–‡ä»¶å±ç»„ 12# chgrp [-R] å±ç»„å æ–‡ä»¶åchgrp pan tmpdir chown æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…ï¼Œä¹Ÿå¯åŒæ—¶å±ç»„ 123# chown [â€“R] å±ä¸»å æ–‡ä»¶å# chown [-R] å±ä¸»å:å±ç»„å æ–‡ä»¶åchown test:test tmpdir chmod æ›´æ”¹æ–‡ä»¶æƒé™Linux æ–‡ä»¶å±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œä¸€ç§æ˜¯æ•°å­—ï¼Œä¸€ç§æ˜¯ç¬¦å·ã€‚ ç¬¦å·: a &#x3D; all u &#x3D; user æ‰€æœ‰è€… g &#x3D; group o &#x3D; other 12345678chmod -R 700 hello # ç”¨æ•°å­—æŒ‡å®šæƒé™ ç›¸å¯¹æ–¹ä¾¿chmod -R u+x hello # å±ä¸»+xæƒé™chmod -R o-x hello # å…¶ä»–ç”¨æˆ·-xæƒé™chomd -R g+w hello # å±ç»„+wæƒé™chmod -R a+w hello # æ‰€æœ‰ç”¨æˆ·+wæƒé™chmod -R u=rxw hello # è®¾ç½®æ‰€æœ‰è€…çš„æƒé™chmod -R u=rxw,g=r,o=w hello # è®¾ç½®ä¸‰ç§ç”¨æˆ·çš„æƒé™ (æ³¨æ„é€—å·åˆ†éš”) linux æ–‡ä»¶å’Œç›®å½•ç®¡ç†Linux çš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½• &#x2F; ç»å¯¹è·¯å¾„ ä»æ ¹ç›®å½•å¼€å§‹ /home/pan, /media/pan ç›¸å¯¹è·¯å¾„ ./pan or ../pan ç›®å½•ç®¡ç†å‘½ä»¤ ls åˆ—å‡ºç›®å½•å†…å®¹ cd åˆ‡æ¢ç›®å½• pwd æ˜¾ç¤ºå½“å‰ç›®å½• mkdir åˆ›å»ºç›®å½• rmdir åˆ é™¤ç©ºç›®å½• rm åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• cp å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• cp -r folder folder2 å¤åˆ¶ç›®å½•è¦åŠ  -r mv ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½•, ä¹Ÿå¯ä»¥ç”¨æ¥é‡å‘½åæ–‡ä»¶æˆ–ç›®å½• man ls æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ åˆ—å‡ºç›®å½• 123ls -a # å…¨éƒ¨æ–‡ä»¶ï¼Œè¿åŒ.å¼€å¤´çš„éšè—æ–‡ä»¶ls -d # æ˜¾ç¤ºç›®å½•è‡ªèº«ï¼Œè€Œä¸æ˜¯ç›®å½•çš„å†…å®¹ls -l # é•¿æ ¼å¼æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼ŒåŒ…å«æ–‡ä»¶çš„æƒé™ã€å¤§å°å’Œä¿®æ”¹æ—¶é—´ç­‰ åˆ‡æ¢ç›®å½• 123456cd /root/hellocd ./foocd ~ # ç”¨æˆ·çš„ä¸»ç›®å½•cd # ä¸å¸¦å‚æ•° åŒä¸Š åˆ™è¿”å›ç”¨æˆ·ä¸»ç›®å½•cd - # è¿”å›ä¹‹å‰çš„ç›®å½•cd .. # ä¸Šçº§ç›®å½• æ˜¾ç¤ºå½“å‰ç›®å½• 123456789pwdpwd -P # æ˜¾ç¤ºçœŸå®è·¯å¾„ï¼Œè€Œéé“¾æ¥æ–‡ä»¶çš„è·¯å¾„# ä¾‹å­cd ~ln -s Music mp3 # åˆ›å»ºè½¯é“¾æ¥ mp3cd mp3pwd -P åˆ›å»ºç›®å½• 12345678mkdir dirnamemkdir -m 711 dirname # é…ç½®æ–‡ä»¶çš„æƒé™å–”ï¼ç›´æ¥é…ç½®ï¼Œä¸éœ€è¦çœ‹é»˜è®¤æƒé™ (umask) çš„è„¸è‰²ï½mkdir -p path/to/you/want # åˆ›å»ºå¤šå±‚ç›®å½•cd path/to/you/wanttouch hellorm -rf path/to/you/wan/*rmdir -p path/to/you/want # rmdir ä¸èƒ½åˆ é™¤éç©ºç›®å½• æ‰€ä»¥è¦å…ˆç”¨ rm ç£ç›˜ç®¡ç† df åˆ—å‡ºç£ç›˜ä½¿ç”¨é‡df [-ahHikmT] [ç›®å½•æˆ–æ–‡ä»¶å] -aï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰¹æœ‰çš„ &#x2F;proc ç­‰æ–‡ä»¶ç³»ç»Ÿ; -kï¼šä»¥ KBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿ; -mï¼šä»¥ MBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿ; -hï¼šä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„ GBytesï¼ŒMBytesï¼ŒKBytes ç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤º; -Hï¼šä»¥ M &#x3D; 1000K å–ä»£ M &#x3D; 1024K çš„è¿›ä½æ–¹å¼; -Tï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œè¿åŒè¯¥åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿåç§°ï¼ˆä¾‹å¦‚ ext3ï¼‰ä¹Ÿåˆ—å‡º; -iï¼šä¸ç”¨ç¡¬ç›˜å®¹é‡ï¼Œè€Œä»¥ inode çš„æ•°é‡æ¥æ˜¾ç¤º du æŸ¥çœ‹æ–‡ä»¶&#x2F;ç›®å½•çš„ä½¿ç”¨ç©ºé—´du [-ahskm] [æ–‡ä»¶æˆ–ç›®å½•] -aï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ä¸ç›®å½•å®¹é‡ï¼Œå› ä¸ºé»˜è®¤ä»…ç»Ÿè®¡ç›®å½•åº•ä¸‹çš„æ–‡ä»¶é‡è€Œå·²ã€‚ -hï¼šä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ï¼ˆG &#x2F; Mï¼‰æ˜¾ç¤º; -sï¼šåˆ—å‡ºæ€»é‡è€Œå·²ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªå„åˆ«çš„ç›®å½•å ç”¨å®¹é‡; -Sï¼šä¸åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ€»è®¡(å½“å‰ç›®å½•ä¸‹æ–‡ä»¶çš„æ€»å¤§å°)ï¼Œä¸-s æœ‰ç‚¹å·®åˆ«ã€‚ -kï¼šä»¥ KBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤º; -mï¼šä»¥ MBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤º; ç›´æ¥è¾“å…¥ du æ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹æ—¶ï¼Œåˆ™ du ä¼šåˆ†æå½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶ä¸ç›®å½•æ‰€å ç”¨çš„ç¡¬ç›˜ç©ºé—´ã€‚ fdisk åˆ†åŒºå·¥å…·fdisk -l ã€è®¾å¤‡] æ˜¾ç¤ºæŒ‡å®šè®¾å¤‡&#x2F;å½“å‰ç›®å½•æ‰€åœ¨è®¾å¤‡çš„åˆ†åŒºä¿¡æ¯fdisk /dev/sda1 å¯¹æŒ‡å®šè®¾å¤‡åˆ†åŒº, (q é€€å‡ºï¼Œw ä¿å­˜) mkfs åˆ†åŒºæ ¼å¼åŒ–mkfs -t æ–‡ä»¶ç³»ç»Ÿç±»å‹ è®¾å¤‡ï¼Œ ä¾‹å¦‚ï¼š mkfs -t mkfs.ext4 &#x2F;dev&#x2F;sda2 fsck æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥è‹¥ç³»ç»Ÿæ‰ç”µæˆ–ç£ç›˜å‘ç”Ÿé—®é¢˜ï¼Œå¯ç”¨ fsck è¿›è¡Œæ£€æŸ¥, è¯¦ç»†ç”¨æ³•è§ fsck -h ç£ç›˜æŒ‚è½½(mount)æˆ–å¸è½½(umount)mount -L label -t æ–‡ä»¶ç³»ç»Ÿç±»å‹ æŒ‚è½½ç‚¹ umount -fn è®¾å¤‡æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹ å®šæ—¶ä»»åŠ¡crontab å‘½ä»¤(cron table)ï¼Œå®ƒæ˜¯ cron çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å«å®ƒä½œä¸šåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»¥ä¸‹æ–‡ä»¶å¤¹å†…æ‰¾åˆ°ç›¸å…³é…ç½®æ–‡ä»¶ã€‚ &#x2F;var&#x2F;spool&#x2F;cron&#x2F; ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯æ¯ä¸ªç”¨æˆ·åŒ…æ‹¬ root çš„ crontab ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡ä»¥åˆ›å»ºè€…çš„åå­—å‘½å &#x2F;etc&#x2F;crontab è¿™ä¸ªæ–‡ä»¶è´Ÿè´£è°ƒåº¦å„ç§ç®¡ç†å’Œç»´æŠ¤ä»»åŠ¡ã€‚ &#x2F;etc&#x2F;cron.d&#x2F; è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ä»»ä½•è¦æ‰§è¡Œçš„ crontab æ–‡ä»¶æˆ–è„šæœ¬ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥æŠŠè„šæœ¬æ”¾åœ¨&#x2F;etc&#x2F;cron.hourlyã€&#x2F;etc&#x2F;cron.dailyã€&#x2F;etc&#x2F;cron.weeklyã€&#x2F;etc&#x2F;cron.monthly ç›®å½•ä¸­ï¼Œè®©å®ƒæ¯å°æ—¶&#x2F;å¤©&#x2F;æ˜ŸæœŸã€æœˆæ‰§è¡Œä¸€æ¬¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839crontab [-u username] # çœç•¥ç”¨æˆ· è¡¨ç¤ºæ“ä½œå½“å‰ç”¨æˆ·çš„crontab -e (ç¼–è¾‘å·¥ä½œè¡¨) -l (åˆ—å‡ºå·¥ä½œè¡¨é‡Œçš„å‘½ä»¤) -r (åˆ é™¤å·¥ä½œä½œ)crontab -e # ç¼–è¾‘å®šæ—¶ä»»åŠ¡# è¯­æ³•åˆ† æ—¶ æ—¥ æœˆ å‘¨ cmd# ä¾‹å­# æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡myCommand# é»˜è®¤ä¸æ”¯æŒç§’çº§åˆ«æ‰§è¡Œé¢‘ç‡* * * * * myCommand# æ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 * * * * myCommand# åœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 8-11 * * * myCommand# æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ# * == */1 æ‰§è¡Œ30æ¬¡ æ¯å¤©1æ¬¡ , è€Œ */2 ä»£è¡¨ 12æ¬¡ï¼Œæ¯2å¤©æ‰§è¡Œ1æ¬¡3,15 8-11 */2 * * myCommand# æ¯å‘¨ä¸€ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 8-11 * * 1 myCommand# æ¯æ™šçš„21:30é‡å¯smb30 21 * * * /etc/init.d/smb restart# æ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯smb45 4 1,10,22 * * /etc/init.d/smb restart# æ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯smb10 1 * * 6,0 /etc/init.d/smb restart# æ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smb0,30 18-23 * * * /etc/init.d/smb restart# æ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11 : 00 pmé‡å¯smb0 23 * * 6 /etc/init.d/smb restart# æ¯ä¸€å°æ—¶é‡å¯smb* */1 * * * /etc/init.d/smb restart# æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯smb* 23-7/1 * * * /etc/init.d/smb restart å¸¸ç”¨å‘½ä»¤12345678type curl # æŸ¥çœ‹å‘½ä»¤çš„ç±»å‹ *å¯ä»¥ç”¨æ¥ç¡®è®¤æœ‰æ²¡æœ‰è¿™ä¸ªå‘½ä»¤*type echotype ifconfigwhich mongo # æŸ¥çœ‹åº”ç”¨å®‰è£…åœ¨å“ªé‡Œwhereis mongo linux åå°è¿è¡Œå’Œå…³é—­ã€æŸ¥çœ‹åå°ä»»åŠ¡","tags":["Linux"],"categories":["Linux"]},{"title":"SQLé›¶åŸºç¡€å…¥é—¨å›¾æ–‡æ•™ç¨‹","path":"/2024/02/26/SQLé›¶åŸºç¡€å…¥é—¨å›¾æ–‡æ•™ç¨‹/","content":"åŸæ–‡åœ°å€â¤ï¸ SQL é›¶åŸºç¡€å…¥é—¨å›¾æ–‡æ•™ç¨‹ï¼ - æ˜é‡‘ ğŸ“š å‰è¨€SQL è¯­è¨€æœ‰ 40 å¤šå¹´çš„å†å²ï¼Œä»å®ƒè¢«åº”ç”¨è‡³ä»Šå‡ ä¹æ— å¤„ä¸åœ¨ã€‚æˆ‘ä»¬æ¶ˆè´¹çš„æ¯ä¸€ç¬”æ”¯ä»˜è®°å½•ï¼Œæ”¶é›†çš„æ¯ä¸€æ¡ç”¨æˆ·ä¿¡æ¯ï¼Œå‘å‡ºå»çš„æ¯ä¸€æ¡æ¶ˆæ¯ï¼Œéƒ½ä¼šä½¿ç”¨æ•°æ®åº“æˆ–ä¸å…¶ç›¸å…³çš„äº§å“æ¥å­˜å‚¨ï¼Œè€Œæ“çºµæ•°æ®åº“çš„è¯­è¨€æ­£æ˜¯ SQL ï¼ SQL å¯¹äºç°åœ¨çš„äº’è”ç½‘å…¬å¸ç”Ÿäº§ç ”å‘ç­‰å²—ä½å‡ ä¹æ˜¯ä¸€ä¸ªå¿…å¤‡æŠ€èƒ½ï¼Œå¦‚æœä¸ä¼š SQL çš„è¯ï¼Œå¯èƒ½ä»€ä¹ˆéƒ½åšä¸äº†ã€‚ä½ å¯ä»¥æŠŠ SQL å½“åšæ˜¯ä¸€ç§å·¥å…·ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å¸®åŠ©ä½ å®Œæˆä½ çš„å·¥ä½œï¼Œåˆ›é€ ä»·å€¼ã€‚ æ–‡ç« ç»“å°¾æœ‰ SQL å°æµ‹éªŒå“¦ï¼çœ‹çœ‹ä½ èƒ½å¾—å‡ åˆ†ï¼Ÿ ğŸŒ´ SQL ä»‹ç»ğŸŒ¼ ä»€ä¹ˆæ˜¯ SQLSQL æ˜¯ç”¨äºè®¿é—®å’Œå¤„ç†æ•°æ®åº“çš„æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€ã€‚ SQL æŒ‡ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ SQL ä½¿æˆ‘ä»¬æœ‰èƒ½åŠ›è®¿é—®æ•°æ®åº“ SQL æ˜¯ä¸€ç§ ANSI çš„æ ‡å‡†è®¡ç®—æœºè¯­è¨€ SQL å¯ä¸æ•°æ®åº“ç¨‹åºååŒå·¥ä½œï¼Œæ¯”å¦‚ MS Accessã€DB2ã€Informixã€MS SQL Serverã€Oracleã€Sybase ä»¥åŠå…¶ä»–æ•°æ®åº“ç³»ç»Ÿã€‚ä½†æ˜¯ç”±äºå„ç§å„æ ·çš„æ•°æ®åº“å‡ºç°ï¼Œå¯¼è‡´å¾ˆå¤šä¸åŒç‰ˆæœ¬çš„ SQL è¯­è¨€ï¼Œä¸ºäº†ä¸ ANSI æ ‡å‡†ç›¸å…¼å®¹ï¼Œå®ƒä»¬å¿…é¡»ä»¥ç›¸ä¼¼çš„æ–¹å¼å…±åŒåœ°æ¥æ”¯æŒä¸€äº›ä¸»è¦çš„å…³é”®è¯ï¼ˆæ¯”å¦‚ SELECTã€UPDATEã€DELETEã€INSERTã€WHERE ç­‰ç­‰ï¼‰ï¼Œè¿™äº›å°±æ˜¯æˆ‘ä»¬è¦å­¦ä¹ çš„ SQL åŸºç¡€ã€‚ ğŸŒ€ SQL çš„ç±»å‹å¯ä»¥æŠŠ SQL åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ•°æ®æ“ä½œè¯­è¨€ (DML) å’Œ æ•°æ®å®šä¹‰è¯­è¨€ (DDL)ã€‚ æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆDQL: Data Query Languageï¼‰ æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼šData Manipulation Languageï¼‰ ğŸŒµ å­¦ä¹  SQL çš„ä½œç”¨SQL æ˜¯ä¸€é—¨ ANSI çš„æ ‡å‡†è®¡ç®—æœºè¯­è¨€ï¼Œç”¨æ¥è®¿é—®å’Œæ“ä½œæ•°æ®åº“ç³»ç»Ÿã€‚SQL è¯­å¥ç”¨äºå–å›å’Œæ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ SQL é¢å‘æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢ SQL å¯ä»æ•°æ®åº“å–å›æ•°æ® SQL å¯åœ¨æ•°æ®åº“ä¸­æ’å…¥æ–°çš„è®°å½• SQL å¯æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ® SQL å¯ä»æ•°æ®åº“åˆ é™¤è®°å½• SQL å¯åˆ›å»ºæ–°æ•°æ®åº“ SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°è¡¨ SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè§†å›¾ SQL å¯ä»¥è®¾ç½®è¡¨ã€å­˜å‚¨è¿‡ç¨‹å’Œè§†å›¾çš„æƒé™ ğŸ„ æ•°æ®åº“æ˜¯ä»€ä¹ˆé¡¾åæ€ä¹‰ï¼Œä½ å¯ä»¥ç†è§£ä¸ºæ•°æ®åº“æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„ä¸€ä¸ªå®¹å™¨ã€‚ æ‰“ä¸ªæ¯”æ–¹ï¼Œæ¯ä¸ªäººå®¶é‡Œéƒ½ä¼šæœ‰å†°ç®±ï¼Œå†°ç®±æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿå†°ç®±æ˜¯ç”¨æ¥å­˜æ”¾é£Ÿç‰©çš„åœ°æ–¹ã€‚ åŒæ ·çš„ï¼Œæ•°æ®åº“æ˜¯å­˜æ”¾æ•°æ®çš„åœ°æ–¹ã€‚æ­£æ˜¯å› ä¸ºæœ‰äº†æ•°æ®åº“åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥æ‰¾æ•°æ®ã€‚ä¾‹å¦‚ä½ æ¯å¤©ä½¿ç”¨ä½™é¢å®æŸ¥çœ‹è‡ªå·±çš„è´¦æˆ·æ”¶ç›Šï¼Œå°±æ˜¯ä»æ•°æ®åº“è¯»å–æ•°æ®åç»™ä½ çš„ã€‚ æœ€å¸¸è§çš„æ•°æ®åº“ç±»å‹æ˜¯å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼š RDBMS æ˜¯ SQL çš„åŸºç¡€ï¼ŒåŒæ ·ä¹Ÿæ˜¯æ‰€æœ‰ç°ä»£æ•°æ®åº“ç³»ç»Ÿçš„åŸºç¡€ï¼Œæ¯”å¦‚ MS SQL Server, IBM DB2, Oracle, MySQL ä»¥åŠ Microsoft Access ç­‰ç­‰ã€‚ RDBMS ä¸­çš„æ•°æ®å­˜å‚¨åœ¨è¢«ç§°ä¸ºè¡¨ï¼ˆtablesï¼‰çš„æ•°æ®åº“å¯¹è±¡ä¸­ã€‚è¡¨ æ˜¯ç›¸å…³çš„æ•°æ®é¡¹çš„é›†åˆï¼Œå®ƒç”±åˆ—å’Œè¡Œç»„æˆã€‚ ç”±äºæœ¬æ–‡ä¸»è¦è®²è§£ SQL åŸºç¡€ï¼Œå› æ­¤å¯¹æ•°æ®åº“ä¸åšè¿‡å¤šè§£é‡Šï¼Œåªéœ€è¦å¤§æ¦‚äº†è§£å³å¯ã€‚å’±ä»¬ç›´æ¥å¼€å§‹å­¦ä¹  SQLï¼ ğŸ¥ SQL åŸºç¡€è¯­è¨€å­¦ä¹ åœ¨äº†è§£ SQL åŸºç¡€è¯­å¥ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®²ä¸€ä¸‹ è¡¨ æ˜¯ä»€ä¹ˆï¼Ÿ ä¸€ä¸ªæ•°æ®åº“é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ã€‚æ¯ä¸ªè¡¨ç”±ä¸€ä¸ªåå­—æ ‡è¯†ï¼ˆä¾‹å¦‚â€œå®¢æˆ·â€æˆ–è€…â€œè®¢å•â€ï¼‰ã€‚è¡¨åŒ…å«å¸¦æœ‰æ•°æ®çš„è®°å½•(è¡Œ)ã€‚ ä¸‹é¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªåä¸º â€œPersonsâ€ çš„è¡¨ï¼š Id LastName FirstName Address City 1 Adams John Oxford Street London 2 Bush George Fifth Avenue New York 3 Carter Thomas Changan Street Beijing ä¸Šé¢çš„è¡¨åŒ…å«ä¸‰æ¡è®°å½•ï¼ˆæ¯ä¸€æ¡å¯¹åº”ä¸€ä¸ªäººï¼‰å’Œäº”ä¸ªåˆ—ï¼ˆIdã€å§“ã€åã€åœ°å€å’ŒåŸå¸‚ï¼‰ã€‚ æœ‰è¡¨æ‰èƒ½æŸ¥è¯¢ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ›å»ºè¿™æ ·ä¸€ä¸ªè¡¨ï¼Ÿ ğŸ¤ CREATE TABLE â€“ åˆ›å»ºè¡¨CREATE TABLE è¯­å¥ç”¨äºåˆ›å»ºæ•°æ®åº“ä¸­çš„è¡¨ã€‚ è¯­æ³•ï¼š 1234567CREATE TABLE è¡¨åç§°(åˆ—åç§°1 æ•°æ®ç±»å‹,åˆ—åç§°2 æ•°æ®ç±»å‹,åˆ—åç§°3 æ•°æ®ç±»å‹,....); æ•°æ®ç±»å‹ï¼ˆdata_typeï¼‰è§„å®šäº†åˆ—å¯å®¹çº³ä½•ç§æ•°æ®ç±»å‹ã€‚ä¸‹é¢çš„è¡¨æ ¼åŒ…å«äº† SQL ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼š æ•°æ®ç±»å‹ æè¿° integer(size),int(size),smallint(size),tinyint(size) ä»…å®¹çº³æ•´æ•°ã€åœ¨æ‹¬å·å†…è§„å®šæ•°å­—çš„æœ€å¤§ä½æ•° decimal(size,d),numeric(size,d) å®¹çº³å¸¦æœ‰å°æ•°çš„æ•°å­—ã€â€sizeâ€ è§„å®šæ•°å­—çš„æœ€å¤§ä½æ•°ã€â€dâ€ è§„å®šå°æ•°ç‚¹å³ä¾§çš„æœ€å¤§ä½æ•° char(size) å®¹çº³å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼ˆå¯å®¹çº³å­—æ¯ã€æ•°å­—ä»¥åŠç‰¹æ®Šå­—ç¬¦ï¼‰ã€åœ¨æ‹¬å·ä¸­è§„å®šå­—ç¬¦ä¸²çš„é•¿åº¦ varchar(size) å®¹çº³å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ˆå¯å®¹çº³å­—æ¯ã€æ•°å­—ä»¥åŠç‰¹æ®Šçš„å­—ç¬¦ï¼‰ã€åœ¨æ‹¬å·ä¸­è§„å®šå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ date(yyyymmdd) å®¹çº³æ—¥æœŸ å®ä¾‹ï¼š æœ¬ä¾‹æ¼”ç¤ºå¦‚ä½•åˆ›å»ºåä¸º â€œPersonsâ€ çš„è¡¨ã€‚ è¯¥è¡¨åŒ…å« 5 ä¸ªåˆ—ï¼Œåˆ—ååˆ†åˆ«æ˜¯ï¼šâ€Id_Pâ€ã€â€LastNameâ€ã€â€FirstNameâ€ã€â€Addressâ€ ä»¥åŠ â€œCityâ€ï¼š 12345678CREATE TABLE Persons(Id_P int,LastName varchar(255),FirstName varchar(255),Address varchar(255),City varchar(255)); Id_P åˆ—çš„æ•°æ®ç±»å‹æ˜¯ intï¼ŒåŒ…å«æ•´æ•°ã€‚å…¶ä½™ 4 åˆ—çš„æ•°æ®ç±»å‹æ˜¯ varcharï¼Œæœ€å¤§é•¿åº¦ä¸º 255 ä¸ªå­—ç¬¦ã€‚ ç©ºçš„ â€œPersonsâ€ è¡¨ç±»ä¼¼è¿™æ ·ï¼š å¯ä½¿ç”¨ INSERT INTO è¯­å¥å‘ç©ºè¡¨å†™å…¥æ•°æ®ã€‚ ğŸ‘ INSERT â€“ æ’å…¥æ•°æ®INSERT INTO è¯­å¥ç”¨äºå‘è¡¨æ ¼ä¸­æ’å…¥æ–°çš„è¡Œã€‚ è¯­æ³•ï¼š 1INSERT INTO è¡¨åç§° VALUES (å€¼1, å€¼2,....); æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šæ‰€è¦æ’å…¥æ•°æ®çš„åˆ—ï¼š 1INSERT INTO table_name (åˆ—1, åˆ—2,...) VALUES (å€¼1, å€¼2,....); å®ä¾‹ï¼š æœ¬ä¾‹æ¼”ç¤º â€œPersonsâ€ è¡¨æ’å…¥è®°å½•çš„ä¸¤ç§æ–¹å¼ï¼š 1ã€æ’å…¥æ–°çš„è¡Œ 1INSERT INTO Persons VALUES (1, &#x27;Gates&#x27;, &#x27;Bill&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Beijing&#x27;); 2ã€åœ¨æŒ‡å®šçš„åˆ—ä¸­æ’å…¥æ•°æ® 1INSERT INTO Persons (LastName, Address) VALUES (&#x27;Wilson&#x27;, &#x27;Champs-Elysees&#x27;); æ’å…¥æˆåŠŸåï¼Œæ•°æ®å¦‚ä¸‹ï¼š è¿™ä¸ªæ•°æ®æ’å…¥ä¹‹åï¼Œæ˜¯é€šè¿‡ SELECT è¯­å¥è¿›è¡ŒæŸ¥è¯¢å‡ºæ¥çš„ï¼Œåˆ«æ€¥é©¬ä¸Šè®²ï¼ ğŸ¼ SELECT â€“ æŸ¥è¯¢æ•°æ®SELECT è¯­å¥ç”¨äºä»è¡¨ä¸­é€‰å–æ•°æ®ï¼Œç»“æœè¢«å­˜å‚¨åœ¨ä¸€ä¸ªç»“æœè¡¨ä¸­ï¼ˆç§°ä¸ºç»“æœé›†ï¼‰ã€‚ è¯­æ³•ï¼š 1SELECT * FROM è¡¨åç§°; æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šæ‰€è¦æŸ¥è¯¢æ•°æ®çš„åˆ—ï¼š 1SELECT åˆ—åç§° FROM è¡¨åç§°; ğŸ“¢ æ³¨æ„ï¼š SQL è¯­å¥å¯¹å¤§å°å†™ä¸æ•æ„Ÿï¼ŒSELECT ç­‰æ•ˆäº selectã€‚ å®ä¾‹ï¼š SQL SELECT * å®ä¾‹ï¼š 1SELECT * FROM Persons; ğŸ“¢ æ³¨æ„ï¼š æ˜Ÿå·ï¼ˆ*ï¼‰æ˜¯é€‰å–æ‰€æœ‰åˆ—çš„å¿«æ·æ–¹å¼ã€‚ å¦‚éœ€è·å–åä¸º â€œLastNameâ€ å’Œ â€œFirstNameâ€ çš„åˆ—çš„å†…å®¹ï¼ˆä»åä¸º â€œPersonsâ€ çš„æ•°æ®åº“è¡¨ï¼‰ï¼Œè¯·ä½¿ç”¨ç±»ä¼¼è¿™æ ·çš„ SELECT è¯­å¥ï¼š 1SELECT LastName,FirstName FROM Persons; ğŸ« DISTINCT â€“ å»é™¤é‡å¤å€¼å¦‚æœä¸€å¼ è¡¨ä¸­æœ‰å¤šè¡Œé‡å¤æ•°æ®ï¼Œå¦‚ä½•å»é‡æ˜¾ç¤ºå‘¢ï¼Ÿå¯ä»¥äº†è§£ä¸‹ DISTINCT ã€‚ è¯­æ³•ï¼š 1SELECT DISTINCT åˆ—åç§° FROM è¡¨åç§°; å®ä¾‹ï¼š å¦‚æœè¦ä» â€œLASTNAMEâ€ åˆ—ä¸­é€‰å–æ‰€æœ‰çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ SELECT è¯­å¥ï¼š 1SELECT LASTNAME FROM Persons; å¯ä»¥å‘ç°ï¼Œåœ¨ç»“æœé›†ä¸­ï¼ŒWilson è¢«åˆ—å‡ºäº†å¤šæ¬¡ã€‚ å¦‚éœ€ä» â€œLASTNAMEâ€ åˆ—ä¸­ä»…é€‰å–å”¯ä¸€ä¸åŒçš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ SELECT DISTINCT è¯­å¥ï¼š 1SELECT DISTINCT LASTNAME FROM Persons; é€šè¿‡ä¸Šè¿°æŸ¥è¯¢ï¼Œç»“æœé›†ä¸­åªæ˜¾ç¤ºäº†ä¸€åˆ— Wilsonï¼Œæ˜¾ç„¶å·²ç»å»é™¤äº†é‡å¤åˆ—ã€‚ ğŸ¸ WHERE â€“ æ¡ä»¶è¿‡æ»¤å¦‚æœéœ€è¦ä»è¡¨ä¸­é€‰å–æŒ‡å®šçš„æ•°æ®ï¼Œå¯å°† WHERE å­å¥æ·»åŠ åˆ° SELECT è¯­å¥ã€‚ è¯­æ³•ï¼š 1SELECT åˆ—åç§° FROM è¡¨åç§° WHERE åˆ— è¿ç®—ç¬¦ å€¼; ä¸‹é¢çš„è¿ç®—ç¬¦å¯åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ï¼š æ“ä½œç¬¦ æè¿° = ç­‰äº &lt;&gt; ä¸ç­‰äº å¤§äº &lt; å°äº &gt;&#x3D; å¤§äºç­‰äº &lt;&#x3D; å°äºç­‰äº BETWEEN åœ¨æŸä¸ªèŒƒå›´å†… LIKE æœç´¢æŸç§æ¨¡å¼ ğŸ“¢ æ³¨æ„ï¼š åœ¨æŸäº›ç‰ˆæœ¬çš„ SQL ä¸­ï¼Œæ“ä½œç¬¦ &lt;&gt; å¯ä»¥å†™ä¸º !&#x3D;ã€‚ å®ä¾‹ï¼š å¦‚æœåªå¸Œæœ›é€‰å–å±…ä½åœ¨åŸå¸‚ â€œBeijingâ€ ä¸­çš„äººï¼Œæˆ‘ä»¬éœ€è¦å‘ SELECT è¯­å¥æ·»åŠ  WHERE å­å¥ï¼š 1SELECT * FROM Persons WHERE City=&#x27;Beijing&#x27;; ğŸ“¢ æ³¨æ„ï¼š SQL ä½¿ç”¨å•å¼•å·æ¥ç¯ç»•æ–‡æœ¬å€¼ï¼ˆå¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»Ÿä¹Ÿæ¥å—åŒå¼•å·ï¼‰ã€‚å¦‚æœæ˜¯æ•°å€¼ï¼Œè¯·ä¸è¦ä½¿ç”¨å¼•å·ã€‚ ğŸ¹ AND &amp; OR â€“ è¿ç®—ç¬¦AND å’Œ OR å¯åœ¨ WHERE å­è¯­å¥ä¸­æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ç»“åˆèµ·æ¥ã€‚ å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œåˆ™ AND è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚ å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶å’Œç¬¬äºŒä¸ªæ¡ä»¶ä¸­åªè¦æœ‰ä¸€ä¸ªæˆç«‹ï¼Œåˆ™ OR è¿ç®—ç¬¦æ˜¾ç¤ºä¸€æ¡è®°å½•ã€‚ è¯­æ³•ï¼š AND è¿ç®—ç¬¦å®ä¾‹ï¼š 1SELECT * FROM è¡¨åç§° WHERE åˆ— è¿ç®—ç¬¦ å€¼ AND åˆ— è¿ç®—ç¬¦ å€¼; OR è¿ç®—ç¬¦å®ä¾‹ï¼š 1SELECT * FROM è¡¨åç§° WHERE åˆ— è¿ç®—ç¬¦ å€¼ OR åˆ— è¿ç®—ç¬¦ å€¼; å®ä¾‹ï¼š ç”±äº Persons è¡¨æ•°æ®å¤ªå°‘ï¼Œå› æ­¤å¢åŠ å‡ æ¡è®°å½•ï¼š 12345INSERT INTO Persons VALUES (2, &#x27;Adams&#x27;, &#x27;John&#x27;, &#x27;Oxford Street&#x27;, &#x27;London&#x27;);INSERT INTO Persons VALUES (3, &#x27;Bush&#x27;, &#x27;George&#x27;, &#x27;Fifth Avenue&#x27;, &#x27;New York&#x27;);INSERT INTO Persons VALUES (4, &#x27;Carter&#x27;, &#x27;Thomas&#x27;, &#x27;Changan Street&#x27;, &#x27;Beijing&#x27;);INSERT INTO Persons VALUES (5, &#x27;Carter&#x27;, &#x27;William&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Beijing&#x27;);SELECT * FROM Persons; AND è¿ç®—ç¬¦å®ä¾‹ï¼š ä½¿ç”¨ AND æ¥æ˜¾ç¤ºæ‰€æœ‰å§“ä¸º â€œCarterâ€ å¹¶ä¸”åä¸º â€œThomasâ€ çš„äººï¼š 1SELECT * FROM Persons WHERE FirstName=&#x27;Thomas&#x27; AND LastName=&#x27;Carter&#x27;; OR è¿ç®—ç¬¦å®ä¾‹ï¼š ä½¿ç”¨ OR æ¥æ˜¾ç¤ºæ‰€æœ‰å§“ä¸º â€œCarterâ€ æˆ–è€…åä¸º â€œThomasâ€ çš„äººï¼š 1SELECT * FROM Persons WHERE firstname=&#x27;Thomas&#x27; OR lastname=&#x27;Carter&#x27;; ç»“åˆ AND å’Œ OR è¿ç®—ç¬¦ï¼š æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ AND å’Œ OR ç»“åˆèµ·æ¥ï¼ˆä½¿ç”¨åœ†æ‹¬å·æ¥ç»„æˆå¤æ‚çš„è¡¨è¾¾å¼ï¼‰: 1SELECT * FROM Persons WHERE (FirstName=&#x27;Thomas&#x27; OR FirstName=&#x27;William&#x27;) AND LastName=&#x27;Carter&#x27;; ğŸ° ORDER BY â€“ æ’åºORDER BY è¯­å¥ç”¨äºæ ¹æ®æŒ‡å®šçš„åˆ—å¯¹ç»“æœé›†è¿›è¡Œæ’åºï¼Œé»˜è®¤æŒ‰ç…§å‡åºå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œå¦‚æœæ‚¨å¸Œæœ›æŒ‰ç…§é™åºå¯¹è®°å½•è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨ DESC å…³é”®å­—ã€‚ è¯­æ³•ï¼š 1SELECT * FROM è¡¨åç§° ORDER BY åˆ—1,åˆ—2 DESC; é»˜è®¤æ’åºä¸º ASC å‡åºï¼ŒDESC ä»£è¡¨é™åºã€‚ å®ä¾‹ï¼š ä»¥å­—æ¯é¡ºåºæ˜¾ç¤º LASTNAME åç§°ï¼š 1SELECT * FROM Persons ORDER BY LASTNAME; ç©ºå€¼ï¼ˆNULLï¼‰é»˜è®¤æ’åºåœ¨æœ‰å€¼è¡Œä¹‹åã€‚ ä»¥æ•°å­—é¡ºåºæ˜¾ç¤ºID_Pï¼Œå¹¶ä»¥å­—æ¯é¡ºåºæ˜¾ç¤º LASTNAME åç§°ï¼š 1SELECT * FROM Persons ORDER BY ID_P,LASTNAME; ä»¥æ•°å­—é™åºæ˜¾ç¤ºID_Pï¼š 1SELECT * FROM Persons ORDER BY ID_P DESC; ğŸ“¢ æ³¨æ„ï¼š åœ¨ç¬¬ä¸€åˆ—ä¸­æœ‰ç›¸åŒçš„å€¼æ—¶ï¼Œç¬¬äºŒåˆ—æ˜¯ä»¥å‡åºæ’åˆ—çš„ã€‚å¦‚æœç¬¬ä¸€åˆ—ä¸­æœ‰äº›å€¼ä¸º null æ—¶ï¼Œæƒ…å†µä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ ğŸ± UPDATE â€“ æ›´æ–°æ•°æ®Update è¯­å¥ç”¨äºä¿®æ”¹è¡¨ä¸­çš„æ•°æ®ã€‚ è¯­æ³•ï¼š 1UPDATE è¡¨åç§° SET åˆ—åç§° = æ–°å€¼ WHERE åˆ—åç§° = æŸå€¼; å®ä¾‹ï¼š æ›´æ–°æŸä¸€è¡Œä¸­çš„ä¸€ä¸ªåˆ—ï¼š ç›®å‰ Persons è¡¨æœ‰å¾ˆå¤šå­—æ®µä¸º null çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ UPDATE ä¸º LASTNAME æ˜¯ â€œWilsonâ€ çš„äººæ·»åŠ  FIRSTNAMEï¼š 1UPDATE Persons SET FirstName = &#x27;Fred&#x27; WHERE LastName = &#x27;Wilson&#x27;; æ›´æ–°æŸä¸€è¡Œä¸­çš„è‹¥å¹²åˆ—ï¼š 1UPDATE Persons SET ID_P = 6,city= &#x27;London&#x27; WHERE LastName = &#x27;Wilson&#x27;; ğŸ¨ DELETE â€“ åˆ é™¤æ•°æ®DELETE è¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„è¡Œã€‚ è¯­æ³•ï¼š 1DELETE FROM è¡¨åç§° WHERE åˆ—åç§° = å€¼; å®ä¾‹ï¼š åˆ é™¤æŸè¡Œï¼š åˆ é™¤ Persons è¡¨ä¸­ LastName ä¸º â€œFred Wilsonâ€ çš„è¡Œï¼š 1DELETE FROM Persons WHERE LastName = &#x27;Wilson&#x27;; åˆ é™¤æ‰€æœ‰è¡Œï¼š å¯ä»¥åœ¨ä¸åˆ é™¤è¡¨çš„æƒ…å†µä¸‹åˆ é™¤æ‰€æœ‰çš„è¡Œã€‚è¿™æ„å‘³ç€è¡¨çš„ç»“æ„ã€å±æ€§å’Œç´¢å¼•éƒ½æ˜¯å®Œæ•´çš„ï¼š 1DELETE FROM table_name; ğŸµ TRUNCATE TABLE â€“ æ¸…é™¤è¡¨æ•°æ®å¦‚æœæˆ‘ä»¬ä»…ä»…éœ€è¦é™¤å»è¡¨å†…çš„æ•°æ®ï¼Œä½†å¹¶ä¸åˆ é™¤è¡¨æœ¬èº«ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ å¯ä»¥ä½¿ç”¨ TRUNCATE TABLE å‘½ä»¤ï¼ˆä»…ä»…åˆ é™¤è¡¨æ ¼ä¸­çš„æ•°æ®ï¼‰ï¼š è¯­æ³•ï¼š 1TRUNCATE TABLE è¡¨åç§°; å®ä¾‹ï¼š æœ¬ä¾‹æ¼”ç¤ºå¦‚ä½•åˆ é™¤åä¸º â€œPersonsâ€ çš„è¡¨ã€‚ 1TRUNCATE TABLE persons; ğŸ¯ DROP TABLE â€“ åˆ é™¤è¡¨DROP TABLE è¯­å¥ç”¨äºåˆ é™¤è¡¨ï¼ˆè¡¨çš„ç»“æ„ã€å±æ€§ä»¥åŠç´¢å¼•ä¹Ÿä¼šè¢«åˆ é™¤ï¼‰ã€‚ è¯­æ³•ï¼š 1DROP TABLE è¡¨åç§°; å®ä¾‹ï¼š æœ¬ä¾‹æ¼”ç¤ºå¦‚ä½•åˆ é™¤åä¸º â€œPersonsâ€ çš„è¡¨ã€‚ 1drop table persons; ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ é™¤æ—¶ï¼ŒæˆåŠŸåˆ é™¤äº†è¡¨ personsï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œåˆ é™¤æ—¶ï¼ŒæŠ¥é”™æ‰¾ä¸åˆ°è¡¨ personsï¼Œè¯´æ˜è¡¨å·²ç»è¢«åˆ é™¤äº†ã€‚ ğŸš€ SQL é«˜çº§è¨€è¯­å­¦ä¹ ğŸš¢ LIKE â€“ æŸ¥æ‰¾ç±»ä¼¼å€¼LIKE æ“ä½œç¬¦ç”¨äºåœ¨ WHERE å­å¥ä¸­æœç´¢åˆ—ä¸­çš„æŒ‡å®šæ¨¡å¼ã€‚ è¯­æ³•ï¼š 1SELECT åˆ—å/(*) FROM è¡¨åç§° WHERE åˆ—åç§° LIKE å€¼; å®ä¾‹ï¼š Persons è¡¨æ’å…¥æ•°æ®ï¼š 123456INSERT INTO Persons VALUES (1, &#x27;Gates&#x27;, &#x27;Bill&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Beijing&#x27;);INSERT INTO Persons VALUES (2, &#x27;Adams&#x27;, &#x27;John&#x27;, &#x27;Oxford Street&#x27;, &#x27;London&#x27;);INSERT INTO Persons VALUES (3, &#x27;Bush&#x27;, &#x27;George&#x27;, &#x27;Fifth Avenue&#x27;, &#x27;New York&#x27;);INSERT INTO Persons VALUES (4, &#x27;Carter&#x27;, &#x27;Thomas&#x27;, &#x27;Changan Street&#x27;, &#x27;Beijing&#x27;);INSERT INTO Persons VALUES (5, &#x27;Carter&#x27;, &#x27;William&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Beijing&#x27;);select * from persons; 1ã€ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸Šé¢çš„ â€œPersonsâ€ è¡¨ä¸­é€‰å–å±…ä½åœ¨ä»¥ â€œNâ€ å¼€å¤´çš„åŸå¸‚é‡Œçš„äººï¼š 1SELECT * FROM Persons WHERE City LIKE &#x27;N%&#x27;; 2ã€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›ä» â€œPersonsâ€ è¡¨ä¸­é€‰å–å±…ä½åœ¨ä»¥ â€œgâ€ ç»“å°¾çš„åŸå¸‚é‡Œçš„äººï¼š 1SELECT * FROM Persons WHERE City LIKE &#x27;%g&#x27;; 3ã€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›ä» â€œPersonsâ€ è¡¨ä¸­é€‰å–å±…ä½åœ¨åŒ…å« â€œlonâ€ çš„åŸå¸‚é‡Œçš„äººï¼š 1SELECT * FROM Persons WHERE City LIKE &#x27;%on%&#x27;; 4ã€é€šè¿‡ä½¿ç”¨ NOT å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä» â€œPersonsâ€ è¡¨ä¸­é€‰å–å±…ä½åœ¨ä¸åŒ…å« â€œlonâ€ çš„åŸå¸‚é‡Œçš„äººï¼š 1SELECT * FROM Persons WHERE City NOT LIKE &#x27;%on%&#x27;; ğŸ“¢ æ³¨æ„ï¼š â€œ%â€ å¯ç”¨äºå®šä¹‰é€šé…ç¬¦ï¼ˆæ¨¡å¼ä¸­ç¼ºå°‘çš„å­—æ¯ï¼‰ã€‚ ğŸš¤ IN â€“ é”å®šå¤šä¸ªå€¼IN æ“ä½œç¬¦å…è®¸æˆ‘ä»¬åœ¨ WHERE å­å¥ä¸­è§„å®šå¤šä¸ªå€¼ã€‚ è¯­æ³•ï¼š 1SELECT åˆ—å/(*) FROM è¡¨åç§° WHERE åˆ—åç§° IN (å€¼1,å€¼2,å€¼3); å®ä¾‹ï¼š ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›ä» Persons è¡¨ä¸­é€‰å–å§“æ°ä¸º Adams å’Œ Carter çš„äººï¼š 1SELECT * FROM Persons WHERE LastName IN (&#x27;Adams&#x27;,&#x27;Carter&#x27;); â›µï¸ BETWEEN â€“ é€‰å–åŒºé—´æ•°æ®æ“ä½œç¬¦ BETWEEN â€¦ AND ä¼šé€‰å–ä»‹äºä¸¤ä¸ªå€¼ä¹‹é—´çš„æ•°æ®èŒƒå›´ã€‚è¿™äº›å€¼å¯ä»¥æ˜¯æ•°å€¼ã€æ–‡æœ¬æˆ–è€…æ—¥æœŸã€‚ è¯­æ³•ï¼š 1SELECT åˆ—å/(*) FROM è¡¨åç§° WHERE åˆ—åç§° BETWEEN å€¼1 AND å€¼2; å®ä¾‹ï¼š 1ã€æŸ¥è¯¢ä»¥å­—æ¯é¡ºåºæ˜¾ç¤ºä»‹äº â€œAdamsâ€ï¼ˆåŒ…æ‹¬ï¼‰å’Œ â€œCarterâ€ï¼ˆä¸åŒ…æ‹¬ï¼‰ä¹‹é—´çš„äººï¼š 1SELECT * FROM Persons WHERE LastName BETWEEN &#x27;Adams&#x27; AND &#x27;Carter&#x27;; 2ã€æŸ¥è¯¢ä¸Šè¿°ç»“æœç›¸åçš„ç»“æœï¼Œå¯ä»¥ä½¿ç”¨ NOTï¼š 1SELECT * FROM Persons WHERE LastName NOT BETWEEN &#x27;Adams&#x27; AND &#x27;Carter&#x27;; ğŸ“¢ æ³¨æ„ï¼š ä¸åŒçš„æ•°æ®åº“å¯¹ BETWEENâ€¦AND æ“ä½œç¬¦çš„å¤„ç†æ–¹å¼æ˜¯æœ‰å·®å¼‚çš„ã€‚ æŸäº›æ•°æ®åº“ä¼šåˆ—å‡ºä»‹äº â€œAdamsâ€ å’Œ â€œCarterâ€ ä¹‹é—´çš„äººï¼Œä½†ä¸åŒ…æ‹¬ â€œAdamsâ€ å’Œ â€œCarterâ€ ï¼›æŸäº›æ•°æ®åº“ä¼šåˆ—å‡ºä»‹äº â€œAdamsâ€ å’Œ â€œCarterâ€ ä¹‹é—´å¹¶åŒ…æ‹¬ â€œAdamsâ€ å’Œ â€œCarterâ€ çš„äººï¼›è€Œå¦ä¸€äº›æ•°æ®åº“ä¼šåˆ—å‡ºä»‹äº â€œAdamsâ€ å’Œ â€œCarterâ€ ä¹‹é—´çš„äººï¼ŒåŒ…æ‹¬ â€œAdamsâ€ ï¼Œä½†ä¸åŒ…æ‹¬ â€œCarterâ€ ã€‚ æ‰€ä»¥ï¼Œè¯·æ£€æŸ¥ä½ çš„æ•°æ®åº“æ˜¯å¦‚ä½•å¤„ç† BETWEENâ€¦.AND æ“ä½œç¬¦çš„ï¼ ğŸš‚ AS â€“ åˆ«åé€šè¿‡ä½¿ç”¨ SQLï¼Œå¯ä»¥ä¸ºåˆ—åç§°å’Œè¡¨åç§°æŒ‡å®šåˆ«åï¼ˆAliasï¼‰ï¼Œåˆ«åä½¿æŸ¥è¯¢ç¨‹åºæ›´æ˜“é˜…è¯»å’Œä¹¦å†™ã€‚ è¯­æ³•ï¼š è¡¨åˆ«åï¼š 1SELECT åˆ—åç§°/(*) FROM è¡¨åç§° AS åˆ«å; åˆ—åˆ«åï¼š 1SELECT åˆ—åç§° as åˆ«å FROM è¡¨åç§°; å®ä¾‹ï¼š ä½¿ç”¨è¡¨åç§°åˆ«åï¼š 123SELECT p.LastName, p.FirstNameFROM Persons pWHERE p.LastName=&#x27;Adams&#x27; AND p.FirstName=&#x27;John&#x27;; ä½¿ç”¨åˆ—ååˆ«åï¼š 1SELECT LastName &quot;Family&quot;, FirstName &quot;Name&quot; FROM Persons; ğŸ“¢ æ³¨æ„ï¼š å®é™…åº”ç”¨æ—¶ï¼Œè¿™ä¸ª AS å¯ä»¥çœç•¥ï¼Œä½†æ˜¯åˆ—åˆ«åéœ€è¦åŠ ä¸Š &quot; &quot;ã€‚ ğŸš JOIN â€“ å¤šè¡¨å…³è”JOIN ç”¨äºæ ¹æ®ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­çš„åˆ—ä¹‹é—´çš„å…³ç³»ï¼Œä»è¿™äº›è¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚ æœ‰æ—¶ä¸ºäº†å¾—åˆ°å®Œæ•´çš„ç»“æœï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸¤ä¸ªæˆ–æ›´å¤šçš„è¡¨ä¸­è·å–ç»“æœã€‚æˆ‘ä»¬å°±éœ€è¦æ‰§è¡Œ joinã€‚ æ•°æ®åº“ä¸­çš„è¡¨å¯é€šè¿‡é”®å°†å½¼æ­¤è”ç³»èµ·æ¥ã€‚ä¸»é”®ï¼ˆPrimary Keyï¼‰æ˜¯ä¸€ä¸ªåˆ—ï¼Œåœ¨è¿™ä¸ªåˆ—ä¸­çš„æ¯ä¸€è¡Œçš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚åœ¨è¡¨ä¸­ï¼Œæ¯ä¸ªä¸»é”®çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯åœ¨ä¸é‡å¤æ¯ä¸ªè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®çš„æƒ…å†µä¸‹ï¼ŒæŠŠè¡¨é—´çš„æ•°æ®äº¤å‰æ†ç»‘åœ¨ä¸€èµ·ã€‚ å¦‚å›¾ï¼Œâ€Id_Pâ€ åˆ—æ˜¯ Persons è¡¨ä¸­çš„çš„ä¸»é”®ã€‚è¿™æ„å‘³ç€æ²¡æœ‰ä¸¤è¡Œèƒ½å¤Ÿæ‹¥æœ‰ç›¸åŒçš„ Id_Pã€‚å³ä½¿ä¸¤ä¸ªäººçš„å§“åå®Œå…¨ç›¸åŒï¼ŒId_P ä¹Ÿå¯ä»¥åŒºåˆ†ä»–ä»¬ã€‚ â¤ï¸ ä¸ºäº†ä¸‹é¢å®éªŒçš„ç»§ç»­ï¼Œæˆ‘ä»¬éœ€è¦å†åˆ›å»ºä¸€ä¸ªè¡¨ï¼šOrdersã€‚ 1234567create table orders (id_o number,orderno number,id_p number);insert into orders values(1,11111,1);insert into orders values(2,22222,2);insert into orders values(3,33333,3);insert into orders values(4,44444,4);insert into orders values(6,66666,6);select * from orders; å¦‚å›¾ï¼Œâ€Id_Oâ€ åˆ—æ˜¯ Orders è¡¨ä¸­çš„çš„ä¸»é”®ï¼ŒåŒæ—¶ï¼Œâ€Ordersâ€ è¡¨ä¸­çš„ â€œId_Pâ€ åˆ—ç”¨äºå¼•ç”¨ â€œPersonsâ€ è¡¨ä¸­çš„äººï¼Œè€Œæ— éœ€ä½¿ç”¨ä»–ä»¬çš„ç¡®åˆ‡å§“åã€‚ 1select * from persons p,orders o where p.id_p=o.id_p; å¯ä»¥çœ‹åˆ°ï¼Œâ€Id_Pâ€ åˆ—æŠŠä¸Šé¢çš„ä¸¤ä¸ªè¡¨è”ç³»äº†èµ·æ¥ã€‚ è¯­æ³•ï¼š 1234select åˆ—åfrom è¡¨AINNER|LEFT|RIGHT|FULL JOIN è¡¨BON è¡¨Aä¸»é”®åˆ— = è¡¨Bå¤–é”®åˆ—; ä¸åŒçš„ SQL JOINï¼š ä¸‹é¢åˆ—å‡ºäº†æ‚¨å¯ä»¥ä½¿ç”¨çš„ JOIN ç±»å‹ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚ JOIN: å¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ INNER JOIN: å†…éƒ¨è¿æ¥ï¼Œè¿”å›ä¸¤è¡¨ä¸­åŒ¹é…çš„è¡Œ LEFT JOIN: å³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ RIGHT JOIN: å³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ FULL JOIN: åªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œå°±è¿”å›è¡Œ å®ä¾‹ï¼š å¦‚æœæˆ‘ä»¬å¸Œæœ›åˆ—å‡ºæ‰€æœ‰äººçš„å®šè´­ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ SELECT è¯­å¥ï¼š 12345SELECT p.LastName, p.FirstName, o.OrderNoFROM Persons pINNER JOIN Orders oON p.Id_P = o.Id_PORDER BY p.LastName DESC; ğŸšœ UNION â€“ åˆå¹¶ç»“æœé›†UNION æ“ä½œç¬¦ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†ã€‚ UNION è¯­æ³•ï¼š 123SELECT åˆ—å FROM è¡¨AUNIONSELECT åˆ—å FROM è¡¨B; ğŸ“¢ æ³¨æ„ï¼š UNION æ“ä½œç¬¦é»˜è®¤ä¸ºé€‰å–ä¸åŒçš„å€¼ã€‚å¦‚æœæŸ¥è¯¢ç»“æœéœ€è¦æ˜¾ç¤ºé‡å¤çš„å€¼ï¼Œè¯·ä½¿ç”¨ UNION ALLã€‚ UNION ALL è¯­æ³•ï¼š 123SELECT åˆ—å FROM è¡¨AUNION ALLSELECT åˆ—å FROM è¡¨B; å¦å¤–ï¼ŒUNION ç»“æœé›†ä¸­çš„åˆ—åæ€»æ˜¯ç­‰äº UNION ä¸­ç¬¬ä¸€ä¸ª SELECT è¯­å¥ä¸­çš„åˆ—åã€‚ ä¸ºäº†å®éªŒæ‰€éœ€ï¼Œåˆ›å»º Person_b è¡¨ï¼š 1234567891011121314CREATE TABLE Persons_b(Id_P int,LastName varchar(255),FirstName varchar(255),Address varchar(255),City varchar(255));INSERT INTO Persons_b VALUES (1, &#x27;Bill&#x27;, &#x27;Gates&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Londo&#x27;);INSERT INTO Persons_b VALUES (2, &#x27;John&#x27;, &#x27;Adams&#x27;, &#x27;Oxford Street&#x27;, &#x27;nBeijing&#x27;);INSERT INTO Persons_b VALUES (3, &#x27;George&#x27;, &#x27;Bush&#x27;, &#x27;Fifth Avenue&#x27;, &#x27;Beijing&#x27;);INSERT INTO Persons_b VALUES (4, &#x27;Thomas&#x27;, &#x27;Carter&#x27;, &#x27;Changan Street&#x27;, &#x27;New York&#x27;);INSERT INTO Persons_b VALUES (5, &#x27;William&#x27;, &#x27;Carter&#x27;, &#x27;Xuanwumen 10&#x27;, &#x27;Beijing&#x27;);select * from persons_b; å®ä¾‹ï¼š ä½¿ç”¨ UNION å‘½ä»¤ï¼š åˆ—å‡º persons å’Œ persons_b ä¸­ä¸åŒçš„äººï¼š 123select * from personsUNIONselect * from persons_b; ğŸ“¢ æ³¨æ„ï¼š UNION å†…éƒ¨çš„ SELECT è¯­å¥å¿…é¡»æ‹¥æœ‰ç›¸åŒæ•°é‡çš„åˆ—ã€‚åˆ—ä¹Ÿå¿…é¡»æ‹¥æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹ã€‚åŒæ—¶ï¼Œæ¯æ¡ SELECT è¯­å¥ä¸­çš„åˆ—çš„é¡ºåºå¿…é¡»ç›¸åŒã€‚ ğŸšŒ NOT NULL â€“ éç©ºNOT NULL çº¦æŸå¼ºåˆ¶åˆ—ä¸æ¥å— NULL å€¼ã€‚ NOT NULL çº¦æŸå¼ºåˆ¶å­—æ®µå§‹ç»ˆåŒ…å«å€¼ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸å‘å­—æ®µæ·»åŠ å€¼ï¼Œå°±æ— æ³•æ’å…¥æ–°è®°å½•æˆ–è€…æ›´æ–°è®°å½•ã€‚ è¯­æ³•ï¼š 1234CREATE TABLE è¡¨(åˆ— int NOT NULL); å¦‚ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè®¾ç½®åˆ—å€¼ä¸èƒ½ä¸ºç©ºã€‚ å®ä¾‹ï¼š 12create table lucifer (id number not null);insert into lucifer values (NULL); ğŸ“¢ æ³¨æ„ï¼š å¦‚æœæ’å…¥ NULL å€¼ï¼Œåˆ™ä¼šæŠ¥é”™ ORA-01400 æç¤ºæ— æ³•æ’å…¥ï¼ â­ï¸ æ‹“å±•å°çŸ¥è¯†ï¼šNOT NULL ä¹Ÿå¯ä»¥ç”¨äºæŸ¥è¯¢æ¡ä»¶ï¼š 1select * from persons where FirstName is not null; åŒç†ï¼ŒNULL ä¹Ÿå¯ï¼š 1select * from persons where FirstName is null; æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹ï¼ ğŸš VIEW â€“ è§†å›¾åœ¨ SQL ä¸­ï¼Œè§†å›¾æ˜¯åŸºäº SQL è¯­å¥çš„ç»“æœé›†çš„å¯è§†åŒ–çš„è¡¨ã€‚ è§†å›¾åŒ…å«è¡Œå’Œåˆ—ï¼Œå°±åƒä¸€ä¸ªçœŸå®çš„è¡¨ã€‚è§†å›¾ä¸­çš„å­—æ®µå°±æ˜¯æ¥è‡ªä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®åº“ä¸­çš„çœŸå®çš„è¡¨ä¸­çš„å­—æ®µã€‚æˆ‘ä»¬å¯ä»¥å‘è§†å›¾æ·»åŠ  SQL å‡½æ•°ã€WHERE ä»¥åŠ JOIN è¯­å¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æäº¤æ•°æ®ï¼Œå°±åƒè¿™äº›æ¥è‡ªäºæŸä¸ªå•ä¸€çš„è¡¨ã€‚ è¯­æ³•ï¼š 1234CREATE VIEW è§†å›¾å ASSELECT åˆ—åFROM è¡¨åWHERE æŸ¥è¯¢æ¡ä»¶; ğŸ“¢ æ³¨æ„ï¼š è§†å›¾æ€»æ˜¯æ˜¾ç¤ºæœ€è¿‘çš„æ•°æ®ã€‚æ¯å½“ç”¨æˆ·æŸ¥è¯¢è§†å›¾æ—¶ï¼Œæ•°æ®åº“å¼•æ“é€šè¿‡ä½¿ç”¨ SQL è¯­å¥æ¥é‡å»ºæ•°æ®ã€‚ å®ä¾‹ï¼š ä¸‹é¢ï¼Œæˆ‘ä»¬å°† Persons è¡¨ä¸­ä½åœ¨ Beijing çš„äººç­›é€‰å‡ºæ¥åˆ›å»ºè§†å›¾ï¼š 12create view persons_beijing asselect * from persons where city=&#x27;Beijing&#x27;; æŸ¥è¯¢ä¸Šé¢è¿™ä¸ªè§†å›¾ï¼š å¦‚æœéœ€è¦æ›´æ–°è§†å›¾ä¸­çš„åˆ—æˆ–è€…å…¶ä»–ä¿¡æ¯ï¼Œæ— éœ€åˆ é™¤ï¼Œä½¿ç”¨ CREATE OR REPLACE VIEW é€‰é¡¹ï¼š 1234CREATE OR REPLACE VIEW è§†å›¾å ASSELECT åˆ—åFROM è¡¨åWHERE æŸ¥è¯¢æ¡ä»¶; å®ä¾‹ï¼š ç°åœ¨éœ€è¦ç­›é€‰å‡ºï¼ŒLASTNAME ä¸º Gates çš„è®°å½•ï¼š 12create or replace view persons_beijing asselect * from persons where lastname=&#x27;Gates&#x27;; åˆ é™¤è§†å›¾å°±æ¯”è¾ƒç®€å•ï¼Œè·Ÿè¡¨å·®ä¸å¤šï¼Œä½¿ç”¨ DROP å³å¯ï¼š 1drop view persons_beijing; â¤ï¸ æœ¬ç« è¦è®²çš„é«˜çº§è¯­è¨€å°±å…ˆåˆ°æ­¤ä¸ºæ­¢ï¼Œä¸å®œä¸€æ¬¡æ€§ä»‹ç»å¤ªå¤š~ ğŸ¯ SQL å¸¸ç”¨å‡½æ•°å­¦ä¹ SQL æ‹¥æœ‰å¾ˆå¤šå¯ç”¨äºè®¡æ•°å’Œè®¡ç®—çš„å†…å»ºå‡½æ•°ã€‚ å‡½æ•°çš„ä½¿ç”¨è¯­æ³•ï¼š 1SELECT function(åˆ—) FROM è¡¨; â¤ï¸ ä¸‹é¢å°±æ¥çœ‹çœ‹æœ‰å“ªäº›å¸¸ç”¨çš„å‡½æ•°ï¼ ğŸ” AVG â€“ å¹³å‡å€¼AVG å‡½æ•°è¿”å›æ•°å€¼åˆ—çš„å¹³å‡å€¼ã€‚NULL å€¼ä¸åŒ…æ‹¬åœ¨è®¡ç®—ä¸­ã€‚ è¯­æ³•ï¼š 1SELECT AVG(åˆ—å) FROM è¡¨å; å®ä¾‹ï¼š è®¡ç®— â€œordernoâ€ å­—æ®µçš„å¹³å‡å€¼ã€‚ 1select avg(orderno) from orders; å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ï¼Œä¾‹å¦‚æŸ¥è¯¢ä½äºå¹³å‡å€¼çš„è®°å½•ï¼š 1select * from orders where orderno &lt; (select avg(orderno) from orders); ğŸ• COUNT â€“ æ±‡æ€»è¡Œæ•°COUNT() å‡½æ•°è¿”å›åŒ¹é…æŒ‡å®šæ¡ä»¶çš„è¡Œæ•°ã€‚ è¯­æ³•ï¼š count() ä¸­å¯ä»¥æœ‰ä¸åŒçš„è¯­æ³•ï¼š COUNT(*) ï¼šè¿”å›è¡¨ä¸­çš„è®°å½•æ•°ã€‚ COUNT(DISTINCT åˆ—å) ï¼šè¿”å›æŒ‡å®šåˆ—çš„ä¸åŒå€¼çš„æ•°ç›®ã€‚ COUNT(åˆ—å) ï¼šè¿”å›æŒ‡å®šåˆ—çš„å€¼çš„æ•°ç›®ï¼ˆNULL ä¸è®¡å…¥ï¼‰ã€‚ 123SELECT COUNT(*) FROM è¡¨å;SELECT COUNT(DISTINCT åˆ—å) FROM è¡¨å;SELECT COUNT(åˆ—å) FROM è¡¨å; å®ä¾‹ï¼š COUNT(*) ï¼š 1select count(*) from persons; COUNT(DISTINCT åˆ—å) ï¼š 1select count(distinct city) from persons; COUNT(åˆ—å) ï¼š 1select count(city) from persons; ğŸ˜ MAX â€“ æœ€å¤§å€¼MAX å‡½æ•°è¿”å›ä¸€åˆ—ä¸­çš„æœ€å¤§å€¼ã€‚NULL å€¼ä¸åŒ…æ‹¬åœ¨è®¡ç®—ä¸­ã€‚ è¯­æ³•ï¼š 1SELECT MAX(åˆ—å) FROM è¡¨å; MIN å’Œ MAX ä¹Ÿå¯ç”¨äºæ–‡æœ¬åˆ—ï¼Œä»¥è·å¾—æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„æœ€é«˜æˆ–æœ€ä½å€¼ã€‚ å®ä¾‹ï¼š 1select max(orderno) from orders; ğŸ¢ MIN â€“ æœ€å°å€¼MIN å‡½æ•°è¿”å›ä¸€åˆ—ä¸­çš„æœ€å°å€¼ã€‚NULL å€¼ä¸åŒ…æ‹¬åœ¨è®¡ç®—ä¸­ã€‚ è¯­æ³•ï¼š 1SELECT MIN(åˆ—å) FROM è¡¨å; å®ä¾‹ï¼š 1select min(orderno) from orders; ğŸ° SUM â€“ æ±‚å’ŒSUM å‡½æ•°è¿”å›æ•°å€¼åˆ—çš„æ€»æ•°ï¼ˆæ€»é¢ï¼‰ã€‚ è¯­æ³•ï¼š 1SELECT SUM(åˆ—å) FROM è¡¨å; å®ä¾‹ï¼š 1select sum(orderno) from orders; ğŸª GROUP BY â€“ åˆ†ç»„GROUP BY è¯­å¥ç”¨äºç»“åˆåˆè®¡å‡½æ•°ï¼Œæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚ è¯­æ³•ï¼š 1234SELECT åˆ—åA, ç»Ÿè®¡å‡½æ•°(åˆ—åB)FROM è¡¨åWHERE æŸ¥è¯¢æ¡ä»¶GROUP BY åˆ—åA; å®ä¾‹ï¼š è·å– Persons è¡¨ä¸­ä½åœ¨åŒ—äº¬çš„æ€»äººæ•°ï¼Œæ ¹æ® LASTNAME åˆ†ç»„ï¼š 123select lastname,count(city) from personswhere city=&#x27;Beijing&#x27;group by lastname; å¦‚æœä¸åŠ  GROUP BY åˆ™ä¼šæŠ¥é”™ï¼š ä¹Ÿå°±æ˜¯å¸¸è§çš„ ORA-00937 ä¸æ˜¯å•ç»„åˆ†ç»„å‡½æ•°çš„é”™è¯¯ã€‚ ğŸ­ HAVING â€“ å¥å°¾è¿æ¥åœ¨ SQL ä¸­å¢åŠ  HAVING å­å¥åŸå› æ˜¯ï¼ŒWHERE å…³é”®å­—æ— æ³•ä¸åˆè®¡å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚ è¯­æ³•ï¼š 12345SELECT åˆ—åA, ç»Ÿè®¡å‡½æ•°(åˆ—åB)FROM table_nameWHERE æŸ¥è¯¢æ¡ä»¶GROUP BY åˆ—åAHAVING ç»Ÿè®¡å‡½æ•°(åˆ—åB) æŸ¥è¯¢æ¡ä»¶; å®ä¾‹ï¼š è·å– Persons è¡¨ä¸­ä½åœ¨åŒ—äº¬çš„æ€»äººæ•°å¤§äº 1 çš„ LASTNAMEï¼Œæ ¹æ® LASTNAME åˆ†ç»„ï¼š 1234select lastname,count(city) from personswhere city=&#x27;Beijing&#x27;group by lastnamehaving count(city) &gt; 1; ğŸ· UCASE&#x2F;UPPER â€“ å¤§å†™UCASE/UPPER å‡½æ•°æŠŠå­—æ®µçš„å€¼è½¬æ¢ä¸ºå¤§å†™ã€‚ è¯­æ³•ï¼š 1select upper(åˆ—å) from è¡¨å; å®ä¾‹ï¼š é€‰å– â€œLastNameâ€ å’Œ â€œFirstNameâ€ åˆ—çš„å†…å®¹ï¼Œç„¶åæŠŠ â€œLastNameâ€ åˆ—è½¬æ¢ä¸ºå¤§å†™ï¼š 1select upper(lastname),firstname from persons; ğŸ¶ LCASE&#x2F;LOWER â€“ å°å†™LCASE/LOWER å‡½æ•°æŠŠå­—æ®µçš„å€¼è½¬æ¢ä¸ºå°å†™ã€‚ è¯­æ³•ï¼š 1select lower(åˆ—å) from è¡¨å; å®ä¾‹ï¼š é€‰å– â€œLastNameâ€ å’Œ â€œFirstNameâ€ åˆ—çš„å†…å®¹ï¼Œç„¶åæŠŠ â€œLastNameâ€ åˆ—è½¬æ¢ä¸ºå°å†™ï¼š 1select lower(lastname),firstname from persons; ğŸ‘› LEN&#x2F;LENGTH â€“ è·å–é•¿åº¦LEN/LENGTH å‡½æ•°è¿”å›æ–‡æœ¬å­—æ®µä¸­å€¼çš„é•¿åº¦ã€‚ è¯­æ³•ï¼š 1select length(åˆ—å) from è¡¨å; å®ä¾‹ï¼š è·å– LASTNAME çš„å€¼å­—ç¬¦é•¿åº¦ï¼š 1select length(lastname),lastname from persons; ğŸ— ROUND â€“ æ•°å€¼å–èˆROUND å‡½æ•°ç”¨äºæŠŠæ•°å€¼å­—æ®µèˆå…¥ä¸ºæŒ‡å®šçš„å°æ•°ä½æ•°ã€‚ è¯­æ³•ï¼š 1select round(åˆ—å,ç²¾åº¦) from è¡¨å; å®ä¾‹ï¼š ä¿ç•™ 2 ä½ï¼š 12select round(1.1314,2) from dual;select round(1.1351,2) from dual; ğŸ“¢ æ³¨æ„ï¼šROUND å–èˆæ˜¯ å››èˆäº”å…¥ çš„ï¼ å–æ•´ï¼š 12select round(1.1351,0) from dual;select round(1.56,0) from dual; ğŸ NOW&#x2F;SYSDATE â€“ å½“å‰æ—¶é—´NOW/SYSDATE å‡½æ•°è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ è¯­æ³•ï¼š 1select sysdate from è¡¨å; å®ä¾‹ï¼š è·å–å½“å‰æ—¶é—´ï¼š 1select sysdate from dual; ğŸ“¢ æ³¨æ„ï¼š å¦‚æœæ‚¨åœ¨ä½¿ç”¨ Sql Server æ•°æ®åº“ï¼Œè¯·ä½¿ç”¨ getdate() å‡½æ•°æ¥è·å¾—å½“å‰çš„æ—¥æœŸæ—¶é—´ã€‚ ğŸº å†™åœ¨æœ€å**ä¸Šè¿°å¦‚æœéƒ½å­¦å®Œäº†çš„è¯ï¼Œå¯ä»¥æ¥åšä¸ªå°æµ‹éªŒï¼šSQL æµ‹éªŒ**ï¼Œçœ‹çœ‹æŒæ¡çš„æ€ä¹ˆæ ·ï¼","tags":["SQL"],"categories":["SQL"]},{"title":"PythonåŸºç¡€æ•™ç¨‹","path":"/2024/02/26/PythonåŸºç¡€æ•™ç¨‹/","content":"python åŸºç¡€æ•™ç¨‹python æ•™ç¨‹ å»–é›ªå³° ç®€ä»‹python æ˜¯ä¸€ç§ç®€å•ä¼˜é›…çš„è„šæœ¬è¯­è¨€ï¼ŒåŒ…å«éå¸¸å®Œå–„çš„åŸºç¡€ä»£ç åº“, è¦†ç›–ç½‘ç»œã€æ–‡ä»¶ã€GUIã€ æ•°æ®åº“ã€æ–‡æœ¬ç­‰, é™¤äº†å†…ç½®åº“ä»¥å¤–è¿˜æœ‰å¤§é‡ç¬¬ä¸‰æ–¹åº“ã€‚ python çš„é€‚ç”¨èŒƒå›´: webåº”ç”¨ã€è„šæœ¬ç¨‹åºå’Œè‡ªåŠ¨åŒ–å·¥å…· å®‰è£…python æ˜¯è·¨å¹³å°çš„ï¼Œè§£é‡Šå‹çš„è„šæœ¬è¯­è¨€ (è„šæœ¬è¯­è¨€åŸºæœ¬éƒ½æ˜¯è·¨å¹³å°çš„)python æœ‰ 2.x å’Œ 3.x ä¸¤ä¸ªç‰ˆæœ¬ï¼Œè¾ƒå¤šçš„åº”ç”¨éƒ½æ˜¯åŸºäº 2.x å¼€å‘çš„ï¼Œç›®å‰çš„ä¸»æµç‰ˆæœ¬åº”è¯¥æ˜¯ 3.x; å®‰è£… python å°±æ˜¯å®‰è£… pythonè§£é‡Šå™¨, å¾—åˆ°ä¸€ä¸ªå‘½ä»¤è¡Œäº¤äº’ç¯å¢ƒ. mac brew install python3 ubuntu sodu apt-get install python3 window ç›´æ¥åˆ°å®˜ç½‘ä¸‹è½½å¯¹åº”å®‰è£…åŒ… å®‰è£…åå°† python å®‰è£…ç›®å½•ï¼Œæ·»åŠ åˆ°ç¯å¢ƒå˜é‡, ç„¶åæ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥ python ï¼Œ è¿›å…¥äº¤äº’ç¯å¢ƒ æ³¨æ„ windows ç”¨æˆ·åœ¨ git bash ä¸‹ï¼Œè¾“å…¥ pythonï¼Œä¸èƒ½è¿›å…¥åˆ° python äº¤äº’ç¯å¢ƒ, æ‰§è¡Œ winpty python è¿›å…¥äº¤äº’ç¯å¢ƒ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ python è¿›å…¥äº¤äº’æ¨¡å¼ è¿›å…¥äº¤äº’æ¨¡å¼123&gt; python&gt;&gt;&gt; print(&#x27;hello world&#x27;)&gt;&gt;&gt; exit() æ‰§è¡Œ python è„šæœ¬ æ‰§è¡Œ python è„šæœ¬1python hello.py å¼€å§‹èœå•å¯ä»¥æ‰¾åˆ° python ä¸“ç”¨ REPL å·¥å…· ( IDLE ) python è§£é‡Šå™¨python ä»£ç æ–‡ä»¶ä»¥.pyä¸ºåç¼€ï¼Œç”± python è§£é‡Šå™¨è§£é‡Šæ‰§è¡Œã€‚ python æœ‰å¤šç§è§£é‡Šå™¨: CPython å®˜æ–¹è§£é‡Šå™¨ï¼ŒC è¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥å« CPython, å‘½ä»¤è¡Œä¸‹è¾“å…¥ python å°±æ˜¯è¿›å…¥ CPython è§£é‡Šå™¨ç¯å¢ƒ IPython å¢å¼ºç‰ˆçš„ CPython PyPy æ‰§è¡Œé€Ÿåº¦è¾ƒå¿« Jython æŠŠ python ç¼–è¯‘æˆ java å­—èŠ‚ç æ‰§è¡Œ IronPython è¿è¡Œåœ¨.NET å¹³å°çš„ pyton è§£é‡Šå™¨ å‘½ä»¤è¡Œäº¤äº’ç¯å¢ƒå¯åœ¨å‘½ä»¤è¡Œäº¤äº’ç¯å¢ƒæ‰§è¡Œï¼Œæˆ–ä¿å­˜ä¸º hello.py æ–‡ä»¶ 123&gt; python&gt;&gt;&gt;print(&#x27;hello world&#x27;)&gt;&gt;&gt;exit() æ‰§è¡Œpythonè„šæœ¬1234567891011# ç”¨pythonå‘½ä»¤æ‰§è¡ŒæŒ‡å®špythonè„šæœ¬python hello.py# Mac æˆ– Linuxä¸Šè¿˜å¯ç›´æ¥è¿è¡Œpythonè„šæœ¬# ---- hello.py ----&gt;#!/usr/bin/env python3print(&#x27;hello world&#x27;)&gt; chmod a+x hello.py&gt; ./hello.py è¾“å‡º123print(&#x27;hello python&#x27;)print(&#x27;nice&#x27;, &#x27;to&#x27;, &#x27;meet&#x27;, &#x27;you&#x27;) # å¯æ‰“å°å¤šä¸ªå­—ç¬¦ä¸² åŒ console.logprint(&#x27;100+200=&#x27;, 100+200) # é€—å·åˆ†éš”çš„æ¯ä¸ªè¡¨è¾¾å¼é—´åŠ ç©ºæ ¼ è¾“å…¥123name = input(&#x27;input your name:&#x27;) # python3name = raw_input(&#x27;input your name:&#x27;) # python2print(name) è¯­æ³•python çš„è¯­æ³•æ¯”è¾ƒç®€å• ç”¨ç¼©è¿›è¡¨ç¤ºä»£ç å—; ä¸ç”¨æ‹¬å·,èŠ±æ‹¬å·åˆ’åˆ†ä»£ç å— ä¸ç”¨åˆ†å·è¡¨ç¤ºè¯­å¥ç»“æŸ æ ‡è¯†ç¬¦å¤§å°å†™æ•æ„Ÿ ä¸éœ€è¦å£°æ˜å˜é‡ ä¸éœ€è¦ var ç­‰å…³é”®å­— 1234567# print absolute valuea = -120if a &gt;= 0: print(a)else: print(-a) æ•°æ®ç±»å‹å’Œå˜é‡python çš„æ•°æ®ç±»å‹åŒ…æ‹¬: æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€å­—èŠ‚å‹ã€å¸ƒå°”å€¼ã€ç©ºå€¼ã€åˆ—è¡¨ã€å­—å…¸å’Œè‡ªå®šä¹‰ç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637383940411, 100, -80, 0xfa # æ•´æ•°1.23 1.23e9, 1.2e-5 # æµ®ç‚¹æ•°# å­—ç¬¦ä¸² å•åŒå¼•å·äº’ç›¸åŒ…å«&quot;what&#x27;s your name&quot;&#x27;I\\&#x27;m &quot;OK&quot;&#x27;# raw string å†…éƒ¨çš„ç‰¹æ®Šå­—ç¬¦éƒ½åšæ™®é€šå­—ç¬¦å¯¹å¾…r&#x27;\\the-school &#x27;# ä¸‰å¼•å· å¯è¾“å‡ºæ¢å›å­—ç¬¦ä¸²&#x27;&#x27;&#x27;line1,line2&#x27;&#x27;&#x27;r&#x27;&#x27;&#x27;line one \\twill not escape&#x27;&#x27;&#x27;# f-string å˜é‡æ’å€¼name = &#x27;Alice&#x27;f&#x27;hi, &#123;name&#125;&#x27;# å­—èŠ‚å‹ bytesb&#x27;ABC&#x27;len(&#x27;abc&#x27;) # 3b&#x27;hello&#x27;.decode(&#x27;ascii&#x27;)len(b&#x27;good&#x27;) # 4# å¸ƒå°”å€¼True False# é€»è¾‘è¿ç®—ç¬¦and or not# ç©ºå€¼None# æ¡ä»¶åˆ¤æ–­if age &gt;= 18: print(&#x27;adult&#x27;)else: print(&#x27;teenager&#x27;) python æ˜¯å¼±ç±»å‹è¯­è¨€ 1234a = 100 # æ•´æ•°print(a)a = &#x27;hello&#x27; # å­—ç¬¦ä¸²print(a) python ä¸­å¸¸é‡ä¹ æƒ¯ç”¨å…¨å¤§å†™å­—æ¯è¡¨ç¤º, å¦‚ PI=3.1415, å¹¶éçœŸæ­£æ„ä¹‰çš„å¸¸é‡(åŒ JS) python çš„ä¸¤ç§é™¤æ³•ï¼š 1234567print(10 / 3) # 3.33.. æ™®é€šé™¤æ³•/çœŸé™¤æ³•ï¼Œç»“æœä¸ºæµ®ç‚¹æ•°print(9 / 3) # 3.0 çœŸé™¤æ³•è®¡ç®—ç»“æœæ€»æ˜¯æµ®ç‚¹æ•°ï¼Œå³ä½¿æ˜¯ä¸¤ä¸ªæ•´æ•°æ°å¥½æ•´é™¤print(10 // 3) # 3 åœ°æ¿é™¤ ç»“æœä¸ºæ•´æ•° æ•´é™¤(æœ‰å°æ•° åˆ™å‘ä¸‹å–æ•´) ç»“æœä¸ºæ•´æ•°print(20 // 3) # 6print(10 % 3) # 1 æ¨¡è¿ç®—ï¼Œå–ä½™æ•° python çš„æ•´æ•°å’Œæµ®ç‚¹æ•°æ²¡æœ‰å¤§å°é™åˆ¶ å­—ç¬¦ä¸²å’Œç¼–ç å­—ç¬¦ç¼–ç å› ä¸ºè®¡ç®—æœºåªèƒ½å¤„ç†æ•°å­—ï¼Œå¦‚æœè¦å¤„ç†æ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆæŠŠæ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—æ‰èƒ½å¤„ç†ã€‚æœ€æ—©çš„è®¡ç®—æœºåœ¨è®¾è®¡æ—¶é‡‡ç”¨ 8 ä¸ªæ¯”ç‰¹ï¼ˆbitï¼‰ä½œä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ ASCII 1 ä¸ªå­—èŠ‚ï¼Œæœ€å¤§ 255 ç”±äºè®¡ç®—æœºæ˜¯ç¾å›½äººå‘æ˜çš„ï¼Œå› æ­¤ï¼Œæœ€æ—©åªæœ‰ 127 ä¸ªå­—ç¬¦è¢«ç¼–ç åˆ°è®¡ç®—æœºé‡Œï¼Œä¹Ÿå°±æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç¬¦å·ï¼Œè¿™ä¸ªç¼–ç è¡¨è¢«ç§°ä¸º ASCII ç¼–ç ï¼Œæ¯”å¦‚å¤§å†™å­—æ¯ A çš„ç¼–ç æ˜¯ 65ï¼Œå°å†™å­—æ¯ z çš„ç¼–ç æ˜¯ 122 GB2312 å¤„ç†ä¸­æ–‡æ˜¾ç„¶ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œä¸”è¿˜ä¸èƒ½å’Œ ASCII ç¼–ç å†²çªï¼Œæ‰€ä»¥ï¼Œä¸­å›½åˆ¶å®šäº† GB2312 ç¼–ç ï¼Œç”¨æ¥æŠŠä¸­æ–‡ç¼–è¿›å» Unicode æœ€å¸¸ç”¨çš„æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼ˆå¦‚æœè¦ç”¨åˆ°éå¸¸ååƒ»çš„å­—ç¬¦ï¼Œå°±éœ€è¦ 4 ä¸ªå­—èŠ‚ï¼‰ å…¨ä¸–ç•Œæœ‰ä¸Šç™¾ç§è¯­è¨€ï¼Œæ—¥æœ¬æŠŠæ—¥æ–‡ç¼–åˆ° Shift_JIS é‡Œï¼ŒéŸ©å›½æŠŠéŸ©æ–‡ç¼–åˆ° Euc-kr é‡Œï¼Œå„å›½æœ‰å„å›½çš„æ ‡å‡†ï¼Œå°±ä¼šä¸å¯é¿å…åœ°å‡ºç°å†²çªï¼Œç»“æœå°±æ˜¯ï¼Œåœ¨å¤šè¯­è¨€æ··åˆçš„æ–‡æœ¬ä¸­ï¼Œæ˜¾ç¤ºå‡ºæ¥ä¼šæœ‰ä¹±ç  å› æ­¤ï¼ŒUnicode åº”è¿è€Œç”Ÿã€‚Unicode æŠŠæ‰€æœ‰è¯­è¨€éƒ½ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šå†æœ‰ä¹±ç é—®é¢˜äº† UTF-8 ç”¨äºå­˜å‚¨å’Œä¼ è¾“ è‹±æ–‡ 1 ä¸ªå­—èŠ‚ ä¸­æ–‡ 3 ä¸ªå­—èŠ‚ ç»Ÿä¸€æˆ Unicode ç¼–ç ï¼Œè§£å†³äº†ä¹±ç é—®é¢˜ï¼›ä½†æ˜¯ï¼Œå¦‚æœä½ å†™çš„æ–‡æœ¬åŸºæœ¬ä¸Šå…¨éƒ¨æ˜¯è‹±æ–‡çš„è¯ï¼Œç”¨ Unicode ç¼–ç æ¯” ASCII ç¼–ç éœ€è¦å¤šä¸€å€çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å­˜å‚¨å’Œä¼ è¾“ä¸Šå°±ååˆ†ä¸åˆ’ç®—ã€‚æ‰€ä»¥ï¼Œæœ¬ç€èŠ‚çº¦çš„ç²¾ç¥ï¼Œåˆå‡ºç°äº†æŠŠ Unicode ç¼–ç è½¬åŒ–ä¸ºâ€œå¯å˜é•¿ç¼–ç â€çš„ UTF-8 ç¼–ç ã€‚UTF-8 ç¼–ç æŠŠä¸€ä¸ª Unicode å­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ 1-6 ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ 1 ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯ 3 ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ 4-6 ä¸ªå­—èŠ‚ã€‚å¦‚æœä½ è¦ä¼ è¾“çš„æ–‡æœ¬åŒ…å«å¤§é‡è‹±æ–‡å­—ç¬¦ï¼Œç”¨ UTF-8 ç¼–ç å°±èƒ½èŠ‚çœç©ºé—´ï¼š åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨ Unicode ç¼–ç ï¼Œå½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…éœ€è¦ä¼ è¾“çš„æ—¶å€™ï¼Œå°±è½¬æ¢ä¸º UTF-8 ç¼–ç ã€‚ ç”¨è®°äº‹æœ¬ç¼–è¾‘çš„æ—¶å€™ï¼Œä»æ–‡ä»¶è¯»å–çš„ UTF-8 å­—ç¬¦è¢«è½¬æ¢ä¸º Unicode å­—ç¬¦åˆ°å†…å­˜é‡Œï¼Œç¼–è¾‘å®Œæˆåï¼Œä¿å­˜çš„æ—¶å€™å†æŠŠ Unicode è½¬æ¢ä¸º UTF-8 ä¿å­˜åˆ°æ–‡ä»¶ æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæŠŠåŠ¨æ€ç”Ÿæˆçš„ Unicode å†…å®¹è½¬æ¢ä¸º UTF-8 å†ä¼ è¾“åˆ°æµè§ˆå™¨, æ‰€ä»¥ä½ çœ‹åˆ°å¾ˆå¤šç½‘é¡µçš„æºç ä¸Šä¼šæœ‰ç±»ä¼¼&lt;meta charset=&quot;UTF-8&quot; /&gt;çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºè¯¥ç½‘é¡µæ­£æ˜¯ç”¨çš„ UTF-8 ç¼–ç ã€‚ Python çš„å­—ç¬¦ä¸²åœ¨æœ€æ–°çš„ Python 3 ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä»¥ Unicode ç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPython çš„å­—ç¬¦ä¸²æ”¯æŒå¤šè¯­è¨€ 12345print(&#x27;åŒ…å«ä¸­æ–‡çš„str&#x27;)print(ord(&#x27;A&#x27;)) # å­—ç¬¦å¯¹åº”çš„ç¼–ç print(chr(66)) # ç¼–ç å¯¹åº”çš„å­—ç¬¦# çŸ¥é“å­—ç¬¦çš„ç¼–ç ï¼Œå¯ç”¨åå…­è¿›åˆ¶ è¾“å‡ºå­—ç¬¦print(&#x27;\\u4e2d\\u6587&#x27;) ç”±äº Python çš„å­—ç¬¦ä¸²ï¼Œåœ¨å†…å­˜ä¸­ä»¥ Unicode è¡¨ç¤ºï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”è‹¥å¹²ä¸ªå­—èŠ‚ã€‚å¦‚æœè¦åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæˆ–è€…ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œå°±éœ€è¦æŠŠ str å˜ä¸ºä»¥å­—èŠ‚ä¸ºå•ä½çš„ bytes ç”¨å¸¦ b å‰ç¼€çš„å•å¼•å·æˆ–åŒå¼•å·è¡¨ç¤ºbytesç±»å‹ 12strVal = &#x27;Hello&#x27;bytesVal = b&#x27;Hello&#x27; # bytesçš„æ¯ä¸ªå­—ç¬¦éƒ½åªå ç”¨ä¸€ä¸ªå­—èŠ‚ã€‚ ä»¥ Unicode è¡¨ç¤ºçš„ str é€šè¿‡ encode()æ–¹æ³•å¯ä»¥ç¼–ç ä¸ºæŒ‡å®šçš„ bytes 123print(&#x27;ABC&#x27;.encode(&#x27;ascii&#x27;)) # b&#x27;ABC&#x27;print(&#x27;ä¸­æ–‡&#x27;.encode(&#x27;utf-8&#x27;)) # b&#x27;\\xe4\\xb8\\xad\\xe6\\x96\\x87&#x27;&#x27;ä¸­æ–‡&#x27;.encode(&#x27;ascii&#x27;) # æŠ¥é”™ ä¸­æ–‡ä¸èƒ½ç¼–ç ä¸ºasciiçš„bytes åè¿‡æ¥ï¼Œå¦‚æœæˆ‘ä»¬ä»ç½‘ç»œæˆ–ç£ç›˜ä¸Šè¯»å–äº†å­—èŠ‚æµï¼Œé‚£ä¹ˆè¯»åˆ°çš„æ•°æ®å°±æ˜¯ bytesã€‚è¦æŠŠ bytes å˜ä¸º strï¼Œå°±éœ€è¦ç”¨ decode()æ–¹æ³•ï¼š 123456&gt;&gt;&gt; b&#x27;ABC&#x27;.decode(&#x27;ascii&#x27;)&#x27;ABC&#x27;&gt;&gt;&gt; b&#x27;\\xe4\\xb8\\xad\\xe6\\x96\\x87&#x27;.decode(&#x27;utf-8&#x27;)&#x27;ä¸­æ–‡&#x27;&gt;&gt;&gt; b&#x27;\\xe4\\xb8\\xad\\xff&#x27;.decode(&#x27;utf-8&#x27;, errors=&#x27;ignore&#x27;) # å¿½ç•¥é”™è¯¯çš„å­—èŠ‚ len()å‡½æ•°è®¡ç®—çš„æ˜¯ str çš„å­—ç¬¦æ•°ï¼Œä¸æ˜¯å­—ç¬¦ä¸²å ç”¨çš„å­—èŠ‚æ•°ï¼Œå¦‚æœæ¢æˆ bytesï¼Œlen()å‡½æ•°å°±è®¡ç®—å­—èŠ‚æ•° len(seq) è¿”å›åºåˆ—å…ƒç´ ä¸ªæ•° 12345678910&gt;&gt;&gt; len(&#x27;ABC&#x27;)3&gt;&gt;&gt; len(&#x27;ä¸­æ–‡&#x27;)2&gt;&gt;&gt; len(b&#x27;ABC&#x27;)3&gt;&gt;&gt; len(b&#x27;\\xe4\\xb8\\xad\\xe6\\x96\\x87&#x27;)6&gt;&gt;&gt; len(&#x27;ä¸­æ–‡&#x27;.encode(&#x27;utf-8&#x27;))6 å¯è§ï¼Œ1 ä¸ªä¸­æ–‡å­—ç¬¦ç»è¿‡ UTF-8 ç¼–ç åé€šå¸¸ä¼šå ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œè€Œ 1 ä¸ªè‹±æ–‡å­—ç¬¦åªå ç”¨ 1 ä¸ªå­—èŠ‚ ç”±äº Python æºä»£ç ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œå½“ä½ çš„æºä»£ç ä¸­åŒ…å«ä¸­æ–‡çš„æ—¶å€™ï¼Œåœ¨ä¿å­˜æºä»£ç æ—¶ï¼Œå°±éœ€è¦åŠ¡å¿…æŒ‡å®šä¿å­˜ä¸º UTF-8 ç¼–ç ã€‚å½“ Python è§£é‡Šå™¨è¯»å–æºä»£ç æ—¶ï¼Œä¸ºäº†è®©å®ƒæŒ‰ UTF-8 ç¼–ç è¯»å–ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨ä»£ç æ–‡ä»¶å¼€å¤´å£°æ˜ç¼–ç æ ¼å¼ï¼š 12345# é¦–è¡Œ hash-bang-line å‘Šè¯‰Linux/OS Xç³»ç»Ÿï¼Œ# è¿™æ˜¯ä¸€ä¸ªPythonå¯æ‰§è¡Œç¨‹åºï¼ŒWindowsç³»ç»Ÿä¼šå¿½ç•¥è¿™ä¸ªæ³¨é‡Šï¼›#!/usr/bin/env python3 # -*- coding: utf-8 -*- ## å‘Šè¯‰Pythonè§£é‡Šå™¨ï¼ŒæŒ‰ç…§UTF-8ç¼–ç è¯»å–æºä»£ç  æ ¼å¼åŒ–å­—ç¬¦ä¸²%sè¡¨ç¤ºç”¨å­—ç¬¦ä¸²æ›¿æ¢ï¼Œ%dè¡¨ç¤ºç”¨æ•´æ•°æ›¿æ¢ï¼Œæœ‰å‡ ä¸ª%?å ä½ç¬¦ï¼Œåé¢å°±è·Ÿå‡ ä¸ªå˜é‡æˆ–è€…å€¼ï¼Œé¡ºåºè¦å¯¹åº”å¥½ã€‚å¦‚æœåªæœ‰ä¸€ä¸ª%?ï¼Œæ‹¬å·å¯ä»¥çœç•¥ã€‚ åœ¨ Python ä¸­ï¼Œé‡‡ç”¨çš„æ ¼å¼åŒ–æ–¹å¼å’Œ C è¯­è¨€æ˜¯ä¸€è‡´çš„ï¼Œç”¨%å®ç° æ ¼å¼åŒ–å­—ç¬¦ä¸²å¸¸ç”¨å ä½ç¬¦ å ä½ç¬¦ æ›¿æ¢å†…å®¹ %d æ•´æ•° %f æµ®ç‚¹æ•° %s å­—ç¬¦ä¸² %x åå…­è¿›åˆ¶æ•´æ•° 12345678910111213141516171819202122# %d æ•´æ•° %fæµ®ç‚¹æ•° %g æ•´æ•°æˆ–ç§‘å­¦è®¡æ•°æ³•æ˜¾ç¤ºprint(&#x27;Hello, %s&#x27; % &#x27;world&#x27;)# å¤šä¸ªå˜é‡å ä½ å€¼ç”¨å…ƒç»„print(&#x27;Hi %s, you have spent $%d&#x27; % ï¼ˆ&#x27;sindy&#x27;, 1000))# g =&gt; guestprint(&#x27;normal number: %g&#x27; % 123)print(&#x27;big number: %g&#x27; % 1234567)print(&#x27;float number: %f&#x27; % 12.2235)print(&#x27;float number: %.2f&#x27; % 12.2225)print(&#x27;float number: %+.2f&#x27; % -12.6135)print(&#x27;float number: % .2f&#x27; % 12.5685)print(&#x27;%2d-%02d&#x27; % (3, 1))print(&#x27;%.2f&#x27; % 3.1415926)# ä¸å¤ªç¡®å®šåº”è¯¥ç”¨ä»€ä¹ˆå ä½ç¬¦ï¼Œ%sæ°¸è¿œèµ·ä½œç”¨ï¼Œå®ƒä¼šæŠŠä»»ä½•æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²print(&#x27;Age: %s. Gender: %s&#x27; % (25, True))# è½¬ä¹‰ï¼Œç”¨%%æ¥è¡¨ç¤ºä¸€ä¸ª%print(&#x27;growth rate: %d %%&#x27; % 7) formatæ–¹æ³•æ ¼å¼åŒ–å­—ç¬¦ä¸², è¯­æ³•`strPattern.format(val1)`å®ƒä¼šç”¨ä¼ å…¥çš„å‚æ•°ä¾æ¬¡æ›¿æ¢å­—ç¬¦ä¸²å†…çš„å ä½ç¬¦`{0}ã€{1}â€¦â€¦` 1&gt;&gt;&gt; &#x27;Hello, &#123;0&#125;, æˆç»©æå‡äº† &#123;1:.1f&#125;%&#x27;.format(&#x27;å°æ˜&#x27;, 17.125) f-stringè¯­æ³•æ ¼å¼åŒ–å­—ç¬¦ä¸²(å˜é‡æ’å€¼), è¯­æ³•ï¼š `f'hello {varName}'` f-string123r = 2.5s = 3.14 * r ** 2print(f&#x27;The area of a circle with radius &#123;r&#125; is &#123;s:.2f&#125;&#x27;) å­—å…¸åˆ—è¡¨å’Œå…ƒç»„åˆ—è¡¨æ˜¯å…ƒç´ çš„æœ‰åºé›†åˆï¼Œå¯å¢åˆ å…ƒç´ , ä¸è¦æ±‚å…ƒç´ çš„æ•°æ®ç±»å‹ç›¸åŒ 123456789101112131415161718roles = [&#x27;nami&#x27;, &#x27;zoro&#x27;, &#x27;lufy&#x27;]print(roles)len(roles) # 3roles[10] # ç´¢å¼•è¶Šç•Œä¼šæŠ¥é”™ IndexErrorroles[-1] # æœ€åä¸€ä¸ªå…ƒç´  æ”¯æŒè´Ÿç´¢å¼•roles.append(&#x27;robin&#x27;) # åœ¨æœ«å°¾è¿½åŠ å…ƒç´ roles.insert(1, &#x27;sandge&#x27;) # åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ roles.pop() # åˆ é™¤æœ«å°¾å…ƒç´ roles.pop(1) # åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ roles[1] = &#x27;jobar&#x27; # ä¿®æ”¹å…ƒç´ # äºŒç»´æ•°ç»„langs = [&#x27;python&#x27;, &#x27;java&#x27;, [&#x27;asp&#x27;, &#x27;php&#x27;], &#x27;scheme&#x27;] tuple å’Œ list å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å…ƒç»„çš„å…ƒç´ æ˜¯ä¸å¯ä¿®æ”¹çš„, æ‰€ä»¥å…ƒç»„æ²¡æœ‰`append()`, `insert()`ä¹‹ç±»çš„æ–¹æ³• 1234567colors = (&#x27;yellow&#x27;, &#x27;green&#x27;, &#x27;red&#x27;)colors2 = () # ç©ºå…ƒç»„nums = (1,) # åªæœ‰1ä¸ªæ•°å­—çš„å…ƒç»„ï¼Œnums = (1) æ‹¬å·ä¼šè¢«è®¤ä¸ºæ˜¯æ•°å­—æ±‚å€¼ï¼Œ æ‰€ä»¥è¦åŠ ä¸ª,# å…ƒç»„çš„å…ƒç´ ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨çš„å…ƒç´ å¯ä¿®æ”¹friends = (&#x27;idle&#x27;, &#x27;sandy&#x27;, [&#x27;lucy&#x27;, 8])friends[2][1] = 18 æ¡ä»¶åˆ¤æ–­12345678910111213141516171819age = 3# å¤šåˆ†æ”¯if age &gt;= 18: print(&#x27;your age is&#x27;, age) print(&#x27;adult&#x27;)elif age &gt;= 6: print(&#x27;teenager&#x27;)else: print(&#x27;your age is&#x27;, age) print(&#x27;kid&#x27;)s = input(&#x27;birth year: &#x27;)birth = int(s) # è½¬æ¢ä¸ºæ•°å€¼å‹# ä¸¤ä¸ªåˆ†æ”¯if birth &lt; 2000: print(&#x27;00å‰&#x27;)else: print(&#x27;00å&#x27;) å¾ªç¯123456789101112131415161718192021222324252627282930313233343536names = [&#x27;Michael&#x27;, &#x27;Bob&#x27;, &#x27;Tracy&#x27;]# for å¾ªç¯ï¼Œéå†åºåˆ—for name in names: print(name)for i in range(10): print(i)sum = 0n = 99# wileå¾ªç¯, æ¡ä»¶å¾ªç¯while n &gt; 0: sum = sum + n n = n - 2print(sum)n = 1while n &lt;= 100: if n &gt; 10: # å½“n = 11æ—¶ï¼Œæ¡ä»¶æ»¡è¶³ï¼Œæ‰§è¡Œbreakè¯­å¥ break # breakè¯­å¥ä¼šç»“æŸå½“å‰å¾ªç¯ print(n) n = n + 1print(&#x27;END&#x27;)n = 0while n &lt; 10: n = n + 1 if n % 2 == 0: # å¦‚æœnæ˜¯å¶æ•°ï¼Œæ‰§è¡Œcontinueè¯­å¥ # continueè¯­å¥ä¼šç›´æ¥ç»§ç»­ä¸‹ä¸€è½®å¾ªç¯ï¼Œ # åç»­çš„print()è¯­å¥ä¸ä¼šæ‰§è¡Œ continue print(n) å­—å…¸ dictdict å…¨ç§° dictionaryï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿç§°ä¸º mapï¼Œä½¿ç”¨é”®-å€¼ï¼ˆkey-valueï¼‰å­˜å‚¨ï¼Œå…·æœ‰æå¿«çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚ åŒ js çš„å¯¹è±¡ 123456789101112# !!å±æ€§åçš„å¼•å·ä¸èƒ½çœç•¥role = &#123;&#x27;name&#x27;: &#x27;rufy&#x27;, &#x27;age&#x27;: 18, &#x27;skill&#x27;: &#x27;stretch&#x27;&#125; role[&#x27;age&#x27;] = 19# role.age = 20 è¿™æ ·ä¿®æ”¹å±æ€§å€¼æŠ¥é”™ :(# åˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨if(&#x27;age&#x27; in role): print(&#x27;yes&#x27;)role.get(&#x27;age&#x27;) # è‹¥æ²¡æœ‰ageå­—æ®µ è¿”å›Nonerole.get(&#x27;age&#x27;, 10) # æ²¡æœ‰ageå­—æ®µ è¿”å›é»˜è®¤å€¼ åœ¨ Python ä»£ç ä¸­å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œæ­£ç¡®ä½¿ç”¨ dict éå¸¸é‡è¦ï¼Œéœ€è¦ç‰¢è®°çš„ç¬¬ä¸€æ¡å°±æ˜¯ dict çš„ key å¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ è¿™æ˜¯å› ä¸º dict æ ¹æ® key æ¥è®¡ç®— value çš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœæ¯æ¬¡è®¡ç®—ç›¸åŒçš„ key å¾—å‡ºçš„ç»“æœä¸åŒï¼Œé‚£ dict å†…éƒ¨å°±å®Œå…¨æ··ä¹±äº†ã€‚è¿™ä¸ªé€šè¿‡ key è®¡ç®—ä½ç½®çš„ç®—æ³•ç§°ä¸ºå“ˆå¸Œç®—æ³•ï¼ˆHashï¼‰ã€‚ è¦ä¿è¯ hash çš„æ­£ç¡®æ€§ï¼Œä½œä¸º key çš„å¯¹è±¡å°±ä¸èƒ½å˜ã€‚åœ¨ Python ä¸­ï¼Œå­—ç¬¦ä¸²ã€æ•´æ•°ç­‰éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ä½œä¸º keyã€‚è€Œ list æ˜¯å¯å˜çš„ï¼Œå°±ä¸èƒ½ä½œä¸º key é›†åˆ setset æ˜¯æ— åºä¸é‡å¤çš„å…ƒç´ é›†åˆ 1234567s = set([1,2,3])print(s) # &#123;1, 2, 3&#125;s.add(4) # æ·»åŠ å…ƒç´ s2 = set([3,4,5])print(s &amp; s2) # äº¤é›†print(s | s2) # å¹¶é›† set å’Œ dict çš„å”¯ä¸€åŒºåˆ«ä»…åœ¨äºæ²¡æœ‰å­˜å‚¨å¯¹åº”çš„ valueï¼Œä½†æ˜¯ï¼Œset çš„åŸç†å’Œ dict ä¸€æ ·ï¼Œæ‰€ä»¥ï¼ŒåŒæ ·ä¸å¯ä»¥æ”¾å…¥å¯å˜å¯¹è±¡ï¼Œå› ä¸ºæ— æ³•åˆ¤æ–­ä¸¤ä¸ªå¯å˜å¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œä¹Ÿå°±æ— æ³•ä¿è¯ set å†…éƒ¨â€œä¸ä¼šæœ‰é‡å¤å…ƒç´ â€ã€‚è¯•è¯•æŠŠ list æ”¾å…¥ setï¼Œçœ‹çœ‹æ˜¯å¦ä¼šæŠ¥é”™ã€‚ å‡½æ•°Python å†…ç½®äº†å¾ˆå¤šæœ‰ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124&gt;&gt;&gt;help(abs) # æŸ¥çœ‹å‡½æ•°å¸®åŠ©abs(-120)abs(-1, 2) # å…¥å‚æ•°é‡ä¸å¯¹ ä¼šæŠ¥é”™abs(&#x27;ABC&#x27;) # å…¥å‚ç±»å‹ä¸å¯¹ ä¼šæŠ¥é”™min(1,2)max(2,3) # min maxä¸é™å®šå‚æ•°ä¸ªæ•°# æ•°æ®ç±»å‹è½¬æ¢int(&#x27;12&#x27;)float(&#x27;12.33&#x27;)str(100)bool(1)bool(&#x27;&#x27;)hex(100)# å‡½æ•°å®šä¹‰def myabs(x): if x &gt;= 0: return x else: return -xdef my_abs2(x): # å‚æ•°ç±»å‹æ£€æŸ¥ if not isinstance(x, (int, float)): raise TypeError(&#x27;bad operand type&#x27;) if x &gt;= 0: return x else: return -xmyabs(-9) # å‡½æ•°è°ƒç”¨# ç©ºå‡½æ•°def noop(): # passå¯ä»¥ç”¨æ¥ä½œä¸ºå ä½ç¬¦ï¼Œ # æ¯”å¦‚ç°åœ¨è¿˜æ²¡æƒ³å¥½æ€ä¹ˆå†™å‡½æ•°çš„ä»£ç ï¼Œ # å°±å¯ä»¥å…ˆæ”¾ä¸€ä¸ªpassï¼Œè®©ä»£ç èƒ½è¿è¡Œèµ·æ¥ pass # è¿”å›å¤šä¸ªå€¼import mathdef move(x, y, step, angle=0): nx = x + step * math.cos(angle) ny = y - step * math.sin(angle) return nx, ny # å®é™…è¿”å›çš„æ˜¯ä¸€ä¸ªtuplex, y = move(100, 100, 60, math.pi / 6) # è§£æ„èµ‹å€¼print(x, y)r = move(100, 100, 60, math.pi / 6)print(r)# ä½ç½®å‚æ•° x n , å‚æ•°é»˜è®¤å€¼def power(x, n = 2): s = 1 while n &gt; 0: n = n - 1 s = s * x return sdef enroll(name, gender, age=6, city=&#x27;Beijing&#x27;): print(&#x27;name:&#x27;, name) print(&#x27;gender:&#x27;, gender) print(&#x27;age:&#x27;, age) print(&#x27;city:&#x27;, city)# å¤šä¸ªé»˜è®¤å‚æ•° ç”¨å‚æ•°ååªæŒ‡å®šæŸä¸ªå‚æ•°å€¼enroll(&#x27;Adam&#x27;, &#x27;M&#x27;, city=&#x27;Tianjin&#x27;)# é»˜è®¤å‚æ•°å¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œä¸ç„¶å®¹æ˜“æ‰å‘def add_end(L=[]): L.append(&#x27;END&#x27;) return Ladd_end()add_end() # [&#x27;END&#x27;, &#x27;END&#x27;] æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œé»˜è®¤å‚æ•°æŒ‡å‘çš„åœ°å€ä¸å˜# å¯å˜å‚æ•° å‚æ•°ä¸ªæ•°å¯å˜def calc(*numbers): sum = 0 for n in numbers: sum = sum + n * n return sumcalc(1,2) # å‚æ•°ä¼šè¢«è‡ªåŠ¨ç»„è£…ä¸ºtuplecalc()# tuple æˆ– list å±•å¼€ä½œä¸ºå¯å˜å‚æ•°ä¼ å…¥nums = [1,2,3]calc(*nums)# å…³é”®å­—å‚æ•° ç±»ä¼¼jså‡½æ•°çš„optionsdef person(name, age, **kw): print(&#x27;name:&#x27;, name, &#x27;age:&#x27;, age, &#x27;other:&#x27;, kw)# å…³é”®å­—å‚æ•°ä¼šè¢«ç»„è£…ä¸ºdictå¯¹è±¡kwperson(&#x27;Adam&#x27;, 45, gender=&#x27;M&#x27;, job=&#x27;Engineer&#x27;) # dictå±•å¼€ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ å…¥extra = &#123;&#x27;city&#x27;: &#x27;Beijing&#x27;, &#x27;job&#x27;: &#x27;Engineer&#x27;&#125;person(&#x27;Jack&#x27;, 24, **extra)# å‘½åå…³é”®å­—å‚æ•°ï¼Œçº¦æŸå…³é”®å­—å‚æ•°åªèƒ½åŒ…å«æŒ‡å®šå­—æ®µ# ç»„è£…æˆdict, å‡½æ•°å†…éƒ¨å†è§£æ„ä¸ºå­—æ®µåŒåçš„å˜é‡def person(name, age, *, city, job): print(name, age, city, job)person(&#x27;jack&#x27;, 23, job=&#x27;worker&#x27;, city=&#x27;beijing&#x27;)# å¦‚æœå‡½æ•°å®šä¹‰ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œ# åé¢è·Ÿç€çš„å‘½åå…³é”®å­—å‚æ•°å°±ä¸å†éœ€è¦ä¸€ä¸ªç‰¹æ®Šåˆ†éš”ç¬¦*äº†def person2(name, age, *args, city, job): print(name, age, args, city, job)person2(&#x27;jack&#x27;, 12, &#x27;hello&#x27;, &#x27;world&#x27;, city=&#x27;beijing&#x27;, job=&#x27;accounting&#x27;)# å‘½åå…³é”®å­—å‚æ•°å¯ä»¥æœ‰ç¼ºçœå€¼def person(name, age, *, city=&#x27;Beijing&#x27;, job): print(name, age, city, job)person(&#x27;Jack&#x27;, 24, job=&#x27;Engineer&#x27;) å‚æ•°ç»„åˆåœ¨ Python ä¸­å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥ç”¨å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å…³é”®å­—å‚æ•°å’Œå‘½åå…³é”®å­—å‚æ•°ï¼Œè¿™ 5 ç§å‚æ•°éƒ½å¯ä»¥ç»„åˆä½¿ç”¨ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼šå¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚ 12345678910111213141516171819202122232425262728def f1(a, b, c=0, *args, **kw): print(&#x27;a =&#x27;, a, &#x27;b =&#x27;, b, &#x27;c =&#x27;, c, &#x27;args =&#x27;, args, &#x27;kw =&#x27;, kw)def f2(a, b, c=0, *, d, **kw): print(&#x27;a =&#x27;, a, &#x27;b =&#x27;, b, &#x27;c =&#x27;, c, &#x27;d =&#x27;, d, &#x27;kw =&#x27;, kw)&gt;&gt;&gt; f1(1, 2)a = 1 b = 2 c = 0 args = () kw = &#123;&#125;&gt;&gt;&gt; f1(1, 2, c=3)a = 1 b = 2 c = 3 args = () kw = &#123;&#125;&gt;&gt;&gt; f1(1, 2, 3, &#x27;a&#x27;, &#x27;b&#x27;)a = 1 b = 2 c = 3 args = (&#x27;a&#x27;, &#x27;b&#x27;) kw = &#123;&#125;&gt;&gt;&gt; f1(1, 2, 3, &#x27;a&#x27;, &#x27;b&#x27;, x=99)a = 1 b = 2 c = 3 args = (&#x27;a&#x27;, &#x27;b&#x27;) kw = &#123;&#x27;x&#x27;: 99&#125;&gt;&gt;&gt; f2(1, 2, d=99, ext=None)a = 1 b = 2 c = 0 d = 99 kw = &#123;&#x27;ext&#x27;: None&#125;&gt;&gt;&gt; args = (1, 2, 3, 4)&gt;&gt;&gt; kw = &#123;&#x27;d&#x27;: 99, &#x27;x&#x27;: &#x27;#&#x27;&#125;&gt;&gt;&gt; f1(*args, **kw)a = 1 b = 2 c = 3 args = (4,) kw = &#123;&#x27;d&#x27;: 99, &#x27;x&#x27;: &#x27;#&#x27;&#125;&gt;&gt;&gt; args = (1, 2, 3)&gt;&gt;&gt; kw = &#123;&#x27;d&#x27;: 88, &#x27;x&#x27;: &#x27;#&#x27;&#125;&gt;&gt;&gt; f2(*args, **kw)a = 1 b = 2 c = 3 d = 88 kw = &#123;&#x27;x&#x27;: &#x27;#&#x27;&#125;# å¯¹äºä»»æ„å‡½æ•°ï¼Œéƒ½å¯ä»¥é€šè¿‡ç±»ä¼¼ func(*args, **kw) # çš„å½¢å¼è°ƒç”¨å®ƒï¼Œæ— è®ºå®ƒçš„å‚æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„ Python çš„å‡½æ•°å…·æœ‰éå¸¸çµæ´»çš„å‚æ•°å½¢æ€ï¼Œæ—¢å¯ä»¥å®ç°ç®€å•çš„è°ƒç”¨ï¼Œåˆå¯ä»¥ä¼ å…¥éå¸¸å¤æ‚çš„å‚æ•°ã€‚ é»˜è®¤å‚æ•°ä¸€å®šè¦ç”¨ä¸å¯å˜å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯å˜å¯¹è±¡ï¼Œç¨‹åºè¿è¡Œæ—¶ä¼šæœ‰é€»è¾‘é”™è¯¯ï¼ è¦æ³¨æ„å®šä¹‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„è¯­æ³•ï¼š *args æ˜¯å¯å˜å‚æ•°ï¼Œargs æ¥æ”¶çš„æ˜¯ä¸€ä¸ª tupleï¼› **kw æ˜¯å…³é”®å­—å‚æ•°ï¼Œkw æ¥æ”¶çš„æ˜¯ä¸€ä¸ª dictã€‚ ä»¥åŠè°ƒç”¨å‡½æ•°æ—¶å¦‚ä½•ä¼ å…¥å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„è¯­æ³•ï¼š å¯å˜å‚æ•°æ—¢å¯ä»¥ç›´æ¥ä¼ å…¥ï¼šfunc(1, 2, 3)ï¼Œåˆå¯ä»¥å…ˆç»„è£… list æˆ– tupleï¼Œå†é€šè¿‡*args ä¼ å…¥ï¼šfunc(*(1, 2, 3))ï¼› å…³é”®å­—å‚æ•°æ—¢å¯ä»¥ç›´æ¥ä¼ å…¥ï¼šfunc(a=1, b=2)ï¼Œåˆå¯ä»¥å…ˆç»„è£… dictï¼Œå†é€šè¿‡**kw ä¼ å…¥ï¼šfunc(**&#123;&#39;a&#39;: 1, &#39;b&#39;: 2&#125;)ã€‚ ä½¿ç”¨ *args å’Œ **kw æ˜¯ Python çš„ä¹ æƒ¯å†™æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å‚æ•°åï¼Œä½†æœ€å¥½ä½¿ç”¨ä¹ æƒ¯ç”¨æ³•ã€‚ å‘½åçš„å…³é”®å­—å‚æ•°æ˜¯ä¸ºäº†é™åˆ¶è°ƒç”¨è€…å¯ä»¥ä¼ å…¥çš„å‚æ•°åï¼ŒåŒæ—¶å¯ä»¥æä¾›é»˜è®¤å€¼ã€‚ å®šä¹‰å‘½åçš„å…³é”®å­—å‚æ•°åœ¨æ²¡æœ‰å¯å˜å‚æ•°çš„æƒ…å†µä¸‹ä¸è¦å¿˜äº†å†™åˆ†éš”ç¬¦*ï¼Œå¦åˆ™å®šä¹‰çš„å°†æ˜¯ä½ç½®å‚æ•°ã€‚ é€’å½’å‡½æ•°åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨å†…éƒ¨è°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ã€‚ ä½¿ç”¨é€’å½’å‡½æ•°éœ€è¦æ³¨æ„é˜²æ­¢æ ˆæº¢å‡ºã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„å®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œæ ˆå°±ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ï¼Œé€’å½’è°ƒç”¨çš„æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡º 123456def fact(n): if n==1: return 1 return n * fact(n - 1)print(fact(10)) è§£å†³é€’å½’è°ƒç”¨æ ˆæº¢å‡ºçš„æ–¹æ³•æ˜¯é€šè¿‡å°¾é€’å½’ä¼˜åŒ–ï¼Œäº‹å®ä¸Šå°¾é€’å½’å’Œå¾ªç¯çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ï¼ŒæŠŠå¾ªç¯çœ‹æˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„å°¾é€’å½’å‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ å°¾é€’å½’æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œå¹¶ä¸”ï¼Œreturn è¯­å¥ä¸èƒ½åŒ…å«è¡¨è¾¾å¼ã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨æˆ–è€…è§£é‡Šå™¨å°±å¯ä»¥æŠŠå°¾é€’å½’åšä¼˜åŒ–ï¼Œä½¿é€’å½’æœ¬èº«æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½åªå ç”¨ä¸€ä¸ªæ ˆå¸§ï¼Œä¸ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µã€‚ ä¸Šé¢çš„ fact(n) å‡½æ•°ç”±äº return n * fact(n - 1) å¼•å…¥äº†ä¹˜æ³•è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å°±ä¸æ˜¯å°¾é€’å½’äº†ã€‚è¦æ”¹æˆå°¾é€’å½’æ–¹å¼ï¼Œéœ€è¦å¤šä¸€ç‚¹ä»£ç ï¼Œä¸»è¦æ˜¯è¦æŠŠæ¯ä¸€æ­¥çš„ä¹˜ç§¯ä¼ å…¥åˆ°é€’å½’å‡½æ•°ä¸­ï¼š 123456789def fact(n): return fact_iter(n, 1)def fact_iter(num, product): if num == 1: return product return fact_iter(num - 1, num * product)fact(100) é—æ†¾çš„æ˜¯ï¼Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ²¡æœ‰é’ˆå¯¹å°¾é€’å½’åšä¼˜åŒ–ï¼ŒPython è§£é‡Šå™¨ä¹Ÿæ²¡æœ‰åšä¼˜åŒ–ï¼Œæ‰€ä»¥ï¼Œå³ä½¿æŠŠä¸Šé¢çš„ fact(n)å‡½æ•°æ”¹æˆå°¾é€’å½’æ–¹å¼ï¼Œä¹Ÿä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚ å°¾é€’å½’äº‹å®ä¸Šå’Œå¾ªç¯æ˜¯ç­‰ä»·çš„ï¼Œæ²¡æœ‰å¾ªç¯è¯­å¥çš„ç¼–ç¨‹è¯­è¨€åªèƒ½é€šè¿‡å°¾é€’å½’å®ç°å¾ªç¯ã€‚ 1234567891011## åˆ©ç”¨é€’å½’å‡½æ•°ç§»åŠ¨æ±‰è¯ºå¡”:def move(n, a, b, c): if n == 1: print(&#x27;move&#x27;, a, &#x27;--&gt;&#x27;, c) else: move(n-1, a, c, b) move(1, a, b, c) move(n-1, b, a, c)move(4, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;) é«˜çº§ç‰¹æ€§åˆ‡ç‰‡12345678910111213L = [&#x27;Michael&#x27;, &#x27;Sarah&#x27;, &#x27;Tracy&#x27;, &#x27;Bob&#x27;, &#x27;Jack&#x27;]# list[start:end:step]L[0:3] # å‰3ä¸ªå…ƒç´ åŒ L[:3]L[-3:] # å3ä¸ªå…ƒç´ L[-2:-1] # å€’æ•°åˆ‡ç‰‡L[-1] # æœ«å°¾å…ƒç´ L[:10:2] # å‰10ä¸ªæ•°ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªL[::5] # æ‰€æœ‰æ•°ï¼Œæ¯5ä¸ªå–ä¸€ä¸ªL[:] # å–æ‰€æœ‰ï¼Œå³å¤åˆ¶ä¸€ä¸ªlist# tupleå’Œå­—ç¬¦ä¸²ä¹Ÿæ˜¯åºåˆ—ï¼ŒåŒæ ·å¯ç”¨åˆ‡ç‰‡æ“ä½œ(0, 1, 2, 3, 4, 5)[:3]&#x27;ABCDEFG&#x27;[:3] è¿­ä»£å¦‚æœç»™å®šä¸€ä¸ª list æˆ– tupleï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ for å¾ªç¯æ¥éå†è¿™ä¸ª list æˆ– tupleï¼Œè¿™ç§éå†æˆ‘ä»¬ç§°ä¸ºè¿­ä»£ï¼ˆIterationï¼‰ã€‚ Python çš„ for å¾ªç¯æŠ½è±¡ç¨‹åº¦è¦é«˜äº C çš„ for å¾ªç¯ï¼Œå› ä¸º Python çš„ for å¾ªç¯ä¸ä»…å¯ä»¥ç”¨åœ¨ list æˆ– tuple ä¸Šï¼Œè¿˜å¯ä»¥ä½œç”¨åœ¨å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸Šã€‚ 1234567891011d = &#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;for key in d: print(&#x27;key:&#x27;, key)for val in d.values(): print(&#x27;val:&#x27;, val)for key,val in d.items(): print(&#x27;key:&#x27;, key, &#x27; val:&#x27;, val)for c in &#x27;ABCD&#x27;: print(&#x27;c:&#x27;, c) å½“æˆ‘ä»¬ä½¿ç”¨ for å¾ªç¯æ—¶ï¼Œåªè¦ä½œç”¨äºä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œfor å¾ªç¯å°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè€Œæˆ‘ä»¬ä¸å¤ªå…³å¿ƒè¯¥å¯¹è±¡ç©¶ç«Ÿæ˜¯ list è¿˜æ˜¯å…¶ä»–æ•°æ®ç±»å‹ 1234567891011121314151617# åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¿­ä»£&gt;&gt;&gt; from collections import Iterable&gt;&gt;&gt; isinstance(&#x27;abc&#x27;, Iterable) # stræ˜¯å¦å¯è¿­ä»£True&gt;&gt;&gt; isinstance([1,2,3], Iterable) # listæ˜¯å¦å¯è¿­ä»£True&gt;&gt;&gt; isinstance(123, Iterable) # æ•´æ•°æ˜¯å¦å¯è¿­ä»£Falsefor i, value in enumerate([&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]): print(i, value)# forå¾ªç¯é‡Œï¼ŒåŒæ—¶å¼•ç”¨äº†ä¸¤ä¸ªå˜é‡ï¼Œåœ¨Pythoné‡Œæ˜¯å¾ˆå¸¸è§çš„for x,y in [(1,2), (3,4)]: print(x, y) åˆ—è¡¨ç”Ÿæˆå¼åˆ—è¡¨ç”Ÿæˆå¼å³ List Comprehensionsï¼Œæ˜¯ Python å†…ç½®çš„éå¸¸ç®€å•å´å¼ºå¤§çš„å¯ä»¥ç”¨æ¥åˆ›å»º list çš„ç”Ÿæˆå¼ 12345678910111213141516171819202122# [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]list(range(1, 11))# [1, 4, 9, 16, 25, 36, 49, 64, 81, 100] ç±»ä¼¼js map[x * x for x in range(1, 11)] # [4, 16, 36, 64, 100] js arr filter and map[x * x for x in range(1, 11) if x % 2 == 0] # [&#x27;AX&#x27;, &#x27;AY&#x27;, &#x27;AZ&#x27;, &#x27;BX&#x27;, &#x27;BY&#x27;, &#x27;BZ&#x27;, &#x27;CX&#x27;, &#x27;CY&#x27;, &#x27;CZ&#x27;] ç¬›å¡å°”ç§¯[m + n for m in &#x27;ABC&#x27; for n in &#x27;XYZ&#x27;] # å¯¼å…¥osæ¨¡å—ï¼Œæ¨¡å—çš„æ¦‚å¿µåé¢è®²åˆ°import os# os.listdirå¯ä»¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•[d for d in os.listdir(&#x27;.&#x27;)] d = &#123;&#x27;hi&#x27;: &#x27;hello&#x27;, &#x27;age&#x27;: &#x27;12&#x27;, &#x27;name&#x27;: &#x27;lufy&#x27;&#125;#[&#x27;y=B&#x27;, &#x27;x=A&#x27;, &#x27;z=C&#x27;][k + &#x27;=&#x27; + v for k, v in d.items()] L = [&#x27;Hello&#x27;, &#x27;World&#x27;, &#x27;IBM&#x27;, &#x27;Apple&#x27;]print([s.lower() for s in L]) ç”Ÿæˆå™¨è¦åˆ›å»ºä¸€ä¸ª generatorï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼çš„[]æ”¹æˆ()ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ª generatorï¼š åŒ es6 çš„ generatoré€šè¿‡ next() å‡½æ•°è·å¾— generator çš„ä¸‹ä¸€ä¸ªè¿”å›å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950L = [x * x for x in range(10)]print(L)g = (x * x for x in range(10))print(g)print(next(g))# generatorä¹Ÿæ˜¯å¯è¿­ä»£çš„for n in g: print(n)# è‘—åçš„æ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆFibonacciï¼‰ï¼Œ# é™¤ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ•°å¤–ï¼Œä»»æ„ä¸€ä¸ªæ•°éƒ½å¯ç”±å‰ä¸¤ä¸ªæ•°ç›¸åŠ å¾—åˆ°def fib(max): n, a, b = 0, 0, 1 while n &lt; max: print(b) a, b = b, a + b n = n + 1 return &#x27;done&#x27;# å‡½æ•°å®šä¹‰ä¸­åŒ…å«yieldå…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±# ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªgeneratordef fib(max): n, a, b = 0, 0, 1 while n &lt; max: yield b a, b = b, a + b n = n + 1 return &#x27;done&#x27;def odd(): print(&#x27;step 1&#x27;) yield 1 print(&#x27;step 2&#x27;) yield(3) print(&#x27;step 3&#x27;) yield(5)og = odd()for n in og: print(n)g = fib(6)while True: try: x = next(g) print(&#x27;g:&#x27;, x) except StopIteration as e: print(&#x27;Generator return value:&#x27;, e.value) break generator æ˜¯éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œåœ¨ Python ä¸­ï¼Œå¯ä»¥ç®€å•åœ°æŠŠåˆ—è¡¨ç”Ÿæˆå¼æ”¹æˆ generatorï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°å®ç°å¤æ‚é€»è¾‘çš„ generatorã€‚ è¿­ä»£å™¨ç”¨äº for å¾ªç¯çš„æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š ä¸€ç±»æ˜¯é›†åˆæ•°æ®ç±»å‹ï¼Œå¦‚ listã€tupleã€dictã€setã€str ç­‰ï¼› ä¸€ç±»æ˜¯ generator ç”Ÿæˆå™¨å’Œå¸¦ yield çš„ generator functionã€‚ 12345from collections import Iterableprint(isinstance([], Iterable)) // Trueprint(isinstance(&#123;&#125;, Iterable)) // Trueprint(isinstance(&#x27;abc&#x27;, Iterable)) ç”Ÿæˆå™¨éƒ½æ˜¯ Iterator å¯¹è±¡ï¼Œä½† listã€dictã€str è™½ç„¶æ˜¯ Iterableï¼Œå´ä¸æ˜¯ Iteratorã€‚ listã€dictã€str ç­‰ Iterable å¯¹è±¡å˜æˆ Iteratorå¯¹è±¡ ï¼Œå¯ä»¥ä½¿ç”¨ iter() å‡½æ•° 123isinstance(iter([]), Iterator) // Trueisinstance(iter(&#x27;abc&#x27;), Iterator) // True# æ³¨æ„åŒºåˆ†å¯è¿­ä»£ å’Œ è¿­ä»£å¯¹è±¡ iter() ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆ listã€dictã€str ç­‰æ•°æ®ç±»å‹ä¸æ˜¯ Iteratorï¼Ÿ è¿™æ˜¯å› ä¸º Python çš„ Iterator å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•°æ®æµï¼ŒIterator å¯¹è±¡å¯ä»¥è¢« next()å‡½æ•°è°ƒç”¨å¹¶ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œç›´åˆ°æ²¡æœ‰æ•°æ®æ—¶æŠ›å‡º StopIteration é”™è¯¯ã€‚å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®æµçœ‹åšæ˜¯ä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œä½†æˆ‘ä»¬å´ä¸èƒ½æå‰çŸ¥é“åºåˆ—çš„é•¿åº¦ï¼Œåªèƒ½ä¸æ–­é€šè¿‡ next()å‡½æ•°å®ç°æŒ‰éœ€è®¡ç®—ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥ Iterator çš„è®¡ç®—æ˜¯æƒ°æ€§çš„ï¼Œåªæœ‰åœ¨éœ€è¦è¿”å›ä¸‹ä¸€ä¸ªæ•°æ®æ—¶å®ƒæ‰ä¼šè®¡ç®—ã€‚ å‡¡æ˜¯å¯ä½œç”¨äº for å¾ªç¯çš„å¯¹è±¡éƒ½æ˜¯ Iterable ç±»å‹ï¼› å‡¡æ˜¯å¯ä½œç”¨äº next() å‡½æ•°çš„å¯¹è±¡éƒ½æ˜¯ Iterator ç±»å‹ï¼Œå®ƒä»¬è¡¨ç¤ºä¸€ä¸ªæƒ°æ€§è®¡ç®—çš„åºåˆ—ï¼› é›†åˆæ•°æ®ç±»å‹å¦‚ listã€dictã€str ç­‰æ˜¯ Iterable ä½†ä¸æ˜¯ Iteratorï¼Œä¸è¿‡å¯ä»¥é€šè¿‡ iter()å‡½æ•°è·å¾—ä¸€ä¸ª Iterator å¯¹è±¡ã€‚ Python çš„ for å¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡ä¸æ–­è°ƒç”¨ next()å‡½æ•°å®ç°çš„ 123456789101112131415for x in [1, 2, 3, 4, 5]: pass# ç­‰ä»·äº# é¦–å…ˆè·å¾—Iteratorå¯¹è±¡:it = iter([1, 2, 3, 4, 5])# å¾ªç¯:while True: try: # è·å¾—ä¸‹ä¸€ä¸ªå€¼: x = next(it) except StopIteration: # é‡åˆ°StopIterationå°±é€€å‡ºå¾ªç¯ break å‡½æ•°å¼ç¼–ç¨‹æˆ‘ä»¬é€šè¿‡æŠŠå¤§æ®µä»£ç æ‹†æˆå‡½æ•°ï¼Œé€šè¿‡ä¸€å±‚ä¸€å±‚çš„å‡½æ•°è°ƒç”¨ï¼Œå°±å¯ä»¥æŠŠå¤æ‚ä»»åŠ¡åˆ†è§£æˆç®€å•çš„ä»»åŠ¡ï¼Œè¿™ç§åˆ†è§£å¯ä»¥ç§°ä¹‹ä¸ºé¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ã€‚å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒ è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆè¯·æ³¨æ„å¤šäº†ä¸€ä¸ªâ€œå¼â€å­—ï¼‰â€”â€”Functional Programmingï¼Œè™½ç„¶ä¹Ÿå¯ä»¥å½’ç»“åˆ°é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ï¼Œä½†å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®— å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚ C è¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚ Lisp è¯­è¨€ã€‚ å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼, å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ Python å¯¹å‡½æ•°å¼ç¼–ç¨‹æä¾›éƒ¨åˆ†æ”¯æŒã€‚ç”±äº Python å…è®¸ä½¿ç”¨å˜é‡ï¼Œå› æ­¤ï¼ŒPython ä¸æ˜¯çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚ çº¯å‡½æ•°: ç›¸åŒçš„è¾“å…¥ï¼Œå°±ä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œå¯¹å¤–éƒ¨æ²¡æœ‰å‰¯ä½œç”¨çš„å‡½æ•° é«˜çº§å‡½æ•°å˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°abs(-10)æ˜¯å‡½æ•°è°ƒç”¨ï¼Œè€Œabsæ˜¯å‡½æ•°æœ¬èº«; å‡½æ•°æœ¬èº«ä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œå³ï¼šå˜é‡å¯ä»¥æŒ‡å‘å‡½æ•°ã€‚ 12f = absprint(f(-200)) å‡½æ•°åä¹Ÿæ˜¯å˜é‡å‡½æ•°åå…¶å®å°±æ˜¯æŒ‡å‘å‡½æ•°çš„å˜é‡ 12345&gt;&gt;&gt; abs = 10&gt;&gt;&gt; abs(-10)Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;TypeError: &#x27;int&#x27; object is not callable æ³¨ï¼šç”±äº abs å‡½æ•°å®é™…ä¸Šæ˜¯å®šä¹‰åœ¨ import builtins æ¨¡å—ä¸­çš„ï¼Œæ‰€ä»¥è¦è®©ä¿®æ”¹ abs å˜é‡çš„æŒ‡å‘åœ¨å…¶å®ƒæ¨¡å—ä¹Ÿç”Ÿæ•ˆï¼Œè¦ç”¨ import builtins; builtins.abs &#x3D; 10ã€‚ ä¼ å…¥å‡½æ•°å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œç§°ä¸ºé«˜é˜¶å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445def add(x, y, f): return f(x) + f(y)# map map(f, list)def f2(x): return x * x# è¿”å›mapå¯¹è±¡ åŒjs arr.mapr = map(f2, [1,2,3]) print(list(r), type(r))print(list(map(str, [1,2,3])))# reduce reduce(f, list)from functools import reducedef add(x, y): return x + yprint(reduce(add, [1,3,5,7]))# lamda åŒjsåŒ¿åå‡½æ•°from functools import reduceDIGITS = &#123;&#x27;0&#x27;: 0, &#x27;1&#x27;: 1, &#x27;2&#x27;: 2, &#x27;3&#x27;: 3, &#x27;4&#x27;: 4, &#x27;5&#x27;: 5, &#x27;6&#x27;: 6, &#x27;7&#x27;: 7, &#x27;8&#x27;: 8, &#x27;9&#x27;: 9&#125;def char2num(s): return DIGITS[s]def str2int(s): return reduce(lambda x, y: x * 10 + y, map(char2num, s))# filter filter(f, list)def is_odd(n): return n % 2 == 1# filter()å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªIteratorï¼Œ# ä¹Ÿå°±æ˜¯ä¸€ä¸ªæƒ°æ€§åºåˆ—ï¼Œæ‰€ä»¥è¦å¼ºè¿«filter()å®Œæˆè®¡ç®—ç»“æœï¼Œ# éœ€è¦ç”¨list()å‡½æ•°è·å¾—æ‰€æœ‰ç»“æœå¹¶è¿”å›listlist(filter(is_odd, [1, 2, 4, 5, 6, 9, 10, 15]))# sorted sorted(list, keyFn)sorted([&#x27;bob&#x27;, &#x27;about&#x27;, &#x27;Zoo&#x27;, &#x27;Credit&#x27;], key=str.lower) # å‡åºsorted([&#x27;bob&#x27;, &#x27;about&#x27;, &#x27;Zoo&#x27;, &#x27;Credit&#x27;], key=str.lower, reverse=True) # é™åº å‡½æ•°ä½œä¸ºè¿”å›å€¼é«˜é˜¶å‡½æ•°é™¤äº†å¯ä»¥æ¥å—å‡½æ•°ä½œä¸ºå‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºç»“æœå€¼è¿”å›ã€‚ 1234567def lazy_sum(*args): def sum(): ax = 0 for n in args: ax = ax + n return ax return sum å½“ lazy_sum è¿”å›å‡½æ•° sum æ—¶ï¼Œç›¸å…³å‚æ•°å’Œå˜é‡éƒ½ä¿å­˜åœ¨è¿”å›çš„å‡½æ•°ä¸­ï¼Œè¿™ç§ç§°ä¸ºâ€œé—­åŒ…ï¼ˆClosureï¼‰â€çš„ç¨‹åºç»“æ„æ‹¥æœ‰æå¤§çš„å¨åŠ› é—­åŒ… å½“ä¸€ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªå‡½æ•°åï¼Œå…¶å†…éƒ¨çš„å±€éƒ¨å˜é‡è¿˜è¢«è¿”å›çš„å­å‡½æ•°å¼•ç”¨ 123456789101112def count(): fns = [] for i in range(1, 4): def f(): return i*i fns.append(f) return fnsf1, f2, f3 = count()f1() #9f2() #9f3() #9 åŒ¿åå‡½æ•°åœ¨ Python ä¸­ï¼Œå¯¹åŒ¿åå‡½æ•°æä¾›äº†æœ‰é™æ”¯æŒ, åŒ¿åå‡½æ•°æœ‰ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½æœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¸ç”¨å†™ returnï¼Œè¿”å›å€¼å°±æ˜¯è¯¥è¡¨è¾¾å¼çš„ç»“æœ æ¯” js çš„åŒ¿åå‡½æ•°å¼± 123456list(map(lambda x: x * x, [1, 2, 3, 4, 5, 6, 7, 8, 9]))def build(x, y): return lambda: x * x + y * yf = lambda x: x * x è£…é¥°å™¨ç”±äºå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å‡½æ•°å¯¹è±¡å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡ï¼Œæ‰€ä»¥ï¼Œé€šè¿‡å˜é‡ä¹Ÿèƒ½è°ƒç”¨è¯¥å‡½æ•°; å‡½æ•°å¯¹è±¡æœ‰ä¸€ä¸ª__name__å±æ€§ï¼Œå¯ä»¥æ‹¿åˆ°å‡½æ•°çš„åå­— 1234567def now(): print(&#x27;2019-09-02&#x27;)f = nowf()print(now.__name__, f.__name__) # now now ä¸ä¿®æ”¹ now()å‡½æ•°çš„å®šä¹‰ï¼Œåˆå¯ä»¥ä»£ç è¿è¡ŒæœŸé—´åŠ¨æ€å¢åŠ åŠŸèƒ½ï¼Œç§°ä¹‹ä¸ºâ€œè£…é¥°å™¨â€ï¼ˆDecoratorï¼‰ã€‚ æœ¬è´¨ä¸Šï¼Œdecorator å°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•° 1234567891011121314def log(func): def wrapper(*args, **kw): print(&#x27;call %s():&#x27; % func.__name__) return func(*args, **kw) return wrapper # è¿”å›è£…é¥°äº†ç›®æ ‡å‡½æ•°çš„å‡½æ•°# å€ŸåŠ©Pythonçš„@è¯­æ³•ï¼ŒæŠŠdecoratorç½®äºå‡½æ•°çš„å®šä¹‰å¤„@logdef now2(): print(&#x27;2019-01-09&#x27;)# è°ƒç”¨now()å‡½æ•°ï¼Œä¸ä»…ä¼šè¿è¡Œnow()å‡½æ•°æœ¬èº«ï¼Œ# è¿˜ä¼šåœ¨è¿è¡Œnow()å‡½æ•°å‰æ‰“å°ä¸€è¡Œæ—¥å¿—now2() æŠŠ@logæ”¾åˆ°now()å‡½æ•°çš„å®šä¹‰å¤„ï¼Œç›¸å½“äºæ‰§è¡Œäº†è¯­å¥ now=log(now) 12345678910111213141516171819202122232425# å¯æ¥å—å‚æ•°çš„è£…é¥°å™¨def log(text): def decorator(func): def wrapper(*args, **kw): print(&#x27;%s %s():&#x27; % (text, func.__name__)) return func(*args, **kw) return wrapper return decorator# now = log(&#x27;execute&#x27;)(now)@log(&#x27;execute&#x27;) # è¿”å›çš„ç»“æœä½œä¸ºè£…é¥°å™¨def now(): print(&#x27;2019-11-12&#x27;)# ä¿®æ­£__name__çš„å€¼import functoolsdef log(func): # wrapper.__name__ = func.__name__ @functools.wraps(func) def wrapper(*args, **kw): print(&#x27;call %s():&#x27; % func.__name__) return func(*args, **kw) return wrapper åœ¨é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰çš„è®¾è®¡æ¨¡å¼ä¸­ï¼Œdecorator è¢«ç§°ä¸ºè£…é¥°æ¨¡å¼ã€‚OOP çš„è£…é¥°æ¨¡å¼éœ€è¦é€šè¿‡ç»§æ‰¿å’Œç»„åˆæ¥å®ç°ï¼Œè€Œ Python é™¤äº†èƒ½æ”¯æŒ OOP çš„ decorator å¤–ï¼Œç›´æ¥ä»è¯­æ³•å±‚æ¬¡æ”¯æŒ decoratorã€‚Python çš„ decorator å¯ä»¥ç”¨å‡½æ•°å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨ç±»å®ç°ã€‚ decorator å¯ä»¥å¢å¼ºå‡½æ•°çš„åŠŸèƒ½ï¼Œå®šä¹‰èµ·æ¥è™½ç„¶æœ‰ç‚¹å¤æ‚ï¼Œä½†ä½¿ç”¨èµ·æ¥éå¸¸çµæ´»å’Œæ–¹ä¾¿ã€‚ åå‡½æ•°åœ¨ä»‹ç»å‡½æ•°å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œé€šè¿‡è®¾å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå¯ä»¥é™ä½å‡½æ•°è°ƒç”¨çš„éš¾åº¦ã€‚è€Œåå‡½æ•°ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ 123456789101112131415161718# int(num, base)def int2(x, base=2): return int(x, base)# functools.partialå°±æ˜¯å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåå‡½æ•°çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰int2()import functoolsint2 = functools.partial(int, base=2) # è¿”å›é¢„ç»‘å®šæœ«å°¾å‚æ•°çš„å‡½æ•°# å›ºå®šäº†int()å‡½æ•°çš„å…³é”®å­—å‚æ•°base# ç›¸å½“äºkw = &#123;&#x27;base&#x27;: 2&#125;init(&#x27;1001&#x27;, **kw)max2 = functools.partial(max, 10)# å®é™…ä¸Šä¼šæŠŠ10ä½œä¸º*argsçš„ä¸€éƒ¨åˆ†è‡ªåŠ¨åŠ åˆ°å·¦è¾¹max2(5,6)# args = (10, 5, 6) å½“å‡½æ•°çš„å‚æ•°ä¸ªæ•°å¤ªå¤šï¼Œéœ€è¦ç®€åŒ–æ—¶ï¼Œä½¿ç”¨functools.partialå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°å‡½æ•°å¯ä»¥å›ºå®šä½åŸå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œä»è€Œåœ¨è°ƒç”¨æ—¶æ›´ç®€å•ã€‚ æ¨¡å—ä¸ºäº†ç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬æŠŠå¾ˆå¤šå‡½æ•°åˆ†ç»„ï¼Œåˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œï¼Œè¿™æ ·ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«çš„ä»£ç å°±ç›¸å¯¹è¾ƒå°‘ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½é‡‡ç”¨è¿™ç§ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚åœ¨ Python ä¸­ï¼Œä¸€ä¸ª `.py` æ–‡ä»¶å°±ç§°ä¹‹ä¸ºä¸€ä¸ªæ¨¡å—ï¼ˆModuleï¼‰ã€‚ æ¨¡å—åŒ–æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ æœ€å¤§çš„å¥½å¤„æ˜¯å¤§å¤§æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ å…¶æ¬¡ï¼Œç¼–å†™ä»£ç ä¸å¿…ä»é›¶å¼€å§‹ã€‚å½“ä¸€ä¸ªæ¨¡å—ç¼–å†™å®Œæ¯•ï¼Œå°±å¯ä»¥è¢«å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¹Ÿç»å¸¸å¼•ç”¨å…¶ä»–æ¨¡å—ï¼ŒåŒ…æ‹¬ Python å†…ç½®çš„æ¨¡å—å’Œæ¥è‡ªç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€‚ ä½¿ç”¨æ¨¡å—è¿˜å¯ä»¥é¿å…å‘½åå†²çª (å‡½æ•°åå’Œå˜é‡å)ã€‚ ä½ ä¹Ÿè®¸è¿˜æƒ³åˆ°ï¼Œå¦‚æœä¸åŒçš„äººç¼–å†™çš„æ¨¡å—åç›¸åŒæ€ä¹ˆåŠï¼Ÿä¸ºäº†é¿å…æ¨¡å—åå†²çªï¼ŒPython åˆå¼•å…¥äº†æŒ‰ç›®å½•æ¥ç»„ç»‡æ¨¡å—çš„æ–¹æ³•ï¼Œç§°ä¸ºåŒ…ï¼ˆPackageï¼‰ åŒ…ä½œä¸ºæ¨¡å—çš„å‘½åç©ºé—´ï¼Œé¿å…æ¨¡å—åå†²çª è¯·æ³¨æ„ï¼Œæ¯ä¸€ä¸ªåŒ…ç›®å½•ä¸‹é¢éƒ½ä¼šæœ‰ä¸€ä¸ª__init__.pyçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå¦åˆ™ï¼ŒPython å°±æŠŠè¿™ä¸ªç›®å½•å½“æˆæ™®é€šç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŒ…ã€‚__init__.pyå¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æœ‰ Python ä»£ç ï¼Œå› ä¸º__init__.pyæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ¨¡å— åŒ…ä¹Ÿå¯ä»¥æœ‰å¤šçº§ç»“æ„ï¼Œå¦‚mycompanry.web.util ä½¿ç”¨æ¨¡å—Python æœ¬èº«å°±å†…ç½®äº†å¾ˆå¤šéå¸¸æœ‰ç”¨çš„æ¨¡å— 1234567891011121314151617181920#!/usr/bin/env python3# -*- coding: utf-8 -*-&#x27; a test module &#x27;__author__ = &#x27;Michael Liao&#x27;import sysdef test(): args = sys.argv if len(args)==1: print(&#x27;Hello, world!&#x27;) elif len(args)==2: print(&#x27;Hello, %s!&#x27; % args[1]) else: print(&#x27;Too many arguments!&#x27;)if __name__==&#x27;__main__&#x27;: test() ä½œç”¨åŸŸåœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå®šä¹‰å¾ˆå¤šå‡½æ•°å’Œå˜é‡ï¼Œä½†æœ‰çš„å‡½æ•°å’Œå˜é‡æˆ‘ä»¬å¸Œæœ›ç»™åˆ«äººä½¿ç”¨ï¼Œæœ‰çš„å‡½æ•°å’Œå˜é‡æˆ‘ä»¬å¸Œæœ›ä»…ä»…åœ¨æ¨¡å—å†…éƒ¨ä½¿ç”¨ (æ¨¡å—ç§æœ‰æˆå‘˜çº¦å®šç”¨`_`å‰ç¼€æ ‡è¯†)ã€‚ æ­£å¸¸çš„å‡½æ•°å’Œå˜é‡åæ˜¯å…¬å¼€çš„ï¼ˆpublicï¼‰ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ï¼Œæ¯”å¦‚ï¼šabcï¼Œx123ï¼ŒPI ç­‰ï¼› __author__ï¼Œ__name__ç­‰æ˜¯ç‰¹æ®Šå˜é‡ï¼Œå¦‚: __doc__å¯è®¿é—®æ–‡æ¡£æ³¨é‡Šï¼Œè‡ªå®šä¹‰çš„å˜é‡ä¸€èˆ¬ä¸è¦ç”¨__xx__æ ¼å¼ï¼› å®é™…ä¸Šæ¨¡å—å†…çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯è®¿é—®çš„ï¼Œ_ç§æœ‰å‰ç¼€ä¹Ÿåªæ˜¯ä¹ æƒ¯çº¦å®š 1234567891011def _private_1(name): return &#x27;Hello, %s&#x27; % namedef _private_2(name): return &#x27;Hi, %s&#x27; % namedef greeting(name): if len(name) &gt; 3: return _private_1(name) else: return _private_2(name) å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—åœ¨ Python ä¸­ï¼Œå®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ˜¯é€šè¿‡åŒ…ç®¡ç†å·¥å…· pip å®Œæˆçš„ã€‚ pip install Pillow æ›´å¤šå†…å®¹","tags":["Python"],"categories":["Python"]},{"title":"react","path":"/react/index.html","content":"react introducea very popular lib for building ui"},{"path":"/study/admin-multiple.html","content":"è¯è¯­åº“ç®¡ç† æœç´¢ æ‰¹é‡åˆ é™¤ åºå· è¯è¯­ æ ‡é¢˜ æ ‡ç­¾ å­¦ä¼š çŠ¶æ€ æ—¥æœŸ æ“ä½œ ${ index + 1 } ${ item.word } ${ item.title } ${ (item.tags ?? []).join(', ') } ${ item.isKnow ? 'æ˜¯' : 'å¦' } ${ item.status === 'enable' ? 'å¯ç”¨' : 'ç¦ç”¨' } ${ item.date } ${ item.status === 'enable' ? 'ç¦ç”¨' : 'å¯ç”¨' } åˆ é™¤ æ ‡é¢˜: è¯è¯­: æ·»åŠ  å…¨éƒ¨åˆ é™¤ æ¸…é™¤å…¨éƒ¨æ ‡ç­¾ å¯ä¸Šä¼ å­—/è¯æ–‡ä»¶, æ¯è¡Œ1ä¸ªå­—/è¯, ç©ºç™½è¡Œæˆ–//å¼€å¤´çš„æ³¨é‡Šè¡Œå°†è¢«å¿½ç•¥ï¼Œ##å¼€å¤´çš„ä¸ºæ ‡é¢˜è¡Œ ä¸Šä¼  &gt; &gt; new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { kw: '', keyword: '', newTitle: \"åˆçº§è¯è¯­\", newWord: \"\", upfile: \"\", wordList: getCache(\"mwords\") || [], }, computed: { displayWordList() { if (!this.keyword) return this.wordList; return this.wordList.filter(item => item.title.includes(this.keyword) || item.word.includes(this.keyword)); } }, methods: { goTop() { window.scrollTo({top: 0, behavior: \"smooth\"}) }, goBottom() { const maxScroll = document.documentElement.scrollHeight - window.innerHeight; window.scrollTo({top: maxScroll, behavior: \"smooth\"}); }, handleSearch() { this.keyword = this.kw; }, updateCache(data) { if (!data) { data = this.wordList; } setCache(\"mwords\", data); }, uploadCallback(text) { const lines = text.split(\" \").map((line) => line.trim()); let title = \"\"; let lesson = '' const date = getTodayStr(); const upwords = []; for (let line of lines) { line = line.trim(); // skip empty line if (!line) { continue; } // starts with ## , is title line if (line.startsWith(\"##\")) { title = line.replace(/^##/, \"\").trim(); continue; } // starts with #Lesson is lesson title line if (/^#Lesson/i.test(line)) { lesson = line.replace(/^#Lesson/i, \"\").trim(); continue; } // others starts with # are comment lines if (/^#(?!#)/.test(line) || !line) continue; const [upword, desc = ''] = line.split(/(? { const text = event.target.result; this.uploadCallback(text); }); fileReader.readAsText(file); }, addWord() { if (this.newWord.trim()) { const word = this.newWord.trim(); const exists = this.wordList.find( (item) => item.word === word ); if (exists) { showToast(\"è¯¥è¯è¯­å·²å­˜åœ¨\"); return; } const today = getTodayStr(); this.wordList.push({ date: today, word, title: this.newTitle, status: \"enable\", tags: [], isKnow: false, }); this.newWord = \"\"; this.updateCache(); } }, rmWord(index) { const curWord = this.displayWordList[index] // this.wordList.splice(index, 1); this.wordList = this.wordList.filter(word => { return word.word != curWord.word }) this.updateCache(); }, rmAllWords() { this.wordList = []; this.updateCache(); }, rmDisplayWords() { this.wordList = this.wordList.filter((word) => { const matched = this.displayWordList.find(viewWord => { return viewWord.word === word.word && viewWord.title === word.title; }) return !matched }); this.updateCache(); }, rmAllTags() { this.wordList = this.wordList.map((item) => { item.tags = []; return item; }); this.updateCache(); }, toggleStatus(item) { item.status = item.status === \"enable\" ? \"disable\" : \"enable\"; this.updateCache(); }, }, });"},{"path":"/study/admin-single.html","content":"å½“å‰ç”¨æˆ·: ${ currentUser || 'é»˜è®¤ç”¨æˆ·' } å­—åº“ç®¡ç† æœç´¢ æ‰¹é‡åˆ é™¤ åºå· å­— æ ‡é¢˜ æ ‡ç­¾ å­¦ä¼š çŠ¶æ€ æ—¥æœŸ æ“ä½œ ${ index + 1 } ${ item.word } ${ item.title || '' } ${ (item.tags ?? []).join(', ') } ${ item.isKnow ? 'æ˜¯' : 'å¦' } ${ item.status === 'enable' ? 'å¯ç”¨' : 'ç¦ç”¨' } ${ item.date } ${ item.status === 'enable' ? 'ç¦ç”¨' : 'å¯ç”¨' } åˆ é™¤ æ ‡é¢˜: å­—: æ·»åŠ  å…¨éƒ¨åˆ é™¤ æ¸…é™¤å…¨éƒ¨æ ‡ç­¾ å¯ä¸Šä¼ å­—/è¯æ–‡ä»¶, æ¯è¡Œ1ä¸ªå­—/è¯, ç©ºç™½è¡Œæˆ–//å¼€å¤´çš„æ³¨é‡Šè¡Œå°†è¢«å¿½ç•¥ï¼Œ##å¼€å¤´çš„ä¸ºæ ‡é¢˜è¡Œ ä¸Šä¼  new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { kw: '', keyword: '', currentUser: getCurUser(), newTitle: \"å­¦å‰ç”Ÿå­—\", newWord: \"\", upfile: \"\", wordList: getCache(\"words\") || [], }, computed: { displayWordList() { if (!this.keyword) return this.wordList; return this.wordList.filter((item) => item.title.includes(this.keyword) || item.word.includes(this.keyword) ); } }, methods: { handleSearch() { this.keyword = this.kw; }, updateCache(data) { if (!data) { data = this.wordList; } setCache(\"words\", data); }, uploadCallback(text) { const lines = text.split(\" \").map((line) => line.trim()); let title = \"\"; let lesson = '' const date = getTodayStr(); const upwords = []; for (let line of lines) { line = line.trim(); // skip empty line if (!line) { continue; } // starts with ## , is title line if (line.startsWith(\"##\")) { title = line.replace(/^##/, \"\").trim(); continue; } // starts with #Lesson is lesson title line if (/^#Lesson/i.test(line)) { lesson = line.replace(/^#Lesson/i, \"\").trim(); continue; } // others starts with # are comment lines if (/^#(?!#)/.test(line) || !line) continue; const [upword, desc = ''] = line.split(/(? { const text = event.target.result; this.uploadCallback(text); }); fileReader.readAsText(file); }, addWord() { if (this.newWord.trim()) { const word = this.newWord.trim()[0]; const exists = this.wordList.find( (item) => item.word === word ); if (exists) { showToast(\"è¯¥æ–‡å­—å·²å­˜åœ¨\"); return; } const today = getTodayStr(); this.wordList.push({ date: today, word, title: this.newTitle, status: \"enable\", tags: [], isKnow: false, }); this.newWord = \"\"; this.updateCache(); } }, rmWord(index) { const curWord = this.displayWordList[index] // this.wordList.splice(index, 1); this.wordList = this.wordList.filter(word => { return word.word != curWord.word }) this.updateCache(); }, rmDisplayWords() { this.wordList = this.wordList.filter((word) => { const matched = this.displayWordList.find(viewWord => { return viewWord.word === word.word && viewWord.title === word.title; }) return !matched }); this.updateCache(); }, rmAllWords() { this.wordList = []; this.updateCache(); }, rmAllTags() { this.wordList = this.wordList.map((item) => { item.tags = []; return item; }); this.updateCache(); }, toggleStatus(item) { item.status = item.status === \"enable\" ? \"disable\" : \"enable\"; this.updateCache(); }, }, });"},{"path":"/study/admin-tags.html","content":"å½“å‰ç”¨æˆ·: ${ currentUser || 'é»˜è®¤ç”¨æˆ·' } æ ‡ç­¾åˆ—è¡¨ åºå· æ ‡ç­¾ çŠ¶æ€ æ—¥æœŸ æ“ä½œ ${ index + 1 } ${ item.name } ${ item.status === 'enable' ? 'å¯ç”¨' : 'ç¦ç”¨' } ${ item.date } ${ item.status === 'enable' ? 'ç¦ç”¨' : 'å¯ç”¨' } åˆ é™¤ æ·»åŠ  å…¨éƒ¨åˆ é™¤ const currentUser = getCurUser(); new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { currentUser, newTag: \"\", tagList: getCache(\"tags\") || [], }, methods: { updateCache(data) { if (!data) { data = this.tagList; } setCache(\"tags\", data); }, addTag() { if (this.newTag.trim()) { const tagName = this.newTag.trim(); const exists = this.tagList.find( (tag) => tag.name === tagName ); if (exists) { showToast(\"è¯¥æ ‡ç­¾å·²å­˜åœ¨\"); return; } const today = getTodayStr(); this.tagList.push({ date: today, name: tagName, status: \"enable\", }); this.newTag = \"\"; this.updateCache(); } }, rmTag(index) { this.tagList.splice(index, 1); this.updateCache(); }, rmAllTags() { this.tagList = []; this.updateCache(); }, toggleStatus(tag) { tag.status = tag.status === \"enable\" ? \"disable\" : \"enable\"; this.updateCache(); }, }, });"},{"path":"/study/admin-users.html","content":"ç”¨æˆ·ç®¡ç† åºå· ç”¨æˆ· çŠ¶æ€ æ—¥æœŸ æ“ä½œ ${ index + 1 } ${ item.name } ${ item.status === 'enable' ? 'å¯ç”¨' : 'ç¦ç”¨' } ${ item.date } åº”ç”¨é»˜è®¤å­—åº“ åº”ç”¨é»˜è®¤è¯è¯­åº“ ${ item.status === 'enable' ? 'ç¦ç”¨' : 'å¯ç”¨' } åˆ é™¤ æ·»åŠ  å…¨éƒ¨åˆ é™¤ new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { newUser: \"\", userList: LCache.get(\"users\") || [], }, methods: { updateCache(data) { if (!data) { data = this.userList; } LCache.set(\"users\", data); }, applyDefaultCharacterData(user) { const defKey = \"words\"; const userKey = `${user.name}:${defKey}`; const oldData = LCache.get(userKey); if (oldData) { const isOverwrite = confirm( `ç¡®è®¤è¦è¦†ç›– ${user.name} çš„ç°æœ‰å­—åº“?` ); if (!isOverwrite) return; } const data = LCache.get(defKey) || []; LCache.set(userKey, data); showToast(\"å­—åº“å·²æ›´æ–°æˆåŠŸ!\"); }, applyDefaultWordData(user) { const defKey = \"mwords\"; const userKey = `${user.name}:${defKey}`; const oldData = LCache.get(userKey); if (oldData) { const isOverwrite = confirm( `ç¡®è®¤è¦è¦†ç›– ${user.name} çš„ç°æœ‰è¯è¯­åº“?` ); if (!isOverwrite) return; } const data = LCache.get(defKey) || []; LCache.set(userKey, data); showToast(\"è¯è¯­åº“å·²æ›´æ–°æˆåŠŸ!\"); }, addUser() { if (this.newUser.trim()) { const userName = this.newUser.trim(); const exists = this.userList.find( (user) => user.name === userName ); if (exists) { showToast(\"è¯¥ç”¨æˆ·å·²å­˜åœ¨\"); return; } const today = getTodayStr(); this.userList.push({ date: today, name: userName, status: \"enable\", }); this.newUser = \"\"; this.updateCache(); } }, rmUser(index) { this.userList.splice(index, 1); this.updateCache(); }, rmAllUsers() { this.userList = []; this.updateCache(); }, toggleStatus(user) { user.status = user.status === \"enable\" ? \"disable\" : \"enable\"; if (user.status === 'disable' && LCache.get('curUser') === user.name) { LCache.set('curUser', ''); } this.updateCache(); }, }, });"},{"path":"/study/chinese.html","content":"å°å­¦å ‚ ç®¡ç†æ–‡å­— å•å­—ç»ƒä¹  å¤šå­—ç»ƒä¹ "},{"path":"/study/home.html","content":"home hello kk"},{"path":"/study/index.html","content":"è½»èˆŸå­¦ä¼´ åˆ‡æ¢ç”¨æˆ·: é»˜è®¤ç”¨æˆ· ${user.name} åˆ‡æ¢ç”¨æˆ· ç®¡ç†ç”¨æˆ· æ”¯æŒå¤šç”¨æˆ·, æ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„å­—åº“ã€è¯è¯­åº“å’Œæ ‡ç­¾, é»˜è®¤æ¨¡å¼ä¸ºå•ç”¨æˆ·, é»˜è®¤æ¨¡å¼ä¸‹ç”¨æˆ·åç§°ä¸ºç©º ç®¡ç†å½“å‰ç”¨æˆ·æ ‡ç­¾ æ¯ä¸ªç”¨æˆ·å¯ä¸ºå­—/è¯è®¾ç½®æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨æ ‡ç­¾è¿›è¡Œè¿‡æ»¤ ç®¡ç†æ–‡å­— å•å­—ç»ƒä¹  å•å­—é»˜å†™ ç®¡ç†è¯è¯­ è¯è¯­ç»ƒä¹  è¯è¯­é»˜å†™ new Vue({ el: '#app', delimiters: ['${', '}'], data: { isMobile: getIsMobile(), currentUser: getCurUser(), userList: (LCache.get('users') || []).filter(user => user.status !== 'disable') }, methods: { changeCurrentUser() { LCache.set('curUser', this.currentUser); showToast(`ä¿®æ”¹æˆåŠŸï¼Œå½“å‰ç”¨æˆ·æ˜¯ ${this.currentUser || 'é»˜è®¤ç”¨æˆ·'}`) }, } });"},{"title":"å°å­¦å ‚","path":"/study/index.html","content":"åˆ‡æ¢ç”¨æˆ·: é»˜è®¤ç”¨æˆ· ${user.name} åˆ‡æ¢ç”¨æˆ· ç®¡ç†ç”¨æˆ· æ”¯æŒå¤šç”¨æˆ·, æ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„å­—åº“ã€è¯è¯­åº“å’Œæ ‡ç­¾, é»˜è®¤æ¨¡å¼ä¸ºå•ç”¨æˆ·, é»˜è®¤æ¨¡å¼ä¸‹ç”¨æˆ·åç§°ä¸ºç©º ç®¡ç†å½“å‰ç”¨æˆ·æ ‡ç­¾ æ¯ä¸ªç”¨æˆ·å¯ä¸ºå­—/è¯è®¾ç½®æ ‡ç­¾ï¼Œå¹¶ä½¿ç”¨æ ‡ç­¾è¿›è¡Œè¿‡æ»¤ ç®¡ç†æ–‡å­— å•å­—ç»ƒä¹  å•å­—é»˜å†™ ç®¡ç†è¯è¯­ è¯è¯­ç»ƒä¹  è¯è¯­é»˜å†™ new Vue({ el: '#app', delimiters: ['${', '}'], data: { isMobile: getIsMobile(), currentUser: getCurUser(), userList: (LCache.get('users') || []).filter(user => user.status !== 'disable') }, methods: { changeCurrentUser() { LCache.set('curUser', this.currentUser); showToast(`ä¿®æ”¹æˆåŠŸï¼Œå½“å‰ç”¨æˆ·æ˜¯ ${this.currentUser || 'é»˜è®¤ç”¨æˆ·'}`) }, } });","tags":[null]},{"path":"/study/service-worker.js","content":"self.addEventListener('fetch', function (event) { console.log(\"ğŸš€ ~ dd event req.url:\", event.request.url, [...event.request.headers.entries()]) if (event.request.url.endsWith('.woff') || event.request.url.endsWith('.woff2') || event.request.url.endsWith('.ttf')) { // event.respondWith(fetch(event.request)); const myReq = new Request(event.request, { headers: new Headers(event.request.headers).delete('referer') }); console.log('myReq headers:', myReq.url, [...myReq.headers.entries()]) event.respondWith( fetch(myReq) ); } else { event.respondWith(fetch(event.request)); } });"},{"path":"/study/multiple.html","content":"ç”¨æˆ·: ${ currentUser || 'é»˜è®¤ç”¨æˆ·' } ${activeIndex + 1} / ${wordList.length} è¯è¯­è®¤è¯» &gt; é€‰æ‹©å­—ä½“: å­—ä½“1 å­—ä½“2 å­—ä½“3 å­—ä½“4 å­—ä½“5 ç­›é€‰: æ ‡é¢˜: å…¨éƒ¨ ${ttl} æ ‡ç­¾: ${ selTag.text } ${tagOpt.text} å–å æŒæ¡: å…¨éƒ¨ å·²æŒæ¡ æœªæŒæ¡ éšæœº: è®¾ç½®æŒæ¡: å·²æŒæ¡ æœªæŒæ¡ è®¾ç½®æ ‡ç­¾: åˆ›å»ºæ ‡ç­¾ ${ tag.name } ${ wordList } ${ activeWord } &lt; &gt; ${ wordList[activeIndex]?.lesson ? wordList[activeIndex].lesson.includes('ã€‹') ? wordList[activeIndex].lesson : 'ã€Š' + wordList[activeIndex].lesson + 'ã€‹' : ''} ${chr} ${ wordList[activeIndex].explain || '' } ${activeIndex + 1} / ${wordList.length} const searchParams = new URLSearchParams(location.search); const isTest = ![null, \"0\", \"false\"].includes(searchParams.get(\"test\")); const primaryWords = priorityWords; const tagTable = getCache(\"tags\", true) || []; const sortedTagList = getSortedTagList(tagTable, true); const selectedTagList = getCache(\"mwordTagLs\") || [getAllOptionOfTag()]; const tagOptions = getTagOptions(tagTable); updateSelectedForTags(tagOptions, selectedTagList); window.myapp = new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { isCloseCtrl: false, primaryWords, tagSelectOpen: false, title: getCache(\"mwordTitle\") || \"\", // tag: getCache('mwordTagLs') || '', selTagLs: selectedTagList, know: getCache(\"mwordKnow\") || \"\", currentUser: getCurUser(), activeIndex: 0, isNext: true, isMobile: getIsMobile(), isRandom: false, fontType: isTest ? 5 : getCache(\"mfontType\") || 5, cacheWordList: getCache(\"mwords\", true) || [], tagList: sortedTagList, tagOptions: tagOptions, orderedWordList: [], isViewAnswer: false, isTestMode: isTest, }, computed: { fontStyle: function () { // word: {date, word} const word = this.wordList[this.activeIndex]; if (!word) { return { fontSize: \"250px\" }; } const sizeMap = { 1: 330, 2: 330, 3: 330, 4: 250, 5: 200, 6: 160, 7: 130, }; const mobileSizeMap = { 1: 180, 2: 120, 3: 90, 4: 120, 5: 60, 6: 90, 7: 90, }; const map = this.isMobile ? mobileSizeMap : sizeMap; const size = map[word.word.length] || 50; return { fontSize: size + \"px\" }; }, total() { return this.wordList.length; }, titleList() { return [ ...new Set( this.cacheWordList.map((item) => item.title).filter((v) => !!v) ), ]; }, wordList() { // if (!this.isConditionChanged) return this.displayingWordList; console.log(\"computed wordList start------------>\"); let viewWordList = this.sourceWordList.filter((item) => { let shouldKept = !this.title ? true : this.title === item.title; const hasAllSelection = this.selTagLs.some( (stag) => stag.name === \"all\" ); if (shouldKept && !hasAllSelection) { // check if match every selected tag condition shouldKept = this.selTagLs.every((stag) => { const hasCurSelectedTag = item.tags.includes(stag.name); return stag.reverse ? !hasCurSelectedTag : hasCurSelectedTag; }); } if (shouldKept && this.know) { const knowVal = item.isKnow ? \"yes\" : \"no\"; shouldKept = knowVal === this.know; } return shouldKept; }); if (this.sourceWordList === this.cacheWordList) { this.orderedWordList = viewWordList; } if (this.isRandom) { const isClickRandom = this.lastIsRandom === false; // if result set changed, shuffle the new list if ( viewWordList.length !== this.displayingWordList.length || isClickRandom ) { viewWordList = getShuffleList(viewWordList); } else { viewWordList = this.displayingWordList; // reuse the old list, keep the same random order } } else { const isClickRandom = this.lastIsRandom === true; } // console.log(\"ğŸš€ ~ wordList ~ viewWordList.length !== this.displayingWordList.length:\", viewWordList.length !== this.displayingWordList.length) // if (viewWordList.length !== this.displayingWordList.length) { // this.activeIndex = 0; // } this.displayingWordList = viewWordList; this.sourceWordList = this.displayingWordList; this.isConditionChanged = false; this.lastIsRandom = this.isRandom; return viewWordList; }, activeWord() { return this.wordList[this.activeIndex]; }, }, watch: { activeIndex() { this.isViewAnswer = false; }, fontType() { setCache(\"mfontType\", this.fontType); }, know: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; setCache(\"mwordKnow\", this.know); }, immediate: true, }, title: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; setCache(\"mwordTitle\", this.title); }, immediate: true, }, selTagLs: { handler() { this.onConditionChanged(); console.log(\"selTagLs changed ============>\", this.selTagLs); this.sourceWordList = this.cacheWordList; setCache(\"mwordTagLs\", this.selTagLs); }, deep: true, immediate: true, }, isRandom: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; }, immediate: true, }, total() { const cacheTotal = this.cacheWordList.length; if (!this.total && cacheTotal) { this.tipsFilterEmpty(); } if (this.activeIndex > this.total - 1) { this.activeIndex = this.total - 1; } }, }, methods: { toggleSelectTag(tagOption) { const selected = this.selTagLs.some( (stag) => stag.name === tagOption.name ); const isAllOption = tagOption.name === \"all\"; if (selected) { newSelTagLs = this.selTagLs; if (isAllOption) { // do nothing, select other options will unselect all-option } else { newSelTagLs = this.selTagLs.filter( (stag) => stag.name !== tagOption.name ); if (newSelTagLs.length === 0) { newSelTagLs = [getAllOptionOfTag()]; } } this.selTagLs = newSelTagLs; } else { const matchedPWord = priorityWords.find((w) => tagOption.name.startsWith(w) ); if (isAllOption) { this.selTagLs = [tagOption]; } else { const newSelTagLs = [...this.selTagLs, tagOption].filter( (stag) => stag.name !== \"all\" ); if (matchedPWord && !tagOption.reverse) { this.selTagLs = newSelTagLs.filter( (stag) => stag === tagOption || !(stag.name.startsWith(matchedPWord) && !stag.reverse) ); } else { this.selTagLs = newSelTagLs; } } } }, onConditionChanged() { this.isConditionChanged = true; this.activeIndex = 0; }, tipsFilterEmpty() { showToast(\"æ— ç¬¦åˆçš„æ•°æ®ï¼Œè¯·ä¿®æ”¹ç­›é€‰\"); }, updateCache(data) { if (!data) { data = this.cacheWordList; } setCache(\"mwords\", data, true); }, changeRandom(event) { this.randomClickTimes = this.randomClickTimes ? this.randomClickTimes + 1 : 1; console.log(\"ğŸš€ ~ changeRandom ~ this.isRandom:\", this.isRandom); }, handleClickCard(index) { if (!index === this.activeIndex) return; this.isViewAnswer = !this.isViewAnswer; }, showNext() { this.isNext = true; if (this.activeIndex < this.wordList.length - 1) { this.activeIndex++; } else { this.activeIndex = 0; } }, showPrev() { this.isNext = false; if (this.activeIndex > 0) { this.activeIndex--; } else { this.activeIndex = this.wordList.length - 1; } }, toggleTag(tag) { let wordTags = this.activeWord.tags || []; const exists = wordTags.includes(tag.name); if (exists) { this.activeWord.tags = delArrayItem(wordTags, tag.name); } else { const matchedPWord = priorityWords.find((w) => tag.name.startsWith(w) ); if (!matchedPWord) { wordTags.push(tag.name) } else { wordTags = [...wordTags, tag.name].filter( (tagName) => tag.name === tagName || !tagName.startsWith(matchedPWord) ); } this.activeWord.tags = wordTags; } this.updateCache(); }, toggleKnow(isKnow) { this.activeWord.isKnow = isKnow; this.updateCache(); }, }, beforeCreate() { this.lastIsRandom = false; this.isConditionChanged = false; // not reactive data this.displayingWordList = []; this.sourceWordList = this.cacheWordList; }, mounted() { console.vm = this; console.log('this.sourceWordList======>', this.sourceWordList.length); if (!this.cacheWordList.length) { showToast(\"è¯·å…ˆå¢åŠ è¯è¯­\"); setTimeout(() => { location.href = \"/study\"; }, 3000); } else { if (!this.wordList.length) { this.tipsFilterEmpty(); } } document.body.addEventListener(\"keyup\", (event) => { if (event.key === \"ArrowRight\" || event.code === \"Space\") { this.showNext(); } if (event.key === \"ArrowLeft\") { this.showPrev(); } }); }, });"},{"path":"/study/single.html","content":"// if ('serviceWorker' in navigator) { // console.log(\"ğŸš€ ~ serviceWorker:\", navigator.serviceWorker) // navigator.serviceWorker.register('./service-worker.js').then(function(registration) { // console.log('Service Worker registered with scope:', registration.scope); // }).catch(function(error) { // console.log('Service Worker registration failed:', error); // }); // } ç”¨æˆ·: ${ currentUser || 'é»˜è®¤ç”¨æˆ·' } ${activeIndex + 1} / ${wordList.length} å•å­—è®¤è¯» &gt; é€‰æ‹©å­—ä½“: å­—ä½“1 å­—ä½“2 å­—ä½“3 å­—ä½“4 å­—ä½“5 ç­›é€‰: æ ‡é¢˜: å…¨éƒ¨ ${ttl} æ ‡ç­¾: ${ selTag.text } ${tagOpt.text} å–å æŒæ¡: å…¨éƒ¨ å·²æŒæ¡ æœªæŒæ¡ éšæœº: è®¾ç½®æŒæ¡: å·²æŒæ¡ æœªæŒæ¡ è®¾ç½®æ ‡ç­¾: åˆ›å»ºæ ‡ç­¾ ${ tag.name } ${ wordList } ${ activeWord } ${ wordList[activeIndex]?.lesson ? 'ã€Š' + wordList[activeIndex].lesson + 'ã€‹' : ''} &lt; &gt; ${chr} ${ wordList[activeIndex].explain || '' } ${activeIndex + 1} / ${wordList.length} const searchParams = new URLSearchParams(location.search); const isTest = ![null, \"0\", \"false\"].includes(searchParams.get(\"test\")); const primaryWords = priorityWords; const tagTable = getCache(\"tags\", true) || []; const sortedTagList = getSortedTagList(tagTable, true); const selectedTagList = getCache(\"wordTagLs\") || [getAllOptionOfTag()]; const tagOptions = getTagOptions(tagTable); updateSelectedForTags(tagOptions, selectedTagList); window.myapp = new Vue({ el: \"#app\", delimiters: [\"${\", \"}\"], data: { isCloseCtrl: false, primaryWords, tagSelectOpen: false, title: getCache(\"wordTitle\") || \"\", // tag: getCache('mwordTagLs') || '', selTagLs: selectedTagList, know: getCache(\"wordKnow\") || \"\", currentUser: getCurUser(), activeIndex: 0, isNext: true, isMobile: getIsMobile(), isRandom: false, fontType: isTest ? 5 : getCache(\"fontType\") || 5, cacheWordList: getCache(\"words\", true) || [], tagList: sortedTagList, tagOptions: tagOptions, orderedWordList: [], isViewAnswer: false, isTestMode: isTest, }, computed: { fontStyle: function () { // word: {date, word} const word = this.wordList[this.activeIndex]; if (!word) { return { fontSize: \"250px\" }; } const sizeMap = { 1: 330, 2: 330, 3: 330, 4: 250, 5: 200, 6: 160, 7: 130, }; const mobileSizeMap = { 1: 180, 2: 120, 3: 90, 4: 120, 5: 60, 6: 90, 7: 90, }; const map = this.isMobile ? mobileSizeMap : sizeMap; const size = map[word.word.length] || 50; return { fontSize: size + \"px\" }; }, total() { return this.wordList.length; }, titleList() { return [ ...new Set( this.cacheWordList.map((item) => item.title).filter((v) => !!v) ), ]; }, wordList() { // if (!this.isConditionChanged) return this.displayingWordList; console.log(\"computed wordList start------------>\"); let viewWordList = this.sourceWordList.filter((item) => { let shouldKept = !this.title ? true : this.title === item.title; const hasAllSelection = this.selTagLs.some( (stag) => stag.name === \"all\" ); if (shouldKept && !hasAllSelection) { // check if match every selected tag condition shouldKept = this.selTagLs.every((stag) => { const hasCurSelectedTag = item.tags.includes(stag.name); return stag.reverse ? !hasCurSelectedTag : hasCurSelectedTag; }); } if (shouldKept && this.know) { const knowVal = item.isKnow ? \"yes\" : \"no\"; shouldKept = knowVal === this.know; } return shouldKept; }); if (this.sourceWordList === this.cacheWordList) { this.orderedWordList = viewWordList; } if (this.isRandom) { const isClickRandom = this.lastIsRandom === false; // if result set changed, shuffle the new list if ( viewWordList.length !== this.displayingWordList.length || isClickRandom ) { viewWordList = getShuffleList(viewWordList); } else { viewWordList = this.displayingWordList; // reuse the old list, keep the same random order } } else { const isClickRandom = this.lastIsRandom === true; } // console.log(\"ğŸš€ ~ wordList ~ viewWordList.length !== this.displayingWordList.length:\", viewWordList.length !== this.displayingWordList.length) // if (viewWordList.length !== this.displayingWordList.length) { // this.activeIndex = 0; // } this.displayingWordList = viewWordList; this.sourceWordList = this.displayingWordList; this.isConditionChanged = false; this.lastIsRandom = this.isRandom; return viewWordList; }, activeWord() { return this.wordList[this.activeIndex]; }, }, watch: { activeIndex() { this.isViewAnswer = false; }, fontType() { setCache(\"fontType\", this.fontType); }, know: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; setCache(\"wordKnow\", this.know); }, immediate: true, }, title: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; setCache(\"wordTitle\", this.title); }, immediate: true, }, selTagLs: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; setCache(\"wordTagLs\", this.selTagLs); }, deep: true, immediate: true, }, isRandom: { handler() { this.onConditionChanged(); this.sourceWordList = this.cacheWordList; }, immediate: true, }, total() { const cacheTotal = this.cacheWordList.length; if (!this.total && cacheTotal) { this.tipsFilterEmpty(); } if (this.activeIndex > this.total - 1) { this.activeIndex = this.total - 1; } }, }, methods: { toggleSelectTag(tagOption) { const selected = this.selTagLs.some( (stag) => stag.name === tagOption.name ); const isAllOption = tagOption.name === \"all\"; if (selected) { newSelTagLs = this.selTagLs; if (isAllOption) { // do nothing, select other options will unselect all-option } else { newSelTagLs = this.selTagLs.filter( (stag) => stag.name !== tagOption.name ); if (newSelTagLs.length === 0) { newSelTagLs = [getAllOptionOfTag()]; } } this.selTagLs = newSelTagLs; } else { const matchedPWord = priorityWords.find((w) => tagOption.name.startsWith(w) ); if (isAllOption) { this.selTagLs = [tagOption]; } else { const newSelTagLs = [...this.selTagLs, tagOption].filter( (stag) => stag.name !== \"all\" ); if (matchedPWord && !tagOption.reverse) { this.selTagLs = newSelTagLs.filter( (stag) => stag === tagOption || !(stag.name.startsWith(matchedPWord) && !stag.reverse) ); } else { this.selTagLs = newSelTagLs; } } } }, onConditionChanged() { this.isConditionChanged = true; this.activeIndex = 0; }, tipsFilterEmpty() { showToast(\"æ— ç¬¦åˆçš„æ•°æ®ï¼Œè¯·ä¿®æ”¹ç­›é€‰\"); }, updateCache(data) { if (!data) { data = this.cacheWordList; } setCache(\"words\", data, true); }, changeRandom(event) { this.randomClickTimes = this.randomClickTimes ? this.randomClickTimes + 1 : 1; console.log(\"ğŸš€ ~ changeRandom ~ this.isRandom:\", this.isRandom); }, handleClickCard(index) { if (!index === this.activeIndex) return; this.isViewAnswer = !this.isViewAnswer; }, showNext() { this.isNext = true; if (this.activeIndex < this.wordList.length - 1) { this.activeIndex++; } else { this.activeIndex = 0; } }, showPrev() { this.isNext = false; if (this.activeIndex > 0) { this.activeIndex--; } else { this.activeIndex = this.wordList.length - 1; } }, toggleTag(tag) { let wordTags = this.activeWord.tags || []; const exists = wordTags.includes(tag.name); if (exists) { this.activeWord.tags = delArrayItem(wordTags, tag.name); } else { const matchedPWord = priorityWords.find((w) => tag.name.startsWith(w) ); if (!matchedPWord) { wordTags.push(tag.name) } else { wordTags = [...wordTags, tag.name].filter( (tagName) => tag.name === tagName || !tagName.startsWith(matchedPWord) ); } this.activeWord.tags = wordTags; } this.updateCache(); }, toggleKnow(isKnow) { this.activeWord.isKnow = isKnow; this.updateCache(); }, }, beforeCreate() { this.lastIsRandom = false; this.isConditionChanged = false; // not reactive data this.displayingWordList = []; this.sourceWordList = this.cacheWordList; }, mounted() { if (!this.cacheWordList.length) { showToast(\"è¯·å…ˆå¢åŠ æ–‡å­—\"); setTimeout(() => { location.href = \"/study\"; // kkkk }, 3000); } else { if (!this.wordList.length) { this.tipsFilterEmpty(); } } document.body.addEventListener(\"keyup\", (event) => { if (event.key === \"ArrowRight\" || event.code === \"Space\") { this.showNext(); } if (event.key === \"ArrowLeft\") { this.showPrev(); } }); }, });"},{"path":"/study/study.css","content":"/* ----------------- reset ---------------------> */ * { box-sizing: border-box; } .app ul, .app li { list-style: none; margin: 0; padding: 0; } body, h1, h2, h3, h4, h5, h6, input, button, a { font-weight: 300; } .actions-container { margin: 20px 0; } a { text-decoration: none; } input { border-radius: 5px; font-size: 20px; padding: 5px 10px; outline: none; border: 1px solid #ccc; } input:focus { border: 1px solid #1e81ce; } /* --------------------- overwrite ------------> */ .md-text.content { overflow: visible; } .l_body { grid-template-columns: 1fr; } #comments, .l_body .l_left, .l_right, .banner.top, .page-footer, .float-panel { display: none; } article.content { padding-bottom: 0; } footer.page-footer { margin: 0 20px; } /* ---------------- utils ----------------> */ .hide, .debug-hide { display: none !important; } .debug-info { display: none; } .debug-show { display: block !important; } .shrink0 { flex-shrink: 0 !important; } .shrink1 { flex-shrink: 1 !important; } .shrink2 { flex-shrink: 2 !important; } .shrink3 { flex-shrink: 3 !important; } .bg-grey { background: #f3f3f3; } .bg-white { background: white; } .br-3 { border-radius: 3px; } .br-4 { border-radius: 4px; } .br-5 { border-radius: 5px; } .w-full { width: 100%; } .minw-100 { min-width: 100px; } .minw-150 { min-width: 150px; } .minw-200 { min-width: 200px; } .of-h { overflow: hidden; } .va-m { vertical-align: middle; } .pointer { cursor: pointer; } .hide { display: none; } .dis-ib { display: inline-block; } .dis-i { display: inline; } .grey { color: #888 !important; } .purple { color: #b613dc !important; } .blue { color: #0088ff !important; } .green { color: darkgreen !important; } .items-center { align-items: center; } .justify-center { justify-content: center; } .justify-between { justify-content: space-between; } .flex-row { display: flex; flex-direction: row; align-items: center; gap: 10px; } .flex-col { display: flex; flex-direction: column; gap: 10px; } .flex1 { flex-grow: 1; flex-shrink: 0; flex-basis: auto; } .flex2 { flex: 2; } .flex3 { flex: 3; } .flex-wrap { flex-wrap: wrap; } .flex0 { flex-grow: 0; flex-shrink: 0; flex-basis: auto; } .gap0 { gap: 0 !important; } .gap-10 { gap: 10px !important; } .gap-20 { gap: 20px !important; } .gap-30 { gap: 30px !important; } .f-serif { font-family: 'serif'; } .m-auto { margin: auto; } .ta-c { text-align: center; } .ta-r { text-align: right; } .ta-l { text-align: left; } .mt-5 { margin-top: 5px; } .mt-10 { margin-top: 10px; } .mt-20 { margin-top: 20px; } .mt-30 { margin-top: 30px; } .mt-40 { margin-top: 40px; } .mt-50 { margin-top: 50px; } .ml-5 { margin-left: 5px; } .ml-10 { margin-left: 10px; } .ml-20 { margin-left: 20px; } .ml-30 { margin-left: 30px; } .ml-40 { margin-left: 40px; } .ml-50 { margin-left: 50px; } .mr-5 { margin-right: 5px; } .mr-10 { margin-right: 10px; } .mr-20 { margin-right: 20px; } .mr-30 { margin-right: 30px; } .mr-40 { margin-right: 40px; } .mr-50 { margin-right: 50px; } .mb-5 { margin-bottom: 5px; } .mb-10 { margin-bottom: 10px; } .mb-20 { margin-bottom: 20px; } .mb-30 { margin-bottom: 30px; } .mb-40 { margin-bottom: 40px; } .mb-50 { margin-bottom: 50px; } .fw-300 { font-weight: 300; } .fw-400 { font-weight: 400; } .fw-500 { font-weight: 500; } .fw-600 { font-weight: 600; } .f12 { font-size: 12px!important; } .f13 { font-size: 13px!important; } .f14 { font-size: 14px!important; } .f15 { font-size: 15px!important; } .f16 { font-size: 16px!important; } .f17 { font-size: 17px!important; } .f18 { font-size: 18px!important; } .f19 { font-size: 19px!important; } .f20 { font-size: 20px!important; } .f25 { font-size: 25px!important; } .f30 { font-size: 30px!important; } .pos-r { position: relative; } .pos-a { position: absolute; } .lfade-enter-active, .rfade-enter-active { transition: all 0.5s linear; } .lfade-enter { opacity: 0; transform: translateX(500px) scale(0.3); } .lfade-leave-active { transition: all 0.5s linear; transform: translateX(-500px) scale(0.3); } .rfade-enter { opacity: 0; transform: translateX(-500px) scale(0.3); } .rfade-leave-active { transition: all 0.5s linear; transform: translateX(500px) scale(0.3); } .lfade-leave-to, .rfade-leave-to { opacity: 0; } /* ----------- common ---------------> */ .app .myselect { padding: 0; min-height: 27px; line-height: 13px; } .app .myselect::before { content: '>'; position: absolute; right: 10px; top: 8px; font-family: serif; font-weight: bolder; transform: rotate(90deg); color: black; } .app .myselect-view { padding: 4px 18px 4px 8px; font-weight: 400; width: 200px; } .app .myselect-tag { background: #ccc; padding: 3px 6px; border-radius: 10px; margin-bottom: 5px; } .app .myselect-options { position: absolute; /* position: relative; */ width: 100%; border: 0px solid #888; border-radius: 4px; padding: 0px; z-index: 9999; max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out; } .app .myselect.expand .myselect-options { max-height: 500px; border-width: 1px; } .app .myselect-options li { padding: 6px 14px; cursor: pointer; border-bottom: 1px solid #dadada; } .app .myselect-options li:hover { background: #0088ff; color: white; } .app .myselect-options li.selected { background: #0464b8; color: white; } .app .myselect-options li:last-child { border-bottom: none; } .app .myselect-options li.selected{ font-weight: 400; } .app .myselect-options li.selected::before { content: '*'; position: absolute; top: 10px; left: 5px; } .app .my-toast { max-width: 60%; padding: 5px 12px; line-height: 1.5; color: white; font-weight: 500; text-align: center; border-radius: 8px; background: rgba(0, 0, 0, .7); position: fixed; left: 50%; /* top: 32px; */ top: -132px; transform: translateX(-50%); z-index: 999; transition: top 0.4s ease-out; display: block; } .app .my-toast.show { display: block; top: 32px; } #app { margin: 0; height: 100%; display: flex; flex-direction: column; position: relative; } #app .user-info, #app .top-counter { position: fixed; top: 0; right: 0; z-index: 1000; background: rgba(200, 200, 230, .6); padding: 2px 5px; border-radius: 3px 0 0 3px; } #app div.top-counter { right: auto; left: 0px; padding: 2px 10px; border-radius: 0 5px 5px 0; } #app .user-info .name { color: rgb(23, 161, 23); } #app>h1 { margin: 0; } @font-face { font-family: 'HFSimpleLife'; src: url('HFSimpleLife.woff2') format('woff2'), url('HFSimpleLife.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } .app .prev, .app .next { /* font-family: serif, HFSimpleLife, monospace; */ font-family: HFSimpleLife, monospace; font-style: normal; color: #999; background: none; font-size: 50px; position: absolute; padding: 20px 10px; top: 50%; transform: translateY(-50%) scaleY(2.5); left: -10px; cursor: pointer; z-index: 1000; } .app .prev:hover, .app .next:hover { color: #333; /* background: #c1e0f6; */ } .app .next { left: auto; right: -10px; } .ctrl-section { padding: 10px; max-height: 1000px; transition: max-height 0.5s ease; } .tag-bar .tag, .font-bar button { display: inline-block; font-size: 13px; /* padding: 2px 6px; */ padding: 6px; /* margin: 0 5px 2px 0; */ margin: 8px; border-radius: 10px; background: #ccc; cursor: pointer; } .tag-bar .tag.primary { font-size: 15px; padding: 4px 8px; } .know-bar { margin-bottom: 10px; } .font-bar button:hover { background: #ccf; } .tag-bar .tag:hover { background: #cfc; } .tag-bar .tag.active { background: rgb(6, 161, 6); color: white; } .tag-bar .tag.primary:hover { background: #7dc6fd; } .tag-bar .tag.primary.active { background: #0088ff; color: white; } .app-main { flex: 1; /* overflow: hidden; */ } h1 { font-size: 30px; text-align: center; } .action-btn a { color: #333; } .action-btn, .op-btn { padding: 5px 10px; border-radius: 5px; background: #ddd; color: #333; border: 1px solid #ddd; font-size: 20px; cursor: pointer; margin: 10px; } .app.mobile .action-btn { padding: 2px 5px; margin: 3px; font-size: 18px; } /* .op-btn + .op-btn { margin-left: 0; } */ .op-btn.primary a, button.primary a { color: white; } .action-btn:hover, .op-btn:hover, .op-btn-wrap:hover .op-btn { background: #eee; border-color: #eee; } .op-btn.primary, button.primary { background: #0088ff; color: #fff; border-color: #0088ff; } .op-btn.primary:hover, button.primary:hover, .op-btn-wrap:hover .op-btn { background: #0464b8; border-color: #0464b8; } .op-btn.danger, button.danger { background: #e00; color: #fff; border-color: #e00; } .op-btn.danger:hover, button.danger:hover { background: #f00; border-color: #f00; } .op-btn { font-size: 16px; } /* ----------------------- admin ----------------> */ .admin { /* max-width: 500px; */ max-width: auto; } .sticky-0 { position: sticky; top: 0; z-index: 100; background: #f9fafb; } .sticky-50 { position: sticky; top: 50px; z-index: 100; background: #f9fafb; } article.md-text { padding: 0; } .admin .word-list { font-size: 15px; } .admin table.word-list th { font-weight: 400; font-size: 18px; } .admin table.word-list { width: 100%; table-layout: auto; border-collapse: collapse; min-height: 200px; } .admin table.word-list tr { border-bottom: 1px solid #ccc; display: table-row !important; } .admin table.word-list tr.disable { color: #bbb; } .admin table.word-list td, .admin table.word-list th { /* border: 1px solid #ccc; */ } .admin .word-item { margin-bottom: 10px; border-bottom: 1px solid #ccc; } .admin .word-item:last-child { /* border-bottom: none; */ } .admin .word-item .sn:after { /* content: \".\"; */ } .admin .append-line, .admin .upload-line { padding: 0 10px; } .admin .append-line input { width: 180px; } /* ------------------ single -------------------> */ .app .collapse-bar { margin-bottom: 0px; padding-right: 20px; padding-bottom: 10px; font-size: 20px; } .app .collapse-bar .collapse-btn { /* color: coral; */ transform: rotate(-90deg) scaleY(150%); } .app .collapse-bar.close-ctrl .collapse-btn { transform: rotate(90deg) scaleY(150%); } .app .collapse-bar.close-ctrl + .ctrl-section { max-height: 0; padding: 0; overflow: hidden; } .file-input { position: absolute; left: -200px; top: 0; width: 300px; height: 100%; opacity: 0; z-index: 10; } .card-list { min-height: 550px; } .go-btn { position: fixed; z-index: 10000; left: 20px; bottom: 120px; transform: rotate(-90deg); width: 30px; height: 30px; border-radius: 50%; text-align: center; overflow: hidden; opacity: 0.8; line-height: 30px; font-size: 22px; font-weight: bold; background:#90d5dd; cursor: pointer; font-style: normal; font-family: serif; } .go-btn.bottom { bottom: 80px; transform: rotate(90deg); } html button { border: 0; } /* @font-face { font-family: 'AaKaishupinyin'; src: url('AaKaishupinyin.woff2') format('woff2'), url('AaKaishupinyin.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } */ /* @font-face { font-family: 'AaKaishupinyin'; src: url('AaKaishupinyin.woff2') format('woff2'), url('AaKaishupinyin.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } */ @font-face { font-family: 'AaWDXDNFAN'; src: url('AaWDXDNFANNon-CommercialUse.woff2') format('woff2'), url('AaWDXDNFANNon-CommercialUse.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } @font-face { font-family: 'zihunShuxinti'; src: url('zihun104hao-shuxinti.woff2') format('woff2'), url('zihun104hao-shuxinti.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } @font-face { font-family: 'zihun81hao-qingfengti'; src: url('zihun81hao-qingfengti.woff2') format('woff2'), url('zihun81hao-qingfengti.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } @font-face { font-family: 'AaHuayuziluolanyongheng'; src: url('AaHuayuziluolanyongheng.woff2') format('woff2'), url('AaHuayuziluolanyongheng.woff') format('woff'); font-weight: normal; font-style: normal; font-display: swap; } .card-con.font1 { font-family: 'AaWDXDNFAN', \"cursive\", fangsong, serif; } .card-con.font2 { font-family: 'zihun81hao-qingfengti', \"cursive\", fangsong, serif; } .card-con.font3 { font-family: 'zihunShuxinti', \"cursive\", fangsong, serif; } .card-con.font4 { font-family: 'AaHuayuziluolanyongheng', \"cursive\", fangsong, serif; } .card-con.font5 { font-family: 'AaKaishupinyin', \"cursive\", fangsong, serif; } .card-con { letter-spacing: -15px; line-height: 1.2; text-align: center; font-size: 330px; border: 20px solid beige; padding: 10px; background: white; border-radius: 30px; } .mobile .card-con { font-size: 250px; } .card-item-wrap { position: absolute; left: 50%; transform: translate(-50%, -50%); top: 50%; } /* -------------- multiple ---------------> */ .multiple-container .card-item-wrap { width: 90%; } .title-select, .myselect, .my-select { padding: 3px 6px; background: white; border-radius: 5px; border: 1px solid #0088ff; font-size: 13px; width: 200px; min-height: 30px; } .filter-btn { padding: 3px 10px; border-radius: 5px; background: #0088ff; color: white; } .know-bar .op-btn { padding: 2px 5px; font-size: 14px; margin: 0 5px 0; } .testing .card-item .chr::after { display: block; } .card-item .chr::after { display: none; content: \"\"; width: 120%; height: 70%; border-radius: 10px; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); background: #eee; opacity: 1; transition: opacity 0.5s ease-in-out; } aside { visibility: hidden !important; } .card-item.view-answer .chr::after { opacity: 0; } .app .minus-sign { height: 0; width: 8px; border-top: 1px solid #333; margin-right: 3px; transform: translateY(-5px); }"},{"path":"/study/study.js","content":"function getShuffleList(list) { const cloneList = list.slice() function pickRandomOne(list) { const i = Math.floor(Math.random() * list.length) const item = list.splice(i, 1).pop() return item } const retList = [] while(cloneList.length) { const item = pickRandomOne(cloneList) retList.push(item) } return retList } function uniqBy(list, key) { let field = key const valueList = [] const retList = [] list.forEach((val, i) => { const compareValue = typeof key === 'function' ? key(val, i) : key ? val[key] : val if (!valueList.includes(compareValue)) { valueList.push(compareValue) retList.push(val) } }) return retList } function isJsonLike(val) { const re = /^\\[.*\\]$|^\\{.*\\}$/ return re.test(val) } function isPlainObj(val) { return Object.prototype.toString.call(val) === '[object Object]' } function addZero(val) { return val < 10 ? '0' + val : val + '' } function getTodayStr() { const today= new Date() const y = today.getFullYear() const m = today.getMonth() + 1 const d = today.getDate() return [y, m, d].map(addZero).join('-') } class LStorage { constructor() { this.storage = window.localStorage; } set(key, value) { if (isPlainObj(value) || Array.isArray(value)) { value = JSON.stringify(value); } this.storage.setItem(key, value); } get(key) { let value = this.storage.getItem(key); if (isJsonLike(value)) { value = JSON.parse(value); } if (/^[0-9\\.]+$/.test(value)) { value = value * 1 } return value; } del(key) { this.storage.removeItem(key); } clear() { this.storage.clear(); } } const LCache = new LStorage(); function getCurUser() { return LCache.get('curUser') || '' } function getUserKey(cacheKey) { const curUser = getCurUser() return curUser ? curUser + ':' + cacheKey : cacheKey; } const listDataKeys = ['words', 'mwords', 'tags', 'users'] function getCache(cacheKey, skipDisables) { const userKey = getUserKey(cacheKey) let data = LCache.get(userKey) if (listDataKeys.includes(cacheKey) && skipDisables) { data = (data || []).filter(item => item.status !== 'disable') } return data } function clone(data) { return JSON.parse(JSON.stringify(data)) } function setCache(cacheKey, data, isFillDisables) { const userKey = getUserKey(cacheKey) let newData = data if (!listDataKeys.includes(cacheKey) && isFillDisables) { newData = clone(data) const oldData = LCache.get(userKey) || [] const disableIndexLs = oldData.map((item, i) => item.status !== 'disable' ? i : null).filter(v => v !== null) while(disableIndexLs.length > 0) { const i = disableIndexLs.shift() const len = newData.length if (i < len) { newData.splice(i, 0, oldData[i]) } else { newData.push(oldData[i]) } } } LCache.set(userKey, newData) return true } function delArrayItem(arr, item) { const index = arr.findIndex((el) => el === item) if (index > -1) { arr.splice(index, 1) } return arr; } function showToast(msg) { let appDiv = document.querySelector('#app') let toastDiv = document.createElement('div') toastDiv.className = 'my-toast' toastDiv.innerText = msg appDiv.appendChild(toastDiv) setTimeout(() => { toastDiv.classList.add('show') setTimeout(() => { appDiv.removeChild(toastDiv) toastDiv = null appDiv = null }, 2500); }, 300) } function getIsMobile() { return window.innerWidth < 800; } function getAllOptionOfTag() { const allOption = {name: \"all\", text: 'å…¨éƒ¨', reverse: false} return allOption } const priorityWords = [\"ç»ƒä¹ \", \"æµ‹è¯•\", \"ç¬¬\"]; function sortByPriority(list, isPriorityLast = false) { const PList = list.filter((item) => priorityWords.some((w) => item.name.startsWith(w)) ); const OList = list.filter((item) => !PList.includes(item)); PList.sort((a, b) => (a.name > b.name ? 1 : -1)); OList.sort((a, b) => (a.name > b.name ? 1 : -1)); return isPriorityLast ? [...OList, ...PList] : [...PList, ...OList]; } function getTagOptions(tagList) { const allOption = getAllOptionOfTag() const otherOptions = tagList.map(tag => { if (!tag.text) { tag.text = tag.name } if (tag.reverse == null) { tag.reverse = false } return {...tag} }) return [allOption, ...sortByPriority(otherOptions)] } function getSortedTagList(tagList, isPriorityLast) { return sortByPriority(tagList, isPriorityLast); } function updateSelectedForTags(tagList, selectedTags) { tagList.forEach((tag, i) => { const matched = selectedTags.find(t => t.name === tag.name) if (matched) { tagList[i] = matched } }) } function insertNoReferrerMeta() { const meta = document.createElement('meta') meta.setAttribute('name', 'referrer') meta.setAttribute('content', 'no-referrer') document.head.appendChild(meta) } async function defineMyFonts() { const baseURL = 'https://gitee.com/stephenykk/stephenykk.github.io/raw/master/source/study/' const fonts = { // AaKaishupinyin: baseURL + 'AaKaishupinyin.woff2', pinyin: 'https://files.cnblogs.com/files/stephenykk/AaKaishupinyin.woff2.zip' } Object.keys(fonts).forEach(fontName => { const fontURL = fonts[fontName] injectFont(fontName, fontURL) }) } async function injectFont(fontName, fontURL, isObjectURL = false) { // while response content-type is text/plain, res.blob() is empty // const blob = await fetch(fontURL, { mode: 'no-cors'}).then(res => res.blob()) const res = await fetch(fontURL, { /* mode: 'no-cors', */ responseType: 'blob'}) const text = await res.text() // debugger; console.log(\"ğŸš€ ~ injectFont ~ text:\", text) const blob = await res.blob() console.log(\"ğŸš€ ~ injectFont ~ blob:\", blob) let targetURL = '' if (isObjectURL) { const objURL = URL.createObjectURL(obj) targetURL = objURL } else { const reader = new FileReader() const readPromise = new Promise(resolve => { reader.onload = function(event) { resolve(event.target.result) console.log(\"ğŸš€ ~ readPromise ~ event:\", event) } reader.readAsDataURL(blob) }) const dataURL = await readPromise targetURL = dataURL } console.log(\"ğŸš€ ~ injectFont ~ targetURL:\", targetURL) const format = fontURL.replace(/\\.zip$/, '').split('.').pop(); const fontFaceRule = ` @font-face { font-family: ${fontName}; src: url(${targetURL}) format('${format}'); font-weight: normal; font-style: normal; font-display: swap; } ` const style = document.createElement('style') style.type = 'text/css' style.setAttribute('data-font', fontName) if (style.styleSheet) { style.styleSheet.cssText = fontFaceRule; // ie } else { style.appendChild(document.createTextNode(fontFaceRule)) } document.head.appendChild(style) console.log(`inject font [${fontName}] success!`); } insertNoReferrerMeta() // defineMyFonts();"}]