---
title: IPv6地址格式详解
banner: /images/banner_camera.jpg
cover: /images/banner_desk.jpg
date: 2025-04-21 13:28:05
tags:
 - Ipv6
categories:
 - network
---
# IPV6地址格式详解
> 转载自: [https://www.cnblogs.com/cyrusxx/p/12824147.html](https://www.cnblogs.com/cyrusxx/p/12824147.html)

＜IPV6地址的表示方法＞  
IPv4  点分十进制      32bit  
IPv6  冒号分十六进制  128bit  
    
0000:0000:0000:0000:0000:0000:0000:0000=>::  
0000:0000:0000:0000:0000:0000:0000:0001=>0:0:0:0:0:0:0:1=>::1  
2001:0000:0000:1234:0000:0000:0567:00ff=>2001::1234:0:0:567:ff   只能有一个::  
fe80:0000:0000:0000:0000:0000:0000:0009=>fe80::9

内嵌IPV4地址的IPV6地址  
1、IPV4兼容的IPV6地址--用于在IPV4网络上建立自动隧道，以传输IPV6数据包。  
   其中高96bit设为0，后面跟32bit的IPV4地址  
   0000:0000:0000:0000:0000:0000:206.123.31.2  
   0000:0000:0000:0000:0000:0000:ce7b:1f01  
   由于这种机制不太好，现在已经不再使用，转而采用更好的过渡机制  
2、映射IPV4的IPV6地址--仅用于拥有IPV4和IPV6双协议栈节点的本地范围  
   其中高80bit设为0,后16bit设为1，再跟IPV4地址  
   0000:0000:0000:0000:0000:ffff:206.123.31.2  
   0000:0000:0000:0000:0000:ffff:ce7b:1f01

URL的IPV6地址表示  
   为了区分IPV6地址中的冒号和端口号前的冒号，要把IPV6地址用\[\]括起来  
   <www.example.net:8080/index.html>  
   <https:\[2001:410:0:1:250:fcee:e450:33ab\]:8443/abc.html>

IPV6中掩码的表示：  
在IPV6中掩码只能使用CIDR表示法  
2001:410:0:1::45ff/128  
2001:410::1/64  
注意：在IPV6中没有广播地址和网络号保留地址

＜IPV6的地址类型＞  
单播--Unicast : one to one  
·单播地址用于一对一的连接  
·IPv6单播地址有以下六种类型：  
  －Unspecified Address　　                  0:0:0:0:0:0:0:0/128 => ::/128  
  －Loopback Address 　　　                 0:0:0:0:0:0:0:1/128 => ::1/128  
  －IPv4 Compatible Address                 ::192.168.30.1  => ::C0A8:1E01  
  －Link Local Address　　　                 FE80::/10(前10位以FE80开头)  
  －Site Local Address (Private)              FEC0::/10  
   -Aggregate Global Unicast Address   2xxx:xxxxx/3  -  3FFF: :FFFF  
    2001::/16  IPV6因特网地址  
    2002::/16  6to4过渡地址

以下是一些单播地址的具体说明：  
本地链路地址：link-local address  
当在一个节点启用IPV6，启动时节点的每个接口自动生成一个link-local address  
其前缀64位为标准指定的，其后64位按EUI-64格式来构造  
注意：在本链路上，路由表中看到的下一跳都是对端的Link Local地址,不是公网IP地址

前缀：FE80::/10  
范围：只能在本地链路使用，不能在子网间路由

为何需要link-local--在一个接口可以配置很多IPv6地址，所以学习路由就有可能出现很多下一跳。  
所以出现Link Local地址唯一标识一个节点。在本地链路看到下一跳都是对端的Link Local地址。  
在网络重新编址过程中，节点和路由器的Link Local地址不会发生变化，可以很容易地做一个修改，不用担心网络不可达。

EUI-64的构造规则--根据接口的MAC地址再加上固定的前缀来生成一个IPV6的link-local地址

例如：MAC地址--0010.7b80.032f以此为例来生成一个IPV6地址  
1、将MAC地址从中间分为两段，0010.7b和80.032f  
2、在两段的中间加入ff.fe--0010.7b.ff.fe.80.032f  
3、将第7个比特位转换（0转1,1转0）--0210.7bff.fe80.32f  
4、加上前缀--FE80::0210:7BFF:FE80:032F这是link-local地址  
再生成被请求节点的组播地址--FF02::1:FF80:32F直接将后24位移下来就可

R1（config-if）#ipv6 address FE80:0:0:0:0123:0456:0789:0abc link-local   手工指定link-local地址

  
本地站点地址：site-local address  
IPV6的私网地址，就像IPV4中的私网保留地址一样  
只占用到整个IPV6地址空间的0.1%

前缀：FEC0::/10  其后的54比特用于子网ID  最后64位用于主机ID  
范围：只能在本站点内使用，不能在公网上使用

例如：在本地分配十个子网  
1、FEC0:0:0:0001::/64  
2、FEC0:0:0:0002::/64  
3、FEC0:0:0:0003::/64  
10、FEC0:0:0:000A::/64

本地站点地址被设计用于永远不会与全球IPV6因特网进行通信的设备，比如：打印机、内部网服务器、网络交换机等

可聚合全球单播地址Aggregate global unicast address

由IANA分配的可在全球路由的公网IP地址

目前已分配的前缀：2000::/3     占用了12.5%的IPV6地址空间  
2000:0000:0000:0000:0000:0000:0000:0000--3FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF:FFFF

这个前缀中总共包含8192个/16的前缀  
目前实际用于IPV6因特网运作的前缀：2001::/16  
2002::/16 为使用6-TO-4过渡机制的节点保留  
3ffe::/16 用于6bone测试目的的前缀

未指定地址Unspecified address

形式：0:0:0:0:0:0:0:0   
表示地址未指定，或者在写默认路由时代表所有路由

回环地址Loopack address

形式：0:0:0:0:0:0:0:1  
同IPV4中127.0.0.1地址的含义一样，表示节点自已

组播地址Multicast  
在IPV6中没有广播，用组播来代替

前缀：FF00::/8   占用了0.38%的IPV6地址空间  
            
      1111    1111    4bit       4bit  
     ｜→固定值←｜|→标志←| |→范围←|

标志位为0000表示是永久保留的组播地址，分配给各种技术使用  
标志位为0001表示是用户可自定义的临时组播地址

范围段定义了组播地址的范围，其定义如下：

二进制    十六进制    范围类型  
0001          1       本地接口范围  
0010          2       本地链路范围  
0011          3       本地子网范围       
0100          4       本地管理范围  
0101          5       本地站点范围  
1000          8       组织机构范围  
1110          E       全球范围

下面是一些组播指定地址：  
FF02::1    all nodes   在本地链路范围的所有节点  
FF02::2    all routers 在本地链路范围的所有路由器  
FF02::5    all ospf routers  
FF02::9    all rip routers 所有运行RIP的路由器  
FF02::A    all eigrp routers 所有运行eigrp的路由器  
FF05::2                在一个站点范围内的所有路由器

![](https://img-blog.csdnimg.cn/20200422083029665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMjA3Nzgx,size_16,color_FFFFFF,t_70)  
被请求节点的组播地址solicited-node multicast address--重要的东东  
一种特殊的组播地址，对于节点或路由器的接口上配置的每个单播和任意播地址，都会自动生成一个对应的被请求节点组播地址。注意link-local address也会生成一个被请求节点的组播地址。

工作范围：只在本地链路上有效  
特点 ：  
1 在本地链路上，被请求接点的组播地址中只包含一个用户  
2 只要知道一个接点的ipv6地址，就能计算出他的被请求节点的组播地址  
作用：1、在IPV6中，没有ARP。ICMP代替了ARP的功能，被请求节点的组播地址被节点用来获得相同本地链路上邻居节点的链路层地址  
      2、用于重复地址检测DAD，在使用无状态自动配置将某个地址配置为自已的IPV6地址之前，节点利用DAD验证在其本地链路上该地址是否已经被使用。

前缀：FF02:0000:0000:0000:0000:0001:FFxx:xxxx/104  
      FF02::1:FFxx:xxxx/104

如何产生：被请求节点组播地址的前104位固定，将IP地址的后24位移下来填充到后面就可以了  
   例如：IPv6---2001::1234:5678/64  
   被请求节点组播地址---FF02::1:FF34:5678/104  
   其中FF02::1:FF为固定部分，共104位

组播IP地址到MAC地址的映射：

映射规则：组播MAC地址的前16位固定为0x3333，将组播IPV6地址的后32位直接映射到组播MAC地址的后32位就可以了。  
例：IPV6地址为--FF12::1234:5678/64  
    对应的组播MAC地址为--3333:1234:5678  
    0x3333为固定前缀

例：所有节点的组播地址：FF02::0001  
    对应的组播MAC地址：3333:0000:0001

任意播地址Anycast address  
应用在one-to-nearest（一到近）模式

组播的接受对象是一组成员,是个群体.任意播是多个设备共享一个地址.分配IPv6单播(unicast)地址给拥有相同功用的一些设备.发送方发送一个以任意播为目标地址的包,当路由器接受到这个包以后,就转发给具有这个地址的离它最近的设备.单播地址用来分配任意播地址.对于那些没有配备任意播的的地址就是单播地址;但是当一个单播地址分配给不止一个接口的时候,单播地址就成了任意播地址。

例如：Mobile方面的特性，移动设备漫游到其他区域，不必接入原始的接入点，只需要找到最近的即可。

必须的IPV6地址：

一旦节点启用IPV6，那么接口就会自动生成下列地址  
1、本地链路地址  
2、回环地址  
3、所有节点多播地址FF01::1和FF02::1

如果接口配了一个IPV6的单播地址，还会产生被请求节点的组播地址

EUI-64格式：  
在IPV6中，无状态自动配置机制使用EUI-64格式来自动配置IPV6地址  
所谓无状态自动配置是指在网络中没有DHCP服务器的情况下，允许节点自行配置IPV6地址的机制。  
工作原理：自动将48bit的以太网MAC地址扩展成64bit，再挂在一个64bit的前缀后面，组成一个IPV6地址  
MAC地址是48位的，从中间断开各24位，在中间加上FF FE，再把加上后地址的第7位0改成1，如果是1则改成0

一、将48位的MAC地址从中间分开，插入一个固定数值FFFE  
    0050:3EE4:4C00-->0050:3EFF:FEE4:4C00

二、将第7个比特位反转，如果原来是0，就变为1,如果原来是1，就变为0  
    0050:3EFF:FEE4:4C00-->0250:3EFF:FEE4:4C00

反转的原因：  
　　在MAC地址中，第7比特为1表示本地管理，为0表示全球管理  
　　在EUI-64格式中，第7位为1表示全球惟一，为0表示本地唯一