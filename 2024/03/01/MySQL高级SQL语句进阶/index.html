
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.27.0" theme-name="Stellar" theme-version="1.27.0">
  
  <meta name="generator" content="Hexo 7.1.1">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="referrer" content="no-referrer">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>MySQL高级SQL语句进阶 - JKK随笔</title>

  
    <meta name="description" content="MySQL 高级（进阶）SQL 语句 原文地址MySQL 高级（进阶）SQL 语句 - 掘金  1. MySQL SQL 语句1.1 常用查询常用查询简单来说就是 增、删、改、查 对 MySQL 数据库的查询，除了基本的查询外，有时候需要对查询的结果集进行处理。 例如只取 10 条数据、对查询结果进行排序或分组等等 1、按关键字排序 PS:类比于 windows 任务管理器 使用 SELECT 语">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL高级SQL语句进阶">
<meta property="og:url" content="https://panzhenjie.fun/2024/03/01/MySQL%E9%AB%98%E7%BA%A7SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6/index.html">
<meta property="og:site_name" content="JKK随笔">
<meta property="og:description" content="MySQL 高级（进阶）SQL 语句 原文地址MySQL 高级（进阶）SQL 语句 - 掘金  1. MySQL SQL 语句1.1 常用查询常用查询简单来说就是 增、删、改、查 对 MySQL 数据库的查询，除了基本的查询外，有时候需要对查询的结果集进行处理。 例如只取 10 条数据、对查询结果进行排序或分组等等 1、按关键字排序 PS:类比于 windows 任务管理器 使用 SELECT 语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2db0d1dd3e4644bd8033bc459900a9bd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1025&h=541&s=93961&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/331065f810b040e7b934353208ecf06b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=922&h=492&s=106545&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d730025f63346deafd5b99bbc677636~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=752&h=525&s=88077&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/926e6da8b40c4ec2a6d0adce56e00e47~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1044&h=249&s=33625&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f6cc15794953455ca7597e867e34b66c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=818&h=287&s=67084&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b355d611be140258f665d53231da6b9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=890&h=242&s=46981&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d259a07794bc41138429bd5041d356bd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=778&h=267&s=42788&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d86c0dd32e084e6eb1f56c4dcdebb331~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=871&h=287&s=60299&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcbd468974a0423f87deff943be7406a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1128&h=389&s=100049&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5e89aa1ef0c491cb032ddc9f994671f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=586&h=545&s=58664&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/002c21f1bd134f6ebf3be19cfd66aa1f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=517&h=640&s=72428&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1257abbd5fb8480ab816969ff54e7087~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1050&h=245&s=42961&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7d79649470b47d0a83f8a2027639eac~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1012&h=524&s=82749&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ced6769d5bc44db87f1a28e0f7eae45~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=919&h=513&s=58558&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15a81cc3337f4ec9b4b5abc5c3f829f3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1085&h=263&s=48257&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1fb04c74429f43d4ab3e81fdfff6b6c1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1123&h=250&s=45032&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bb39f394239489588ea8a92348e5df3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=722&h=371&s=52501&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/67ab5732e1da42b48986f6c272f2488d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1046&h=226&s=32242&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e5609253fe3416786ed5325105ac649~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=997&h=755&s=143363&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3727c944b7684b2f871c851846c19e44~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=762&h=375&s=70433&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9906d97ee6d49ffa900f8b130eb3ec5~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1253&h=889&s=637487&e=png&b=fdfdfd">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b7edcd7336b43c1a1a1fc733c89f8c7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=995&h=238&s=62152&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18287834da5d4e55878285af7ded9e43~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=962&h=275&s=64337&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f27393508d2c4b7dbc758d1efc2818a1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1040&h=238&s=59853&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e01814bb9d0e48c19fd96bbb871a3bce~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=938&h=263&s=37382&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a2a0f0f542ae46cf83b8fcc0f61ec7c2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=889&h=494&s=54684&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e92484387fbe42d2b1d233e2aac8789d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=916&h=393&s=49904&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e33284077b941e596ca61ae0e66870d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1074&h=542&s=79067&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0616d02dc334794ae1aebfbb12c48d0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1101&h=446&s=65908&e=png&b=000000">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ee0f590f7434fd6948dd8eae1250b1e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1071&h=521&s=81845&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30689bb8636e4db497fdc1a6c799d078~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=858&h=481&s=94659&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6daed6d73204a1ba92121e28f29416d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=834&h=536&s=81712&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e747500364334921b29532af7be9531d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=898&h=273&s=47327&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c51f2c8610b7484893cb84f8a001338e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=884&h=343&s=44218&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57e14cd8b7a44a5da9983e729ed9ee4a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1130&h=491&s=99736&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84c7323382e545b68d36dd6caca7a6d9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=915&h=437&s=54914&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4d244861a72482aaedb437583764bce~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=956&h=235&s=43807&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fead3cca2bf240d9ab40b3edc6f50969~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=934&h=423&s=71688&e=png&b=000000">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5643f34b44e94d3796895589e873291c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=930&h=636&s=71120&e=png&b=000000">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09bf835570d0495b91e2e90e7cfc49b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=996&h=532&s=50757&e=png&b=000000">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/037f42f6a7a8467a839d6d88d1483856~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1056&h=707&s=194873&e=png&b=1c1c1c">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2107e2a9a7745c6910e3ab6f471ad92~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=957&h=265&s=61994&e=png&b=1c1c1c">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bb4949d0c424409bf07255cb8b4d687~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=963&h=127&s=55151&e=png&b=1c1c1c">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a2444a7711334a06b56f2ddaff16b34b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1051&h=471&s=86108&e=png&b=1c1c1c">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac655c2a283a426a80e9de66a5695426~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=824&h=324&s=59787&e=png&b=1c1c1c">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f0f68b89f254717891fd56212579512~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=950&h=696&s=99100&e=png&b=1c1c1c">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62ab552897194856aaad5c66716e41f4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1040&h=340&s=58202&e=png&b=1c1c1c">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45501292a60f4ec2b1dccf4d0151e223~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1017&h=235&s=63354&e=png&b=1c1c1c">
<meta property="article:published_time" content="2024-03-01T01:00:11.000Z">
<meta property="article:modified_time" content="2025-02-16T15:20:16.023Z">
<meta property="article:author" content="stephenykk">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2db0d1dd3e4644bd8033bc459900a9bd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1025&h=541&s=93961&e=png&b=000000">
  
  
  
  <meta name="keywords" content="SQL">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.27.0">

  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img referrerpolicy="no-referrer" no-lazy class="avatar" src="https://avatars.githubusercontent.com/u/7259892?s=400&u=01563911436a79d809f95ca8d1191c8a7ecc6f56&v=4" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">JKK随笔</div><div class="sub normal cap">搬砖工</div><div class="sub hover cap" style="opacity:0"> 但行好事 莫问前程</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="站内搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"><a class="nav-item active" title="博客" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="小学堂" href="/study/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/2025/06/04/%E7%82%BC%E6%B0%94%E6%8A%80%E6%9C%AF%E6%A0%88Shell%E8%84%9A%E6%9C%AC%EF%BC%9A%E4%BB%8E%E5%9F%BA%E7%A1%80%E5%90%AF%E7%A8%8B/"><span class="title">炼气技术栈Shell脚本：从基础启程</span></a><a class="item title" href="/2025/06/03/%E7%82%BC%E6%B0%94%E6%8A%80%E6%9C%AF%E6%A0%88shell%EF%BC%9A%E5%88%9D%E8%AF%86/"><span class="title">炼气技术栈shell 初识</span></a><a class="item title" href="/2025/05/28/vim%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"><span class="title">vim快速入门教程</span></a><a class="item title" href="/2024/03/12/%E5%8D%81%E5%88%86%E9%92%9F%E5%AD%A6%E4%BC%9AWebSocket/"><span class="title">十分钟学会WebSocket</span></a><a class="item title" href="/2025/05/30/%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90git%E5%85%A5%E9%97%A8%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/"><span class="title">强烈推荐git入门图文教程</span></a><a class="item title" href="/2025/05/30/%E9%9D%9E%E5%B8%B8%E8%AF%A6%E7%BB%86%E7%9A%84git%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B/"><span class="title">非常详细的git图文教程</span></a><a class="item title" href="/2025/05/29/git%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"><span class="title">git快速入门教程</span></a><a class="item title" href="/2025/04/08/%E8%81%8A%E8%81%8Acanvas%E7%BB%98%E5%9B%BE%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"><span class="title">聊聊canvas绘图状态管理</span></a><a class="item title" href="/2025/04/21/%E6%B5%85%E8%AF%B4%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/"><span class="title">浅说虚拟列表实现原理</span></a><a class="item title" href="/2025/04/10/three-js%E8%BD%BB%E6%9D%BE%E5%85%A5%E9%97%A8/"><span class="title">three.js轻松入门</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/SQL/">SQL</a></div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2024-03-01T01:00:11.000Z">2024-03-01</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2025-02-16T15:20:16.023Z">2025-02-16</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>MySQL高级SQL语句进阶</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h1 id="MySQL-高级（进阶）SQL-语句"><a href="#MySQL-高级（进阶）SQL-语句" class="headerlink" title="MySQL 高级（进阶）SQL 语句"></a>MySQL 高级（进阶）SQL 语句</h1><blockquote>
<p>原文地址<a target="_blank" rel="noopener" href="https://juejin.cn/post/7291952951047929868?searchId=2024011310571618AD0BAFA6AADC97E3A3">MySQL 高级（进阶）SQL 语句 - 掘金</a></p>
</blockquote>
<h1 id="1-MySQL-SQL-语句"><a href="#1-MySQL-SQL-语句" class="headerlink" title="1. MySQL SQL 语句"></a>1. MySQL SQL 语句</h1><h2 id="1-1-常用查询"><a href="#1-1-常用查询" class="headerlink" title="1.1 常用查询"></a>1.1 常用查询</h2><p>常用查询简单来说就是 增、删、改、查</p>
<p>对 MySQL 数据库的查询，除了基本的查询外，有时候需要对查询的结果集进行处理。 例如只取 10 条数据、对查询结果进行排序或分组等等</p>
<p>1、按关键字排序 PS:类比于 windows 任务管理器 使用 SELECT 语句可以将需要的数据从 MySQL 数据库中查询出来，如果对查询的结果进行排序，可以使用 ORDER BY 语句来对语句实现排序，并最终将排序后的结果返回给用户。这个语句的排序不光可以针对某一个字段，也可以针对多个字段</p>
<p>（1）语法 <code>SELECT column1, column2, … FROM table_name ORDER BY column1, column2, …</code></p>
<p><code>ASC</code>|<code>DESC</code> ASC 是按照升序进行排序的，是默认的排序方式，即 ASC 可以省略。SELECT 语句中如果没有指定具体的排序方式，则默认按 ASC 方式进行排序。</p>
<p>DESC 是按降序方式进 行排列。当然 ORDER BY 前面也可以使用 WHERE 子句对查询结果进一步过滤。</p>
<p>准备工作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database k1;<br>use k1;<br>create table location (Region char(20),Store_Name char(20));<br>insert into location values(&#x27;East&#x27;,&#x27;Boston&#x27;);<br>insert into location values(&#x27;East&#x27;,&#x27;New York&#x27;);<br>insert into location values(&#x27;West&#x27;,&#x27;Los Angeles&#x27;);<br>insert into location values(&#x27;West&#x27;,&#x27;Houston&#x27;);<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table store_info (Store_Name char(20),Sales int(10),Date char(10));<br>insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;1500&#x27;,&#x27;2020-12-05&#x27;);<br>insert into store_info values(&#x27;Houston&#x27;,&#x27;250&#x27;,&#x27;2020-12-07&#x27;);<br>insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;300&#x27;,&#x27;2020-12-08&#x27;);<br>insert into store_info values(&#x27;Boston&#x27;,&#x27;700&#x27;,&#x27;2020-12-08&#x27;);<br></code></pre></td></tr></table></figure>

<h2 id="1-2-SELECT"><a href="#1-2-SELECT" class="headerlink" title="1.2 SELECT"></a>1.2 SELECT</h2><p><strong>显示表格中一个或数个字段的所有数据记录</strong> <strong>语法：SELECT “字段” FROM “表名”;</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name FROM location;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2db0d1dd3e4644bd8033bc459900a9bd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1025&h=541&s=93961&e=png&b=000000" alt="d1.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name FROM Store_Info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/331065f810b040e7b934353208ecf06b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=922&h=492&s=106545&e=png&b=000000" alt="d2.png"></p>
<h2 id="1-3-DISTINCT"><a href="#1-3-DISTINCT" class="headerlink" title="1.3 DISTINCT"></a>1.3 DISTINCT</h2><p><strong>不显示重复的数据记录</strong></p>
<p><strong>语法：<code>SELECT DISTINCT &quot;字段&quot; FROM &quot;表名&quot;;</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT Store_Name FROM Store_Info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d730025f63346deafd5b99bbc677636~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=752&h=525&s=88077&e=png&b=000000" alt="d3.png"></p>
<h2 id="1-4-AND-OR"><a href="#1-4-AND-OR" class="headerlink" title="1.4 AND OR"></a>1.4 AND OR</h2><p><strong>且 或</strong></p>
<p><strong>语法：<code>SELECT &quot;字段&quot; FROM &quot;表名&quot; WHERE &quot;条件1&quot; &#123;[AND|OR] &quot;条件2&quot;&#125;+ ;</code></strong></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/926e6da8b40c4ec2a6d0adce56e00e47~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1044&h=249&s=33625&e=png&b=000000" alt="d4.png"></p>
<h2 id="1-5-in"><a href="#1-5-in" class="headerlink" title="1.5 in"></a>1.5 in</h2><p><strong>显示已知的值的数据记录</strong></p>
<p><strong>语法：<code>SELECT &quot;字段&quot; FROM &quot;表名&quot; WHERE &quot;字段&quot; IN (&#39;值1&#39;, &#39;值2&#39;, ...);</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM store_info WHERE Store_Name IN (&#x27;Los Angeles&#x27;, &#x27;Houston&#x27;);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f6cc15794953455ca7597e867e34b66c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=818&h=287&s=67084&e=png&b=000000" alt="b5.png"></p>
<h2 id="1-6-BETWEEN"><a href="#1-6-BETWEEN" class="headerlink" title="1.6 BETWEEN"></a>1.6 BETWEEN</h2><p><strong>显示两个值范围内的数据记录</strong></p>
<p><strong>语法：<code>SELECT &quot;字段&quot; FROM &quot;表名&quot; WHERE &quot;字段&quot; BETWEEN &#39;值1&#39; AND &#39;值2&#39;;</code></strong></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b355d611be140258f665d53231da6b9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=890&h=242&s=46981&e=png&b=000000" alt="d6.png"></p>
<h2 id="2-通配符"><a href="#2-通配符" class="headerlink" title="2. 通配符"></a>2. 通配符</h2><p>通常与 LIKE 搭配 一起使用</p>
<blockquote>
<p>% ：百分号表示零个、一个或多个字符</p>
<p>_ ：下划线表示单个字符</p>
<p>‘A_Z’：所有以 ‘A’ 起头，另一个任何值的字符，且以 ‘Z’ 为结尾的字符串。例如，’ABZ’ 和 ‘A2Z’ 都符合这一个模式，而 ‘AKKZ’ 并不符合 (因为在 A 和 Z 之间有两个字符，而不是一个字符)。</p>
<p>‘ABC%’: 所有以 ‘ABC’ 起头的字符串。例如，’ABCD’ 和 ‘ABCABC’ 都符合这个模式。 ‘%XYZ’: 所有以 ‘XYZ’ 结尾的字符串。例如，’WXYZ’ 和 ‘ZZXYZ’ 都符合这个模式。</p>
<p>‘%AN%’: 所有含有 ‘AN’这个模式的字符串。例如，’LOS ANGELES’ 和 ‘SAN FRANCISCO’ 都符合这个模式。</p>
<p>‘_AN%’：所有第二个字母为 ‘A’ 和第三个字母为 ‘N’ 的字符串。例如，’SAN FRANCISCO’ 符合这个模式，而 ‘LOS ANGELES’ 则不符合这个模式。</p>
</blockquote>
<h3 id="2-1-LIKE"><a href="#2-1-LIKE" class="headerlink" title="2.1 LIKE"></a>2.1 LIKE</h3><p><strong>匹配一个模式来找出我们要的数据记录</strong></p>
<p><strong>语法：<code>SELECT &quot;字段&quot; FROM &quot;表名&quot; WHERE &quot;字段&quot; LIKE &#123;模式&#125;;</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM store_info WHERE Store_Name like &#x27;%os%&#x27;;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d259a07794bc41138429bd5041d356bd~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=778&h=267&s=42788&e=png&b=000000" alt="d7.png"></p>
<h3 id="2-2-ORDER-BY"><a href="#2-2-ORDER-BY" class="headerlink" title="2.2 ORDER BY"></a>2.2 ORDER BY</h3><p><strong>按关键字排序</strong></p>
<p><strong>语法：<code>SELECT &quot;字段&quot; FROM &quot;表名&quot; [WHERE &quot;条件&quot;] ORDER BY &quot;字段&quot; [ASC, DESC];</code></strong></p>
<p><strong>注意</strong>：<code>ASC</code> 是按照<strong>升序</strong>进行排序的，是<strong>默认的</strong>排序方式。 <code>DESC</code> 是按<strong>降序</strong>方式进行排序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name,Sales,Date FROM store_info ORDER BY Sales DESC;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d86c0dd32e084e6eb1f56c4dcdebb331~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=871&h=287&s=60299&e=png&b=000000" alt="d8.png"></p>
<h2 id="3-函数"><a href="#3-函数" class="headerlink" title="3. 函数"></a>3. 函数</h2><h3 id="3-1-数学函数"><a href="#3-1-数学函数" class="headerlink" title="3.1 数学函数"></a>3.1 数学函数</h3><table>
<thead>
<tr>
<th>abs(x)</th>
<th>返回 x 的绝对值</th>
</tr>
</thead>
<tbody><tr>
<td>rand()</td>
<td>返回 0 到 1 的随机数</td>
</tr>
<tr>
<td>mod(x,y)</td>
<td>返回 x 除以 y 以后的余数</td>
</tr>
<tr>
<td>power(x,y)</td>
<td>返回 x 的 y 次方</td>
</tr>
<tr>
<td>round(x)</td>
<td>返回离 x 最近的整数</td>
</tr>
<tr>
<td>round(x,y)</td>
<td>保留 x 的 y 位小数四舍五入后的值</td>
</tr>
<tr>
<td>sqrt(x)</td>
<td>返回 x 的平方根</td>
</tr>
<tr>
<td>truncate(x,y)</td>
<td>返回数字 x 截断为 y 位小数的值</td>
</tr>
<tr>
<td>ceil(x)</td>
<td>返回大于或等于 x 的最小整数</td>
</tr>
<tr>
<td>floor(x)</td>
<td>返回小于或等于 x 的最大整数</td>
</tr>
<tr>
<td>greatest(x1,x2…)</td>
<td>返回集合中最大的值，也可以返回多个字段的最大的值</td>
</tr>
<tr>
<td>least(x1,x2…)</td>
<td>返回集合中最小的值，也可以返回多个字段的最小的值</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT abs(-1), rand(), mod(5,3), power(2,3), round(1.89);<br>SELECT round(1.8937,3), truncate(1.235,2), ceil(5.2), floor(2.1), least(1.89,3,6.1,2.1);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcbd468974a0423f87deff943be7406a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1128&h=389&s=100049&e=png&b=000000" alt="d9.png"></p>
<h3 id="3-2-聚合函数"><a href="#3-2-聚合函数" class="headerlink" title="3.2 聚合函数"></a>3.2 聚合函数</h3><table>
<thead>
<tr>
<th>avg()</th>
<th>返回指定列的平均值</th>
</tr>
</thead>
<tbody><tr>
<td>count()</td>
<td>返回指定列中非 NULL 值的个数</td>
</tr>
<tr>
<td>min()</td>
<td>返回指定列的最小值</td>
</tr>
<tr>
<td>max()</td>
<td>返回指定列的最大值</td>
</tr>
<tr>
<td>sum(x)</td>
<td>返回指定列的所有值之和</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT avg(Sales) FROM store_info;<br><br>SELECT count(Store_Name) FROM store_info;<br>SELECT count(DISTINCT Store_Name) FROM store_info;<br><br>SELECT max(Sales) FROM store_info;<br>SELECT min(Sales) FROM store_info;<br><br>SELECT sum(Sales) FROM store_info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5e89aa1ef0c491cb032ddc9f994671f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=586&h=545&s=58664&e=png&b=000000" alt="d10.png"></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/002c21f1bd134f6ebf3be19cfd66aa1f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=517&h=640&s=72428&e=png&b=000000" alt="d11.png"></p>
<h3 id="3-3-字符串函数"><a href="#3-3-字符串函数" class="headerlink" title="3.3 字符串函数"></a>3.3 字符串函数</h3><table>
<thead>
<tr>
<th>trim()</th>
<th>返回去除指定格式的值</th>
</tr>
</thead>
<tbody><tr>
<td>concat(x,y)</td>
<td>将提供的参数 x 和 y 拼接成一个字符串</td>
</tr>
<tr>
<td>substr(x,y)</td>
<td>获取从字符串 x 中的第 y 个位置开始的字符串，跟 substring()函数作用相同</td>
</tr>
<tr>
<td>substr(x,y,z)</td>
<td>获取从字符串 x 中的第 y 个位置开始长度为 z 的字符串</td>
</tr>
<tr>
<td>length(x)</td>
<td>返回字符串 x 的长度</td>
</tr>
<tr>
<td>replace(x,y,z)</td>
<td>将字符串 z 替代字符串 x 中的字符串 y</td>
</tr>
<tr>
<td>upper(x)</td>
<td>将字符串 x 的所有字母变成大写字母</td>
</tr>
<tr>
<td>lower(x)</td>
<td>将字符串 x 的所有字母变成小写字母</td>
</tr>
<tr>
<td>left(x,y)</td>
<td>返回字符串 x 的前 y 个字符</td>
</tr>
<tr>
<td>right(x,y)</td>
<td>返回字符串 x 的后 y 个字符</td>
</tr>
<tr>
<td>repeat(x,y)</td>
<td>将字符串 x 重复 y 次</td>
</tr>
<tr>
<td>space(x)</td>
<td>返回 x 个空格</td>
</tr>
<tr>
<td>strcmp(x,y)</td>
<td>比较 x 和 y，返回的值可以为-1,0,1</td>
</tr>
<tr>
<td>reverse(x)</td>
<td>将字符串 x 反转</td>
</tr>
</tbody></table>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1257abbd5fb8480ab816969ff54e7087~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1050&h=245&s=42961&e=png&b=000000" alt="d12.png"></p>
<p><strong>如 sql_mode 开启了 PIPES_AS_CONCAT，”||” 视为字符串的连接操作符而非或运算符，和字符串的拼接函数 Concat 相类似，这和 Oracle 数据库使用方法一样的</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Region || &#x27; &#x27; || Store_Name FROM location WHERE Store_Name = &#x27;Boston&#x27;;<br>SELECT substr(Store_Name,3) FROM location WHERE Store_Name = &#x27;Los Angeles&#x27;;<br>SELECT substr(Store_Name,2,4) FROM location WHERE Store_Name = &#x27;New York&#x27;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7d79649470b47d0a83f8a2027639eac~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1012&h=524&s=82749&e=png&b=000000" alt="d13.png"></p>
<p><strong><code>SELECT TRIM ([ [位置] [要移除的字符串] FROM ] 字符串);</code></strong></p>
<p>**[位置]：的值可以为 LEADING (起头), TRAILING (结尾), BOTH (起头及结尾)。 **</p>
<p><strong>[要移除的字符串]：从字串的起头、结尾，或起头及结尾移除的字符串。缺省时为空格。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT TRIM(LEADING &#x27;Ne&#x27; FROM &#x27;New York&#x27;);<br><br>SELECT Region,length(Store_Name) FROM location;<br><br>SELECT REPLACE(Region,&#x27;ast&#x27;,&#x27;astern&#x27;)FROM location;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ced6769d5bc44db87f1a28e0f7eae45~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=919&h=513&s=58558&e=png&b=000000" alt="d14.png"></p>
<h2 id="4-GROUP-BY"><a href="#4-GROUP-BY" class="headerlink" title="4. GROUP BY"></a>4. GROUP BY</h2><p><strong>对 GROUP BY 后面的字段的查询结果进行汇总分组，通常是结合聚合函数一起使用的</strong></p>
<p><strong>GROUP BY 有一个原则</strong></p>
<ul>
<li><strong>凡是在 GROUP BY 后面出现的字段，必须在 SELECT 后面出现；</strong></li>
<li><strong>凡是在 SELECT 后面出现的、且未在聚合函数中出现的字段，必须出现在 GROUP BY 后面</strong></li>
</ul>
<p><strong>语法：<code>SELECT &quot;字段1&quot;, SUM(&quot;字段2&quot;) FROM &quot;表名&quot; GROUP BY &quot;字段1&quot;;</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name, SUM(Sales) FROM store_info GROUP BY Store_Name ORDER BY sales desc;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15a81cc3337f4ec9b4b5abc5c3f829f3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1085&h=263&s=48257&e=png&b=000000" alt="d15.png"></p>
<h2 id="5-别名"><a href="#5-别名" class="headerlink" title="5. 别名"></a>5. 别名</h2><p><strong>字段別名 表格別名</strong></p>
<p><strong>语法：<code>SELECT &quot;表格別名&quot;.&quot;字段1&quot; [AS] &quot;字段別名&quot; FROM &quot;表格名&quot; [AS] &quot;表格別名&quot;;</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT A.Store_Name Store, SUM(A.Sales) &quot;Total Sales&quot; FROM store_info A GROUP BY A.Store_Name;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1fb04c74429f43d4ab3e81fdfff6b6c1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1123&h=250&s=45032&e=png&b=000000" alt="d16.png"></p>
<h2 id="6-子查询"><a href="#6-子查询" class="headerlink" title="6. 子查询"></a>6. 子查询</h2><p>子查询也被称作内查询或者嵌套查询，是指在一个查询语句里面还嵌套着另一个查询语 句。子查询语句是先于主查询语句被执行的，其结果作为外层的条件返回给主查询进行下一 步的查询过滤</p>
<p><strong>连接表格，在 WHERE 子句或 HAVING 子句中插入另一个 SQL 语句</strong></p>
<p><strong>语法：<code>SELECT &quot;字段1&quot; FROM &quot;表格1&quot; WHERE &quot;字段2&quot; [比较运算符] #外查询 (SELECT &quot;字段1&quot; FROM &quot;表格2&quot; WHERE &quot;条件&quot;); #内查询</code></strong></p>
<p><code>[比较运算符]</code></p>
<p>可以是符号的运算符，例如 &#x3D;、&gt;、&lt;、&gt;&#x3D;、&lt;&#x3D; ；也可以是文字的运算符，例如 LIKE、IN、BETWEEN</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM(Sales) FROM store_info WHERE Store_Name IN<br>(SELECT Store_Name FROM location WHERE Region = &#x27;West&#x27;);<br><br>SELECT SUM(A.Sales) FROM store_info A WHERE A.Store_Name IN<br>(SELECT Store_Name FROM location B WHERE B.Store_Name = A.Store_Name);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5bb39f394239489588ea8a92348e5df3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=722&h=371&s=52501&e=png&b=000000" alt="d17.png"></p>
<h2 id="7-EXISTS"><a href="#7-EXISTS" class="headerlink" title="7. EXISTS"></a>7. EXISTS</h2><p><strong>用来测试内查询有没有产生任何结果，类似布尔值是否为真</strong> <strong>#如果有的话，系统就会执行外查询中的 SQL 语句。若是没有的话，那整个 SQL 语句就不会产生任何结果。</strong></p>
<p><strong>语法：<code>SELECT &quot;字段1&quot; FROM &quot;表格1&quot; WHERE EXISTS (SELECT \* FROM &quot;表格2&quot; WHERE &quot;条件&quot;);</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT SUM(Sales) FROM store_info WHERE EXISTS (SELECT * FROM location WHERE Region = &#x27;West&#x27;);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/67ab5732e1da42b48986f6c272f2488d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1046&h=226&s=32242&e=png&b=000000" alt="d18.png"></p>
<h2 id="8-连接查询"><a href="#8-连接查询" class="headerlink" title="8. 连接查询"></a>8. 连接查询</h2><p>准备工作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create database k1;<br>use k1;<br>create table location (Region char(20),Store_Name char(20));<br>insert into location values(&#x27;East&#x27;,&#x27;Boston&#x27;);<br>insert into location values(&#x27;East&#x27;,&#x27;New York&#x27;);<br>insert into location values(&#x27;West&#x27;,&#x27;Los Angeles&#x27;);<br>insert into location values(&#x27;West&#x27;,&#x27;Houston&#x27;);<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table store_info (Store_Name char(20),Sales int(10),Date char(10));<br>insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;1500&#x27;,&#x27;2020-12-05&#x27;);<br>insert into store_info values(&#x27;Houston&#x27;,&#x27;250&#x27;,&#x27;2020-12-07&#x27;);<br>insert into store_info values(&#x27;Los Angeles&#x27;,&#x27;300&#x27;,&#x27;2020-12-08&#x27;);<br>insert into store_info values(&#x27;Boston&#x27;,&#x27;700&#x27;,&#x27;2020-12-08&#x27;);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e5609253fe3416786ed5325105ac649~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=997&h=755&s=143363&e=png&b=000000" alt="f1.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">UPDATE store_info SET store_name=&#x27;Washington&#x27; WHERE sales=300;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3727c944b7684b2f871c851846c19e44~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=762&h=375&s=70433&e=png&b=000000" alt="f2.png"></p>
<p><strong>inner join(内连接)：只返回两个表中联结字段相等的行</strong></p>
<p><strong>left join(左连接)：返回包括左表中的所有记录和右表中联结字段相等的记录</strong></p>
<p><strong>right join(右连接)：返回包括右表中的所有记录和左表中联结字段相等的记录</strong></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d9906d97ee6d49ffa900f8b130eb3ec5~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1253&h=889&s=637487&e=png&b=fdfdfd" alt="f3.png"></p>
<h3 id="8-1-内连接"><a href="#8-1-内连接" class="headerlink" title="8.1 内连接"></a>8.1 内连接</h3><p>MySQL 中的内连接就是两张或多张表中同时符合某种条件的数据记录的组合。通常在 FROM 子句中使用<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%85%B3%E9%94%AE%E5%AD%97&spm=1001.2101.3001.7020" title="https://so.csdn.net/so/search?q=%E5%85%B3%E9%94%AE%E5%AD%97&amp;spm=1001.2101.3001.7020">关键字</a> INNER JOIN 来连接多张表，并使用 ON 子句设置连接条件，内连接是系统默认的表连接，所以在 FROM 子句后可以省略 INNER 关键字，只使用 关键字 JOIN。同时有多个表时，也可以连续使用 INNER JOIN 来实现多表的内连接，不过为了更好的性能，建议最好不要超过三个表</p>
<p>(1) 语法 求交集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT column_name(s)FROM table1 INNER JOIN table2 ON table1.column_name = table2.column_name;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM location A INNER JOIN store_info B on A.Store_Name = B.Store_Name ;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b7edcd7336b43c1a1a1fc733c89f8c7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=995&h=238&s=62152&e=png&b=000000" alt="f4.png"></p>
<p><strong>内连查询：通过 inner join 的方式将两张表指定的相同字段的记录行输出出来</strong></p>
<h3 id="8-2-左连接"><a href="#8-2-左连接" class="headerlink" title="8.2 左连接"></a>8.2 左连接</h3><p>左连接也可以被称为左外连接，在 FROM 子句中使用 LEFT JOIN 或者 LEFT OUTER JOIN 关键字来表示。左连接以左侧表为基础表，接收左表的所有行，并用这些行与右侧参 考表中的记录进行匹配，也就是说匹配左表中的所有行以及右表中符合条件的行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM location A LEFT JOIN store_info B on A.Store_Name = B.Store_Name ;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18287834da5d4e55878285af7ded9e43~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=962&h=275&s=64337&e=png&b=000000" alt="f5.png"></p>
<p><strong>左连接中左表的记录将会全部表示出来，而右表只会显示符合搜索条件的记录，右表记录不足的地方均为 NULL</strong></p>
<h3 id="8-3-右连接"><a href="#8-3-右连接" class="headerlink" title="8.3 右连接"></a>8.3 右连接</h3><p>右连接也被称为右外连接，在 FROM 子句中使用 RIGHT JOIN 或者 RIGHT OUTER JOIN 关键字来表示。右连接跟左连接正好相反，它是以右表为基础表，用于接收右表中的所有行，并用这些记录与左表中的行进行匹配</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM location A RIGHT JOIN store_info B on A.Store_Name = B.Store_Name ;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f27393508d2c4b7dbc758d1efc2818a1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1040&h=238&s=59853&e=png&b=000000" alt="f6.png"></p>
<h2 id="9-UNION-—-联集"><a href="#9-UNION-—-联集" class="headerlink" title="9. UNION —-联集"></a>9. UNION —-联集</h2><p><strong>将两个 SQL 语句的结果合并起来，两个 SQL 语句所产生的字段需要是同样的数据记录种类</strong></p>
<p><strong>UNION ：生成结果的数据记录值将没有重复，且按照字段的顺序进行排序</strong></p>
<p><strong>语法：[SELECT 语句 1] UNION [SELECT 语句 2];</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name FROM location UNION SELECT Store_Name FROM store_info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e01814bb9d0e48c19fd96bbb871a3bce~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=938&h=263&s=37382&e=png&b=000000" alt="f7.png"></p>
<p><strong>UNION ALL ：将生成结果的数据记录值都列出来，无论有无重复</strong></p>
<p><strong>语法：<code>[SELECT 语句 1] UNION ALL [SELECT 语句 2];</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name FROM location UNION ALL SELECT Store_Name FROM store_info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a2a0f0f542ae46cf83b8fcc0f61ec7c2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=889&h=494&s=54684&e=png&b=000000" alt="f8.png"></p>
<h3 id="9-1-交集值"><a href="#9-1-交集值" class="headerlink" title="9.1 交集值"></a>9.1 交集值</h3><p><strong>取两个 SQL 语句结果的交集</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT A.Store_Name FROM location A INNER JOIN store_info B ON A.Store_Name = B.Store_Name;<br><br>SELECT A.Store_Name FROM location A INNER JOIN store_info B USING(Store_Name);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e92484387fbe42d2b1d233e2aac8789d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=916&h=393&s=49904&e=png&b=000000" alt="f9.png"></p>
<p><strong>取两个 SQL 语句结果的交集，且没有重复</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT A.Store_Name FROM location A INNER JOIN store_info B USING(Store_Name);<br><br>SELECT DISTINCT Store_Name FROM location WHERE (Store_Name) IN (SELECT Store_Name FROM store_info);<br><br>SELECT DISTINCT A.Store_Name FROM location A LEFT JOIN store_info B USING(Store_Name) WHERE B.Store_Name IS NOT NULL;<br><br>SELECT A.Store_Name FROM (SELECT B.Store_Name FROM location B INNER JOIN store_info C ON B.Store_Name = C.Store_Name) A<br>GROUP BY A.Store_Name;<br><br>SELECT A.Store_Name FROM<br>(SELECT DISTINCT Store_Name FROM location UNION ALL SELECT DISTINCT Store_Name FROM store_info) A<br>GROUP BY A.Store_Name HAVING COUNT(*) &gt; 1;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8e33284077b941e596ca61ae0e66870d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1074&h=542&s=79067&e=png&b=000000" alt="f10.png"></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0616d02dc334794ae1aebfbb12c48d0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1101&h=446&s=65908&e=png&b=000000" alt="f11.png"></p>
<h3 id="9-2-无交集值"><a href="#9-2-无交集值" class="headerlink" title="9.2 无交集值"></a>9.2 无交集值</h3><p><strong>显示第一个 SQL 语句的结果，且与第二个 SQL 语句没有交集的结果，且没有重复</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT DISTINCT Store_Name FROM location WHERE (Store_Name) NOT IN (SELECT Store_Name FROM store_info);<br><br>SELECT DISTINCT A.Store_Name FROM location A LEFT JOIN store_info B USING(Store_Name) WHERE B.Store_Name IS NULL;<br><br>SELECT A.Store_Name FROM<br>(SELECT DISTINCT Store_Name FROM location UNION ALL SELECT DISTINCT Store_Name FROM store_info) A<br>GROUP BY A.Store_Name HAVING COUNT(*) = 1;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ee0f590f7434fd6948dd8eae1250b1e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1071&h=521&s=81845&e=png&b=000000" alt="f12.png"></p>
<h2 id="10-case"><a href="#10-case" class="headerlink" title="10. case"></a>10. case</h2><p>是 SQL 用来做为 IF-THEN-ELSE 之类逻辑的关键字</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT CASE (&quot;字段名&quot;)<br>  WHEN &quot;条件1&quot; THEN &quot;结果1&quot;<br>  WHEN &quot;条件2&quot; THEN &quot;结果2&quot;<br>  ...<br>  [ELSE &quot;结果N&quot;]<br>  END<br>FROM &quot;表名&quot;;<br></code></pre></td></tr></table></figure>

<p>“条件” 可以是一个数值或是公式。 ELSE 子句则并不是必须的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT Store_Name, CASE Store_Name<br>  WHEN &#x27;Los Angeles&#x27; THEN Sales * 2<br>  WHEN &#x27;Boston&#x27; THEN 2000<br>  ELSE Sales<br>  END<br>&quot;New Sales&quot;,Date<br>FROM store_info;<br><br>#&quot;New Sales&quot; 是用于 CASE 那个字段的字段名。<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30689bb8636e4db497fdc1a6c799d078~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=858&h=481&s=94659&e=png&b=000000" alt="f13.png"></p>
<h2 id="11-正则表达式"><a href="#11-正则表达式" class="headerlink" title="11. 正则表达式"></a>11. 正则表达式</h2><table>
<thead>
<tr>
<th>匹配模式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>匹配文本的开始位置</td>
<td>‘^bd’ 匹配以 bd 开头的字符串</td>
</tr>
<tr>
<td>$</td>
<td>匹配文本的结束位置</td>
<td>‘qn$’ 匹配以 qn 结尾的字符串</td>
</tr>
<tr>
<td>.</td>
<td>匹配任何单个字符</td>
<td>‘s.t’ 匹配任何 s 和 t 之间有一个字符的字符串</td>
</tr>
<tr>
<td>*</td>
<td>匹配零个或多个在它前面的字符</td>
<td>‘fo*t’ 匹配 t 前面有任意个 o</td>
</tr>
<tr>
<td>+</td>
<td>匹配前面的字符 1 次或多次</td>
<td>‘hom+’ 匹配以 ho 开头，后面至少一个 m 的字符串</td>
</tr>
<tr>
<td>字符串</td>
<td>匹配包含指定的字符串</td>
<td>‘clo’ 匹配含有 clo 的字符串</td>
</tr>
<tr>
<td>p1</td>
<td>p2</td>
<td>匹配 p1 或 p2</td>
</tr>
<tr>
<td>[…]</td>
<td>匹配字符集合中的任意一个字符</td>
<td>‘[abc]’ 匹配 a 或者 b 或者 c</td>
</tr>
<tr>
<td>[^…]</td>
<td>匹配不在括号中的任何字符</td>
<td>‘[^ab]’ 匹配不包含 a 或者 b 的字符串</td>
</tr>
<tr>
<td>{n}</td>
<td>匹配前面的字符串 n 次</td>
<td>‘g{2}’ 匹配含有 2 个 g 的字符串</td>
</tr>
<tr>
<td>{n,m}</td>
<td>匹配前面的字符串至少 n 次，至多 m 次</td>
<td>‘f{1,3}’ 匹配 f 最少 1 次，最多 3 次</td>
</tr>
</tbody></table>
<p><strong>语法：SELECT “字段” FROM “表名” WHERE “字段” REGEXP {模式};</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;os&#x27;;<br>SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;^[A-G]&#x27;;<br>SELECT * FROM store_info WHERE Store_Name REGEXP &#x27;Ho|Bo&#x27;;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6daed6d73204a1ba92121e28f29416d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=834&h=536&s=81712&e=png&b=000000" alt="f14.png"></p>
<h2 id="12-存储过程"><a href="#12-存储过程" class="headerlink" title="12. 存储过程"></a>12. 存储过程</h2><p>存储过程是一组为了完成特定功能的 SQL 语句集合。</p>
<p>存储过程在使用过程中是将常用或者复杂的工作预先使用 SQL 语句写好并用一个指定的名称存储起来，这个过程经编译和优化后存储在数据库服务器中。当需要使用该存储过程时，只需要调用它即可。存储过程在执行上比传统 SQL 速度更快、执行效率更高。</p>
<p><strong>存储过程的优点</strong>：</p>
<p>1、执行一次后，会将生成的二进制代码驻留缓冲区，提高执行效率</p>
<p>2、SQL 语句加上控制语句的集合，灵活性高</p>
<p>3、在服务器端存储，客户端调用时，降低网络负载</p>
<p>4、可多次重复被调用，可随时修改，不影响客户端调用</p>
<p>5、可完成所有的数据库操作，也可控制数据库的信息访问权限</p>
<h3 id="12-1-创建存储过程"><a href="#12-1-创建存储过程" class="headerlink" title="12.1 创建存储过程"></a>12.1 创建存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELIMITER $$              #将语句的结束符号从分号;临时改为两个$$(可以是自定义)<br>CREATE PROCEDURE Proc()          #创建存储过程，过程名为Proc，不带参数<br>-&gt; BEGIN                #过程体以关键字 BEGIN 开始<br>-&gt; select * from Store_Info;      #过程体语句<br>-&gt; END $$                #过程体以关键字 END 结束<br>DELIMITER ;                #将语句的结束符号恢复为分号<br></code></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELIMITER $$              #将语句的结束符号从分号;临时改为两个$$(可以自定义)<br>CREATE PROCEDURE Proc5()        #创建存储过程，过程名为Proc5，不带参数<br>-&gt; BEGIN                #过程体以关键字 BEGIN 开始<br>-&gt; create table user (id int (10), name char(10),score int (10));<br>-&gt; insert into user values (1, &#x27;cyw&#x27;,70);<br>-&gt; select * from cyw;              #过程体语句<br>-&gt; END $$                #过程体以关键字 END 结束<br>DELIMITER ;                #将语句的结束符号恢复为分号<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e747500364334921b29532af7be9531d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=898&h=273&s=47327&e=png&b=000000" alt="f15.png"></p>
<h3 id="12-2-调用存储过程"><a href="#12-2-调用存储过程" class="headerlink" title="12.2 调用存储过程"></a>12.2 调用存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CALL Proc;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c51f2c8610b7484893cb84f8a001338e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=884&h=343&s=44218&e=png&b=000000" alt="f16.png"></p>
<h3 id="12-3-查看存储过程"><a href="#12-3-查看存储过程" class="headerlink" title="12.3 查看存储过程"></a>12.3 查看存储过程</h3><p><strong>SHOW CREATE PROCEDURE [数据库.]存储过程名; #查看某个存储过程的具体信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SHOW CREATE PROCEDURE Proc;<br><br>SHOW PROCEDURE STATUS [LIKE &#x27;%Proc%&#x27;] \G<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57e14cd8b7a44a5da9983e729ed9ee4a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1130&h=491&s=99736&e=png&b=000000" alt="f17.png"></p>
<h3 id="12-4-存储过程的参数"><a href="#12-4-存储过程的参数" class="headerlink" title="12.4 存储过程的参数"></a>12.4 存储过程的参数</h3><p>**IN 输入参数：**表示调用者向过程传入值（传入值可以是字面量或变量）</p>
<p>**OUT 输出参数：**表示过程向调用者传出值(可以返回多个值)（传出值只能是变量）</p>
<p>**INOUT 输入输出参数：**既表示调用者向过程传入值，又表示过程向调用者传出值（值只能是变量）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DELIMITER $$<br>CREATE PROCEDURE Proc6(IN inname CHAR(16))<br>-&gt; BEGIN<br>-&gt; SELECT * FROM store_info WHERE Store_Name = inname;<br>-&gt; END $$<br>DELIMITER ;<br><br>CALL Proc6(&#x27;Boston&#x27;);<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84c7323382e545b68d36dd6caca7a6d9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=915&h=437&s=54914&e=png&b=000000" alt="f18.png"></p>
<h3 id="12-5-修改存储过程"><a href="#12-5-修改存储过程" class="headerlink" title="12.5 修改存储过程"></a>12.5 修改存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER PROCEDURE &lt;过程名&gt;[&lt;特征&gt;... ]<br>ALTER PROCEDURE GetRole MODIFIES SQL DATA SQL SECURITY INVOKER;<br>MODIFIES sQLDATA:表明子程序包含写数据的语句<br>SECURITY:安全等级<br>invoker:当定义为INVOKER时，只要执行者有执行权限，就可以成功执行。<br></code></pre></td></tr></table></figure>

<h3 id="12-6-删除存储过程"><a href="#12-6-删除存储过程" class="headerlink" title="12.6 删除存储过程"></a>12.6 删除存储过程</h3><p>存储过程内容的修改方法是通过删除原有存储过程，之后再以相同的名称创建新的存储过程。如果要修改存储过程的名称，可以先删除原存储过程，再以不同的命名创建新的存储过程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP PROCEDURE IF EXISTS Proc;<br>#仅当存在时删除，不添加 IF EXISTS 时，如果指定的过程不存在，则产生一个错误<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4d244861a72482aaedb437583764bce~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=956&h=235&s=43807&e=png&b=000000" alt="f19.png"></p>
<h2 id="13-条件语句"><a href="#13-条件语句" class="headerlink" title="13. 条件语句"></a>13. 条件语句</h2><p><strong>if-then-else ···· end if</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; delimiter $$<br>mysql&gt;<br>mysql&gt; CREATE PROCEDURE proc8(IN pro int)<br>    -&gt;<br>    -&gt; begin<br>    -&gt;<br>    -&gt; declare var int;<br>    -&gt; set var=pro*2;<br>    -&gt; if var&gt;=10 then<br>    -&gt; update t set id=id+1;<br>    -&gt; else<br>    -&gt; update t set id=id-1;<br>    -&gt; end if;<br>    -&gt; end $$<br><br>mysql&gt; delimiter ;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fead3cca2bf240d9ab40b3edc6f50969~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=934&h=423&s=71688&e=png&b=000000" alt="f20.png"></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5643f34b44e94d3796895589e873291c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=930&h=636&s=71120&e=png&b=000000" alt="f21.png"></p>
<h2 id="14-循环语句"><a href="#14-循环语句" class="headerlink" title="14. 循环语句"></a>14. 循环语句</h2><p><strong>while ···· end while</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mysql">mysql&gt; delimiter $$<br>mysql&gt;<br>mysql&gt; create procedure proc9()<br>    -&gt; begin<br>    -&gt; declare var int(10);<br>    -&gt; set var=0;<br>    -&gt; while var&lt;6 do<br>    -&gt; insert into t values(var);<br>    -&gt; set var=var+1;<br>    -&gt; end while;<br>    -&gt; end $$<br><br>mysql&gt; delimiter ;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/09bf835570d0495b91e2e90e7cfc49b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=996&h=532&s=50757&e=png&b=000000" alt="f22.png"></p>
<h2 id="15-视图表-create-view"><a href="#15-视图表-create-view" class="headerlink" title="15. 视图表 create view"></a>15. 视图表 create view</h2><h3 id="15-1-视图表概述"><a href="#15-1-视图表概述" class="headerlink" title="15.1 视图表概述"></a>15.1 视图表概述</h3><p>视图，可以被当作是虚拟表或存储查询。</p>
<p>视图跟表格的不同是，表格中有实际储存数据记录，而视图是建立在表格之上的一个架构，它本身并不实际储存数据记录。</p>
<p>临时表在用户退出或同数据库的连接断开后就自动消失了，而视图不会消失。 视图不含有数据，只存储它的定义，它的用途一般可以简化复杂的查询。</p>
<p>比如你要对几个表进行连接查询，而且还要进行统计排序等操作，写 sql 语句会很麻烦的，用视图将几个表联结起来，然后对这个视图进行查询操作，就和对一个表查询一样，很方便。</p>
<h3 id="15-2-视图表能否修改？"><a href="#15-2-视图表能否修改？" class="headerlink" title="15.2 视图表能否修改？"></a>15.2 视图表能否修改？</h3><p>首先我们需要知道，视图表保存的是 select 语句的定义，所以视图表可不可以修改需要视情况而定。</p>
<ul>
<li>如果 select 语句查询的字段是没有被处理过的源表字段，则<strong>可以</strong>通过视图表修改源表数据；</li>
<li>如果 select 语句查询的字段是被 group by 语句或 函数 处理过的字段，则<strong>不可以</strong>直接修改视图表的数据。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view v_store_info as select store_name,sales from store_info;<br><br>update v_store_info set sales=1000 where store_name=&#x27;Houston&#x27;;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/037f42f6a7a8467a839d6d88d1483856~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1056&h=707&s=194873&e=png&b=1c1c1c" alt="f23.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view v_sales as select store_name,sum(sales) from store_info group by store_name having sum(sales)&gt;1000;<br><br>update v_sales set store_name=&#x27;xxxx&#x27; where store_name=&#x27;Los Angeles&#x27;;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2107e2a9a7745c6910e3ab6f471ad92~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=957&h=265&s=61994&e=png&b=1c1c1c" alt="f24.png"></p>
<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bb4949d0c424409bf07255cb8b4d687~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=963&h=127&s=55151&e=png&b=1c1c1c" alt="f25.png"></p>
<h3 id="15-3-基本语法"><a href="#15-3-基本语法" class="headerlink" title="15.3 基本语法"></a>15.3 基本语法</h3><h4 id="15-3-1-创建视图表"><a href="#15-3-1-创建视图表" class="headerlink" title="15.3.1 创建视图表"></a>15.3.1 创建视图表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法<br>create view &quot;视图表名&quot; as &quot;select 语句&quot;;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view v_region_sales as select a.region region,sum(b.sales) sales from location a<br>inner join store_info b on a.store_name = b.store_name group by region;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a2444a7711334a06b56f2ddaff16b34b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1051&h=471&s=86108&e=png&b=1c1c1c" alt="f26.png"></p>
<h4 id="15-4-查看视图表"><a href="#15-4-查看视图表" class="headerlink" title="15.4 查看视图表"></a>15.4 查看视图表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法<br>select * from 视图表名;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">select * from v_region_sales;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac655c2a283a426a80e9de66a5695426~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=824&h=324&s=59787&e=png&b=1c1c1c" alt="f27.png"></p>
<h4 id="15-5-删除视图表"><a href="#15-5-删除视图表" class="headerlink" title="15.5 删除视图表"></a>15.5 删除视图表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">语法<br>drop view 视图表名;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">drop view v_region_sales;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f0f68b89f254717891fd56212579512~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=950&h=696&s=99100&e=png&b=1c1c1c" alt="f28.png"></p>
<h4 id="15-6-通过视图表求无交集值"><a href="#15-6-通过视图表求无交集值" class="headerlink" title="15.6 通过视图表求无交集值"></a>15.6 通过视图表求无交集值</h4><p>将两个表中某个字段的不重复值进行合并</p>
<p>只出现一次（count &#x3D;1 ） ，即无交集</p>
<p>通过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create view 视图表名 as select distinct 字段 from 左表 union all select distinct 字段 from 右表;<br><br>select 字段 from 视图表名 group by 字段 having count(字段)=1;<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#先建立视图表<br>create viem v_union as select distinct store_name from location union all select distinct store_name from store_info;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62ab552897194856aaad5c66716e41f4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1040&h=340&s=58202&e=png&b=1c1c1c" alt="f29.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#再通过视图表求无交集<br>select store_name from v_union group by store_name having count(*)=1;<br></code></pre></td></tr></table></figure>

<p><img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45501292a60f4ec2b1dccf4d0151e223~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1017&h=235&s=63354&e=png&b=1c1c1c" alt="f30.png"></p>

<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>许可协议</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    
    <section id="share">
      <div class="header"><span>分享文章</span></div>
      <div class="body">
        <div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://panzhenjie.fun/2024/03/01/MySQL%E9%AB%98%E7%BA%A7SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6/" /></div>
        <div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img referrerpolicy="no-referrer" class="lazy"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/b32ef3da1162a.svg" /></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://panzhenjie.fun/2024/03/01/MySQL%E9%AB%98%E7%BA%A7SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6/&title=MySQL高级SQL语句进阶 - JKK随笔&summary=MySQL 高级（进阶）SQL 语句
原文地址MySQL 高级（进阶）SQL 语句 - 掘金

1. MySQL SQL 语句1.1 常用查询常用查询简单来说就是 增、删、改、查
对 MySQL 数据库的查询，除了基本的查询外，有时候..."><img referrerpolicy="no-referrer" class="lazy"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/80c07e4dbb303.svg" /></a><a class="social share-item email" href="mailto:?subject=MySQL高级SQL语句进阶 - JKK随笔&amp;body=https://panzhenjie.fun/2024/03/01/MySQL%E9%AB%98%E7%BA%A7SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6/"><img referrerpolicy="no-referrer" class="lazy"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/a1b00e20f425d.svg" /></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;复制成功&quot;)"><img referrerpolicy="no-referrer" class="lazy"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/8411ed322ced6.svg" /></a></div>
        
        <div class="qrcode" id="qrcode-wechat" style="opacity:0;height:0">
          <img referrerpolicy="no-referrer" class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://panzhenjie.fun/2024/03/01/MySQL%E9%AB%98%E7%BA%A7SQL%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6/"/>
        </div>
        
      </div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/2024/03/01/SQL%E6%A6%82%E5%BF%B5%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">SQL概念及数据库表的基本操作</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/2024/03/01/PHP%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/">PHP基础知识总结</a></div></section></div>

<div class="related-wrap" id="related-posts">
    <section class='header'>
      <div class='title cap theme'>您可能感兴趣的文章</div>
    </section>
    <section class='body'>
    <div class="related-posts"><a class="item" href="\2024\12\10\SQL基础入门\" title="SQL基础入门"><span class="title">SQL基础入门</span></a><a class="item" href="\2024\03\01\SQL概念及数据库表的基本操作\" title="SQL概念及数据库表的基本操作"><span class="title">SQL概念及数据库表的基本操作</span></a><a class="item" href="\2024\02\26\SQL零基础入门图文教程\" title="SQL零基础入门图文教程"><span class="title">SQL零基础入门图文教程</span></a></div></section></div>


  <div class="related-wrap md-text" id="comments">
    <section class='header cmt-title cap theme'>
      <p>快来参与讨论吧~</p>

    </section>
    <section class='body cmt-body utterances'>
      

<svg class="loading" style="vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="utterances" repo="stephenykk/discussion" issue-term="pathname" theme="preferred-color-scheme"></div>

    </section>
  </div>



<footer class="page-footer footnote"><hr><div class="text"><p>本站由 <a href="/">stephenykk</a> 使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.27.0">Stellar 1.27.0</a> 主题创建。<br>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E9%AB%98%E7%BA%A7%EF%BC%88%E8%BF%9B%E9%98%B6%EF%BC%89SQL-%E8%AF%AD%E5%8F%A5"><span class="toc-text">MySQL 高级（进阶）SQL 语句</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-MySQL-SQL-%E8%AF%AD%E5%8F%A5"><span class="toc-text">1. MySQL SQL 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%B8%B8%E7%94%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.1 常用查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-SELECT"><span class="toc-text">1.2 SELECT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-DISTINCT"><span class="toc-text">1.3 DISTINCT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-AND-OR"><span class="toc-text">1.4 AND OR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-in"><span class="toc-text">1.5 in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-BETWEEN"><span class="toc-text">1.6 BETWEEN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-text">2. 通配符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-LIKE"><span class="toc-text">2.1 LIKE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-ORDER-BY"><span class="toc-text">2.2 ORDER BY</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%87%BD%E6%95%B0"><span class="toc-text">3. 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-text">3.1 数学函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">3.2 聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">3.3 字符串函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-GROUP-BY"><span class="toc-text">4. GROUP BY</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%AB%E5%90%8D"><span class="toc-text">5. 别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">6. 子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-EXISTS"><span class="toc-text">7. EXISTS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">8. 连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-text">8.1 内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%B7%A6%E8%BF%9E%E6%8E%A5"><span class="toc-text">8.2 左连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="toc-text">8.3 右连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-UNION-%E2%80%94-%E8%81%94%E9%9B%86"><span class="toc-text">9. UNION —-联集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E4%BA%A4%E9%9B%86%E5%80%BC"><span class="toc-text">9.1 交集值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E6%97%A0%E4%BA%A4%E9%9B%86%E5%80%BC"><span class="toc-text">9.2 无交集值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-case"><span class="toc-text">10. case</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">11. 正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12. 存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12.1 创建存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12.2 调用存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12.3 查看存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">12.4 存储过程的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12.5 修改存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">12.6 删除存储过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-text">13. 条件语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-text">14. 循环语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E8%A7%86%E5%9B%BE%E8%A1%A8-create-view"><span class="toc-text">15. 视图表 create view</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-%E8%A7%86%E5%9B%BE%E8%A1%A8%E6%A6%82%E8%BF%B0"><span class="toc-text">15.1 视图表概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-%E8%A7%86%E5%9B%BE%E8%A1%A8%E8%83%BD%E5%90%A6%E4%BF%AE%E6%94%B9%EF%BC%9F"><span class="toc-text">15.2 视图表能否修改？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">15.3 基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-3-1-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E8%A1%A8"><span class="toc-text">15.3.1 创建视图表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-4-%E6%9F%A5%E7%9C%8B%E8%A7%86%E5%9B%BE%E8%A1%A8"><span class="toc-text">15.4 查看视图表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-5-%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE%E8%A1%A8"><span class="toc-text">15.5 删除视图表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-6-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E8%A1%A8%E6%B1%82%E6%97%A0%E4%BA%A4%E9%9B%86%E5%80%BC"><span class="toc-text">15.6 通过视图表求无交集值</span></a></li></ol></li></ol></li></ol></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js`,
    marked: `https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>

<!-- required -->
<script src="/js/main.js?v=1.27.0" async></script>

<!-- optional -->

  <script>
  function loadUtterances() {
    const els = document.querySelectorAll("#comments #utterances");
    if (els.length === 0) return;
    els.forEach((el, i) => {
      try {
        el.innerHTML = '';
      } catch (error) {
        console.error(error);
      }
      var script = document.createElement('script');
      script.src = 'https://utteranc.es/client.js';
      script.async = true;
      for (let key of Object.keys(el.attributes)) {
        let attr = el.attributes[key];
        if (['class', 'id'].includes(attr.name) === false) {
          script.setAttribute(attr.name, attr.value);
        }
      }
      el.appendChild(script);
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
      loadUtterances();
  });
</script>




<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?02fb88f7bf299c2e9c095c0f64f432d8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.bootcdn.net/ajax/libs/flying-pages/2.1.2/flying-pages.min.js"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.4/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.min.css`,
    js: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.umd.min.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || null
        }
      });
    })
  }
</script><script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          loop: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script><script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
